!function(j,jt){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=j.document?jt(j,!0):function(on){if(!on.document)throw new Error("jQuery requires a window with a document");return jt(on)}:jt(j)}(typeof window<"u"?window:this,function(j,jt){"use strict";var on=[],En=Object.getPrototypeOf,an=on.slice,Tn=on.flat?function(h){return on.flat.call(h)}:function(h){return on.concat.apply([],h)},at=on.push,De=on.indexOf,Ct={},vn=Ct.toString,wn=Ct.hasOwnProperty,H=wn.toString,U=H.call(Object),I={},ae=function(h){return"function"==typeof h&&"number"!=typeof h.nodeType&&"function"!=typeof h.item},u=function(h){return null!=h&&h===h.window},k=j.document,g={type:!0,src:!0,nonce:!0,noModule:!0};function x(h,_,E){var A,B,$=(E=E||k).createElement("script");if($.text=h,_)for(A in g)(B=_[A]||_.getAttribute&&_.getAttribute(A))&&$.setAttribute(A,B);E.head.appendChild($).parentNode.removeChild($)}function C(h){return null==h?h+"":"object"==typeof h||"function"==typeof h?Ct[vn.call(h)]||"object":typeof h}var N="3.7.1",D=/HTML$/i,m=function(h,_){return new m.fn.init(h,_)};function q(h){var _=!!h&&"length"in h&&h.length,E=C(h);return!ae(h)&&!u(h)&&("array"===E||0===_||"number"==typeof _&&0<_&&_-1 in h)}function F(h,_){return h.nodeName&&h.nodeName.toLowerCase()===_.toLowerCase()}m.fn=m.prototype={jquery:N,constructor:m,length:0,toArray:function(){return an.call(this)},get:function(h){return null==h?an.call(this):h<0?this[h+this.length]:this[h]},pushStack:function(h){var _=m.merge(this.constructor(),h);return _.prevObject=this,_},each:function(h){return m.each(this,h)},map:function(h){return this.pushStack(m.map(this,function(_,E){return h.call(_,E,_)}))},slice:function(){return this.pushStack(an.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(m.grep(this,function(h,_){return(_+1)%2}))},odd:function(){return this.pushStack(m.grep(this,function(h,_){return _%2}))},eq:function(h){var _=this.length,E=+h+(h<0?_:0);return this.pushStack(0<=E&&E<_?[this[E]]:[])},end:function(){return this.prevObject||this.constructor()},push:at,sort:on.sort,splice:on.splice},m.extend=m.fn.extend=function(){var h,_,E,A,B,$,V=arguments[0]||{},le=1,se=arguments.length,ve=!1;for("boolean"==typeof V&&(ve=V,V=arguments[le]||{},le++),"object"==typeof V||ae(V)||(V={}),le===se&&(V=this,le--);le<se;le++)if(null!=(h=arguments[le]))for(_ in h)A=h[_],"__proto__"!==_&&V!==A&&(ve&&A&&(m.isPlainObject(A)||(B=Array.isArray(A)))?(E=V[_],$=B&&!Array.isArray(E)?[]:B||m.isPlainObject(E)?E:{},B=!1,V[_]=m.extend(ve,$,A)):void 0!==A&&(V[_]=A));return V},m.extend({expando:"jQuery"+(N+Math.random()).replace(/\D/g,""),isReady:!0,error:function(h){throw new Error(h)},noop:function(){},isPlainObject:function(h){var _,E;return!(!h||"[object Object]"!==vn.call(h)||(_=En(h))&&("function"!=typeof(E=wn.call(_,"constructor")&&_.constructor)||H.call(E)!==U))},isEmptyObject:function(h){var _;for(_ in h)return!1;return!0},globalEval:function(h,_,E){x(h,{nonce:_&&_.nonce},E)},each:function(h,_){var E,A=0;if(q(h))for(E=h.length;A<E&&!1!==_.call(h[A],A,h[A]);A++);else for(A in h)if(!1===_.call(h[A],A,h[A]))break;return h},text:function(h){var _,E="",A=0,B=h.nodeType;if(!B)for(;_=h[A++];)E+=m.text(_);return 1===B||11===B?h.textContent:9===B?h.documentElement.textContent:3===B||4===B?h.nodeValue:E},makeArray:function(h,_){var E=_||[];return null!=h&&(q(Object(h))?m.merge(E,"string"==typeof h?[h]:h):at.call(E,h)),E},inArray:function(h,_,E){return null==_?-1:De.call(_,h,E)},isXMLDoc:function(h){var E=h&&(h.ownerDocument||h).documentElement;return!D.test(h&&h.namespaceURI||E&&E.nodeName||"HTML")},merge:function(h,_){for(var E=+_.length,A=0,B=h.length;A<E;A++)h[B++]=_[A];return h.length=B,h},grep:function(h,_,E){for(var A=[],B=0,$=h.length,V=!E;B<$;B++)!_(h[B],B)!==V&&A.push(h[B]);return A},map:function(h,_,E){var A,B,$=0,V=[];if(q(h))for(A=h.length;$<A;$++)null!=(B=_(h[$],$,E))&&V.push(B);else for($ in h)null!=(B=_(h[$],$,E))&&V.push(B);return Tn(V)},guid:1,support:I}),"function"==typeof Symbol&&(m.fn[Symbol.iterator]=on[Symbol.iterator]),m.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(h,_){Ct["[object "+_+"]"]=_.toLowerCase()});var L=on.pop,re=on.sort,G=on.splice,K="[\\x20\\t\\r\\n\\f]",we=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g");m.contains=function(h,_){var E=_&&_.parentNode;return h===E||!(!E||1!==E.nodeType||!(h.contains?h.contains(E):h.compareDocumentPosition&&16&h.compareDocumentPosition(E)))};var ge=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function St(h,_){return _?"\0"===h?"\ufffd":h.slice(0,-1)+"\\"+h.charCodeAt(h.length-1).toString(16)+" ":"\\"+h}m.escapeSelector=function(h){return(h+"").replace(ge,St)};var l=k,vt=at;!function(){var h,_,E,A,B,$,V,le,se,ve,Se=vt,Pe=m.expando,be=0,je=0,wt=zn(),X=zn(),Mt=zn(),Ln=zn(),cn=function(J,he){return J===he&&(B=!0),0},Ur="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Lt="(?:\\\\[\\da-fA-F]{1,6}"+K+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Ht="\\["+K+"*("+Lt+")(?:"+K+"*([*^$|!~]?=)"+K+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Lt+"))|)"+K+"*\\]",Ho=":("+Lt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Ht+")*)|.*)\\)|)",Ut=new RegExp(K+"+","g"),_n=new RegExp("^"+K+"*,"+K+"*"),ur=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),ki=new RegExp(K+"|>"),Wr=new RegExp(Ho),Vr=new RegExp("^"+Lt+"$"),Rr={ID:new RegExp("^#("+Lt+")"),CLASS:new RegExp("^\\.("+Lt+")"),TAG:new RegExp("^("+Lt+"|[*])"),ATTR:new RegExp("^"+Ht),PSEUDO:new RegExp("^"+Ho),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+Ur+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},Ao=/^(?:input|select|textarea|button)$/i,si=/^h\d$/i,rn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Rn=/[+~]/,Bn=new RegExp("\\\\[\\da-fA-F]{1,6}"+K+"?|\\\\([^\\r\\n\\f])","g"),ir=function(J,he){var Ee="0x"+J.slice(1)-65536;return he||(Ee<0?String.fromCharCode(Ee+65536):String.fromCharCode(Ee>>10|55296,1023&Ee|56320))},vo=function(){hr()},sr=Wo(function(J){return!0===J.disabled&&F(J,"fieldset")},{dir:"parentNode",next:"legend"});try{Se.apply(on=an.call(l.childNodes),l.childNodes)}catch{Se={apply:function(he,Ee){vt.apply(he,an.call(Ee))},call:function(he){vt.apply(he,an.call(arguments,1))}}}function Nt(J,he,Ee,Re){var Ie,ht,Qe,pt,ct,Et,zt,Bt=he&&he.ownerDocument,Vt=he?he.nodeType:9;if(Ee=Ee||[],"string"!=typeof J||!J||1!==Vt&&9!==Vt&&11!==Vt)return Ee;if(!Re&&(hr(he),he=he||$,le)){if(11!==Vt&&(ct=rn.exec(J)))if(Ie=ct[1]){if(9===Vt){if(!(Qe=he.getElementById(Ie)))return Ee;if(Qe.id===Ie)return Se.call(Ee,Qe),Ee}else if(Bt&&(Qe=Bt.getElementById(Ie))&&Nt.contains(he,Qe)&&Qe.id===Ie)return Se.call(Ee,Qe),Ee}else{if(ct[2])return Se.apply(Ee,he.getElementsByTagName(J)),Ee;if((Ie=ct[3])&&he.getElementsByClassName)return Se.apply(Ee,he.getElementsByClassName(Ie)),Ee}if(!(Ln[J+" "]||se&&se.test(J))){if(zt=J,Bt=he,1===Vt&&(ki.test(J)||ur.test(J))){for((Bt=Rn.test(J)&&$s(he.parentNode)||he)==he&&I.scope||((pt=he.getAttribute("id"))?pt=m.escapeSelector(pt):he.setAttribute("id",pt=Pe)),ht=(Et=Si(J)).length;ht--;)Et[ht]=(pt?"#"+pt:":scope")+" "+Uo(Et[ht]);zt=Et.join(",")}try{return Se.apply(Ee,Bt.querySelectorAll(zt)),Ee}catch{Ln(J,!0)}finally{pt===Pe&&he.removeAttribute("id")}}}return Ma(J.replace(we,"$1"),he,Ee,Re)}function zn(){var J=[];return function he(Ee,Re){return J.push(Ee+" ")>_.cacheLength&&delete he[J.shift()],he[Ee+" "]=Re}}function dn(J){return J[Pe]=!0,J}function hn(J){var he=$.createElement("fieldset");try{return!!J(he)}catch{return!1}finally{he.parentNode&&he.parentNode.removeChild(he),he=null}}function _o(J){return function(he){return F(he,"input")&&he.type===J}}function ai(J){return function(he){return(F(he,"input")||F(he,"button"))&&he.type===J}}function Fs(J){return function(he){return"form"in he?he.parentNode&&!1===he.disabled?"label"in he?"label"in he.parentNode?he.parentNode.disabled===J:he.disabled===J:he.isDisabled===J||he.isDisabled!==!J&&sr(he)===J:he.disabled===J:"label"in he&&he.disabled===J}}function Ir(J){return dn(function(he){return he=+he,dn(function(Ee,Re){for(var Ie,ht=J([],Ee.length,he),Qe=ht.length;Qe--;)Ee[Ie=ht[Qe]]&&(Ee[Ie]=!(Re[Ie]=Ee[Ie]))})})}function $s(J){return J&&typeof J.getElementsByTagName<"u"&&J}function hr(J){var he,Ee=J?J.ownerDocument||J:l;return Ee!=$&&9===Ee.nodeType&&Ee.documentElement&&(V=($=Ee).documentElement,le=!m.isXMLDoc($),ve=V.matches||V.webkitMatchesSelector||V.msMatchesSelector,V.msMatchesSelector&&l!=$&&(he=$.defaultView)&&he.top!==he&&he.addEventListener("unload",vo),I.getById=hn(function(Re){return V.appendChild(Re).id=m.expando,!$.getElementsByName||!$.getElementsByName(m.expando).length}),I.disconnectedMatch=hn(function(Re){return ve.call(Re,"*")}),I.scope=hn(function(){return $.querySelectorAll(":scope")}),I.cssHas=hn(function(){try{return $.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),I.getById?(_.filter.ID=function(Re){var Ie=Re.replace(Bn,ir);return function(ht){return ht.getAttribute("id")===Ie}},_.find.ID=function(Re,Ie){if(typeof Ie.getElementById<"u"&&le){var ht=Ie.getElementById(Re);return ht?[ht]:[]}}):(_.filter.ID=function(Re){var Ie=Re.replace(Bn,ir);return function(ht){var Qe=typeof ht.getAttributeNode<"u"&&ht.getAttributeNode("id");return Qe&&Qe.value===Ie}},_.find.ID=function(Re,Ie){if(typeof Ie.getElementById<"u"&&le){var ht,Qe,pt,ct=Ie.getElementById(Re);if(ct){if((ht=ct.getAttributeNode("id"))&&ht.value===Re)return[ct];for(pt=Ie.getElementsByName(Re),Qe=0;ct=pt[Qe++];)if((ht=ct.getAttributeNode("id"))&&ht.value===Re)return[ct]}return[]}}),_.find.TAG=function(Re,Ie){return typeof Ie.getElementsByTagName<"u"?Ie.getElementsByTagName(Re):Ie.querySelectorAll(Re)},_.find.CLASS=function(Re,Ie){if(typeof Ie.getElementsByClassName<"u"&&le)return Ie.getElementsByClassName(Re)},se=[],hn(function(Re){var Ie;V.appendChild(Re).innerHTML="<a id='"+Pe+"' href='' disabled='disabled'></a><select id='"+Pe+"-\r\\' disabled='disabled'><option selected=''></option></select>",Re.querySelectorAll("[selected]").length||se.push("\\["+K+"*(?:value|"+Ur+")"),Re.querySelectorAll("[id~="+Pe+"-]").length||se.push("~="),Re.querySelectorAll("a#"+Pe+"+*").length||se.push(".#.+[+~]"),Re.querySelectorAll(":checked").length||se.push(":checked"),(Ie=$.createElement("input")).setAttribute("type","hidden"),Re.appendChild(Ie).setAttribute("name","D"),V.appendChild(Re).disabled=!0,2!==Re.querySelectorAll(":disabled").length&&se.push(":enabled",":disabled"),(Ie=$.createElement("input")).setAttribute("name",""),Re.appendChild(Ie),Re.querySelectorAll("[name='']").length||se.push("\\["+K+"*name"+K+"*="+K+"*(?:''|\"\")")}),I.cssHas||se.push(":has"),se=se.length&&new RegExp(se.join("|")),cn=function(Re,Ie){if(Re===Ie)return B=!0,0;var ht=!Re.compareDocumentPosition-!Ie.compareDocumentPosition;return ht||(1&(ht=(Re.ownerDocument||Re)==(Ie.ownerDocument||Ie)?Re.compareDocumentPosition(Ie):1)||!I.sortDetached&&Ie.compareDocumentPosition(Re)===ht?Re===$||Re.ownerDocument==l&&Nt.contains(l,Re)?-1:Ie===$||Ie.ownerDocument==l&&Nt.contains(l,Ie)?1:A?De.call(A,Re)-De.call(A,Ie):0:4&ht?-1:1)}),$}for(h in Nt.matches=function(J,he){return Nt(J,null,null,he)},Nt.matchesSelector=function(J,he){if(hr(J),le&&!Ln[he+" "]&&(!se||!se.test(he)))try{var Ee=ve.call(J,he);if(Ee||I.disconnectedMatch||J.document&&11!==J.document.nodeType)return Ee}catch{Ln(he,!0)}return 0<Nt(he,$,null,[J]).length},Nt.contains=function(J,he){return(J.ownerDocument||J)!=$&&hr(J),m.contains(J,he)},Nt.attr=function(J,he){(J.ownerDocument||J)!=$&&hr(J);var Ee=_.attrHandle[he.toLowerCase()],Re=Ee&&wn.call(_.attrHandle,he.toLowerCase())?Ee(J,he,!le):void 0;return void 0!==Re?Re:J.getAttribute(he)},Nt.error=function(J){throw new Error("Syntax error, unrecognized expression: "+J)},m.uniqueSort=function(J){var he,Ee=[],Re=0,Ie=0;if(B=!I.sortStable,A=!I.sortStable&&an.call(J,0),re.call(J,cn),B){for(;he=J[Ie++];)he===J[Ie]&&(Re=Ee.push(Ie));for(;Re--;)G.call(J,Ee[Re],1)}return A=null,J},m.fn.uniqueSort=function(){return this.pushStack(m.uniqueSort(an.apply(this)))},(_=m.expr={cacheLength:50,createPseudo:dn,match:Rr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(J){return J[1]=J[1].replace(Bn,ir),J[3]=(J[3]||J[4]||J[5]||"").replace(Bn,ir),"~="===J[2]&&(J[3]=" "+J[3]+" "),J.slice(0,4)},CHILD:function(J){return J[1]=J[1].toLowerCase(),"nth"===J[1].slice(0,3)?(J[3]||Nt.error(J[0]),J[4]=+(J[4]?J[5]+(J[6]||1):2*("even"===J[3]||"odd"===J[3])),J[5]=+(J[7]+J[8]||"odd"===J[3])):J[3]&&Nt.error(J[0]),J},PSEUDO:function(J){var he,Ee=!J[6]&&J[2];return Rr.CHILD.test(J[0])?null:(J[3]?J[2]=J[4]||J[5]||"":Ee&&Wr.test(Ee)&&(he=Si(Ee,!0))&&(he=Ee.indexOf(")",Ee.length-he)-Ee.length)&&(J[0]=J[0].slice(0,he),J[2]=Ee.slice(0,he)),J.slice(0,3))}},filter:{TAG:function(J){var he=J.replace(Bn,ir).toLowerCase();return"*"===J?function(){return!0}:function(Ee){return F(Ee,he)}},CLASS:function(J){var he=wt[J+" "];return he||(he=new RegExp("(^|"+K+")"+J+"("+K+"|$)"))&&wt(J,function(Ee){return he.test("string"==typeof Ee.className&&Ee.className||typeof Ee.getAttribute<"u"&&Ee.getAttribute("class")||"")})},ATTR:function(J,he,Ee){return function(Re){var Ie=Nt.attr(Re,J);return null==Ie?"!="===he:!he||(Ie+="","="===he?Ie===Ee:"!="===he?Ie!==Ee:"^="===he?Ee&&0===Ie.indexOf(Ee):"*="===he?Ee&&-1<Ie.indexOf(Ee):"$="===he?Ee&&Ie.slice(-Ee.length)===Ee:"~="===he?-1<(" "+Ie.replace(Ut," ")+" ").indexOf(Ee):"|="===he&&(Ie===Ee||Ie.slice(0,Ee.length+1)===Ee+"-"))}},CHILD:function(J,he,Ee,Re,Ie){var ht="nth"!==J.slice(0,3),Qe="last"!==J.slice(-4),pt="of-type"===he;return 1===Re&&0===Ie?function(ct){return!!ct.parentNode}:function(ct,Et,zt){var Bt,Vt,rt,fn,tr,Yn=ht!==Qe?"nextSibling":"previousSibling",ar=ct.parentNode,jr=pt&&ct.nodeName.toLowerCase(),Kr=!zt&&!pt,yn=!1;if(ar){if(ht){for(;Yn;){for(rt=ct;rt=rt[Yn];)if(pt?F(rt,jr):1===rt.nodeType)return!1;tr=Yn="only"===J&&!tr&&"nextSibling"}return!0}if(tr=[Qe?ar.firstChild:ar.lastChild],Qe&&Kr){for(yn=(fn=(Bt=(Vt=ar[Pe]||(ar[Pe]={}))[J]||[])[0]===be&&Bt[1])&&Bt[2],rt=fn&&ar.childNodes[fn];rt=++fn&&rt&&rt[Yn]||(yn=fn=0)||tr.pop();)if(1===rt.nodeType&&++yn&&rt===ct){Vt[J]=[be,fn,yn];break}}else if(Kr&&(yn=fn=(Bt=(Vt=ct[Pe]||(ct[Pe]={}))[J]||[])[0]===be&&Bt[1]),!1===yn)for(;(rt=++fn&&rt&&rt[Yn]||(yn=fn=0)||tr.pop())&&(!(pt?F(rt,jr):1===rt.nodeType)||!++yn||(Kr&&((Vt=rt[Pe]||(rt[Pe]={}))[J]=[be,yn]),rt!==ct)););return(yn-=Ie)===Re||yn%Re==0&&0<=yn/Re}}},PSEUDO:function(J,he){var Ee,Re=_.pseudos[J]||_.setFilters[J.toLowerCase()]||Nt.error("unsupported pseudo: "+J);return Re[Pe]?Re(he):1<Re.length?(Ee=[J,J,"",he],_.setFilters.hasOwnProperty(J.toLowerCase())?dn(function(Ie,ht){for(var Qe,pt=Re(Ie,he),ct=pt.length;ct--;)Ie[Qe=De.call(Ie,pt[ct])]=!(ht[Qe]=pt[ct])}):function(Ie){return Re(Ie,0,Ee)}):Re}},pseudos:{not:dn(function(J){var he=[],Ee=[],Re=Hs(J.replace(we,"$1"));return Re[Pe]?dn(function(Ie,ht,Qe,pt){for(var ct,Et=Re(Ie,null,pt,[]),zt=Ie.length;zt--;)(ct=Et[zt])&&(Ie[zt]=!(ht[zt]=ct))}):function(Ie,ht,Qe){return he[0]=Ie,Re(he,null,Qe,Ee),he[0]=null,!Ee.pop()}}),has:dn(function(J){return function(he){return 0<Nt(J,he).length}}),contains:dn(function(J){return J=J.replace(Bn,ir),function(he){return-1<(he.textContent||m.text(he)).indexOf(J)}}),lang:dn(function(J){return Vr.test(J||"")||Nt.error("unsupported lang: "+J),J=J.replace(Bn,ir).toLowerCase(),function(he){var Ee;do{if(Ee=le?he.lang:he.getAttribute("xml:lang")||he.getAttribute("lang"))return(Ee=Ee.toLowerCase())===J||0===Ee.indexOf(J+"-")}while((he=he.parentNode)&&1===he.nodeType);return!1}}),target:function(J){var he=j.location&&j.location.hash;return he&&he.slice(1)===J.id},root:function(J){return J===V},focus:function(J){return J===function(){try{return $.activeElement}catch{}}()&&$.hasFocus()&&!!(J.type||J.href||~J.tabIndex)},enabled:Fs(!1),disabled:Fs(!0),checked:function(J){return F(J,"input")&&!!J.checked||F(J,"option")&&!!J.selected},selected:function(J){return!0===J.selected},empty:function(J){for(J=J.firstChild;J;J=J.nextSibling)if(J.nodeType<6)return!1;return!0},parent:function(J){return!_.pseudos.empty(J)},header:function(J){return si.test(J.nodeName)},input:function(J){return Ao.test(J.nodeName)},button:function(J){return F(J,"input")&&"button"===J.type||F(J,"button")},text:function(J){var he;return F(J,"input")&&"text"===J.type&&(null==(he=J.getAttribute("type"))||"text"===he.toLowerCase())},first:Ir(function(){return[0]}),last:Ir(function(J,he){return[he-1]}),eq:Ir(function(J,he,Ee){return[Ee<0?Ee+he:Ee]}),even:Ir(function(J,he){for(var Ee=0;Ee<he;Ee+=2)J.push(Ee);return J}),odd:Ir(function(J,he){for(var Ee=1;Ee<he;Ee+=2)J.push(Ee);return J}),lt:Ir(function(J,he,Ee){var Re;for(Re=Ee<0?Ee+he:he<Ee?he:Ee;0<=--Re;)J.push(Re);return J}),gt:Ir(function(J,he,Ee){for(var Re=Ee<0?Ee+he:Ee;++Re<he;)J.push(Re);return J})}}).pseudos.nth=_.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[h]=_o(h);for(h in{submit:!0,reset:!0})_.pseudos[h]=ai(h);function qo(){}function Si(J,he){var Ee,Re,Ie,ht,Qe,pt,ct,Et=X[J+" "];if(Et)return he?0:Et.slice(0);for(Qe=J,pt=[],ct=_.preFilter;Qe;){for(ht in Ee&&!(Re=_n.exec(Qe))||(Re&&(Qe=Qe.slice(Re[0].length)||Qe),pt.push(Ie=[])),Ee=!1,(Re=ur.exec(Qe))&&(Ee=Re.shift(),Ie.push({value:Ee,type:Re[0].replace(we," ")}),Qe=Qe.slice(Ee.length)),_.filter)!(Re=Rr[ht].exec(Qe))||ct[ht]&&!(Re=ct[ht](Re))||(Ee=Re.shift(),Ie.push({value:Ee,type:ht,matches:Re}),Qe=Qe.slice(Ee.length));if(!Ee)break}return he?Qe.length:Qe?Nt.error(J):X(J,pt).slice(0)}function Uo(J){for(var he=0,Ee=J.length,Re="";he<Ee;he++)Re+=J[he].value;return Re}function Wo(J,he,Ee){var Re=he.dir,Ie=he.next,ht=Ie||Re,Qe=Ee&&"parentNode"===ht,pt=je++;return he.first?function(ct,Et,zt){for(;ct=ct[Re];)if(1===ct.nodeType||Qe)return J(ct,Et,zt);return!1}:function(ct,Et,zt){var Bt,Vt,rt=[be,pt];if(zt){for(;ct=ct[Re];)if((1===ct.nodeType||Qe)&&J(ct,Et,zt))return!0}else for(;ct=ct[Re];)if(1===ct.nodeType||Qe)if(Vt=ct[Pe]||(ct[Pe]={}),Ie&&F(ct,Ie))ct=ct[Re]||ct;else{if((Bt=Vt[ht])&&Bt[0]===be&&Bt[1]===pt)return rt[2]=Bt[2];if((Vt[ht]=rt)[2]=J(ct,Et,zt))return!0}return!1}}function Oo(J){return 1<J.length?function(he,Ee,Re){for(var Ie=J.length;Ie--;)if(!J[Ie](he,Ee,Re))return!1;return!0}:J[0]}function yo(J,he,Ee,Re,Ie){for(var ht,Qe=[],pt=0,ct=J.length,Et=null!=he;pt<ct;pt++)(ht=J[pt])&&(Ee&&!Ee(ht,Re,Ie)||(Qe.push(ht),Et&&he.push(pt)));return Qe}function Ba(J,he,Ee,Re,Ie,ht){return Re&&!Re[Pe]&&(Re=Ba(Re)),Ie&&!Ie[Pe]&&(Ie=Ba(Ie,ht)),dn(function(Qe,pt,ct,Et){var zt,Bt,Vt,rt,fn=[],tr=[],Yn=pt.length,ar=Qe||function(Kr,yn,zr){for(var Er=0,Ei=yn.length;Er<Ei;Er++)Nt(Kr,yn[Er],zr);return zr}(he||"*",ct.nodeType?[ct]:ct,[]),jr=!J||!Qe&&he?ar:yo(ar,fn,J,ct,Et);if(Ee?Ee(jr,rt=Ie||(Qe?J:Yn||Re)?[]:pt,ct,Et):rt=jr,Re)for(zt=yo(rt,tr),Re(zt,[],ct,Et),Bt=zt.length;Bt--;)(Vt=zt[Bt])&&(rt[tr[Bt]]=!(jr[tr[Bt]]=Vt));if(Qe){if(Ie||J){if(Ie){for(zt=[],Bt=rt.length;Bt--;)(Vt=rt[Bt])&&zt.push(jr[Bt]=Vt);Ie(null,rt=[],zt,Et)}for(Bt=rt.length;Bt--;)(Vt=rt[Bt])&&-1<(zt=Ie?De.call(Qe,Vt):fn[Bt])&&(Qe[zt]=!(pt[zt]=Vt))}}else rt=yo(rt===pt?rt.splice(Yn,rt.length):rt),Ie?Ie(null,pt,rt,Et):Se.apply(pt,rt)})}function li(J){for(var he,Ee,Re,Ie=J.length,ht=_.relative[J[0].type],Qe=ht||_.relative[" "],pt=ht?1:0,ct=Wo(function(Bt){return Bt===he},Qe,!0),Et=Wo(function(Bt){return-1<De.call(he,Bt)},Qe,!0),zt=[function(Bt,Vt,rt){var fn=!ht&&(rt||Vt!=E)||((he=Vt).nodeType?ct(Bt,Vt,rt):Et(Bt,Vt,rt));return he=null,fn}];pt<Ie;pt++)if(Ee=_.relative[J[pt].type])zt=[Wo(Oo(zt),Ee)];else{if((Ee=_.filter[J[pt].type].apply(null,J[pt].matches))[Pe]){for(Re=++pt;Re<Ie&&!_.relative[J[Re].type];Re++);return Ba(1<pt&&Oo(zt),1<pt&&Uo(J.slice(0,pt-1).concat({value:" "===J[pt-2].type?"*":""})).replace(we,"$1"),Ee,pt<Re&&li(J.slice(pt,Re)),Re<Ie&&li(J=J.slice(Re)),Re<Ie&&Uo(J))}zt.push(Ee)}return Oo(zt)}function Hs(J,he){var Ee,Re,Ie,ht,Qe,pt,ct=[],Et=[],zt=Mt[J+" "];if(!zt){for(he||(he=Si(J)),Ee=he.length;Ee--;)(zt=li(he[Ee]))[Pe]?ct.push(zt):Et.push(zt);(zt=Mt(J,(Re=Et,ht=0<(Ie=ct).length,Qe=0<Re.length,pt=function(Bt,Vt,rt,fn,tr){var Yn,ar,jr,Kr=0,yn="0",zr=Bt&&[],Er=[],Ei=E,qs=Bt||Qe&&_.find.TAG("*",tr),Ia=be+=null==Ei?1:Math.random()||.1,hc=qs.length;for(tr&&(E=Vt==$||Vt||tr);yn!==hc&&null!=(Yn=qs[yn]);yn++){if(Qe&&Yn){for(ar=0,Vt||Yn.ownerDocument==$||(hr(Yn),rt=!le);jr=Re[ar++];)if(jr(Yn,Vt||$,rt)){Se.call(fn,Yn);break}tr&&(be=Ia)}ht&&((Yn=!jr&&Yn)&&Kr--,Bt&&zr.push(Yn))}if(Kr+=yn,ht&&yn!==Kr){for(ar=0;jr=Ie[ar++];)jr(zr,Er,Vt,rt);if(Bt){if(0<Kr)for(;yn--;)zr[yn]||Er[yn]||(Er[yn]=L.call(fn));Er=yo(Er)}Se.apply(fn,Er),tr&&!Bt&&0<Er.length&&1<Kr+Ie.length&&m.uniqueSort(fn)}return tr&&(be=Ia,E=Ei),zr},ht?dn(pt):pt))).selector=J}return zt}function Ma(J,he,Ee,Re){var Ie,ht,Qe,pt,ct,Et="function"==typeof J&&J,zt=!Re&&Si(J=Et.selector||J);if(Ee=Ee||[],1===zt.length){if(2<(ht=zt[0]=zt[0].slice(0)).length&&"ID"===(Qe=ht[0]).type&&9===he.nodeType&&le&&_.relative[ht[1].type]){if(!(he=(_.find.ID(Qe.matches[0].replace(Bn,ir),he)||[])[0]))return Ee;Et&&(he=he.parentNode),J=J.slice(ht.shift().value.length)}for(Ie=Rr.needsContext.test(J)?0:ht.length;Ie--&&!_.relative[pt=(Qe=ht[Ie]).type];)if((ct=_.find[pt])&&(Re=ct(Qe.matches[0].replace(Bn,ir),Rn.test(ht[0].type)&&$s(he.parentNode)||he))){if(ht.splice(Ie,1),!(J=Re.length&&Uo(ht)))return Se.apply(Ee,Re),Ee;break}}return(Et||Hs(J,zt))(Re,he,!le,Ee,!he||Rn.test(J)&&$s(he.parentNode)||he),Ee}qo.prototype=_.filters=_.pseudos,_.setFilters=new qo,I.sortStable=Pe.split("").sort(cn).join("")===Pe,hr(),I.sortDetached=hn(function(J){return 1&J.compareDocumentPosition($.createElement("fieldset"))}),m.find=Nt,m.expr[":"]=m.expr.pseudos,m.unique=m.uniqueSort,Nt.compile=Hs,Nt.select=Ma,Nt.setDocument=hr,Nt.tokenize=Si,Nt.escape=m.escapeSelector,Nt.getText=m.text,Nt.isXML=m.isXMLDoc,Nt.selectors=m.expr,Nt.support=m.support,Nt.uniqueSort=m.uniqueSort}();var ue=function(h,_,E){for(var A=[],B=void 0!==E;(h=h[_])&&9!==h.nodeType;)if(1===h.nodeType){if(B&&m(h).is(E))break;A.push(h)}return A},Tt=function(h,_){for(var E=[];h;h=h.nextSibling)1===h.nodeType&&h!==_&&E.push(h);return E},_t=m.expr.match.needsContext,R=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Ne(h,_,E){return ae(_)?m.grep(h,function(A,B){return!!_.call(A,B,A)!==E}):_.nodeType?m.grep(h,function(A){return A===_!==E}):"string"!=typeof _?m.grep(h,function(A){return-1<De.call(_,A)!==E}):m.filter(_,h,E)}m.filter=function(h,_,E){var A=_[0];return E&&(h=":not("+h+")"),1===_.length&&1===A.nodeType?m.find.matchesSelector(A,h)?[A]:[]:m.find.matches(h,m.grep(_,function(B){return 1===B.nodeType}))},m.fn.extend({find:function(h){var _,E,A=this.length,B=this;if("string"!=typeof h)return this.pushStack(m(h).filter(function(){for(_=0;_<A;_++)if(m.contains(B[_],this))return!0}));for(E=this.pushStack([]),_=0;_<A;_++)m.find(h,B[_],E);return 1<A?m.uniqueSort(E):E},filter:function(h){return this.pushStack(Ne(this,h||[],!1))},not:function(h){return this.pushStack(Ne(this,h||[],!0))},is:function(h){return!!Ne(this,"string"==typeof h&&_t.test(h)?m(h):h||[],!1).length}});var Jt,Dn=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(m.fn.init=function(h,_,E){var A,B;if(!h)return this;if(E=E||Jt,"string"==typeof h){if(!(A="<"===h[0]&&">"===h[h.length-1]&&3<=h.length?[null,h,null]:Dn.exec(h))||!A[1]&&_)return!_||_.jquery?(_||E).find(h):this.constructor(_).find(h);if(A[1]){if(m.merge(this,m.parseHTML(A[1],(_=_ instanceof m?_[0]:_)&&_.nodeType?_.ownerDocument||_:k,!0)),R.test(A[1])&&m.isPlainObject(_))for(A in _)ae(this[A])?this[A](_[A]):this.attr(A,_[A]);return this}return(B=k.getElementById(A[2]))&&(this[0]=B,this.length=1),this}return h.nodeType?(this[0]=h,this.length=1,this):ae(h)?void 0!==E.ready?E.ready(h):h(m):m.makeArray(h,this)}).prototype=m.fn,Jt=m(k);var Zn=/^(?:parents|prev(?:Until|All))/,Oe={children:!0,contents:!0,next:!0,prev:!0};function Kt(h,_){for(;(h=h[_])&&1!==h.nodeType;);return h}m.fn.extend({has:function(h){var _=m(h,this),E=_.length;return this.filter(function(){for(var A=0;A<E;A++)if(m.contains(this,_[A]))return!0})},closest:function(h,_){var E,A=0,B=this.length,$=[],V="string"!=typeof h&&m(h);if(!_t.test(h))for(;A<B;A++)for(E=this[A];E&&E!==_;E=E.parentNode)if(E.nodeType<11&&(V?-1<V.index(E):1===E.nodeType&&m.find.matchesSelector(E,h))){$.push(E);break}return this.pushStack(1<$.length?m.uniqueSort($):$)},index:function(h){return h?"string"==typeof h?De.call(m(h),this[0]):De.call(this,h.jquery?h[0]:h):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(h,_){return this.pushStack(m.uniqueSort(m.merge(this.get(),m(h,_))))},addBack:function(h){return this.add(null==h?this.prevObject:this.prevObject.filter(h))}}),m.each({parent:function(h){var _=h.parentNode;return _&&11!==_.nodeType?_:null},parents:function(h){return ue(h,"parentNode")},parentsUntil:function(h,_,E){return ue(h,"parentNode",E)},next:function(h){return Kt(h,"nextSibling")},prev:function(h){return Kt(h,"previousSibling")},nextAll:function(h){return ue(h,"nextSibling")},prevAll:function(h){return ue(h,"previousSibling")},nextUntil:function(h,_,E){return ue(h,"nextSibling",E)},prevUntil:function(h,_,E){return ue(h,"previousSibling",E)},siblings:function(h){return Tt((h.parentNode||{}).firstChild,h)},children:function(h){return Tt(h.firstChild)},contents:function(h){return null!=h.contentDocument&&En(h.contentDocument)?h.contentDocument:(F(h,"template")&&(h=h.content||h),m.merge([],h.childNodes))}},function(h,_){m.fn[h]=function(E,A){var B=m.map(this,_,E);return"Until"!==h.slice(-5)&&(A=E),A&&"string"==typeof A&&(B=m.filter(A,B)),1<this.length&&(Oe[h]||m.uniqueSort(B),Zn.test(h)&&B.reverse()),this.pushStack(B)}});var ut=/[^\x20\t\r\n\f]+/g;function ye(h){return h}function kt(h){throw h}function rr(h,_,E,A){var B;try{h&&ae(B=h.promise)?B.call(h).done(_).fail(E):h&&ae(B=h.then)?B.call(h,_,E):_.apply(void 0,[h].slice(A))}catch($){E.apply(void 0,[$])}}m.Callbacks=function(h){var E;h="string"==typeof h?(E={},m.each(h.match(ut)||[],function(be,je){E[je]=!0}),E):m.extend({},h);var A,B,$,V,le=[],se=[],ve=-1,Se=function(){for(V=V||h.once,$=A=!0;se.length;ve=-1)for(B=se.shift();++ve<le.length;)!1===le[ve].apply(B[0],B[1])&&h.stopOnFalse&&(ve=le.length,B=!1);h.memory||(B=!1),A=!1,V&&(le=B?[]:"")},Pe={add:function(){return le&&(B&&!A&&(ve=le.length-1,se.push(B)),function be(je){m.each(je,function(wt,X){ae(X)?h.unique&&Pe.has(X)||le.push(X):X&&X.length&&"string"!==C(X)&&be(X)})}(arguments),B&&!A&&Se()),this},remove:function(){return m.each(arguments,function(be,je){for(var wt;-1<(wt=m.inArray(je,le,wt));)le.splice(wt,1),wt<=ve&&ve--}),this},has:function(be){return be?-1<m.inArray(be,le):0<le.length},empty:function(){return le&&(le=[]),this},disable:function(){return V=se=[],le=B="",this},disabled:function(){return!le},lock:function(){return V=se=[],B||A||(le=B=""),this},locked:function(){return!!V},fireWith:function(be,je){return V||(je=[be,(je=je||[]).slice?je.slice():je],se.push(je),A||Se()),this},fire:function(){return Pe.fireWith(this,arguments),this},fired:function(){return!!$}};return Pe},m.extend({Deferred:function(h){var _=[["notify","progress",m.Callbacks("memory"),m.Callbacks("memory"),2],["resolve","done",m.Callbacks("once memory"),m.Callbacks("once memory"),0,"resolved"],["reject","fail",m.Callbacks("once memory"),m.Callbacks("once memory"),1,"rejected"]],E="pending",A={state:function(){return E},always:function(){return B.done(arguments).fail(arguments),this},catch:function($){return A.then(null,$)},pipe:function(){var $=arguments;return m.Deferred(function(V){m.each(_,function(le,se){var ve=ae($[se[4]])&&$[se[4]];B[se[1]](function(){var Se=ve&&ve.apply(this,arguments);Se&&ae(Se.promise)?Se.promise().progress(V.notify).done(V.resolve).fail(V.reject):V[se[0]+"With"](this,ve?[Se]:arguments)})}),$=null}).promise()},then:function($,V,le){var se=0;function ve(Se,Pe,be,je){return function(){var wt=this,X=arguments,Mt=function(){var cn,Ur;if(!(Se<se)){if((cn=be.apply(wt,X))===Pe.promise())throw new TypeError("Thenable self-resolution");ae(Ur=cn&&("object"==typeof cn||"function"==typeof cn)&&cn.then)?je?Ur.call(cn,ve(se,Pe,ye,je),ve(se,Pe,kt,je)):(se++,Ur.call(cn,ve(se,Pe,ye,je),ve(se,Pe,kt,je),ve(se,Pe,ye,Pe.notifyWith))):(be!==ye&&(wt=void 0,X=[cn]),(je||Pe.resolveWith)(wt,X))}},Ln=je?Mt:function(){try{Mt()}catch(cn){m.Deferred.exceptionHook&&m.Deferred.exceptionHook(cn,Ln.error),se<=Se+1&&(be!==kt&&(wt=void 0,X=[cn]),Pe.rejectWith(wt,X))}};Se?Ln():(m.Deferred.getErrorHook?Ln.error=m.Deferred.getErrorHook():m.Deferred.getStackHook&&(Ln.error=m.Deferred.getStackHook()),j.setTimeout(Ln))}}return m.Deferred(function(Se){_[0][3].add(ve(0,Se,ae(le)?le:ye,Se.notifyWith)),_[1][3].add(ve(0,Se,ae($)?$:ye)),_[2][3].add(ve(0,Se,ae(V)?V:kt))}).promise()},promise:function($){return null!=$?m.extend($,A):A}},B={};return m.each(_,function($,V){var le=V[2],se=V[5];A[V[1]]=le.add,se&&le.add(function(){E=se},_[3-$][2].disable,_[3-$][3].disable,_[0][2].lock,_[0][3].lock),le.add(V[3].fire),B[V[0]]=function(){return B[V[0]+"With"](this===B?void 0:this,arguments),this},B[V[0]+"With"]=le.fireWith}),A.promise(B),h&&h.call(B,B),B},when:function(h){var _=arguments.length,E=_,A=Array(E),B=an.call(arguments),$=m.Deferred(),V=function(le){return function(se){A[le]=this,B[le]=1<arguments.length?an.call(arguments):se,--_||$.resolveWith(A,B)}};if(_<=1&&(rr(h,$.done(V(E)).resolve,$.reject,!_),"pending"===$.state()||ae(B[E]&&B[E].then)))return $.then();for(;E--;)rr(B[E],V(E),$.reject);return $.promise()}});var tt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;m.Deferred.exceptionHook=function(h,_){j.console&&j.console.warn&&h&&tt.test(h.name)&&j.console.warn("jQuery.Deferred exception: "+h.message,h.stack,_)},m.readyException=function(h){j.setTimeout(function(){throw h})};var Vn=m.Deferred();function Ge(){k.removeEventListener("DOMContentLoaded",Ge),j.removeEventListener("load",Ge),m.ready()}m.fn.ready=function(h){return Vn.then(h).catch(function(_){m.readyException(_)}),this},m.extend({isReady:!1,readyWait:1,ready:function(h){(!0===h?--m.readyWait:m.isReady)||(m.isReady=!0)!==h&&0<--m.readyWait||Vn.resolveWith(k,[m])}}),m.ready.then=Vn.then,"complete"===k.readyState||"loading"!==k.readyState&&!k.documentElement.doScroll?j.setTimeout(m.ready):(k.addEventListener("DOMContentLoaded",Ge),j.addEventListener("load",Ge));var W=function(h,_,E,A,B,$,V){var le=0,se=h.length,ve=null==E;if("object"===C(E))for(le in B=!0,E)W(h,_,le,E[le],!0,$,V);else if(void 0!==A&&(B=!0,ae(A)||(V=!0),ve&&(V?(_.call(h,A),_=null):(ve=_,_=function(Se,Pe,be){return ve.call(m(Se),be)})),_))for(;le<se;le++)_(h[le],E,V?A:A.call(h[le],le,_(h[le],E)));return B?h:ve?_.call(h):se?_(h[0],E):$},Z=/^-ms-/,ke=/-([a-z])/g;function ze(h,_){return _.toUpperCase()}function $e(h){return h.replace(Z,"ms-").replace(ke,ze)}var Je=function(h){return 1===h.nodeType||9===h.nodeType||!+h.nodeType};function Ft(){this.expando=m.expando+Ft.uid++}Ft.uid=1,Ft.prototype={cache:function(h){var _=h[this.expando];return _||(_={},Je(h)&&(h.nodeType?h[this.expando]=_:Object.defineProperty(h,this.expando,{value:_,configurable:!0}))),_},set:function(h,_,E){var A,B=this.cache(h);if("string"==typeof _)B[$e(_)]=E;else for(A in _)B[$e(A)]=_[A];return B},get:function(h,_){return void 0===_?this.cache(h):h[this.expando]&&h[this.expando][$e(_)]},access:function(h,_,E){return void 0===_||_&&"string"==typeof _&&void 0===E?this.get(h,_):(this.set(h,_,E),void 0!==E?E:_)},remove:function(h,_){var E,A=h[this.expando];if(void 0!==A){if(void 0!==_)for((E=(_=Array.isArray(_)?_.map($e):(_=$e(_))in A?[_]:_.match(ut)||[]).length);E--;)delete A[_[E]];(void 0===_||m.isEmptyObject(A))&&(h.nodeType?h[this.expando]=void 0:delete h[this.expando])}},hasData:function(h){var _=h[this.expando];return void 0!==_&&!m.isEmptyObject(_)}};var Ye=new Ft,Qt=new Ft,qt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Hr=/[A-Z]/g;function Hn(h,_,E){var A,B;if(void 0===E&&1===h.nodeType)if(A="data-"+_.replace(Hr,"-$&").toLowerCase(),"string"==typeof(E=h.getAttribute(A))){try{E="true"===(B=E)||"false"!==B&&("null"===B?null:B===+B+""?+B:qt.test(B)?JSON.parse(B):B)}catch{}Qt.set(h,_,E)}else E=void 0;return E}m.extend({hasData:function(h){return Qt.hasData(h)||Ye.hasData(h)},data:function(h,_,E){return Qt.access(h,_,E)},removeData:function(h,_){Qt.remove(h,_)},_data:function(h,_,E){return Ye.access(h,_,E)},_removeData:function(h,_){Ye.remove(h,_)}}),m.fn.extend({data:function(h,_){var E,A,B,$=this[0],V=$&&$.attributes;if(void 0===h){if(this.length&&(B=Qt.get($),1===$.nodeType&&!Ye.get($,"hasDataAttrs"))){for(E=V.length;E--;)V[E]&&0===(A=V[E].name).indexOf("data-")&&(A=$e(A.slice(5)),Hn($,A,B[A]));Ye.set($,"hasDataAttrs",!0)}return B}return"object"==typeof h?this.each(function(){Qt.set(this,h)}):W(this,function(le){var se;if($&&void 0===le)return void 0!==(se=Qt.get($,h))||void 0!==(se=Hn($,h))?se:void 0;this.each(function(){Qt.set(this,h,le)})},null,_,1<arguments.length,null,!0)},removeData:function(h){return this.each(function(){Qt.remove(this,h)})}}),m.extend({queue:function(h,_,E){var A;if(h)return A=Ye.get(h,_=(_||"fx")+"queue"),E&&(!A||Array.isArray(E)?A=Ye.access(h,_,m.makeArray(E)):A.push(E)),A||[]},dequeue:function(h,_){var E=m.queue(h,_=_||"fx"),A=E.length,B=E.shift(),$=m._queueHooks(h,_);"inprogress"===B&&(B=E.shift(),A--),B&&("fx"===_&&E.unshift("inprogress"),delete $.stop,B.call(h,function(){m.dequeue(h,_)},$)),!A&&$&&$.empty.fire()},_queueHooks:function(h,_){var E=_+"queueHooks";return Ye.get(h,E)||Ye.access(h,E,{empty:m.Callbacks("once memory").add(function(){Ye.remove(h,[_+"queue",E])})})}}),m.fn.extend({queue:function(h,_){var E=2;return"string"!=typeof h&&(_=h,h="fx",E--),arguments.length<E?m.queue(this[0],h):void 0===_?this:this.each(function(){var A=m.queue(this,h,_);m._queueHooks(this,h),"fx"===h&&"inprogress"!==A[0]&&m.dequeue(this,h)})},dequeue:function(h){return this.each(function(){m.dequeue(this,h)})},clearQueue:function(h){return this.queue(h||"fx",[])},promise:function(h,_){var E,A=1,B=m.Deferred(),$=this,V=this.length,le=function(){--A||B.resolveWith($,[$])};for("string"!=typeof h&&(_=h,h=void 0),h=h||"fx";V--;)(E=Ye.get($[V],h+"queueHooks"))&&E.empty&&(A++,E.empty.add(le));return le(),B.promise(_)}});var co=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Nn=new RegExp("^(?:([+-])=|)("+co+")([a-z%]*)$","i"),or=["Top","Right","Bottom","Left"],An=k.documentElement,zo=function(h){return m.contains(h.ownerDocument,h)},Wt={composed:!0};An.getRootNode&&(zo=function(h){return m.contains(h.ownerDocument,h)||h.getRootNode(Wt)===h.ownerDocument});var uo=function(h,_){return"none"===(h=_||h).style.display||""===h.style.display&&zo(h)&&"none"===m.css(h,"display")};function me(h,_,E,A){var B,$,V=20,le=A?function(){return A.cur()}:function(){return m.css(h,_,"")},se=le(),ve=E&&E[3]||(m.cssNumber[_]?"":"px"),Se=h.nodeType&&(m.cssNumber[_]||"px"!==ve&&+se)&&Nn.exec(m.css(h,_));if(Se&&Se[3]!==ve){for(ve=ve||Se[3],Se=+(se/=2)||1;V--;)m.style(h,_,Se+ve),(1-$)*(1-($=le()/se||.5))<=0&&(V=0),Se/=$;m.style(h,_,(Se*=2)+ve),E=E||[]}return E&&(Se=+Se||+se||0,B=E[1]?Se+(E[1]+1)*E[2]:+E[2],A&&(A.unit=ve,A.start=Se,A.end=B)),B}var Ot={};function Yt(h,_){for(var E,A,B,$,V,le,se,ve=[],Se=0,Pe=h.length;Se<Pe;Se++)(A=h[Se]).style&&(E=A.style.display,_?("none"===E&&(ve[Se]=Ye.get(A,"display")||null,ve[Se]||(A.style.display="")),""===A.style.display&&uo(A)&&(ve[Se]=(se=V=$=void 0,V=(B=A).ownerDocument,(se=Ot[le=B.nodeName])||($=V.body.appendChild(V.createElement(le)),se=m.css($,"display"),$.parentNode.removeChild($),"none"===se&&(se="block"),Ot[le]=se)))):"none"!==E&&(ve[Se]="none",Ye.set(A,"display",E)));for(Se=0;Se<Pe;Se++)null!=ve[Se]&&(h[Se].style.display=ve[Se]);return h}m.fn.extend({show:function(){return Yt(this,!0)},hide:function(){return Yt(this)},toggle:function(h){return"boolean"==typeof h?h?this.show():this.hide():this.each(function(){uo(this)?m(this).show():m(this).hide()})}});var xn,mr,ln=/^(?:checkbox|radio)$/i,Gt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ft=/^$|^module$|\/(?:java|ecma)script/i;xn=k.createDocumentFragment().appendChild(k.createElement("div")),(mr=k.createElement("input")).setAttribute("type","radio"),mr.setAttribute("checked","checked"),mr.setAttribute("name","t"),xn.appendChild(mr),I.checkClone=xn.cloneNode(!0).cloneNode(!0).lastChild.checked,xn.innerHTML="<textarea>x</textarea>",I.noCloneChecked=!!xn.cloneNode(!0).lastChild.defaultValue,xn.innerHTML="<option></option>",I.option=!!xn.lastChild;var kn={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function tn(h,_){var E;return E=typeof h.getElementsByTagName<"u"?h.getElementsByTagName(_||"*"):typeof h.querySelectorAll<"u"?h.querySelectorAll(_||"*"):[],void 0===_||_&&F(h,_)?m.merge([h],E):E}function Kn(h,_){for(var E=0,A=h.length;E<A;E++)Ye.set(h[E],"globalEval",!_||Ye.get(_[E],"globalEval"))}kn.tbody=kn.tfoot=kn.colgroup=kn.caption=kn.thead,kn.th=kn.td,I.option||(kn.optgroup=kn.option=[1,"<select multiple='multiple'>","</select>"]);var ho=/<|&#?\w+;/;function Lr(h,_,E,A,B){for(var $,V,le,se,ve,Se,Pe=_.createDocumentFragment(),be=[],je=0,wt=h.length;je<wt;je++)if(($=h[je])||0===$)if("object"===C($))m.merge(be,$.nodeType?[$]:$);else if(ho.test($)){for(V=V||Pe.appendChild(_.createElement("div")),le=(Gt.exec($)||["",""])[1].toLowerCase(),V.innerHTML=(se=kn[le]||kn._default)[1]+m.htmlPrefilter($)+se[2],Se=se[0];Se--;)V=V.lastChild;m.merge(be,V.childNodes),(V=Pe.firstChild).textContent=""}else be.push(_.createTextNode($));for(Pe.textContent="",je=0;$=be[je++];)if(A&&-1<m.inArray($,A))B&&B.push($);else if(ve=zo($),V=tn(Pe.appendChild($),"script"),ve&&Kn(V),E)for(Se=0;$=V[Se++];)ft.test($.type||"")&&E.push($);return Pe}var Or=/^([^.]*)(?:\.(.+)|)/;function fo(){return!0}function Eo(){return!1}function Ps(h,_,E,A,B,$){var V,le;if("object"==typeof _){for(le in"string"!=typeof E&&(A=A||E,E=void 0),_)Ps(h,le,E,A,_[le],$);return h}if(null==A&&null==B?(B=E,A=E=void 0):null==B&&("string"==typeof E?(B=A,A=void 0):(B=A,A=E,E=void 0)),!1===B)B=Eo;else if(!B)return h;return 1===$&&(V=B,(B=function(se){return m().off(se),V.apply(this,arguments)}).guid=V.guid||(V.guid=m.guid++)),h.each(function(){m.event.add(this,_,B,A,E)})}function po(h,_,E){E?(Ye.set(h,_,!1),m.event.add(h,_,{namespace:!1,handler:function(A){var B,$=Ye.get(this,_);if(1&A.isTrigger&&this[_]){if($)(m.event.special[_]||{}).delegateType&&A.stopPropagation();else if($=an.call(arguments),Ye.set(this,_,$),this[_](),B=Ye.get(this,_),Ye.set(this,_,!1),$!==B)return A.stopImmediatePropagation(),A.preventDefault(),B}else $&&(Ye.set(this,_,m.event.trigger($[0],$.slice(1),this)),A.stopPropagation(),A.isImmediatePropagationStopped=fo)}})):void 0===Ye.get(h,_)&&m.event.add(h,_,fo)}m.event={global:{},add:function(h,_,E,A,B){var $,V,le,se,ve,Se,Pe,be,je,wt,X,Mt=Ye.get(h);if(Je(h))for(E.handler&&(E=($=E).handler,B=$.selector),B&&m.find.matchesSelector(An,B),E.guid||(E.guid=m.guid++),(se=Mt.events)||(se=Mt.events=Object.create(null)),(V=Mt.handle)||(V=Mt.handle=function(Ln){return typeof m<"u"&&m.event.triggered!==Ln.type?m.event.dispatch.apply(h,arguments):void 0}),ve=(_=(_||"").match(ut)||[""]).length;ve--;)je=X=(le=Or.exec(_[ve])||[])[1],wt=(le[2]||"").split(".").sort(),je&&(Pe=m.event.special[je]||{},Pe=m.event.special[je=(B?Pe.delegateType:Pe.bindType)||je]||{},Se=m.extend({type:je,origType:X,data:A,handler:E,guid:E.guid,selector:B,needsContext:B&&m.expr.match.needsContext.test(B),namespace:wt.join(".")},$),(be=se[je])||((be=se[je]=[]).delegateCount=0,Pe.setup&&!1!==Pe.setup.call(h,A,wt,V)||h.addEventListener&&h.addEventListener(je,V)),Pe.add&&(Pe.add.call(h,Se),Se.handler.guid||(Se.handler.guid=E.guid)),B?be.splice(be.delegateCount++,0,Se):be.push(Se),m.event.global[je]=!0)},remove:function(h,_,E,A,B){var $,V,le,se,ve,Se,Pe,be,je,wt,X,Mt=Ye.hasData(h)&&Ye.get(h);if(Mt&&(se=Mt.events)){for(ve=(_=(_||"").match(ut)||[""]).length;ve--;)if(je=X=(le=Or.exec(_[ve])||[])[1],wt=(le[2]||"").split(".").sort(),je){for(Pe=m.event.special[je]||{},be=se[je=(A?Pe.delegateType:Pe.bindType)||je]||[],le=le[2]&&new RegExp("(^|\\.)"+wt.join("\\.(?:.*\\.|)")+"(\\.|$)"),V=$=be.length;$--;)Se=be[$],!B&&X!==Se.origType||E&&E.guid!==Se.guid||le&&!le.test(Se.namespace)||A&&A!==Se.selector&&("**"!==A||!Se.selector)||(be.splice($,1),Se.selector&&be.delegateCount--,Pe.remove&&Pe.remove.call(h,Se));V&&!be.length&&(Pe.teardown&&!1!==Pe.teardown.call(h,wt,Mt.handle)||m.removeEvent(h,je,Mt.handle),delete se[je])}else for(je in se)m.event.remove(h,je+_[ve],E,A,!0);m.isEmptyObject(se)&&Ye.remove(h,"handle events")}},dispatch:function(h){var _,E,A,B,$,V,le=new Array(arguments.length),se=m.event.fix(h),ve=(Ye.get(this,"events")||Object.create(null))[se.type]||[],Se=m.event.special[se.type]||{};for(le[0]=se,_=1;_<arguments.length;_++)le[_]=arguments[_];if(se.delegateTarget=this,!Se.preDispatch||!1!==Se.preDispatch.call(this,se)){for(V=m.event.handlers.call(this,se,ve),_=0;(B=V[_++])&&!se.isPropagationStopped();)for(se.currentTarget=B.elem,E=0;($=B.handlers[E++])&&!se.isImmediatePropagationStopped();)se.rnamespace&&!1!==$.namespace&&!se.rnamespace.test($.namespace)||(se.handleObj=$,se.data=$.data,void 0!==(A=((m.event.special[$.origType]||{}).handle||$.handler).apply(B.elem,le))&&!1===(se.result=A)&&(se.preventDefault(),se.stopPropagation()));return Se.postDispatch&&Se.postDispatch.call(this,se),se.result}},handlers:function(h,_){var E,A,B,$,V,le=[],se=_.delegateCount,ve=h.target;if(se&&ve.nodeType&&!("click"===h.type&&1<=h.button))for(;ve!==this;ve=ve.parentNode||this)if(1===ve.nodeType&&("click"!==h.type||!0!==ve.disabled)){for($=[],V={},E=0;E<se;E++)void 0===V[B=(A=_[E]).selector+" "]&&(V[B]=A.needsContext?-1<m(B,this).index(ve):m.find(B,this,null,[ve]).length),V[B]&&$.push(A);$.length&&le.push({elem:ve,handlers:$})}return ve=this,se<_.length&&le.push({elem:ve,handlers:_.slice(se)}),le},addProp:function(h,_){Object.defineProperty(m.Event.prototype,h,{enumerable:!0,configurable:!0,get:ae(_)?function(){if(this.originalEvent)return _(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[h]},set:function(E){Object.defineProperty(this,h,{enumerable:!0,configurable:!0,writable:!0,value:E})}})},fix:function(h){return h[m.expando]?h:new m.Event(h)},special:{load:{noBubble:!0},click:{setup:function(h){var _=this||h;return ln.test(_.type)&&_.click&&F(_,"input")&&po(_,"click",!0),!1},trigger:function(h){var _=this||h;return ln.test(_.type)&&_.click&&F(_,"input")&&po(_,"click"),!0},_default:function(h){var _=h.target;return ln.test(_.type)&&_.click&&F(_,"input")&&Ye.get(_,"click")||F(_,"a")}},beforeunload:{postDispatch:function(h){void 0!==h.result&&h.originalEvent&&(h.originalEvent.returnValue=h.result)}}}},m.removeEvent=function(h,_,E){h.removeEventListener&&h.removeEventListener(_,E)},m.Event=function(h,_){if(!(this instanceof m.Event))return new m.Event(h,_);h&&h.type?(this.originalEvent=h,this.type=h.type,this.isDefaultPrevented=h.defaultPrevented||void 0===h.defaultPrevented&&!1===h.returnValue?fo:Eo,this.target=h.target&&3===h.target.nodeType?h.target.parentNode:h.target,this.currentTarget=h.currentTarget,this.relatedTarget=h.relatedTarget):this.type=h,_&&m.extend(this,_),this.timeStamp=h&&h.timeStamp||Date.now(),this[m.expando]=!0},m.Event.prototype={constructor:m.Event,isDefaultPrevented:Eo,isPropagationStopped:Eo,isImmediatePropagationStopped:Eo,isSimulated:!1,preventDefault:function(){var h=this.originalEvent;this.isDefaultPrevented=fo,h&&!this.isSimulated&&h.preventDefault()},stopPropagation:function(){var h=this.originalEvent;this.isPropagationStopped=fo,h&&!this.isSimulated&&h.stopPropagation()},stopImmediatePropagation:function(){var h=this.originalEvent;this.isImmediatePropagationStopped=fo,h&&!this.isSimulated&&h.stopImmediatePropagation(),this.stopPropagation()}},m.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},m.event.addProp),m.each({focus:"focusin",blur:"focusout"},function(h,_){function E(A){if(k.documentMode){var B=Ye.get(this,"handle"),$=m.event.fix(A);$.type="focusin"===A.type?"focus":"blur",$.isSimulated=!0,B(A),$.target===$.currentTarget&&B($)}else m.event.simulate(_,A.target,m.event.fix(A))}m.event.special[h]={setup:function(){var A;if(po(this,h,!0),!k.documentMode)return!1;(A=Ye.get(this,_))||this.addEventListener(_,E),Ye.set(this,_,(A||0)+1)},trigger:function(){return po(this,h),!0},teardown:function(){var A;if(!k.documentMode)return!1;(A=Ye.get(this,_)-1)?Ye.set(this,_,A):(this.removeEventListener(_,E),Ye.remove(this,_))},_default:function(A){return Ye.get(A.target,h)},delegateType:_},m.event.special[_]={setup:function(){var A=this.ownerDocument||this.document||this,B=k.documentMode?this:A,$=Ye.get(B,_);$||(k.documentMode?this.addEventListener(_,E):A.addEventListener(h,E,!0)),Ye.set(B,_,($||0)+1)},teardown:function(){var A=this.ownerDocument||this.document||this,B=k.documentMode?this:A,$=Ye.get(B,_)-1;$?Ye.set(B,_,$):(k.documentMode?this.removeEventListener(_,E):A.removeEventListener(h,E,!0),Ye.remove(B,_))}}}),m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(h,_){m.event.special[h]={delegateType:_,bindType:_,handle:function(E){var A,B=E.relatedTarget,$=E.handleObj;return B&&(B===this||m.contains(this,B))||(E.type=$.origType,A=$.handler.apply(this,arguments),E.type=_),A}}}),m.fn.extend({on:function(h,_,E,A){return Ps(this,h,_,E,A)},one:function(h,_,E,A){return Ps(this,h,_,E,A,1)},off:function(h,_,E){var A,B;if(h&&h.preventDefault&&h.handleObj)return A=h.handleObj,m(h.delegateTarget).off(A.namespace?A.origType+"."+A.namespace:A.origType,A.selector,A.handler),this;if("object"==typeof h){for(B in h)this.off(B,_,h[B]);return this}return!1!==_&&"function"!=typeof _||(E=_,_=void 0),!1===E&&(E=Eo),this.each(function(){m.event.remove(this,h,E,_)})}});var ri=/<script|<style|<link/i,ec=/checked\s*(?:[^=]|=\s*.checked.)/i,Ca=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function _i(h,_){return F(h,"table")&&F(11!==_.nodeType?_:_.firstChild,"tr")&&m(h).children("tbody")[0]||h}function tc(h){return h.type=(null!==h.getAttribute("type"))+"/"+h.type,h}function nc(h){return"true/"===(h.type||"").slice(0,5)?h.type=h.type.slice(5):h.removeAttribute("type"),h}function ka(h,_){var E,A,B,$,V,le;if(1===_.nodeType){if(Ye.hasData(h)&&(le=Ye.get(h).events))for(B in Ye.remove(_,"handle events"),le)for(E=0,A=le[B].length;E<A;E++)m.event.add(_,B,le[B][E]);Qt.hasData(h)&&($=Qt.access(h),V=m.extend({},$),Qt.set(_,V))}}function On(h,_,E,A){_=Tn(_);var B,$,V,le,se,ve,Se=0,Pe=h.length,be=Pe-1,je=_[0],wt=ae(je);if(wt||1<Pe&&"string"==typeof je&&!I.checkClone&&ec.test(je))return h.each(function(X){var Mt=h.eq(X);wt&&(_[0]=je.call(this,X,Mt.html())),On(Mt,_,E,A)});if(Pe&&($=(B=Lr(_,h[0].ownerDocument,!1,h,A)).firstChild,1===B.childNodes.length&&(B=$),$||A)){for(le=(V=m.map(tn(B,"script"),tc)).length;Se<Pe;Se++)se=B,Se!==be&&(se=m.clone(se,!0,!0),le&&m.merge(V,tn(se,"script"))),E.call(h[Se],se,Se);if(le)for(ve=V[V.length-1].ownerDocument,m.map(V,nc),Se=0;Se<le;Se++)ft.test((se=V[Se]).type||"")&&!Ye.access(se,"globalEval")&&m.contains(ve,se)&&(se.src&&"module"!==(se.type||"").toLowerCase()?m._evalUrl&&!se.noModule&&m._evalUrl(se.src,{nonce:se.nonce||se.getAttribute("nonce")},ve):x(se.textContent.replace(Ca,""),se,ve))}return h}function Mn(h,_,E){for(var A,B=_?m.filter(_,h):h,$=0;null!=(A=B[$]);$++)E||1!==A.nodeType||m.cleanData(tn(A)),A.parentNode&&(E&&zo(A)&&Kn(tn(A,"script")),A.parentNode.removeChild(A));return h}m.extend({htmlPrefilter:function(h){return h},clone:function(h,_,E){var A,B,$,V,le,se,ve,Se=h.cloneNode(!0),Pe=zo(h);if(!(I.noCloneChecked||1!==h.nodeType&&11!==h.nodeType||m.isXMLDoc(h)))for(V=tn(Se),A=0,B=($=tn(h)).length;A<B;A++)le=$[A],"input"===(ve=(se=V[A]).nodeName.toLowerCase())&&ln.test(le.type)?se.checked=le.checked:"input"!==ve&&"textarea"!==ve||(se.defaultValue=le.defaultValue);if(_)if(E)for($=$||tn(h),V=V||tn(Se),A=0,B=$.length;A<B;A++)ka($[A],V[A]);else ka(h,Se);return 0<(V=tn(Se,"script")).length&&Kn(V,!Pe&&tn(h,"script")),Se},cleanData:function(h){for(var _,E,A,B=m.event.special,$=0;void 0!==(E=h[$]);$++)if(Je(E)){if(_=E[Ye.expando]){if(_.events)for(A in _.events)B[A]?m.event.remove(E,A):m.removeEvent(E,A,_.handle);E[Ye.expando]=void 0}E[Qt.expando]&&(E[Qt.expando]=void 0)}}}),m.fn.extend({detach:function(h){return Mn(this,h,!0)},remove:function(h){return Mn(this,h)},text:function(h){return W(this,function(_){return void 0===_?m.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=_)})},null,h,arguments.length)},append:function(){return On(this,arguments,function(h){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||_i(this,h).appendChild(h)})},prepend:function(){return On(this,arguments,function(h){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var _=_i(this,h);_.insertBefore(h,_.firstChild)}})},before:function(){return On(this,arguments,function(h){this.parentNode&&this.parentNode.insertBefore(h,this)})},after:function(){return On(this,arguments,function(h){this.parentNode&&this.parentNode.insertBefore(h,this.nextSibling)})},empty:function(){for(var h,_=0;null!=(h=this[_]);_++)1===h.nodeType&&(m.cleanData(tn(h,!1)),h.textContent="");return this},clone:function(h,_){return h=null!=h&&h,_=_??h,this.map(function(){return m.clone(this,h,_)})},html:function(h){return W(this,function(_){var E=this[0]||{},A=0,B=this.length;if(void 0===_&&1===E.nodeType)return E.innerHTML;if("string"==typeof _&&!ri.test(_)&&!kn[(Gt.exec(_)||["",""])[1].toLowerCase()]){_=m.htmlPrefilter(_);try{for(;A<B;A++)1===(E=this[A]||{}).nodeType&&(m.cleanData(tn(E,!1)),E.innerHTML=_);E=0}catch{}}E&&this.empty().append(_)},null,h,arguments.length)},replaceWith:function(){var h=[];return On(this,arguments,function(_){var E=this.parentNode;m.inArray(this,h)<0&&(m.cleanData(tn(this)),E&&E.replaceChild(_,this))},h)}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(h,_){m.fn[h]=function(E){for(var A,B=[],$=m(E),V=$.length-1,le=0;le<=V;le++)A=le===V?this:this.clone(!0),m($[le])[_](A),at.apply(B,A.get());return this.pushStack(B)}});var Wi=new RegExp("^("+co+")(?!px)[a-z%]+$","i"),Vi=/^--/,To=function(h){var _=h.ownerDocument.defaultView;return _&&_.opener||(_=j),_.getComputedStyle(h)},rc=function(h,_,E){var A,B,$={};for(B in _)$[B]=h.style[B],h.style[B]=_[B];for(B in A=E.call(h),_)h.style[B]=$[B];return A},oc=new RegExp(or.join("|"),"i");function xr(h,_,E){var A,B,$,V,le=Vi.test(_),se=h.style;return(E=E||To(h))&&(V=E.getPropertyValue(_)||E[_],le&&V&&(V=V.replace(we,"$1")||void 0),""!==V||zo(h)||(V=m.style(h,_)),!I.pixelBoxStyles()&&Wi.test(V)&&oc.test(_)&&(A=se.width,B=se.minWidth,$=se.maxWidth,se.minWidth=se.maxWidth=se.width=V,V=E.width,se.width=A,se.minWidth=B,se.maxWidth=$)),void 0!==V?V+"":V}function yi(h,_){return{get:function(){if(!h())return(this.get=_).apply(this,arguments);delete this.get}}}!function(){function h(){if(ve){se.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",ve.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",An.appendChild(se).appendChild(ve);var Se=j.getComputedStyle(ve);E="1%"!==Se.top,le=12===_(Se.marginLeft),ve.style.right="60%",$=36===_(Se.right),A=36===_(Se.width),ve.style.position="absolute",B=12===_(ve.offsetWidth/3),An.removeChild(se),ve=null}}function _(Se){return Math.round(parseFloat(Se))}var E,A,B,$,V,le,se=k.createElement("div"),ve=k.createElement("div");ve.style&&(ve.style.backgroundClip="content-box",ve.cloneNode(!0).style.backgroundClip="",I.clearCloneStyle="content-box"===ve.style.backgroundClip,m.extend(I,{boxSizingReliable:function(){return h(),A},pixelBoxStyles:function(){return h(),$},pixelPosition:function(){return h(),E},reliableMarginLeft:function(){return h(),le},scrollboxSize:function(){return h(),B},reliableTrDimensions:function(){var Se,Pe,be,je;return null==V&&(Se=k.createElement("table"),Pe=k.createElement("tr"),be=k.createElement("div"),Se.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Pe.style.cssText="box-sizing:content-box;border:1px solid",Pe.style.height="1px",be.style.height="9px",be.style.display="block",An.appendChild(Se).appendChild(Pe).appendChild(be),je=j.getComputedStyle(Pe),V=parseInt(je.height,10)+parseInt(je.borderTopWidth,10)+parseInt(je.borderBottomWidth,10)===Pe.offsetHeight,An.removeChild(Se)),V}}))}();var Ki=["Webkit","Moz","ms"],Ds=k.createElement("div").style,go={};function Sa(h){return m.cssProps[h]||go[h]||(h in Ds?h:go[h]=function(E){for(var A=E[0].toUpperCase()+E.slice(1),B=Ki.length;B--;)if((E=Ki[B]+A)in Ds)return E}(h)||h)}var iu=/^(none|table(?!-c[ea]).+)/,ic={position:"absolute",visibility:"hidden",display:"block"},Ea={letterSpacing:"0",fontWeight:"400"};function Ta(h,_,E){var A=Nn.exec(_);return A?Math.max(0,A[2]-(E||0))+(A[3]||"px"):_}function Ls(h,_,E,A,B,$){var V="width"===_?1:0,le=0,se=0,ve=0;if(E===(A?"border":"content"))return 0;for(;V<4;V+=2)"margin"===E&&(ve+=m.css(h,E+or[V],!0,B)),A?("content"===E&&(se-=m.css(h,"padding"+or[V],!0,B)),"margin"!==E&&(se-=m.css(h,"border"+or[V]+"Width",!0,B))):(se+=m.css(h,"padding"+or[V],!0,B),"padding"!==E?se+=m.css(h,"border"+or[V]+"Width",!0,B):le+=m.css(h,"border"+or[V]+"Width",!0,B));return!A&&0<=$&&(se+=Math.max(0,Math.ceil(h["offset"+_[0].toUpperCase()+_.slice(1)]-$-se-le-.5))||0),se+ve}function Na(h,_,E){var A=To(h),B=(!I.boxSizingReliable()||E)&&"border-box"===m.css(h,"boxSizing",!1,A),$=B,V=xr(h,_,A),le="offset"+_[0].toUpperCase()+_.slice(1);if(Wi.test(V)){if(!E)return V;V="auto"}return(!I.boxSizingReliable()&&B||!I.reliableTrDimensions()&&F(h,"tr")||"auto"===V||!parseFloat(V)&&"inline"===m.css(h,"display",!1,A))&&h.getClientRects().length&&(B="border-box"===m.css(h,"boxSizing",!1,A),($=le in h)&&(V=h[le])),(V=parseFloat(V)||0)+Ls(h,_,E||(B?"border":"content"),$,A,V)+"px"}function Br(h,_,E,A,B){return new Br.prototype.init(h,_,E,A,B)}m.extend({cssHooks:{opacity:{get:function(h,_){if(_){var E=xr(h,"opacity");return""===E?"1":E}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(h,_,E,A){if(h&&3!==h.nodeType&&8!==h.nodeType&&h.style){var B,$,V,le=$e(_),se=Vi.test(_),ve=h.style;if(se||(_=Sa(le)),V=m.cssHooks[_]||m.cssHooks[le],void 0===E)return V&&"get"in V&&void 0!==(B=V.get(h,!1,A))?B:ve[_];"string"==($=typeof E)&&(B=Nn.exec(E))&&B[1]&&(E=me(h,_,B),$="number"),null!=E&&E==E&&("number"!==$||se||(E+=B&&B[3]||(m.cssNumber[le]?"":"px")),I.clearCloneStyle||""!==E||0!==_.indexOf("background")||(ve[_]="inherit"),V&&"set"in V&&void 0===(E=V.set(h,E,A))||(se?ve.setProperty(_,E):ve[_]=E))}},css:function(h,_,E,A){var B,$,V,le=$e(_);return Vi.test(_)||(_=Sa(le)),(V=m.cssHooks[_]||m.cssHooks[le])&&"get"in V&&(B=V.get(h,!0,E)),void 0===B&&(B=xr(h,_,A)),"normal"===B&&_ in Ea&&(B=Ea[_]),""===E||E?($=parseFloat(B),!0===E||isFinite($)?$||0:B):B}}),m.each(["height","width"],function(h,_){m.cssHooks[_]={get:function(E,A,B){if(A)return!iu.test(m.css(E,"display"))||E.getClientRects().length&&E.getBoundingClientRect().width?Na(E,_,B):rc(E,ic,function(){return Na(E,_,B)})},set:function(E,A,B){var $,V=To(E),le=!I.scrollboxSize()&&"absolute"===V.position,se=(le||B)&&"border-box"===m.css(E,"boxSizing",!1,V),ve=B?Ls(E,_,B,se,V):0;return se&&le&&(ve-=Math.ceil(E["offset"+_[0].toUpperCase()+_.slice(1)]-parseFloat(V[_])-Ls(E,_,"border",!1,V)-.5)),ve&&($=Nn.exec(A))&&"px"!==($[3]||"px")&&(E.style[_]=A,A=m.css(E,_)),Ta(0,A,ve)}}}),m.cssHooks.marginLeft=yi(I.reliableMarginLeft,function(h,_){if(_)return(parseFloat(xr(h,"marginLeft"))||h.getBoundingClientRect().left-rc(h,{marginLeft:0},function(){return h.getBoundingClientRect().left}))+"px"}),m.each({margin:"",padding:"",border:"Width"},function(h,_){m.cssHooks[h+_]={expand:function(E){for(var A=0,B={},$="string"==typeof E?E.split(" "):[E];A<4;A++)B[h+or[A]+_]=$[A]||$[A-2]||$[0];return B}},"margin"!==h&&(m.cssHooks[h+_].set=Ta)}),m.fn.extend({css:function(h,_){return W(this,function(E,A,B){var $,V,le={},se=0;if(Array.isArray(A)){for($=To(E),V=A.length;se<V;se++)le[A[se]]=m.css(E,A[se],!1,$);return le}return void 0!==B?m.style(E,A,B):m.css(E,A)},h,_,1<arguments.length)}}),((m.Tween=Br).prototype={constructor:Br,init:function(h,_,E,A,B,$){this.elem=h,this.prop=E,this.easing=B||m.easing._default,this.options=_,this.start=this.now=this.cur(),this.end=A,this.unit=$||(m.cssNumber[E]?"":"px")},cur:function(){var h=Br.propHooks[this.prop];return h&&h.get?h.get(this):Br.propHooks._default.get(this)},run:function(h){var _,E=Br.propHooks[this.prop];return this.pos=_=this.options.duration?m.easing[this.easing](h,this.options.duration*h,0,1,this.options.duration):h,this.now=(this.end-this.start)*_+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),E&&E.set?E.set(this):Br.propHooks._default.set(this),this}}).init.prototype=Br.prototype,(Br.propHooks={_default:{get:function(h){var _;return 1!==h.elem.nodeType||null!=h.elem[h.prop]&&null==h.elem.style[h.prop]?h.elem[h.prop]:(_=m.css(h.elem,h.prop,""))&&"auto"!==_?_:0},set:function(h){m.fx.step[h.prop]?m.fx.step[h.prop](h):1!==h.elem.nodeType||!m.cssHooks[h.prop]&&null==h.elem.style[Sa(h.prop)]?h.elem[h.prop]=h.now:m.style(h.elem,h.prop,h.now+h.unit)}}}).scrollTop=Br.propHooks.scrollLeft={set:function(h){h.elem.nodeType&&h.elem.parentNode&&(h.elem[h.prop]=h.now)}},m.easing={linear:function(h){return h},swing:function(h){return.5-Math.cos(h*Math.PI)/2},_default:"swing"},m.fx=Br.prototype.init,m.fx.step={};var oi,Bs,bi,Aa,sc=/^(?:toggle|show|hide)$/,ac=/queueHooks$/;function Ms(){Bs&&(!1===k.hidden&&j.requestAnimationFrame?j.requestAnimationFrame(Ms):j.setTimeout(Ms,m.fx.interval),m.fx.tick())}function Oa(){return j.setTimeout(function(){oi=void 0}),oi=Date.now()}function Yi(h,_){var E,A=0,B={height:h};for(_=_?1:0;A<4;A+=2-_)B["margin"+(E=or[A])]=B["padding"+E]=h;return _&&(B.opacity=B.width=h),B}function Ra(h,_,E){for(var A,B=(Mr.tweeners[_]||[]).concat(Mr.tweeners["*"]),$=0,V=B.length;$<V;$++)if(A=B[$].call(E,_,h))return A}function Mr(h,_,E){var A,B,$=0,V=Mr.prefilters.length,le=m.Deferred().always(function(){delete se.elem}),se=function(){if(B)return!1;for(var Pe=oi||Oa(),be=Math.max(0,ve.startTime+ve.duration-Pe),je=1-(be/ve.duration||0),wt=0,X=ve.tweens.length;wt<X;wt++)ve.tweens[wt].run(je);return le.notifyWith(h,[ve,je,be]),je<1&&X?be:(X||le.notifyWith(h,[ve,1,0]),le.resolveWith(h,[ve]),!1)},ve=le.promise({elem:h,props:m.extend({},_),opts:m.extend(!0,{specialEasing:{},easing:m.easing._default},E),originalProperties:_,originalOptions:E,startTime:oi||Oa(),duration:E.duration,tweens:[],createTween:function(Pe,be){var je=m.Tween(h,ve.opts,Pe,be,ve.opts.specialEasing[Pe]||ve.opts.easing);return ve.tweens.push(je),je},stop:function(Pe){var be=0,je=Pe?ve.tweens.length:0;if(B)return this;for(B=!0;be<je;be++)ve.tweens[be].run(1);return Pe?(le.notifyWith(h,[ve,1,0]),le.resolveWith(h,[ve,Pe])):le.rejectWith(h,[ve,Pe]),this}}),Se=ve.props;for(function(Pe,be){var je,wt,X,Mt,Ln;for(je in Pe)if(X=be[wt=$e(je)],Mt=Pe[je],Array.isArray(Mt)&&(X=Mt[1],Mt=Pe[je]=Mt[0]),je!==wt&&(Pe[wt]=Mt,delete Pe[je]),(Ln=m.cssHooks[wt])&&"expand"in Ln)for(je in Mt=Ln.expand(Mt),delete Pe[wt],Mt)je in Pe||(Pe[je]=Mt[je],be[je]=X);else be[wt]=X}(Se,ve.opts.specialEasing);$<V;$++)if(A=Mr.prefilters[$].call(ve,h,Se,ve.opts))return ae(A.stop)&&(m._queueHooks(ve.elem,ve.opts.queue).stop=A.stop.bind(A)),A;return m.map(Se,Ra,ve),ae(ve.opts.start)&&ve.opts.start.call(h,ve),ve.progress(ve.opts.progress).done(ve.opts.done,ve.opts.complete).fail(ve.opts.fail).always(ve.opts.always),m.fx.timer(m.extend(se,{elem:h,anim:ve,queue:ve.opts.queue})),ve}m.Animation=m.extend(Mr,{tweeners:{"*":[function(h,_){var E=this.createTween(h,_);return me(E.elem,h,Nn.exec(_),E),E}]},tweener:function(h,_){ae(h)?(_=h,h=["*"]):h=h.match(ut);for(var E,A=0,B=h.length;A<B;A++)(Mr.tweeners[E=h[A]]=Mr.tweeners[E]||[]).unshift(_)},prefilters:[function(h,_,E){var A,B,$,V,le,se,ve,Se,Pe="width"in _||"height"in _,be=this,je={},wt=h.style,X=h.nodeType&&uo(h),Mt=Ye.get(h,"fxshow");for(A in E.queue||(null==(V=m._queueHooks(h,"fx")).unqueued&&(V.unqueued=0,le=V.empty.fire,V.empty.fire=function(){V.unqueued||le()}),V.unqueued++,be.always(function(){be.always(function(){V.unqueued--,m.queue(h,"fx").length||V.empty.fire()})})),_)if(sc.test(B=_[A])){if(delete _[A],$=$||"toggle"===B,B===(X?"hide":"show")){if("show"!==B||!Mt||void 0===Mt[A])continue;X=!0}je[A]=Mt&&Mt[A]||m.style(h,A)}if((se=!m.isEmptyObject(_))||!m.isEmptyObject(je))for(A in Pe&&1===h.nodeType&&(E.overflow=[wt.overflow,wt.overflowX,wt.overflowY],null==(ve=Mt&&Mt.display)&&(ve=Ye.get(h,"display")),"none"===(Se=m.css(h,"display"))&&(ve?Se=ve:(Yt([h],!0),ve=h.style.display||ve,Se=m.css(h,"display"),Yt([h]))),("inline"===Se||"inline-block"===Se&&null!=ve)&&"none"===m.css(h,"float")&&(se||(be.done(function(){wt.display=ve}),null==ve&&(ve="none"===(Se=wt.display)?"":Se)),wt.display="inline-block")),E.overflow&&(wt.overflow="hidden",be.always(function(){wt.overflow=E.overflow[0],wt.overflowX=E.overflow[1],wt.overflowY=E.overflow[2]})),se=!1,je)se||(Mt?"hidden"in Mt&&(X=Mt.hidden):Mt=Ye.access(h,"fxshow",{display:ve}),$&&(Mt.hidden=!X),X&&Yt([h],!0),be.done(function(){for(A in X||Yt([h]),Ye.remove(h,"fxshow"),je)m.style(h,A,je[A])})),se=Ra(X?Mt[A]:0,A,be),A in Mt||(Mt[A]=se.start,X&&(se.end=se.start,se.start=0))}],prefilter:function(h,_){_?Mr.prefilters.unshift(h):Mr.prefilters.push(h)}}),m.speed=function(h,_,E){var A=h&&"object"==typeof h?m.extend({},h):{complete:E||!E&&_||ae(h)&&h,duration:h,easing:E&&_||_&&!ae(_)&&_};return m.fx.off?A.duration=0:"number"!=typeof A.duration&&(A.duration=A.duration in m.fx.speeds?m.fx.speeds[A.duration]:m.fx.speeds._default),null!=A.queue&&!0!==A.queue||(A.queue="fx"),A.old=A.complete,A.complete=function(){ae(A.old)&&A.old.call(this),A.queue&&m.dequeue(this,A.queue)},A},m.fn.extend({fadeTo:function(h,_,E,A){return this.filter(uo).css("opacity",0).show().end().animate({opacity:_},h,E,A)},animate:function(h,_,E,A){var B=m.isEmptyObject(h),$=m.speed(_,E,A),V=function(){var le=Mr(this,m.extend({},h),$);(B||Ye.get(this,"finish"))&&le.stop(!0)};return V.finish=V,B||!1===$.queue?this.each(V):this.queue($.queue,V)},stop:function(h,_,E){var A=function(B){var $=B.stop;delete B.stop,$(E)};return"string"!=typeof h&&(E=_,_=h,h=void 0),_&&this.queue(h||"fx",[]),this.each(function(){var B=!0,$=null!=h&&h+"queueHooks",V=m.timers,le=Ye.get(this);if($)le[$]&&le[$].stop&&A(le[$]);else for($ in le)le[$]&&le[$].stop&&ac.test($)&&A(le[$]);for($=V.length;$--;)V[$].elem!==this||null!=h&&V[$].queue!==h||(V[$].anim.stop(E),B=!1,V.splice($,1));!B&&E||m.dequeue(this,h)})},finish:function(h){return!1!==h&&(h=h||"fx"),this.each(function(){var _,E=Ye.get(this),A=E[h+"queue"],B=E[h+"queueHooks"],$=m.timers,V=A?A.length:0;for(E.finish=!0,m.queue(this,h,[]),B&&B.stop&&B.stop.call(this,!0),_=$.length;_--;)$[_].elem===this&&$[_].queue===h&&($[_].anim.stop(!0),$.splice(_,1));for(_=0;_<V;_++)A[_]&&A[_].finish&&A[_].finish.call(this);delete E.finish})}}),m.each(["toggle","show","hide"],function(h,_){var E=m.fn[_];m.fn[_]=function(A,B,$){return null==A||"boolean"==typeof A?E.apply(this,arguments):this.animate(Yi(_,!0),A,B,$)}}),m.each({slideDown:Yi("show"),slideUp:Yi("hide"),slideToggle:Yi("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(h,_){m.fn[h]=function(E,A,B){return this.animate(_,E,A,B)}}),m.timers=[],m.fx.tick=function(){var h,_=0,E=m.timers;for(oi=Date.now();_<E.length;_++)(h=E[_])()||E[_]!==h||E.splice(_--,1);E.length||m.fx.stop(),oi=void 0},m.fx.timer=function(h){m.timers.push(h),m.fx.start()},m.fx.interval=13,m.fx.start=function(){Bs||(Bs=!0,Ms())},m.fx.stop=function(){Bs=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(h,_){return h=m.fx&&m.fx.speeds[h]||h,this.queue(_=_||"fx",function(E,A){var B=j.setTimeout(E,h);A.stop=function(){j.clearTimeout(B)}})},bi=k.createElement("input"),Aa=k.createElement("select").appendChild(k.createElement("option")),bi.type="checkbox",I.checkOn=""!==bi.value,I.optSelected=Aa.selected,(bi=k.createElement("input")).value="t",bi.type="radio",I.radioValue="t"===bi.value;var lc,Xi=m.expr.attrHandle;m.fn.extend({attr:function(h,_){return W(this,m.attr,h,_,1<arguments.length)},removeAttr:function(h){return this.each(function(){m.removeAttr(this,h)})}}),m.extend({attr:function(h,_,E){var A,B,$=h.nodeType;if(3!==$&&8!==$&&2!==$)return typeof h.getAttribute>"u"?m.prop(h,_,E):(1===$&&m.isXMLDoc(h)||(B=m.attrHooks[_.toLowerCase()]||(m.expr.match.bool.test(_)?lc:void 0)),void 0!==E?null===E?void m.removeAttr(h,_):B&&"set"in B&&void 0!==(A=B.set(h,E,_))?A:(h.setAttribute(_,E+""),E):B&&"get"in B&&null!==(A=B.get(h,_))?A:null==(A=m.find.attr(h,_))?void 0:A)},attrHooks:{type:{set:function(h,_){if(!I.radioValue&&"radio"===_&&F(h,"input")){var E=h.value;return h.setAttribute("type",_),E&&(h.value=E),_}}}},removeAttr:function(h,_){var E,A=0,B=_&&_.match(ut);if(B&&1===h.nodeType)for(;E=B[A++];)h.removeAttribute(E)}}),lc={set:function(h,_,E){return!1===_?m.removeAttr(h,E):h.setAttribute(E,E),E}},m.each(m.expr.match.bool.source.match(/\w+/g),function(h,_){var E=Xi[_]||m.find.attr;Xi[_]=function(A,B,$){var V,le,se=B.toLowerCase();return $||(le=Xi[se],Xi[se]=V,V=null!=E(A,B,$)?se:null,Xi[se]=le),V}});var su=/^(?:input|select|textarea|button)$/i,au=/^(?:a|area)$/i;function dr(h){return(h.match(ut)||[]).join(" ")}function ii(h){return h.getAttribute&&h.getAttribute("class")||""}function Gi(h){return Array.isArray(h)?h:"string"==typeof h&&h.match(ut)||[]}m.fn.extend({prop:function(h,_){return W(this,m.prop,h,_,1<arguments.length)},removeProp:function(h){return this.each(function(){delete this[m.propFix[h]||h]})}}),m.extend({prop:function(h,_,E){var A,B,$=h.nodeType;if(3!==$&&8!==$&&2!==$)return 1===$&&m.isXMLDoc(h)||(B=m.propHooks[_=m.propFix[_]||_]),void 0!==E?B&&"set"in B&&void 0!==(A=B.set(h,E,_))?A:h[_]=E:B&&"get"in B&&null!==(A=B.get(h,_))?A:h[_]},propHooks:{tabIndex:{get:function(h){var _=m.find.attr(h,"tabindex");return _?parseInt(_,10):su.test(h.nodeName)||au.test(h.nodeName)&&h.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),I.optSelected||(m.propHooks.selected={get:function(h){return null},set:function(h){}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this}),m.fn.extend({addClass:function(h){var _,E,A,B,$,V;return ae(h)?this.each(function(le){m(this).addClass(h.call(this,le,ii(this)))}):(_=Gi(h)).length?this.each(function(){if(A=ii(this),E=1===this.nodeType&&" "+dr(A)+" "){for($=0;$<_.length;$++)E.indexOf(" "+(B=_[$])+" ")<0&&(E+=B+" ");V=dr(E),A!==V&&this.setAttribute("class",V)}}):this},removeClass:function(h){var _,E,A,B,$,V;return ae(h)?this.each(function(le){m(this).removeClass(h.call(this,le,ii(this)))}):arguments.length?(_=Gi(h)).length?this.each(function(){if(A=ii(this),E=1===this.nodeType&&" "+dr(A)+" "){for($=0;$<_.length;$++)for(B=_[$];-1<E.indexOf(" "+B+" ");)E=E.replace(" "+B+" "," ");V=dr(E),A!==V&&this.setAttribute("class",V)}}):this:this.attr("class","")},toggleClass:function(h,_){var E,A,B,$,V=typeof h,le="string"===V||Array.isArray(h);return ae(h)?this.each(function(se){m(this).toggleClass(h.call(this,se,ii(this),_),_)}):"boolean"==typeof _&&le?_?this.addClass(h):this.removeClass(h):(E=Gi(h),this.each(function(){if(le)for($=m(this),B=0;B<E.length;B++)$.hasClass(A=E[B])?$.removeClass(A):$.addClass(A);else void 0!==h&&"boolean"!==V||((A=ii(this))&&Ye.set(this,"__className__",A),this.setAttribute&&this.setAttribute("class",A||!1===h?"":Ye.get(this,"__className__")||""))}))},hasClass:function(h){var _,E,A=0;for(_=" "+h+" ";E=this[A++];)if(1===E.nodeType&&-1<(" "+dr(ii(E))+" ").indexOf(_))return!0;return!1}});var mo=/\r/g;m.fn.extend({val:function(h){var _,E,A,B=this[0];return arguments.length?(A=ae(h),this.each(function($){var V;1===this.nodeType&&(null==(V=A?h.call(this,$,m(this).val()):h)?V="":"number"==typeof V?V+="":Array.isArray(V)&&(V=m.map(V,function(le){return null==le?"":le+""})),(_=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()])&&"set"in _&&void 0!==_.set(this,V,"value")||(this.value=V))})):B?(_=m.valHooks[B.type]||m.valHooks[B.nodeName.toLowerCase()])&&"get"in _&&void 0!==(E=_.get(B,"value"))?E:"string"==typeof(E=B.value)?E.replace(mo,""):E??"":void 0}}),m.extend({valHooks:{option:{get:function(h){return m.find.attr(h,"value")??dr(m.text(h))}},select:{get:function(h){var _,E,A,B=h.options,$=h.selectedIndex,V="select-one"===h.type,le=V?null:[],se=V?$+1:B.length;for(A=$<0?se:V?$:0;A<se;A++)if(((E=B[A]).selected||A===$)&&!E.disabled&&(!E.parentNode.disabled||!F(E.parentNode,"optgroup"))){if(_=m(E).val(),V)return _;le.push(_)}return le},set:function(h,_){for(var E,A,B=h.options,$=m.makeArray(_),V=B.length;V--;)((A=B[V]).selected=-1<m.inArray(m.valHooks.option.get(A),$))&&(E=!0);return E||(h.selectedIndex=-1),$}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(h,_){if(Array.isArray(_))return h.checked=-1<m.inArray(m(h).val(),_)}},I.checkOn||(m.valHooks[this].get=function(h){return null===h.getAttribute("value")?"on":h.value})});var Cr=j.location,Fo={guid:Date.now()},ja=/\?/;m.parseXML=function(h){var _,E;if(!h||"string"!=typeof h)return null;try{_=(new j.DOMParser).parseFromString(h,"text/xml")}catch{}return E=_&&_.getElementsByTagName("parsererror")[0],_&&!E||m.error("Invalid XML: "+(E?m.map(E.childNodes,function(A){return A.textContent}).join("\n"):h)),_};var $t=/^(?:focusinfocus|focusoutblur)$/,cc=function(h){h.stopPropagation()};m.extend(m.event,{trigger:function(h,_,E,A){var B,$,V,le,se,ve,Se,Pe,be=[E||k],je=wn.call(h,"type")?h.type:h,wt=wn.call(h,"namespace")?h.namespace.split("."):[];if($=Pe=V=E=E||k,3!==E.nodeType&&8!==E.nodeType&&!$t.test(je+m.event.triggered)&&(-1<je.indexOf(".")&&(je=(wt=je.split(".")).shift(),wt.sort()),se=je.indexOf(":")<0&&"on"+je,(h=h[m.expando]?h:new m.Event(je,"object"==typeof h&&h)).isTrigger=A?2:3,h.namespace=wt.join("."),h.rnamespace=h.namespace?new RegExp("(^|\\.)"+wt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h.result=void 0,h.target||(h.target=E),_=null==_?[h]:m.makeArray(_,[h]),Se=m.event.special[je]||{},A||!Se.trigger||!1!==Se.trigger.apply(E,_))){if(!A&&!Se.noBubble&&!u(E)){for($t.test((le=Se.delegateType||je)+je)||($=$.parentNode);$;$=$.parentNode)be.push($),V=$;V===(E.ownerDocument||k)&&be.push(V.defaultView||V.parentWindow||j)}for(B=0;($=be[B++])&&!h.isPropagationStopped();)Pe=$,h.type=1<B?le:Se.bindType||je,(ve=(Ye.get($,"events")||Object.create(null))[h.type]&&Ye.get($,"handle"))&&ve.apply($,_),(ve=se&&$[se])&&ve.apply&&Je($)&&(h.result=ve.apply($,_),!1===h.result&&h.preventDefault());return h.type=je,A||h.isDefaultPrevented()||Se._default&&!1!==Se._default.apply(be.pop(),_)||!Je(E)||se&&ae(E[je])&&!u(E)&&((V=E[se])&&(E[se]=null),m.event.triggered=je,h.isPropagationStopped()&&Pe.addEventListener(je,cc),E[je](),h.isPropagationStopped()&&Pe.removeEventListener(je,cc),m.event.triggered=void 0,V&&(E[se]=V)),h.result}},simulate:function(h,_,E){var A=m.extend(new m.Event,E,{type:h,isSimulated:!0});m.event.trigger(A,null,_)}}),m.fn.extend({trigger:function(h,_){return this.each(function(){m.event.trigger(h,_,this)})},triggerHandler:function(h,_){var E=this[0];if(E)return m.event.trigger(h,_,E,!0)}});var dc=/\[\]$/,Pa=/\r?\n/g,Be=/^(?:submit|button|image|reset|file)$/i,wi=/^(?:input|select|textarea|keygen)/i;function Is(h,_,E,A){var B;if(Array.isArray(_))m.each(_,function($,V){E||dc.test(h)?A(h,V):Is(h+"["+("object"==typeof V&&null!=V?$:"")+"]",V,E,A)});else if(E||"object"!==C(_))A(h,_);else for(B in _)Is(h+"["+B+"]",_[B],E,A)}m.param=function(h,_){var E,A=[],B=function($,V){var le=ae(V)?V():V;A[A.length]=encodeURIComponent($)+"="+encodeURIComponent(le??"")};if(null==h)return"";if(Array.isArray(h)||h.jquery&&!m.isPlainObject(h))m.each(h,function(){B(this.name,this.value)});else for(E in h)Is(E,h[E],_,B);return A.join("&")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var h=m.prop(this,"elements");return h?m.makeArray(h):this}).filter(function(){var h=this.type;return this.name&&!m(this).is(":disabled")&&wi.test(this.nodeName)&&!Be.test(h)&&(this.checked||!ln.test(h))}).map(function(h,_){var E=m(this).val();return null==E?null:Array.isArray(E)?m.map(E,function(A){return{name:_.name,value:A.replace(Pa,"\r\n")}}):{name:_.name,value:E.replace(Pa,"\r\n")}}).get()}});var er=/%20/g,xi=/#.*$/,lu=/([?&])_=[^&]*/,uc=/^(.*?):[ \t]*([^\r\n]*)$/gm,cu=/^(?:GET|HEAD)$/,du=/^\/\//,It={},zs={},Ji="*/".concat("*"),Ci=k.createElement("a");function vr(h){return function(_,E){"string"!=typeof _&&(E=_,_="*");var A,B=0,$=_.toLowerCase().match(ut)||[];if(ae(E))for(;A=$[B++];)"+"===A[0]?(A=A.slice(1)||"*",(h[A]=h[A]||[]).unshift(E)):(h[A]=h[A]||[]).push(E)}}function kr(h,_,E,A){var B={},$=h===zs;function V(le){var se;return B[le]=!0,m.each(h[le]||[],function(ve,Se){var Pe=Se(_,E,A);return"string"!=typeof Pe||$||B[Pe]?$?!(se=Pe):void 0:(_.dataTypes.unshift(Pe),V(Pe),!1)}),se}return V(_.dataTypes[0])||!B["*"]&&V("*")}function Da(h,_){var E,A,B=m.ajaxSettings.flatOptions||{};for(E in _)void 0!==_[E]&&((B[E]?h:A||(A={}))[E]=_[E]);return A&&m.extend(!0,h,A),h}Ci.href=Cr.href,m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Cr.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Cr.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ji,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(h,_){return _?Da(Da(h,m.ajaxSettings),_):Da(m.ajaxSettings,h)},ajaxPrefilter:vr(It),ajaxTransport:vr(zs),ajax:function(h,_){"object"==typeof h&&(_=h,h=void 0);var E,A,B,$,V,le,se,ve,Se,Pe,be=m.ajaxSetup({},_=_||{}),je=be.context||be,wt=be.context&&(je.nodeType||je.jquery)?m(je):m.event,X=m.Deferred(),Mt=m.Callbacks("once memory"),Ln=be.statusCode||{},cn={},Ur={},Lt="canceled",Ht={readyState:0,getResponseHeader:function(Ut){var _n;if(se){if(!$)for($={};_n=uc.exec(B);)$[_n[1].toLowerCase()+" "]=($[_n[1].toLowerCase()+" "]||[]).concat(_n[2]);_n=$[Ut.toLowerCase()+" "]}return null==_n?null:_n.join(", ")},getAllResponseHeaders:function(){return se?B:null},setRequestHeader:function(Ut,_n){return null==se&&(Ut=Ur[Ut.toLowerCase()]=Ur[Ut.toLowerCase()]||Ut,cn[Ut]=_n),this},overrideMimeType:function(Ut){return null==se&&(be.mimeType=Ut),this},statusCode:function(Ut){var _n;if(Ut)if(se)Ht.always(Ut[Ht.status]);else for(_n in Ut)Ln[_n]=[Ln[_n],Ut[_n]];return this},abort:function(Ut){var _n=Ut||Lt;return E&&E.abort(_n),Ho(0,_n),this}};if(X.promise(Ht),be.url=((h||be.url||Cr.href)+"").replace(du,Cr.protocol+"//"),be.type=_.method||_.type||be.method||be.type,be.dataTypes=(be.dataType||"*").toLowerCase().match(ut)||[""],null==be.crossDomain){le=k.createElement("a");try{le.href=be.url,le.href=le.href,be.crossDomain=Ci.protocol+"//"+Ci.host!=le.protocol+"//"+le.host}catch{be.crossDomain=!0}}if(be.data&&be.processData&&"string"!=typeof be.data&&(be.data=m.param(be.data,be.traditional)),kr(It,be,_,Ht),se)return Ht;for(Se in(ve=m.event&&be.global)&&0==m.active++&&m.event.trigger("ajaxStart"),be.type=be.type.toUpperCase(),be.hasContent=!cu.test(be.type),A=be.url.replace(xi,""),be.hasContent?be.data&&be.processData&&0===(be.contentType||"").indexOf("application/x-www-form-urlencoded")&&(be.data=be.data.replace(er,"+")):(Pe=be.url.slice(A.length),be.data&&(be.processData||"string"==typeof be.data)&&(A+=(ja.test(A)?"&":"?")+be.data,delete be.data),!1===be.cache&&(A=A.replace(lu,"$1"),Pe=(ja.test(A)?"&":"?")+"_="+Fo.guid+++Pe),be.url=A+Pe),be.ifModified&&(m.lastModified[A]&&Ht.setRequestHeader("If-Modified-Since",m.lastModified[A]),m.etag[A]&&Ht.setRequestHeader("If-None-Match",m.etag[A])),(be.data&&be.hasContent&&!1!==be.contentType||_.contentType)&&Ht.setRequestHeader("Content-Type",be.contentType),Ht.setRequestHeader("Accept",be.dataTypes[0]&&be.accepts[be.dataTypes[0]]?be.accepts[be.dataTypes[0]]+("*"!==be.dataTypes[0]?", "+Ji+"; q=0.01":""):be.accepts["*"]),be.headers)Ht.setRequestHeader(Se,be.headers[Se]);if(be.beforeSend&&(!1===be.beforeSend.call(je,Ht,be)||se))return Ht.abort();if(Lt="abort",Mt.add(be.complete),Ht.done(be.success),Ht.fail(be.error),E=kr(zs,be,_,Ht)){if(Ht.readyState=1,ve&&wt.trigger("ajaxSend",[Ht,be]),se)return Ht;be.async&&0<be.timeout&&(V=j.setTimeout(function(){Ht.abort("timeout")},be.timeout));try{se=!1,E.send(cn,Ho)}catch(Ut){if(se)throw Ut;Ho(-1,Ut)}}else Ho(-1,"No Transport");function Ho(Ut,_n,ur,ki){var Wr,Vr,Rr,Ao,si,rn=_n;se||(se=!0,V&&j.clearTimeout(V),E=void 0,B=ki||"",Ht.readyState=0<Ut?4:0,Wr=200<=Ut&&Ut<300||304===Ut,ur&&(Ao=function(Rn,Bn,ir){for(var vo,sr,Nt,zn,dn=Rn.contents,hn=Rn.dataTypes;"*"===hn[0];)hn.shift(),void 0===vo&&(vo=Rn.mimeType||Bn.getResponseHeader("Content-Type"));if(vo)for(sr in dn)if(dn[sr]&&dn[sr].test(vo)){hn.unshift(sr);break}if(hn[0]in ir)Nt=hn[0];else{for(sr in ir){if(!hn[0]||Rn.converters[sr+" "+hn[0]]){Nt=sr;break}zn||(zn=sr)}Nt=Nt||zn}if(Nt)return Nt!==hn[0]&&hn.unshift(Nt),ir[Nt]}(be,Ht,ur)),!Wr&&-1<m.inArray("script",be.dataTypes)&&m.inArray("json",be.dataTypes)<0&&(be.converters["text script"]=function(){}),Ao=function(Rn,Bn,ir,vo){var sr,Nt,zn,dn,hn,_o={},ai=Rn.dataTypes.slice();if(ai[1])for(zn in Rn.converters)_o[zn.toLowerCase()]=Rn.converters[zn];for(Nt=ai.shift();Nt;)if(Rn.responseFields[Nt]&&(ir[Rn.responseFields[Nt]]=Bn),!hn&&vo&&Rn.dataFilter&&(Bn=Rn.dataFilter(Bn,Rn.dataType)),hn=Nt,Nt=ai.shift())if("*"===Nt)Nt=hn;else if("*"!==hn&&hn!==Nt){if(!(zn=_o[hn+" "+Nt]||_o["* "+Nt]))for(sr in _o)if((dn=sr.split(" "))[1]===Nt&&(zn=_o[hn+" "+dn[0]]||_o["* "+dn[0]])){!0===zn?zn=_o[sr]:!0!==_o[sr]&&(Nt=dn[0],ai.unshift(dn[1]));break}if(!0!==zn)if(zn&&Rn.throws)Bn=zn(Bn);else try{Bn=zn(Bn)}catch(Fs){return{state:"parsererror",error:zn?Fs:"No conversion from "+hn+" to "+Nt}}}return{state:"success",data:Bn}}(be,Ao,Ht,Wr),Wr?(be.ifModified&&((si=Ht.getResponseHeader("Last-Modified"))&&(m.lastModified[A]=si),(si=Ht.getResponseHeader("etag"))&&(m.etag[A]=si)),204===Ut||"HEAD"===be.type?rn="nocontent":304===Ut?rn="notmodified":(rn=Ao.state,Vr=Ao.data,Wr=!(Rr=Ao.error))):(Rr=rn,!Ut&&rn||(rn="error",Ut<0&&(Ut=0))),Ht.status=Ut,Ht.statusText=(_n||rn)+"",Wr?X.resolveWith(je,[Vr,rn,Ht]):X.rejectWith(je,[Ht,rn,Rr]),Ht.statusCode(Ln),Ln=void 0,ve&&wt.trigger(Wr?"ajaxSuccess":"ajaxError",[Ht,be,Wr?Vr:Rr]),Mt.fireWith(je,[Ht,rn]),ve&&(wt.trigger("ajaxComplete",[Ht,be]),--m.active||m.event.trigger("ajaxStop")))}return Ht},getJSON:function(h,_,E){return m.get(h,_,E,"json")},getScript:function(h,_){return m.get(h,void 0,_,"script")}}),m.each(["get","post"],function(h,_){m[_]=function(E,A,B,$){return ae(A)&&($=$||B,B=A,A=void 0),m.ajax(m.extend({url:E,type:_,dataType:$,data:A,success:B},m.isPlainObject(E)&&E))}}),m.ajaxPrefilter(function(h){var _;for(_ in h.headers)"content-type"===_.toLowerCase()&&(h.contentType=h.headers[_]||"")}),m._evalUrl=function(h,_,E){return m.ajax({url:h,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(A){m.globalEval(A,_,E)}})},m.fn.extend({wrapAll:function(h){var _;return this[0]&&(ae(h)&&(h=h.call(this[0])),_=m(h,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&_.insertBefore(this[0]),_.map(function(){for(var E=this;E.firstElementChild;)E=E.firstElementChild;return E}).append(this)),this},wrapInner:function(h){return ae(h)?this.each(function(_){m(this).wrapInner(h.call(this,_))}):this.each(function(){var _=m(this),E=_.contents();E.length?E.wrapAll(h):_.append(h)})},wrap:function(h){var _=ae(h);return this.each(function(E){m(this).wrapAll(_?h.call(this,E):h)})},unwrap:function(h){return this.parent(h).not("body").each(function(){m(this).replaceWith(this.childNodes)}),this}}),m.expr.pseudos.hidden=function(h){return!m.expr.pseudos.visible(h)},m.expr.pseudos.visible=function(h){return!!(h.offsetWidth||h.offsetHeight||h.getClientRects().length)},m.ajaxSettings.xhr=function(){try{return new j.XMLHttpRequest}catch{}};var uu={0:200,1223:204},$o=m.ajaxSettings.xhr();I.cors=!!$o&&"withCredentials"in $o,I.ajax=$o=!!$o,m.ajaxTransport(function(h){var _,E;if(I.cors||$o&&!h.crossDomain)return{send:function(A,B){var $,V=h.xhr();if(V.open(h.type,h.url,h.async,h.username,h.password),h.xhrFields)for($ in h.xhrFields)V[$]=h.xhrFields[$];for($ in h.mimeType&&V.overrideMimeType&&V.overrideMimeType(h.mimeType),h.crossDomain||A["X-Requested-With"]||(A["X-Requested-With"]="XMLHttpRequest"),A)V.setRequestHeader($,A[$]);_=function(le){return function(){_&&(_=E=V.onload=V.onerror=V.onabort=V.ontimeout=V.onreadystatechange=null,"abort"===le?V.abort():"error"===le?"number"!=typeof V.status?B(0,"error"):B(V.status,V.statusText):B(uu[V.status]||V.status,V.statusText,"text"!==(V.responseType||"text")||"string"!=typeof V.responseText?{binary:V.response}:{text:V.responseText},V.getAllResponseHeaders()))}},V.onload=_(),E=V.onerror=V.ontimeout=_("error"),void 0!==V.onabort?V.onabort=E:V.onreadystatechange=function(){4===V.readyState&&j.setTimeout(function(){_&&E()})},_=_("abort");try{V.send(h.hasContent&&h.data||null)}catch(le){if(_)throw le}},abort:function(){_&&_()}}}),m.ajaxPrefilter(function(h){h.crossDomain&&(h.contents.script=!1)}),m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(h){return m.globalEval(h),h}}}),m.ajaxPrefilter("script",function(h){void 0===h.cache&&(h.cache=!1),h.crossDomain&&(h.type="GET")}),m.ajaxTransport("script",function(h){var _,E;if(h.crossDomain||h.scriptAttrs)return{send:function(A,B){_=m("<script>").attr(h.scriptAttrs||{}).prop({charset:h.scriptCharset,src:h.url}).on("load error",E=function($){_.remove(),E=null,$&&B("error"===$.type?404:200,$.type)}),k.head.appendChild(_[0])},abort:function(){E&&E()}}});var La,In=[],qr=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var h=In.pop()||m.expando+"_"+Fo.guid++;return this[h]=!0,h}}),m.ajaxPrefilter("json jsonp",function(h,_,E){var A,B,$,V=!1!==h.jsonp&&(qr.test(h.url)?"url":"string"==typeof h.data&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&qr.test(h.data)&&"data");if(V||"jsonp"===h.dataTypes[0])return A=h.jsonpCallback=ae(h.jsonpCallback)?h.jsonpCallback():h.jsonpCallback,V?h[V]=h[V].replace(qr,"$1"+A):!1!==h.jsonp&&(h.url+=(ja.test(h.url)?"&":"?")+h.jsonp+"="+A),h.converters["script json"]=function(){return $||m.error(A+" was not called"),$[0]},h.dataTypes[0]="json",B=j[A],j[A]=function(){$=arguments},E.always(function(){void 0===B?m(j).removeProp(A):j[A]=B,h[A]&&(h.jsonpCallback=_.jsonpCallback,In.push(A)),$&&ae(B)&&B($[0]),$=B=void 0}),"script"}),I.createHTMLDocument=((La=k.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===La.childNodes.length),m.parseHTML=function(h,_,E){return"string"!=typeof h?[]:("boolean"==typeof _&&(E=_,_=!1),_||(I.createHTMLDocument?((A=(_=k.implementation.createHTMLDocument("")).createElement("base")).href=k.location.href,_.head.appendChild(A)):_=k),$=!E&&[],(B=R.exec(h))?[_.createElement(B[1])]:(B=Lr([h],_,$),$&&$.length&&m($).remove(),m.merge([],B.childNodes)));var A,B,$},m.fn.load=function(h,_,E){var A,B,$,V=this,le=h.indexOf(" ");return-1<le&&(A=dr(h.slice(le)),h=h.slice(0,le)),ae(_)?(E=_,_=void 0):_&&"object"==typeof _&&(B="POST"),0<V.length&&m.ajax({url:h,type:B||"GET",dataType:"html",data:_}).done(function(se){$=arguments,V.html(A?m("<div>").append(m.parseHTML(se)).find(A):se)}).always(E&&function(se,ve){V.each(function(){E.apply(this,$||[se.responseText,ve,se])})}),this},m.expr.pseudos.animated=function(h){return m.grep(m.timers,function(_){return h===_.elem}).length},m.offset={setOffset:function(h,_,E){var A,B,$,V,le,se,ve=m.css(h,"position"),Se=m(h),Pe={};"static"===ve&&(h.style.position="relative"),le=Se.offset(),$=m.css(h,"top"),se=m.css(h,"left"),("absolute"===ve||"fixed"===ve)&&-1<($+se).indexOf("auto")?(V=(A=Se.position()).top,B=A.left):(V=parseFloat($)||0,B=parseFloat(se)||0),ae(_)&&(_=_.call(h,E,m.extend({},le))),null!=_.top&&(Pe.top=_.top-le.top+V),null!=_.left&&(Pe.left=_.left-le.left+B),"using"in _?_.using.call(h,Pe):Se.css(Pe)}},m.fn.extend({offset:function(h){if(arguments.length)return void 0===h?this:this.each(function(B){m.offset.setOffset(this,h,B)});var _,E,A=this[0];return A?A.getClientRects().length?{top:(_=A.getBoundingClientRect()).top+(E=A.ownerDocument.defaultView).pageYOffset,left:_.left+E.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var h,_,E,A=this[0],B={top:0,left:0};if("fixed"===m.css(A,"position"))_=A.getBoundingClientRect();else{for(_=this.offset(),E=A.ownerDocument,h=A.offsetParent||E.documentElement;h&&(h===E.body||h===E.documentElement)&&"static"===m.css(h,"position");)h=h.parentNode;h&&h!==A&&1===h.nodeType&&((B=m(h).offset()).top+=m.css(h,"borderTopWidth",!0),B.left+=m.css(h,"borderLeftWidth",!0))}return{top:_.top-B.top-m.css(A,"marginTop",!0),left:_.left-B.left-m.css(A,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var h=this.offsetParent;h&&"static"===m.css(h,"position");)h=h.offsetParent;return h||An})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(h,_){var E="pageYOffset"===_;m.fn[h]=function(A){return W(this,function(B,$,V){var le;if(u(B)?le=B:9===B.nodeType&&(le=B.defaultView),void 0===V)return le?le[_]:B[$];le?le.scrollTo(E?le.pageXOffset:V,E?V:le.pageYOffset):B[$]=V},h,A,arguments.length)}}),m.each(["top","left"],function(h,_){m.cssHooks[_]=yi(I.pixelPosition,function(E,A){if(A)return A=xr(E,_),Wi.test(A)?m(E).position()[_]+"px":A})}),m.each({Height:"height",Width:"width"},function(h,_){m.each({padding:"inner"+h,content:_,"":"outer"+h},function(E,A){m.fn[A]=function(B,$){var V=arguments.length&&(E||"boolean"!=typeof B),le=E||(!0===B||!0===$?"margin":"border");return W(this,function(se,ve,Se){var Pe;return u(se)?0===A.indexOf("outer")?se["inner"+h]:se.document.documentElement["client"+h]:9===se.nodeType?(Pe=se.documentElement,Math.max(se.body["scroll"+h],Pe["scroll"+h],se.body["offset"+h],Pe["offset"+h],Pe["client"+h])):void 0===Se?m.css(se,ve,le):m.style(se,ve,Se,le)},_,V?B:void 0,V)}})}),m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(h,_){m.fn[_]=function(E){return this.on(_,E)}}),m.fn.extend({bind:function(h,_,E){return this.on(h,null,_,E)},unbind:function(h,_){return this.off(h,null,_)},delegate:function(h,_,E,A){return this.on(_,h,E,A)},undelegate:function(h,_,E){return 1===arguments.length?this.off(h,"**"):this.off(_,h||"**",E)},hover:function(h,_){return this.on("mouseenter",h).on("mouseleave",_||h)}}),m.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(h,_){m.fn[_]=function(E,A){return 0<arguments.length?this.on(_,null,E,A):this.trigger(_)}});var Sr=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;m.proxy=function(h,_){var E,A,B;if("string"==typeof _&&(E=h[_],_=h,h=E),ae(h))return A=an.call(arguments,2),(B=function(){return h.apply(_||this,A.concat(an.call(arguments)))}).guid=h.guid=h.guid||m.guid++,B},m.holdReady=function(h){h?m.readyWait++:m.ready(!0)},m.isArray=Array.isArray,m.parseJSON=JSON.parse,m.nodeName=F,m.isFunction=ae,m.isWindow=u,m.camelCase=$e,m.type=C,m.now=Date.now,m.isNumeric=function(h){var _=m.type(h);return("number"===_||"string"===_)&&!isNaN(h-parseFloat(h))},m.trim=function(h){return null==h?"":(h+"").replace(Sr,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return m});var No=j.jQuery,Qi=j.$;return m.noConflict=function(h){return j.$===m&&(j.$=Qi),h&&j.jQuery===m&&(j.jQuery=No),m},typeof jt>"u"&&(j.jQuery=j.$=m),m}),function(j){"use strict";"function"==typeof define&&define.amd?define(["jquery"],j):j("object"==typeof exports?require("jquery"):jQuery)}(function(j,jt){"use strict";if(!j.jstree){var wn,H,on=0,En=!1,an=!1,Tn=!1,at=[],De=j("script:last").attr("src"),Ct=document,vn=Ct.createElement("LI");vn.setAttribute("role","treeitem"),(wn=Ct.createElement("I")).className="jstree-icon jstree-ocl",vn.appendChild(wn),(wn=Ct.createElement("A")).className="jstree-anchor",wn.setAttribute("href","#"),(H=Ct.createElement("I")).className="jstree-icon jstree-themeicon",wn.appendChild(H),vn.appendChild(wn),wn=H=null,j.jstree={version:"3.0.4",defaults:{plugins:[]},plugins:{},path:De&&-1!==De.indexOf("/")?De.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%]/g},j.jstree.create=function(u,k){var g=new j.jstree.core(++on),x=k;return k=j.extend(!0,{},j.jstree.defaults,k),x&&x.plugins&&(k.plugins=x.plugins),j.each(k.plugins,function(C,N){"core"!==C&&(g=g.plugin(N,k[N]))}),g.init(u,k),g},j.jstree.destroy=function(){j(".jstree:jstree").jstree("destroy"),j(document).off(".jstree")},j.jstree.core=function(u){this._id=u,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},j.jstree.reference=function(u){var k=null,g=null;if(u&&u.id&&(u=u.id),!g||!g.length)try{g=j(u)}catch{}if(!g||!g.length)try{g=j("#"+u.replace(j.jstree.idregex,"\\$&"))}catch{}return g&&g.length&&(g=g.closest(".jstree")).length&&(g=g.data("jstree"))?k=g:j(".jstree").each(function(){var x=j(this).data("jstree");return x&&x._model.data[u]?(k=x,!1):void 0}),k},j.fn.jstree=function(u){var k="string"==typeof u,g=Array.prototype.slice.call(arguments,1),x=null;return this.each(function(){var C=j.jstree.reference(this),N=k&&C?C[u]:null;return x=k&&N?N.apply(C,g):null,C||k||u!==jt&&!j.isPlainObject(u)||j(this).data("jstree",new j.jstree.create(this,u)),(C&&!k||!0===u)&&(x=C||!1),(null===x||x===jt)&&void 0}),null!==x&&x!==jt?x:this},j.expr[":"].jstree=j.expr.createPseudo(function(u){return function(k){return j(k).hasClass("jstree")&&j(k).data("jstree")!==jt}}),j.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:j.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1},j.jstree.core.prototype={plugin:function(u,k){var g=j.jstree.plugins[u];return g?(this._data[u]={},g.prototype=this,new g(k,this)):this},init:function(u,k){this._model={data:{"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this.element=j(u).addClass("jstree jstree-"+this._id),this.settings=k,this.element.bind("destroyed",j.proxy(this.teardown,this)),this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this._data.core.li_height=this.get_container_ul().children("li:eq(0)").height()||24,this.trigger("loading"),this.load_node("#")},destroy:function(u){if(this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch{}u||this.element.empty(),this.element.unbind("destroyed",this.teardown),this.teardown()},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){this.element.on("dblclick.jstree",function(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var u=window.getSelection();try{u.removeAllRanges(),u.collapse()}catch{}}}).on("click.jstree",".jstree-ocl",j.proxy(function(u){this.toggle_node(u.target)},this)).on("click.jstree",".jstree-anchor",j.proxy(function(u){u.preventDefault(),u.currentTarget!==document.activeElement&&j(u.currentTarget).focus(),this.activate_node(u.currentTarget,u)},this)).on("keydown.jstree",".jstree-anchor",j.proxy(function(u){if("INPUT"===u.target.tagName)return!0;var k=null;switch(u.which){case 13:case 32:u.type="click",j(u.currentTarget).trigger(u);break;case 37:u.preventDefault(),this.is_open(u.currentTarget)?this.close_node(u.currentTarget):(k=this.get_prev_dom(u.currentTarget))&&k.length&&k.children(".jstree-anchor").focus();break;case 38:u.preventDefault(),(k=this.get_prev_dom(u.currentTarget))&&k.length&&k.children(".jstree-anchor").focus();break;case 39:u.preventDefault(),this.is_closed(u.currentTarget)?this.open_node(u.currentTarget,function(g){this.get_node(g,!0).children(".jstree-anchor").focus()}):(k=this.get_next_dom(u.currentTarget))&&k.length&&k.children(".jstree-anchor").focus();break;case 40:u.preventDefault(),(k=this.get_next_dom(u.currentTarget))&&k.length&&k.children(".jstree-anchor").focus();break;case 46:u.preventDefault(),(k=this.get_node(u.currentTarget))&&k.id&&"#"!==k.id&&(k=this.is_selected(k)?this.get_selected():k);break;case 113:u.preventDefault(),k=this.get_node(u.currentTarget)}},this)).on("load_node.jstree",j.proxy(function(u,k){if(k.status&&("#"!==k.node.id||this._data.core.loaded||(this._data.core.loaded=!0,this.trigger("loaded")),!this._data.core.ready&&!this.get_container_ul().find(".jstree-loading:eq(0)").length)){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var x,C,g=[];for(x=0,C=this._data.core.selected.length;C>x;x++)g=g.concat(this._model.data[this._data.core.selected[x]].parents);for(x=0,C=(g=j.vakata.array_unique(g)).length;C>x;x++)this.open_node(g[x],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}setTimeout(j.proxy(function(){this.trigger("ready")},this),0)}},this)).on("init.jstree",j.proxy(function(){var u=this.settings.core.themes;this._data.core.themes.dots=u.dots,this._data.core.themes.stripes=u.stripes,this._data.core.themes.icons=u.icons,this.set_theme(u.name||"default",u.url),this.set_theme_variant(u.variant)},this)).on("loading.jstree",j.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()},this)).on("blur.jstree",".jstree-anchor",j.proxy(function(u){this._data.core.focused=null,j(u.currentTarget).filter(".jstree-hovered").mouseleave()},this)).on("focus.jstree",".jstree-anchor",j.proxy(function(u){var k=this.get_node(u.currentTarget);k&&k.id&&(this._data.core.focused=k.id),this.element.find(".jstree-hovered").not(u.currentTarget).mouseleave(),j(u.currentTarget).mouseenter()},this)).on("mouseenter.jstree",".jstree-anchor",j.proxy(function(u){this.hover_node(u.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",j.proxy(function(u){this.dehover_node(u.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),j(document).off(".jstree-"+this._id)},trigger:function(u,k){k||(k={}),k.instance=this,this.element.triggerHandler(u.replace(".jstree","")+".jstree",k)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children:eq(0)")},get_string:function(u){var k=this.settings.core.strings;return j.isFunction(k)?k.call(this,u):k&&k[u]?k[u]:u},_firstChild:function(u){for(u=u?u.firstChild:null;null!==u&&1!==u.nodeType;)u=u.nextSibling;return u},_nextSibling:function(u){for(u=u?u.nextSibling:null;null!==u&&1!==u.nodeType;)u=u.nextSibling;return u},_previousSibling:function(u){for(u=u?u.previousSibling:null;null!==u&&1!==u.nodeType;)u=u.previousSibling;return u},get_node:function(u,k){var g;u&&u.id&&(u=u.id);try{if(this._model.data[u])u=this._model.data[u];else if(((g=j(u,this.element)).length||(g=j("#"+u.replace(j.jstree.idregex,"\\$&"),this.element)).length)&&this._model.data[g.closest(".jstree-node").attr("id")])u=this._model.data[g.closest(".jstree-node").attr("id")];else{if(!(g=j(u,this.element)).length||!g.hasClass("jstree"))return!1;u=this._model.data["#"]}return k&&(u="#"===u.id?this.element:j("#"+u.id.replace(j.jstree.idregex,"\\$&"),this.element)),u}catch{return!1}},get_path:function(u,k,g){if(!(u=u.parents?u:this.get_node(u))||"#"===u.id||!u.parents)return!1;var x,C,N=[];for(N.push(g?u.id:u.text),x=0,C=u.parents.length;C>x;x++)N.push(g?u.parents[x]:this.get_text(u.parents[x]));return N=N.reverse().slice(1),k?N.join(k):N},get_next_dom:function(u,k){var g;if((u=this.get_node(u,!0))[0]===this.element[0]){for(g=this._firstChild(this.get_container_ul()[0]);g&&0===g.offsetHeight;)g=this._nextSibling(g);return!!g&&j(g)}if(!u||!u.length)return!1;if(k){g=u[0];do{g=this._nextSibling(g)}while(g&&0===g.offsetHeight);return!!g&&j(g)}if(u.hasClass("jstree-open")){for(g=this._firstChild(u.children(".jstree-children")[0]);g&&0===g.offsetHeight;)g=this._nextSibling(g);if(null!==g)return j(g)}g=u[0];do{g=this._nextSibling(g)}while(g&&0===g.offsetHeight);return null!==g?j(g):u.parentsUntil(".jstree",".jstree-node").next(".jstree-node:visible").eq(0)},get_prev_dom:function(u,k){var g;if((u=this.get_node(u,!0))[0]===this.element[0]){for(g=this.get_container_ul()[0].lastChild;g&&0===g.offsetHeight;)g=this._previousSibling(g);return!!g&&j(g)}if(!u||!u.length)return!1;if(k){g=u[0];do{g=this._previousSibling(g)}while(g&&0===g.offsetHeight);return!!g&&j(g)}g=u[0];do{g=this._previousSibling(g)}while(g&&0===g.offsetHeight);if(null!==g){for(u=j(g);u.hasClass("jstree-open");)u=u.children(".jstree-children:eq(0)").children(".jstree-node:visible:last");return u}return!(!(g=u[0].parentNode.parentNode)||!g.className||-1===g.className.indexOf("jstree-node"))&&j(g)},get_parent:function(u){return!(!(u=this.get_node(u))||"#"===u.id)&&u.parent},get_children_dom:function(u){return(u=this.get_node(u,!0))[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!u||!u.length)&&u.children(".jstree-children").children(".jstree-node")},is_parent:function(u){return(u=this.get_node(u))&&(!1===u.state.loaded||u.children.length>0)},is_loaded:function(u){return(u=this.get_node(u))&&u.state.loaded},is_loading:function(u){return(u=this.get_node(u))&&u.state&&u.state.loading},is_open:function(u){return(u=this.get_node(u))&&u.state.opened},is_closed:function(u){return(u=this.get_node(u))&&this.is_parent(u)&&!u.state.opened},is_leaf:function(u){return!this.is_parent(u)},load_node:function(u,k){var g,x,C,N,D;if(j.isArray(u))return this._load_nodes(u.slice(),k),!0;if(!(u=this.get_node(u)))return k&&k.call(this,u,!1),!1;if(u.state.loaded){for(u.state.loaded=!1,g=0,x=u.children_d.length;x>g;g++){for(C=0,N=u.parents.length;N>C;C++)this._model.data[u.parents[C]].children_d=j.vakata.array_remove_item(this._model.data[u.parents[C]].children_d,u.children_d[g]);this._model.data[u.children_d[g]].state.selected&&(D=!0,this._data.core.selected=j.vakata.array_remove_item(this._data.core.selected,u.children_d[g])),delete this._model.data[u.children_d[g]]}u.children=[],u.children_d=[],D&&this.trigger("changed",{action:"load_node",node:u,selected:this._data.core.selected})}return u.state.loading=!0,this.get_node(u,!0).addClass("jstree-loading"),this._load_node(u,j.proxy(function(m){(u=this._model.data[u.id]).state.loading=!1,u.state.loaded=m;var q=this.get_node(u,!0);u.state.loaded&&!u.children.length&&q&&q.length&&!q.hasClass("jstree-leaf")&&q.removeClass("jstree-closed jstree-open").addClass("jstree-leaf"),q.removeClass("jstree-loading"),this.trigger("load_node",{node:u,status:m}),k&&k.call(this,u,m)},this)),!0},_load_nodes:function(u,k,g){var D,m,x=!0,C=function(){this._load_nodes(u,k,!0)},N=this._model.data;for(D=0,m=u.length;m>D;D++)!N[u[D]]||N[u[D]].state.loaded&&g||(this.is_loading(u[D])||this.load_node(u[D],C),x=!1);x&&k&&!k.done&&(k.call(this,u),k.done=!0)},_load_node:function(u,k){var x,g=this.settings.core.data;return g?j.isFunction(g)?g.call(this,u,j.proxy(function(C){!1===C&&k.call(this,!1),this["string"==typeof C?"_append_html_data":"_append_json_data"](u,"string"==typeof C?j(C):C,function(N){k.call(this,N)})},this)):"object"==typeof g?g.url?(g=j.extend(!0,{},g),j.isFunction(g.url)&&(g.url=g.url.call(this,u)),j.isFunction(g.data)&&(g.data=g.data.call(this,u)),j.ajax(g).done(j.proxy(function(C,N,D){var m=D.getResponseHeader("Content-Type");return-1!==m.indexOf("json")||"object"==typeof C?this._append_json_data(u,C,function(q){k.call(this,q)}):-1!==m.indexOf("html")||"string"==typeof C?this._append_html_data(u,j(C),function(q){k.call(this,q)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:u.id,xhr:D})},this.settings.core.error.call(this,this._data.core.last_error),k.call(this,!1))},this)).fail(j.proxy(function(C){k.call(this,!1),this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:u.id,xhr:C})},this.settings.core.error.call(this,this._data.core.last_error)},this))):(x=j.isArray(g)||j.isPlainObject(g)?JSON.parse(JSON.stringify(g)):g,"#"===u.id?this._append_json_data(u,x,function(C){k.call(this,C)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:u.id})},this.settings.core.error.call(this,this._data.core.last_error),k.call(this,!1))):"string"==typeof g?"#"===u.id?this._append_html_data(u,j(g),function(C){k.call(this,C)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:u.id})},this.settings.core.error.call(this,this._data.core.last_error),k.call(this,!1)):k.call(this,!1):"#"===u.id?this._append_html_data(u,this._data.core.original_container_html.clone(!0),function(C){k.call(this,C)}):k.call(this,!1)},_node_changed:function(u){(u=this.get_node(u))&&this._model.changed.push(u.id)},_append_html_data:function(u,k,g){(u=this.get_node(u)).children=[],u.children_d=[];var L,re,G,x=k.is("ul")?k.children():k,C=u.id,N=[],D=[],m=this._model.data,q=m[C],F=this._data.core.selected.length;for(x.each(j.proxy(function(K,we){(L=this._parse_model_from_html(j(we),C,q.parents.concat()))&&(N.push(L),D.push(L),m[L].children_d.length&&(D=D.concat(m[L].children_d)))},this)),q.children=N,q.children_d=D,re=0,G=q.parents.length;G>re;re++)m[q.parents[re]].children_d=m[q.parents[re]].children_d.concat(D);this.trigger("model",{nodes:D,parent:C}),"#"!==C?(this._node_changed(C),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==F&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),g.call(this,!0)},_append_json_data:function(u,k,g,x){(u=this.get_node(u)).children=[],u.children_d=[],k.d&&"string"==typeof(k=k.d)&&(k=JSON.parse(k)),j.isArray(k)||(k=[k]);var C=null,N={df:this._model.default_state,dat:k,par:u.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},D=function(q,F){q.data&&(q=q.data);var _t,R,Ne,Jt,L=q.dat,re=q.par,G=[],K=[],we=[],ge=q.df,St=q.t_id,l=q.t_cnt,vt=q.m,ue=vt[re],Tt=q.sel,Dn=function(Oe,Kt,ut){ut=ut?ut.concat():[],Kt&&ut.unshift(Kt);var kt,rr,tt,Vn,ye=Oe.id.toString(),Ge={id:ye,text:Oe.text||"",icon:Oe.icon===F||Oe.icon,parent:Kt,parents:ut,children:Oe.children||[],children_d:Oe.children_d||[],data:Oe.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(kt in ge)ge.hasOwnProperty(kt)&&(Ge.state[kt]=ge[kt]);if(Oe&&Oe.data&&Oe.data.jstree&&Oe.data.jstree.icon&&(Ge.icon=Oe.data.jstree.icon),Oe&&Oe.data&&(Ge.data=Oe.data,Oe.data.jstree))for(kt in Oe.data.jstree)Oe.data.jstree.hasOwnProperty(kt)&&(Ge.state[kt]=Oe.data.jstree[kt]);if(Oe&&"object"==typeof Oe.state)for(kt in Oe.state)Oe.state.hasOwnProperty(kt)&&(Ge.state[kt]=Oe.state[kt]);if(Oe&&"object"==typeof Oe.li_attr)for(kt in Oe.li_attr)Oe.li_attr.hasOwnProperty(kt)&&(Ge.li_attr[kt]=Oe.li_attr[kt]);if(Ge.li_attr.id||(Ge.li_attr.id=ye),Oe&&"object"==typeof Oe.a_attr)for(kt in Oe.a_attr)Oe.a_attr.hasOwnProperty(kt)&&(Ge.a_attr[kt]=Oe.a_attr[kt]);for(Oe&&Oe.children&&!0===Oe.children&&(Ge.state.loaded=!1,Ge.children=[],Ge.children_d=[]),vt[Ge.id]=Ge,kt=0,rr=Ge.children.length;rr>kt;kt++)tt=Dn(vt[Ge.children[kt]],Ge.id,ut),Vn=vt[tt],Ge.children_d.push(tt),Vn.children_d.length&&(Ge.children_d=Ge.children_d.concat(Vn.children_d));return delete Oe.data,delete Oe.children,vt[Ge.id].original=Oe,Ge.state.selected&&we.push(Ge.id),Ge.id},Zn=function(Oe,Kt,ut){ut=ut?ut.concat():[],Kt&&ut.unshift(Kt);var kt,rr,tt,Vn,Ge,ye=!1;do{ye="j"+St+"_"+ ++l}while(vt[ye]);for(kt in Ge={id:!1,text:"string"==typeof Oe?Oe:"",icon:"object"!=typeof Oe||Oe.icon===F||Oe.icon,parent:Kt,parents:ut,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},ge)ge.hasOwnProperty(kt)&&(Ge.state[kt]=ge[kt]);if(Oe&&Oe.id&&(Ge.id=Oe.id.toString()),Oe&&Oe.text&&(Ge.text=Oe.text),Oe&&Oe.data&&Oe.data.jstree&&Oe.data.jstree.icon&&(Ge.icon=Oe.data.jstree.icon),Oe&&Oe.data&&(Ge.data=Oe.data,Oe.data.jstree))for(kt in Oe.data.jstree)Oe.data.jstree.hasOwnProperty(kt)&&(Ge.state[kt]=Oe.data.jstree[kt]);if(Oe&&"object"==typeof Oe.state)for(kt in Oe.state)Oe.state.hasOwnProperty(kt)&&(Ge.state[kt]=Oe.state[kt]);if(Oe&&"object"==typeof Oe.li_attr)for(kt in Oe.li_attr)Oe.li_attr.hasOwnProperty(kt)&&(Ge.li_attr[kt]=Oe.li_attr[kt]);if(Ge.li_attr.id&&!Ge.id&&(Ge.id=Ge.li_attr.id.toString()),Ge.id||(Ge.id=ye),Ge.li_attr.id||(Ge.li_attr.id=Ge.id),Oe&&"object"==typeof Oe.a_attr)for(kt in Oe.a_attr)Oe.a_attr.hasOwnProperty(kt)&&(Ge.a_attr[kt]=Oe.a_attr[kt]);if(Oe&&Oe.children&&Oe.children.length){for(kt=0,rr=Oe.children.length;rr>kt;kt++)tt=Zn(Oe.children[kt],Ge.id,ut),Vn=vt[tt],Ge.children.push(tt),Vn.children_d.length&&(Ge.children_d=Ge.children_d.concat(Vn.children_d));Ge.children_d=Ge.children_d.concat(Ge.children)}return Oe&&Oe.children&&!0===Oe.children&&(Ge.state.loaded=!1,Ge.children=[],Ge.children_d=[]),delete Oe.data,delete Oe.children,Ge.original=Oe,vt[Ge.id]=Ge,Ge.state.selected&&we.push(Ge.id),Ge.id};if(L.length&&L[0].id!==F&&L[0].parent!==F){for(R=0,Ne=L.length;Ne>R;R++)L[R].children||(L[R].children=[]),vt[L[R].id.toString()]=L[R];for(R=0,Ne=L.length;Ne>R;R++)vt[L[R].parent.toString()].children.push(L[R].id.toString()),ue.children_d.push(L[R].id.toString());for(R=0,Ne=ue.children.length;Ne>R;R++)_t=Dn(vt[ue.children[R]],re,ue.parents.concat()),K.push(_t),vt[_t].children_d.length&&(K=K.concat(vt[_t].children_d));for(R=0,Ne=ue.parents.length;Ne>R;R++)vt[ue.parents[R]].children_d=vt[ue.parents[R]].children_d.concat(K);Jt={cnt:l,mod:vt,sel:Tt,par:re,dpc:K,add:we}}else{for(R=0,Ne=L.length;Ne>R;R++)(_t=Zn(L[R],re,ue.parents.concat()))&&(G.push(_t),K.push(_t),vt[_t].children_d.length&&(K=K.concat(vt[_t].children_d)));for(ue.children=G,ue.children_d=K,R=0,Ne=ue.parents.length;Ne>R;R++)vt[ue.parents[R]].children_d=vt[ue.parents[R]].children_d.concat(K);Jt={cnt:l,mod:vt,sel:Tt,par:re,dpc:K,add:we}}return Jt},m=function(q,F){if(this._cnt=q.cnt,this._model.data=q.mod,F){var L,re,G=q.add,K=q.sel,we=this._data.core.selected.slice(),ge=this._model.data;if(K.length!==we.length||j.vakata.array_unique(K.concat(we)).length!==K.length){for(L=0,re=K.length;re>L;L++)-1===j.inArray(K[L],G)&&-1===j.inArray(K[L],we)&&(ge[K[L]].state.selected=!1);for(L=0,re=we.length;re>L;L++)-1===j.inArray(we[L],K)&&(ge[we[L]].state.selected=!0)}}q.add.length&&(this._data.core.selected=this._data.core.selected.concat(q.add)),this.trigger("model",{nodes:q.dpc,parent:q.par}),"#"!==q.par?(this._node_changed(q.par),this.redraw()):this.redraw(!0),q.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),g.call(this,!0)};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+D.toString().replace(/return ([^;}]+)[\s;}]+$/,"postMessage($1);}")],{type:"text/javascript"}))),!this._data.core.working||x?(this._data.core.working=!0,(C=new window.Worker(this._wrk)).onmessage=j.proxy(function(q){m.call(this,q.data,!0);try{C.terminate(),C=null}catch{}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),N.par?C.postMessage(N):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([u,k,g,!0])}catch{m.call(this,D(N),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else m.call(this,D(N),!1)},_parse_model_from_html:function(u,k,g){g=g?[].concat(g):[],k&&g.unshift(k);var x,C,m,q,F,N=this._model.data,D={id:!1,text:!1,icon:!0,parent:k,parents:g,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(m in this._model.default_state)this._model.default_state.hasOwnProperty(m)&&(D.state[m]=this._model.default_state[m]);if(q=j.vakata.attributes(u,!0),j.each(q,function(L,re){return!(re=j.trim(re)).length||(D.li_attr[L]=re,void("id"===L&&(D.id=re.toString())))}),(q=u.children("a").eq(0)).length&&(q=j.vakata.attributes(q,!0),j.each(q,function(L,re){(re=j.trim(re)).length&&(D.a_attr[L]=re)})),(q=u.children("a:eq(0)").length?u.children("a:eq(0)").clone():u.clone()).children("ins, i, ul").remove(),q=q.html(),q=j("<div />").html(q),D.text=this.settings.core.force_text?q.text():q.html(),q=u.data(),D.data=q?j.extend(!0,{},q):null,D.state.opened=u.hasClass("jstree-open"),D.state.selected=u.children("a").hasClass("jstree-clicked"),D.state.disabled=u.children("a").hasClass("jstree-disabled"),D.data&&D.data.jstree)for(m in D.data.jstree)D.data.jstree.hasOwnProperty(m)&&(D.state[m]=D.data.jstree[m]);(q=u.children("a").children(".jstree-themeicon")).length&&(D.icon=!q.hasClass("jstree-themeicon-hidden")&&q.attr("rel")),D.state.icon&&(D.icon=D.state.icon),q=u.children("ul").children("li");do{F="j"+this._id+"_"+ ++this._cnt}while(N[F]);return D.id=D.li_attr.id?D.li_attr.id.toString():F,q.length?(q.each(j.proxy(function(L,re){x=this._parse_model_from_html(j(re),D.id,g),C=this._model.data[x],D.children.push(x),C.children_d.length&&(D.children_d=D.children_d.concat(C.children_d))},this)),D.children_d=D.children_d.concat(D.children)):u.hasClass("jstree-closed")&&(D.state.loaded=!1),D.li_attr.class&&(D.li_attr.class=D.li_attr.class.replace("jstree-closed","").replace("jstree-open","")),D.a_attr.class&&(D.a_attr.class=D.a_attr.class.replace("jstree-clicked","").replace("jstree-disabled","")),N[D.id]=D,D.state.selected&&this._data.core.selected.push(D.id),D.id},_parse_model_from_flat_json:function(u,k,g){g=g?g.concat():[],k&&g.unshift(k);var D,m,q,F,x=u.id.toString(),C=this._model.data,N=this._model.default_state,L={id:x,text:u.text||"",icon:u.icon===jt||u.icon,parent:k,parents:g,children:u.children||[],children_d:u.children_d||[],data:u.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(D in N)N.hasOwnProperty(D)&&(L.state[D]=N[D]);if(u&&u.data&&u.data.jstree&&u.data.jstree.icon&&(L.icon=u.data.jstree.icon),u&&u.data&&(L.data=u.data,u.data.jstree))for(D in u.data.jstree)u.data.jstree.hasOwnProperty(D)&&(L.state[D]=u.data.jstree[D]);if(u&&"object"==typeof u.state)for(D in u.state)u.state.hasOwnProperty(D)&&(L.state[D]=u.state[D]);if(u&&"object"==typeof u.li_attr)for(D in u.li_attr)u.li_attr.hasOwnProperty(D)&&(L.li_attr[D]=u.li_attr[D]);if(L.li_attr.id||(L.li_attr.id=x),u&&"object"==typeof u.a_attr)for(D in u.a_attr)u.a_attr.hasOwnProperty(D)&&(L.a_attr[D]=u.a_attr[D]);for(u&&u.children&&!0===u.children&&(L.state.loaded=!1,L.children=[],L.children_d=[]),C[L.id]=L,D=0,m=L.children.length;m>D;D++)F=C[q=this._parse_model_from_flat_json(C[L.children[D]],L.id,g)],L.children_d.push(q),F.children_d.length&&(L.children_d=L.children_d.concat(F.children_d));return delete u.data,delete u.children,C[L.id].original=u,L.state.selected&&this._data.core.selected.push(L.id),L.id},_parse_model_from_json:function(u,k,g){g=g?g.concat():[],k&&g.unshift(k);var C,N,D,m,L,x=!1,q=this._model.data,F=this._model.default_state;do{x="j"+this._id+"_"+ ++this._cnt}while(q[x]);for(C in L={id:!1,text:"string"==typeof u?u:"",icon:"object"!=typeof u||u.icon===jt||u.icon,parent:k,parents:g,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},F)F.hasOwnProperty(C)&&(L.state[C]=F[C]);if(u&&u.id&&(L.id=u.id.toString()),u&&u.text&&(L.text=u.text),u&&u.data&&u.data.jstree&&u.data.jstree.icon&&(L.icon=u.data.jstree.icon),u&&u.data&&(L.data=u.data,u.data.jstree))for(C in u.data.jstree)u.data.jstree.hasOwnProperty(C)&&(L.state[C]=u.data.jstree[C]);if(u&&"object"==typeof u.state)for(C in u.state)u.state.hasOwnProperty(C)&&(L.state[C]=u.state[C]);if(u&&"object"==typeof u.li_attr)for(C in u.li_attr)u.li_attr.hasOwnProperty(C)&&(L.li_attr[C]=u.li_attr[C]);if(L.li_attr.id&&!L.id&&(L.id=L.li_attr.id.toString()),L.id||(L.id=x),L.li_attr.id||(L.li_attr.id=L.id),u&&"object"==typeof u.a_attr)for(C in u.a_attr)u.a_attr.hasOwnProperty(C)&&(L.a_attr[C]=u.a_attr[C]);if(u&&u.children&&u.children.length){for(C=0,N=u.children.length;N>C;C++)m=q[D=this._parse_model_from_json(u.children[C],L.id,g)],L.children.push(D),m.children_d.length&&(L.children_d=L.children_d.concat(m.children_d));L.children_d=L.children_d.concat(L.children)}return u&&u.children&&!0===u.children&&(L.state.loaded=!1,L.children=[],L.children_d=[]),delete u.data,delete u.children,L.original=u,q[L.id]=L,L.state.selected&&this._data.core.selected.push(L.id),L.id},_redraw:function(){var g,x,C,u=this._model.force_full_redraw?this._model.data["#"].children.concat([]):this._model.changed.concat([]),k=document.createElement("UL"),N=this._data.core.focused;for(x=0,C=u.length;C>x;x++)(g=this.redraw_node(u[x],!0,this._model.force_full_redraw))&&this._model.force_full_redraw&&k.appendChild(g);this._model.force_full_redraw&&(k.className=this.get_container_ul()[0].className,this.element.empty().append(k)),null!==N&&((g=this.get_node(N,!0))&&g.length&&g.children(".jstree-anchor")[0]!==document.activeElement?g.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:u})},redraw:function(u){u&&(this._model.force_full_redraw=!0),this._redraw()},redraw_node:function(u,k,g){var x=this.get_node(u),C=!1,N=!1,D=!1,m=!1,q=!1,F=!1,L="",re=document,G=this._model.data,K=!1,we=!1,ge=null;if(!x)return!1;if("#"===x.id)return this.redraw(!0);if(k=k||0===x.children.length,u=document.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(x.id[0])?"\\3"+x.id[0]+" "+x.id.substr(1).replace(j.jstree.idregex,"\\$&"):x.id.replace(j.jstree.idregex,"\\$&"))):document.getElementById(x.id))u=j(u),g||((C=u.parent().parent()[0])===this.element[0]&&(C=null),N=u.index()),k||!x.children.length||u.children(".jstree-children").length||(k=!0),k||(D=u.children(".jstree-children")[0]),we=u.attr("aria-selected"),K=u.children(".jstree-anchor")[0]===document.activeElement,u.remove();else if(k=!0,!g){if(!(null===(C="#"!==x.parent?j("#"+x.parent.replace(j.jstree.idregex,"\\$&"),this.element)[0]:null)||C&&G[x.parent].state.opened))return!1;N=j.inArray(x.id,null===C?G["#"].children:G[x.parent].children)}for(m in u=vn.cloneNode(!0),L="jstree-node ",x.li_attr)if(x.li_attr.hasOwnProperty(m)){if("id"===m)continue;"class"!==m?u.setAttribute(m,x.li_attr[m]):L+=x.li_attr[m]}for(q in we&&"false"!==we&&u.setAttribute("aria-selected",!0),x.state.loaded&&!x.children.length?L+=" jstree-leaf":(L+=x.state.opened&&x.state.loaded?" jstree-open":" jstree-closed",u.setAttribute("aria-expanded",x.state.opened&&x.state.loaded)),null!==x.parent&&G[x.parent].children[G[x.parent].children.length-1]===x.id&&(L+=" jstree-last"),u.id=x.id,u.className=L,L=(x.state.selected?" jstree-clicked":"")+(x.state.disabled?" jstree-disabled":""),x.a_attr)if(x.a_attr.hasOwnProperty(q)){if("href"===q&&"#"===x.a_attr[q])continue;"class"!==q?u.childNodes[1].setAttribute(q,x.a_attr[q]):L+=" "+x.a_attr[q]}if(L.length&&(u.childNodes[1].className="jstree-anchor "+L),(x.icon&&!0!==x.icon||!1===x.icon)&&(!1===x.icon?u.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===x.icon.indexOf("/")&&-1===x.icon.indexOf(".")?u.childNodes[1].childNodes[0].className+=" "+x.icon+" jstree-themeicon-custom":(u.childNodes[1].childNodes[0].style.backgroundImage="url("+x.icon+")",u.childNodes[1].childNodes[0].style.backgroundPosition="center center",u.childNodes[1].childNodes[0].style.backgroundSize="auto",u.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?u.childNodes[1].appendChild(re.createTextNode(x.text)):u.childNodes[1].innerHTML+=x.text,k&&x.children.length&&x.state.opened&&x.state.loaded){for((F=re.createElement("UL")).setAttribute("role","group"),F.className="jstree-children",m=0,q=x.children.length;q>m;m++)F.appendChild(this.redraw_node(x.children[m],k,!0));u.appendChild(F)}if(D&&u.appendChild(D),!g){for(C||(C=this.element[0]),m=0,q=C.childNodes.length;q>m;m++)if(C.childNodes[m]&&C.childNodes[m].className&&-1!==C.childNodes[m].className.indexOf("jstree-children")){ge=C.childNodes[m];break}ge||((ge=re.createElement("UL")).setAttribute("role","group"),ge.className="jstree-children",C.appendChild(ge)),N<(C=ge).childNodes.length?C.insertBefore(u,C.childNodes[N]):C.appendChild(u),K&&u.childNodes[1].focus()}return x.state.opened&&!x.state.loaded&&(x.state.opened=!1,setTimeout(j.proxy(function(){this.open_node(x.id,!1,0)},this),0)),u},open_node:function(u,k,g){var x,C,N,D;if(j.isArray(u)){for(x=0,C=(u=u.slice()).length;C>x;x++)this.open_node(u[x],k,g);return!0}if(!(u=this.get_node(u))||"#"===u.id)return!1;if(g=g===jt?this.settings.core.animation:g,!this.is_closed(u))return k&&k.call(this,u,!1),!1;if(this.is_loaded(u))N=this.get_node(u,!0),D=this,N.length&&(u.children.length&&!this._firstChild(N.children(".jstree-children")[0])&&(u.state.opened=!0,this.redraw_node(u,!0),N=this.get_node(u,!0)),g?(this.trigger("before_open",{node:u}),N.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(g,function(){this.style.display="",D.trigger("after_open",{node:u})})):(this.trigger("before_open",{node:u}),N[0].className=N[0].className.replace("jstree-closed","jstree-open"),N[0].setAttribute("aria-expanded",!0))),u.state.opened=!0,k&&k.call(this,u,!0),N.length||this.trigger("before_open",{node:u}),this.trigger("open_node",{node:u}),g&&N.length||this.trigger("after_open",{node:u});else{if(this.is_loading(u))return setTimeout(j.proxy(function(){this.open_node(u,k,g)},this),500);this.load_node(u,function(m,q){return q?this.open_node(m,k,g):!!k&&k.call(this,m,!1)})}},_open_to:function(u){if(!(u=this.get_node(u))||"#"===u.id)return!1;var k,g,x=u.parents;for(k=0,g=x.length;g>k;k+=1)"#"!==k&&this.open_node(x[k],!1,0);return j("#"+u.id.replace(j.jstree.idregex,"\\$&"),this.element)},close_node:function(u,k){var g,x,C,N;if(j.isArray(u)){for(g=0,x=(u=u.slice()).length;x>g;g++)this.close_node(u[g],k);return!0}return!(!(u=this.get_node(u))||"#"===u.id)&&!this.is_closed(u)&&(k=k===jt?this.settings.core.animation:k,C=this,(N=this.get_node(u,!0)).length&&(k?N.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(k,function(){this.style.display="",N.children(".jstree-children").remove(),C.trigger("after_close",{node:u})}):(N[0].className=N[0].className.replace("jstree-open","jstree-closed"),N.attr("aria-expanded",!1).children(".jstree-children").remove())),u.state.opened=!1,this.trigger("close_node",{node:u}),void(k&&N.length||this.trigger("after_close",{node:u})))},toggle_node:function(u){var k,g;if(j.isArray(u)){for(k=0,g=(u=u.slice()).length;g>k;k++)this.toggle_node(u[k]);return!0}return this.is_closed(u)?this.open_node(u):this.is_open(u)?this.close_node(u):void 0},open_all:function(u,k,g){if(u||(u="#"),!(u=this.get_node(u)))return!1;var C,N,D,x="#"===u.id?this.get_container_ul():this.get_node(u,!0);if(!x.length){for(C=0,N=u.children_d.length;N>C;C++)this.is_closed(this._model.data[u.children_d[C]])&&(this._model.data[u.children_d[C]].state.opened=!0);return this.trigger("open_all",{node:u})}g=g||x,D=this,(x=this.is_closed(u)?x.find(".jstree-closed").addBack():x.find(".jstree-closed")).each(function(){D.open_node(this,function(m,q){q&&this.is_parent(m)&&this.open_all(m,k,g)},k||0)}),0===g.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(g)})},close_all:function(u,k){if(u||(u="#"),!(u=this.get_node(u)))return!1;var C,N,g="#"===u.id?this.get_container_ul():this.get_node(u,!0),x=this;if(!g.length){for(C=0,N=u.children_d.length;N>C;C++)this._model.data[u.children_d[C]].state.opened=!1;return this.trigger("close_all",{node:u})}g=this.is_open(u)?g.find(".jstree-open").addBack():g.find(".jstree-open"),j(g.get().reverse()).each(function(){x.close_node(this,k||0)}),this.trigger("close_all",{node:u})},is_disabled:function(u){return(u=this.get_node(u))&&u.state&&u.state.disabled},enable_node:function(u){var k,g;if(j.isArray(u)){for(k=0,g=(u=u.slice()).length;g>k;k++)this.enable_node(u[k]);return!0}return!(!(u=this.get_node(u))||"#"===u.id)&&(u.state.disabled=!1,this.get_node(u,!0).children(".jstree-anchor").removeClass("jstree-disabled"),void this.trigger("enable_node",{node:u}))},disable_node:function(u){var k,g;if(j.isArray(u)){for(k=0,g=(u=u.slice()).length;g>k;k++)this.disable_node(u[k]);return!0}return!(!(u=this.get_node(u))||"#"===u.id)&&(u.state.disabled=!0,this.get_node(u,!0).children(".jstree-anchor").addClass("jstree-disabled"),void this.trigger("disable_node",{node:u}))},activate_node:function(u,k){if(this.is_disabled(u))return!1;if(this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==jt?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(k.metaKey||k.ctrlKey||k.shiftKey)&&(!k.shiftKey||this._data.core.last_clicked&&this.get_parent(u)&&this.get_parent(u)===this._data.core.last_clicked.parent))if(k.shiftKey){var D,m,g=this.get_node(u).id,x=this._data.core.last_clicked.id,C=this.get_node(this._data.core.last_clicked.parent).children,N=!1;for(D=0,m=C.length;m>D;D+=1)C[D]===g&&(N=!N),C[D]===x&&(N=!N),N||C[D]===g||C[D]===x?this.select_node(C[D],!1,!1,k):this.deselect_node(C[D],!1,k)}else this.is_selected(u)?this.deselect_node(u,!1,k):this.select_node(u,!1,!1,k);else!this.settings.core.multiple&&(k.metaKey||k.ctrlKey||k.shiftKey)&&this.is_selected(u)?this.deselect_node(u,!1,k):(this.deselect_all(!0),this.select_node(u,!1,!1,k),this._data.core.last_clicked=this.get_node(u));this.trigger("activate_node",{node:this.get_node(u)})},hover_node:function(u){if(!(u=this.get_node(u,!0))||!u.length||u.children(".jstree-hovered").length)return!1;var k=this.element.find(".jstree-hovered"),g=this.element;k&&k.length&&this.dehover_node(k),u.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(u)}),setTimeout(function(){g.attr("aria-activedescendant",u[0].id),u.attr("aria-selected",!0)},0)},dehover_node:function(u){return!!((u=this.get_node(u,!0))&&u.length&&u.children(".jstree-hovered").length)&&(u.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-hovered"),void this.trigger("dehover_node",{node:this.get_node(u)}))},select_node:function(u,k,g,x){var C,N,D;if(j.isArray(u)){for(N=0,D=(u=u.slice()).length;D>N;N++)this.select_node(u[N],k,g,x);return!0}return!(!(u=this.get_node(u))||"#"===u.id)&&(C=this.get_node(u,!0),void(u.state.selected||(u.state.selected=!0,this._data.core.selected.push(u.id),g||(C=this._open_to(u)),C&&C.length&&C.children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:u,selected:this._data.core.selected,event:x}),k||this.trigger("changed",{action:"select_node",node:u,selected:this._data.core.selected,event:x}))))},deselect_node:function(u,k,g){var x,C,N;if(j.isArray(u)){for(x=0,C=(u=u.slice()).length;C>x;x++)this.deselect_node(u[x],k,g);return!0}return!(!(u=this.get_node(u))||"#"===u.id)&&(N=this.get_node(u,!0),void(u.state.selected&&(u.state.selected=!1,this._data.core.selected=j.vakata.array_remove_item(this._data.core.selected,u.id),N.length&&N.children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:u,selected:this._data.core.selected,event:g}),k||this.trigger("changed",{action:"deselect_node",node:u,selected:this._data.core.selected,event:g}))))},select_all:function(u){var g,x,k=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data["#"].children_d.concat(),g=0,x=this._data.core.selected.length;x>g;g++)this._model.data[this._data.core.selected[g]]&&(this._model.data[this._data.core.selected[g]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),u||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:k})},deselect_all:function(u){var g,x,k=this._data.core.selected.concat([]);for(g=0,x=this._data.core.selected.length;x>g;g++)this._model.data[this._data.core.selected[g]]&&(this._model.data[this._data.core.selected[g]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked"),this.trigger("deselect_all",{selected:this._data.core.selected,node:k}),u||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:k})},is_selected:function(u){return!(!(u=this.get_node(u))||"#"===u.id)&&u.state.selected},get_selected:function(u){return u?j.map(this._data.core.selected,j.proxy(function(k){return this.get_node(k)},this)):this._data.core.selected.slice()},get_top_selected:function(u){var x,C,N,D,k=this.get_selected(!0),g={};for(x=0,C=k.length;C>x;x++)g[k[x].id]=k[x];for(x=0,C=k.length;C>x;x++)for(N=0,D=k[x].children_d.length;D>N;N++)g[k[x].children_d[N]]&&delete g[k[x].children_d[N]];for(x in k=[],g)g.hasOwnProperty(x)&&k.push(x);return u?j.map(k,j.proxy(function(m){return this.get_node(m)},this)):k},get_bottom_selected:function(u){var x,C,k=this.get_selected(!0),g=[];for(x=0,C=k.length;C>x;x++)k[x].children.length||g.push(k[x].id);return u?j.map(g,j.proxy(function(N){return this.get_node(N)},this)):g},get_state:function(){var k,u={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}};for(k in this._model.data)this._model.data.hasOwnProperty(k)&&"#"!==k&&(this._model.data[k].state.opened&&u.core.open.push(k),this._model.data[k].state.selected&&u.core.selected.push(k));return u},set_state:function(u,k){if(u){if(u.core){var g,C,N;if(u.core.open)return j.isArray(u.core.open)?(g=!0,C=this,j.each(u.core.open.concat([]),function(D,m){C.get_node(m)&&(C.is_loaded(m)?(C.is_closed(m)&&C.open_node(m,!1,0),u&&u.core&&u.core.open&&j.vakata.array_remove_item(u.core.open,m)):(C.is_loading(m)||C.open_node(m,j.proxy(function(q,F){!F&&u&&u.core&&u.core.open&&j.vakata.array_remove_item(u.core.open,q.id),this.set_state(u,k)},C),0),g=!1))}),g&&(delete u.core.open,this.set_state(u,k)),!1):(delete u.core.open,this.set_state(u,k),!1);if(u.core.scroll)return u.core.scroll&&u.core.scroll.left!==jt&&this.element.scrollLeft(u.core.scroll.left),u.core.scroll&&u.core.scroll.top!==jt&&this.element.scrollTop(u.core.scroll.top),delete u.core.scroll,this.set_state(u,k),!1;if(u.core.selected)return N=this,this.deselect_all(),j.each(u.core.selected,function(D,m){N.select_node(m)}),delete u.core.selected,this.set_state(u,k),!1;if(j.isEmptyObject(u.core))return delete u.core,this.set_state(u,k),!1}return!j.isEmptyObject(u)||(u=null,k&&k.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(u,k){this._data.core.state=!0===k?{}:this.get_state(),k&&j.isFunction(k)&&(this._data.core.state=k.call(this,this._data.core.state)),this._cnt=0,this._model.data={"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}};var g=this.get_container_ul()[0].className;u||this.element.html("<ul class='"+g+"'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.load_node("#",function(x,C){C&&(this.get_container_ul()[0].className=g,this.set_state(j.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(u){if(!(u=this.get_node(u))||"#"===u.id)return!1;var k=[],g=[];this._data.core.selected.concat([]),g.push(u.id),!0===u.state.opened&&k.push(u.id),this.get_node(u,!0).find(".jstree-open").each(function(){k.push(this.id)}),this._load_nodes(g,j.proxy(function(C){this.open_node(k,!1,0),this.select_node(this._data.core.selected),this.trigger("refresh_node",{node:u,nodes:C})},this))},set_id:function(u,k){if(!(u=this.get_node(u))||"#"===u.id)return!1;var g,x,C=this._model.data;for(k=k.toString(),C[u.parent].children[j.inArray(u.id,C[u.parent].children)]=k,g=0,x=u.parents.length;x>g;g++)C[u.parents[g]].children_d[j.inArray(u.id,C[u.parents[g]].children_d)]=k;for(g=0,x=u.children.length;x>g;g++)C[u.children[g]].parent=k;for(g=0,x=u.children_d.length;x>g;g++)C[u.children_d[g]].parents[j.inArray(u.id,C[u.children_d[g]].parents)]=k;return-1!==(g=j.inArray(u.id,this._data.core.selected))&&(this._data.core.selected[g]=k),(g=this.get_node(u.id,!0))&&g.attr("id",k),delete C[u.id],u.id=k,C[k]=u,!0},get_text:function(u){return!(!(u=this.get_node(u))||"#"===u.id)&&u.text},set_text:function(u,k){var g,x;if(j.isArray(u)){for(g=0,x=(u=u.slice()).length;x>g;g++)this.set_text(u[g],k);return!0}return!(!(u=this.get_node(u))||"#"===u.id||(u.text=k,this.get_node(u,!0).length&&this.redraw_node(u.id),this.trigger("set_text",{obj:u,text:k}),0))},get_json:function(u,k,g){if(!(u=this.get_node(u||"#")))return!1;k&&k.flat&&!g&&(g=[]);var C,N,x={id:u.id,text:u.text,icon:this.get_icon(u),li_attr:j.extend(!0,{},u.li_attr),a_attr:j.extend(!0,{},u.a_attr),state:{},data:(!k||!k.no_data)&&j.extend(!0,{},u.data)};if(k&&k.flat?x.parent=u.parent:x.children=[],!k||!k.no_state)for(C in u.state)u.state.hasOwnProperty(C)&&(x.state[C]=u.state[C]);if(k&&k.no_id&&(delete x.id,x.li_attr&&x.li_attr.id&&delete x.li_attr.id),k&&k.flat&&"#"!==u.id&&g.push(x),!k||!k.no_children)for(C=0,N=u.children.length;N>C;C++)k&&k.flat?this.get_json(u.children[C],k,g):x.children.push(this.get_json(u.children[C],k));return k&&k.flat?g:"#"===u.id?x.children:x},create_node:function(u,k,g,x,C){if(null===u&&(u="#"),!(u=this.get_node(u)))return!1;if(!(g=g===jt?"last":g).toString().match(/^(before|after)$/)&&!C&&!this.is_loaded(u))return this.load_node(u,function(){this.create_node(u,k,g,x,!0)});var N,D,m,q;switch(k||(k={text:this.get_string("New node")}),k.text===jt&&(k.text=this.get_string("New node")),"#"===u.id&&("before"===g&&(g="first"),"after"===g&&(g="last")),g){case"before":N=this.get_node(u.parent),g=j.inArray(u.id,N.children),u=N;break;case"after":N=this.get_node(u.parent),g=j.inArray(u.id,N.children)+1,u=N;break;case"inside":case"first":g=0;break;case"last":g=u.children.length;break;default:g||(g=0)}if(g>u.children.length&&(g=u.children.length),k.id||(k.id=!0),!this.check("create_node",k,u,g))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!0===k.id&&delete k.id,!(k=this._parse_model_from_json(k,u.id,u.parents.concat())))return!1;for(N=this.get_node(k),(D=[]).push(k),D=D.concat(N.children_d),this.trigger("model",{nodes:D,parent:u.id}),u.children_d=u.children_d.concat(D),m=0,q=u.parents.length;q>m;m++)this._model.data[u.parents[m]].children_d=this._model.data[u.parents[m]].children_d.concat(D);for(k=N,N=[],m=0,q=u.children.length;q>m;m++)N[m>=g?m+1:m]=u.children[m];return N[g]=k.id,u.children=N,this.redraw_node(u,!0),x&&x.call(this,this.get_node(k)),this.trigger("create_node",{node:this.get_node(k),parent:u.id,position:g}),k.id},rename_node:function(u,k){var g,x,C;if(j.isArray(u)){for(g=0,x=(u=u.slice()).length;x>g;g++)this.rename_node(u[g],k);return!0}return!(!(u=this.get_node(u))||"#"===u.id||(C=u.text,this.check("rename_node",u,this.get_parent(u),k)?(this.set_text(u,k),this.trigger("rename_node",{node:u,text:k,old:C}),0):(this.settings.core.error.call(this,this._data.core.last_error),1)))},delete_node:function(u){var k,g,x,C,N,D,m,q,F,L;if(j.isArray(u)){for(k=0,g=(u=u.slice()).length;g>k;k++)this.delete_node(u[k]);return!0}if(!(u=this.get_node(u))||"#"===u.id)return!1;if(x=this.get_node(u.parent),C=j.inArray(u.id,x.children),L=!1,!this.check("delete_node",u,x,C))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==C&&(x.children=j.vakata.array_remove(x.children,C)),(N=u.children_d.concat([])).push(u.id),q=0,F=N.length;F>q;q++){for(D=0,m=u.parents.length;m>D;D++)-1!==(C=j.inArray(N[q],this._model.data[u.parents[D]].children_d))&&(this._model.data[u.parents[D]].children_d=j.vakata.array_remove(this._model.data[u.parents[D]].children_d,C));this._model.data[N[q]].state.selected&&(L=!0,-1!==(C=j.inArray(N[q],this._data.core.selected))&&(this._data.core.selected=j.vakata.array_remove(this._data.core.selected,C)))}for(this.trigger("delete_node",{node:u,parent:x.id}),L&&this.trigger("changed",{action:"delete_node",node:u,selected:this._data.core.selected,parent:x.id}),q=0,F=N.length;F>q;q++)delete this._model.data[N[q]];return this.redraw_node(x,!0),!0},check:function(u,k,g,x,C){k=k&&k.id?k:this.get_node(k),g=g&&g.id?g:this.get_node(g);var N=u.match(/^move_node|copy_node|create_node$/i)?g:k,D=this.settings.core.check_callback;return"move_node"!==u&&"copy_node"!==u||C&&C.is_multi||k.id!==g.id&&j.inArray(k.id,g.children)!==x&&-1===j.inArray(g.id,k.children_d)?(N&&N.data&&(N=N.data),N&&N.functions&&(!1===N.functions[u]||!0===N.functions[u])?(!1===N.functions[u]&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+u,data:JSON.stringify({chk:u,pos:x,obj:!(!k||!k.id)&&k.id,par:!(!g||!g.id)&&g.id})}),N.functions[u]):!(!1===D||j.isFunction(D)&&!1===D.call(this,u,k,g,x,C)||D&&!1===D[u])||(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+u,data:JSON.stringify({chk:u,pos:x,obj:!(!k||!k.id)&&k.id,par:!(!g||!g.id)&&g.id})},!1)):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:u,pos:x,obj:!(!k||!k.id)&&k.id,par:!(!g||!g.id)&&g.id})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(u,k,g,x,C){var N,D,m,q,F,L,re,G,K,we,ge,St,l,vt;if(k=this.get_node(k),g=g===jt?0:g,!k)return!1;if(!g.toString().match(/^(before|after)$/)&&!C&&!this.is_loaded(k))return this.load_node(k,function(){this.move_node(u,k,g,x,!0)});if(j.isArray(u)){for(N=0,D=(u=u.reverse().slice()).length;D>N;N++)this.move_node(u[N],k,g,x,C);return!0}if(!(u=u&&u.id?u:this.get_node(u))||"#"===u.id)return!1;if(m=(u.parent||"#").toString(),F=g.toString().match(/^(before|after)$/)&&"#"!==k.id?this.get_node(k.parent):k,re=!(L=u.instance?u.instance:this._model.data[u.id]?this:j.jstree.reference(u.id))||!L._id||this._id!==L._id,q=L&&L._id&&m&&L._model.data[m]&&L._model.data[m].children?j.inArray(u.id,L._model.data[m].children):-1,re)return!!this.copy_node(u,k,g,x,C)&&(L&&L.delete_node(u),!0);switch("#"===F.id&&("before"===g&&(g="first"),"after"===g&&(g="last")),g){case"before":g=j.inArray(k.id,F.children);break;case"after":g=j.inArray(k.id,F.children)+1;break;case"inside":case"first":g=0;break;case"last":g=F.children.length;break;default:g||(g=0)}if(g>F.children.length&&(g=F.children.length),!this.check("move_node",u,F,g,{core:!0,is_multi:L&&L._id&&L._id!==this._id,is_foreign:!L||!L._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(u.parent===F.id){for(G=F.children.concat(),-1!==(K=j.inArray(u.id,G))&&(G=j.vakata.array_remove(G,K),g>K&&g--),K=[],we=0,ge=G.length;ge>we;we++)K[we>=g?we+1:we]=G[we];K[g]=u.id,F.children=K,this._node_changed(F.id),this.redraw("#"===F.id)}else{for((K=u.children_d.concat()).push(u.id),we=0,ge=u.parents.length;ge>we;we++){for(G=[],St=0,l=(vt=L._model.data[u.parents[we]].children_d).length;l>St;St++)-1===j.inArray(vt[St],K)&&G.push(vt[St]);L._model.data[u.parents[we]].children_d=G}for(L._model.data[m].children=j.vakata.array_remove_item(L._model.data[m].children,u.id),we=0,ge=F.parents.length;ge>we;we++)this._model.data[F.parents[we]].children_d=this._model.data[F.parents[we]].children_d.concat(K);for(G=[],we=0,ge=F.children.length;ge>we;we++)G[we>=g?we+1:we]=F.children[we];for(G[g]=u.id,F.children=G,F.children_d.push(u.id),F.children_d=F.children_d.concat(u.children_d),u.parent=F.id,(K=F.parents.concat()).unshift(F.id),vt=u.parents.length,u.parents=K,K=K.concat(),we=0,ge=u.children_d.length;ge>we;we++)this._model.data[u.children_d[we]].parents=this._model.data[u.children_d[we]].parents.slice(0,-1*vt),Array.prototype.push.apply(this._model.data[u.children_d[we]].parents,K);this._node_changed(m),this._node_changed(F.id),this.redraw("#"===m||"#"===F.id)}return x&&x.call(this,u,F,g),this.trigger("move_node",{node:u,parent:F.id,position:g,old_parent:m,old_position:q,is_multi:L&&L._id&&L._id!==this._id,is_foreign:!L||!L._id,old_instance:L,new_instance:this}),!0},copy_node:function(u,k,g,x,C){var N,D,m,q,F,L,re,G,K,we;if(k=this.get_node(k),g=g===jt?0:g,!k)return!1;if(!g.toString().match(/^(before|after)$/)&&!C&&!this.is_loaded(k))return this.load_node(k,function(){this.copy_node(u,k,g,x,!0)});if(j.isArray(u)){for(N=0,D=(u=u.reverse().slice()).length;D>N;N++)this.copy_node(u[N],k,g,x,C);return!0}if(!(u=u&&u.id?u:this.get_node(u))||"#"===u.id)return!1;switch(G=(u.parent||"#").toString(),K=g.toString().match(/^(before|after)$/)&&"#"!==k.id?this.get_node(k.parent):k,we=u.instance?u.instance:this._model.data[u.id]?this:j.jstree.reference(u.id),"#"===K.id&&("before"===g&&(g="first"),"after"===g&&(g="last")),g){case"before":g=j.inArray(k.id,K.children);break;case"after":g=j.inArray(k.id,K.children)+1;break;case"inside":case"first":g=0;break;case"last":g=K.children.length;break;default:g||(g=0)}if(g>K.children.length&&(g=K.children.length),!this.check("copy_node",u,K,g,{core:!0,is_multi:we&&we._id&&we._id!==this._id,is_foreign:!we||!we._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!((re=we?we.get_json(u,{no_id:!0,no_data:!0,no_state:!0}):u)&&(!0===re.id&&delete re.id,re=this._parse_model_from_json(re,K.id,K.parents.concat()))))return!1;for(q=this.get_node(re),u&&u.state&&!1===u.state.loaded&&(q.state.loaded=!1),(m=[]).push(re),m=m.concat(q.children_d),this.trigger("model",{nodes:m,parent:K.id}),F=0,L=K.parents.length;L>F;F++)this._model.data[K.parents[F]].children_d=this._model.data[K.parents[F]].children_d.concat(m);for(m=[],F=0,L=K.children.length;L>F;F++)m[F>=g?F+1:F]=K.children[F];return m[g]=q.id,K.children=m,K.children_d.push(q.id),K.children_d=K.children_d.concat(q.children_d),this._node_changed(K.id),this.redraw("#"===K.id),x&&x.call(this,q,K,g),this.trigger("copy_node",{node:q,original:u,parent:K.id,position:g,old_parent:G,old_position:we&&we._id&&G&&we._model.data[G]&&we._model.data[G].children?j.inArray(u.id,we._model.data[G].children):-1,is_multi:we&&we._id&&we._id!==this._id,is_foreign:!we||!we._id,old_instance:we,new_instance:this}),q.id},cut:function(u){if(u||(u=this._data.core.selected.concat()),j.isArray(u)||(u=[u]),!u.length)return!1;var g,x,C,k=[];for(x=0,C=u.length;C>x;x++)(g=this.get_node(u[x]))&&g.id&&"#"!==g.id&&k.push(g);return!!k.length&&(En=k,Tn=this,an="move_node",void this.trigger("cut",{node:u}))},copy:function(u){if(u||(u=this._data.core.selected.concat()),j.isArray(u)||(u=[u]),!u.length)return!1;var g,x,C,k=[];for(x=0,C=u.length;C>x;x++)(g=this.get_node(u[x]))&&g.id&&"#"!==g.id&&k.push(g);return!!k.length&&(En=k,Tn=this,an="copy_node",void this.trigger("copy",{node:u}))},get_buffer:function(){return{mode:an,node:En,inst:Tn}},can_paste:function(){return!1!==an&&!1!==En},paste:function(u,k){return!!((u=this.get_node(u))&&an&&an.match(/^(copy_node|move_node)$/)&&En)&&(this[an](En,u,k)&&this.trigger("paste",{parent:u.id,node:En,mode:an}),En=!1,an=!1,void(Tn=!1))},edit:function(u,k){if(!(u=this.get_node(u)))return!1;if(!1===this.settings.core.check_callback)return this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"},this.settings.core.error.call(this,this._data.core.last_error),!1;k="string"==typeof k?k:u.text,this.set_text(u,""),u=this._open_to(u);var g=this._data.core.rtl,x=this.element.width(),C=u.children(".jstree-anchor"),N=j("<span>"),D=k,m=j("<div />",{css:{position:"absolute",top:"-200px",left:g?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),q=j("<input />",{value:D,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:j.proxy(function(){var re=N.children(".jstree-rename-input").val();""===re&&(re=D),m.remove(),N.replaceWith(C),N.remove(),this.set_text(u,D),!1===this.rename_node(u,j("<div></div>").text(re)[this.settings.core.force_text?"text":"html"]())&&this.set_text(u,D)},this),keydown:function(L){var re=L.which;27===re&&(this.value=D),(27===re||13===re||37===re||38===re||39===re||40===re||32===re)&&L.stopImmediatePropagation(),(27===re||13===re)&&(L.preventDefault(),this.blur())},click:function(L){L.stopImmediatePropagation()},mousedown:function(L){L.stopImmediatePropagation()},keyup:function(L){q.width(Math.min(m.text("pW"+this.value).width(),x))},keypress:function(L){return 13!==L.which&&void 0}}),F={fontFamily:C.css("fontFamily")||"",fontSize:C.css("fontSize")||"",fontWeight:C.css("fontWeight")||"",fontStyle:C.css("fontStyle")||"",fontStretch:C.css("fontStretch")||"",fontVariant:C.css("fontVariant")||"",letterSpacing:C.css("letterSpacing")||"",wordSpacing:C.css("wordSpacing")||""};N.attr("class",C.attr("class")).append(C.contents().clone()).append(q),C.replaceWith(N),m.css(F),q.css(F).width(Math.min(m.text("pW"+q[0].value).width(),x))[0].select()},set_theme:function(u,k){if(!u)return!1;if(!0===k){var g=this.settings.core.themes.dir;g||(g=j.jstree.path+"/themes"),k=g+"/"+u+"/style.css"}k&&-1===j.inArray(k,at)&&(j("head").append('<link rel="stylesheet" href="'+k+'" type="text/css" />'),at.push(k)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=u,this.element.addClass("jstree-"+u),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+u+"-responsive"),this.trigger("set_theme",{theme:u})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(u){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=u,u&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},set_icon:function(u,k){var g,x,C,N;if(j.isArray(u)){for(g=0,x=(u=u.slice()).length;x>g;g++)this.set_icon(u[g],k);return!0}return!(!(u=this.get_node(u))||"#"===u.id||(N=u.icon,u.icon=k,C=this.get_node(u,!0).children(".jstree-anchor").children(".jstree-themeicon"),!1===k?this.hide_icon(u):!0===k?C.removeClass("jstree-themeicon-custom "+N).css("background","").removeAttr("rel"):-1===k.indexOf("/")&&-1===k.indexOf(".")?(C.removeClass(N).css("background",""),C.addClass(k+" jstree-themeicon-custom").attr("rel",k)):(C.removeClass(N).css("background",""),C.addClass("jstree-themeicon-custom").css("background","url('"+k+"') center center no-repeat").attr("rel",k)),0))},get_icon:function(u){return!(!(u=this.get_node(u))||"#"===u.id)&&u.icon},hide_icon:function(u){var k,g;if(j.isArray(u)){for(k=0,g=(u=u.slice()).length;g>k;k++)this.hide_icon(u[k]);return!0}return!(!(u=this.get_node(u))||"#"===u||(u.icon=!1,this.get_node(u,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),0))},show_icon:function(u){var k,g,x;if(j.isArray(u)){for(k=0,g=(u=u.slice()).length;g>k;k++)this.show_icon(u[k]);return!0}return!(!(u=this.get_node(u))||"#"===u||(x=this.get_node(u,!0),u.icon=!x.length||x.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),u.icon||(u.icon=!0),x.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),0))}},j.vakata={},j.vakata.attributes=function(u,k){u=j(u)[0];var g=k?{}:[];return u&&u.attributes&&j.each(u.attributes,function(x,C){-1===j.inArray(C.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==C.value&&""!==j.trim(C.value)&&(k?g[C.name]=C.value:g.push(C.name))}),g},j.vakata.array_unique=function(u){var g,x,C,k=[];for(g=0,C=u.length;C>g;g++){for(x=0;g>=x&&u[g]!==u[x];x++);x===g&&k.push(u[g])}return k},j.vakata.array_remove=function(u,k,g){var x=u.slice((g||k)+1||u.length);return u.length=0>k?u.length+k:k,u.push.apply(u,x),u},j.vakata.array_remove_item=function(u,k){var g=j.inArray(k,u);return-1!==g?j.vakata.array_remove(u,g):u};var U=document.createElement("I");U.className="jstree-icon jstree-checkbox",j.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0},j.jstree.plugins.checkbox=function(u,k){this.bind=function(){k.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",j.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",j.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",j.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(j.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",j.proxy(function(g,x){var m,q,C=this._model.data,D=x.nodes;for(m=0,q=D.length;q>m;m++)C[D[m]].state.checked=C[D[m]].original&&C[D[m]].original.state&&C[D[m]].original.state.checked,C[D[m]].state.checked&&this._data.checkbox.selected.push(D[m])},this)),(-1!==this.settings.checkbox.cascade.indexOf("up")||-1!==this.settings.checkbox.cascade.indexOf("down"))&&this.element.on("model.jstree",j.proxy(function(g,x){var q,F,L,re,G,K,C=this._model.data,N=C[x.parent],D=x.nodes,m=[],we=this.settings.checkbox.cascade,ge=this.settings.checkbox.tie_selection;if(-1!==we.indexOf("down"))if(N.state[ge?"selected":"checked"]){for(F=0,L=D.length;L>F;F++)C[D[F]].state[ge?"selected":"checked"]=!0;this._data[ge?"core":"checkbox"].selected=this._data[ge?"core":"checkbox"].selected.concat(D)}else for(F=0,L=D.length;L>F;F++)if(C[D[F]].state[ge?"selected":"checked"]){for(re=0,G=C[D[F]].children_d.length;G>re;re++)C[C[D[F]].children_d[re]].state[ge?"selected":"checked"]=!0;this._data[ge?"core":"checkbox"].selected=this._data[ge?"core":"checkbox"].selected.concat(C[D[F]].children_d)}if(-1!==we.indexOf("up")){for(F=0,L=N.children_d.length;L>F;F++)C[N.children_d[F]].children.length||m.push(C[N.children_d[F]].parent);for(re=0,G=(m=j.vakata.array_unique(m)).length;G>re;re++)for(N=C[m[re]];N&&"#"!==N.id;){for(q=0,F=0,L=N.children.length;L>F;F++)q+=C[N.children[F]].state[ge?"selected":"checked"];if(q!==L)break;N.state[ge?"selected":"checked"]=!0,this._data[ge?"core":"checkbox"].selected.push(N.id),(K=this.get_node(N,!0))&&K.length&&K.children(".jstree-anchor").addClass(ge?"jstree-clicked":"jstree-checked"),N=this.get_node(N.parent)}}this._data[ge?"core":"checkbox"].selected=j.vakata.array_unique(this._data[ge?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",j.proxy(function(g,x){var q,F,L,re,C=x.node,N=this._model.data,D=this.get_node(C.parent),m=this.get_node(C,!0),G=this.settings.checkbox.cascade,K=this.settings.checkbox.tie_selection;if(-1!==G.indexOf("down"))for(this._data[K?"core":"checkbox"].selected=j.vakata.array_unique(this._data[K?"core":"checkbox"].selected.concat(C.children_d)),q=0,F=C.children_d.length;F>q;q++)(re=N[C.children_d[q]]).state[K?"selected":"checked"]=!0,re&&re.original&&re.original.state&&re.original.state.undetermined&&(re.original.state.undetermined=!1);if(-1!==G.indexOf("up"))for(;D&&"#"!==D.id;){for(L=0,q=0,F=D.children.length;F>q;q++)L+=N[D.children[q]].state[K?"selected":"checked"];if(L!==F)break;D.state[K?"selected":"checked"]=!0,this._data[K?"core":"checkbox"].selected.push(D.id),(re=this.get_node(D,!0))&&re.length&&re.children(".jstree-anchor").addClass(K?"jstree-clicked":"jstree-checked"),D=this.get_node(D.parent)}-1!==G.indexOf("down")&&m.length&&m.find(".jstree-anchor").addClass(K?"jstree-clicked":"jstree-checked")},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",j.proxy(function(g,x){var D,m,q,C=this.get_node("#"),N=this._model.data;for(D=0,m=C.children_d.length;m>D;D++)(q=N[C.children_d[D]])&&q.original&&q.original.state&&q.original.state.undetermined&&(q.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",j.proxy(function(g,x){var D,m,q,C=x.node,N=this.get_node(C,!0),F=this.settings.checkbox.cascade,L=this.settings.checkbox.tie_selection;if(C&&C.original&&C.original.state&&C.original.state.undetermined&&(C.original.state.undetermined=!1),-1!==F.indexOf("down"))for(D=0,m=C.children_d.length;m>D;D++)(q=this._model.data[C.children_d[D]]).state[L?"selected":"checked"]=!1,q&&q.original&&q.original.state&&q.original.state.undetermined&&(q.original.state.undetermined=!1);if(-1!==F.indexOf("up"))for(D=0,m=C.parents.length;m>D;D++)(q=this._model.data[C.parents[D]]).state[L?"selected":"checked"]=!1,q&&q.original&&q.original.state&&q.original.state.undetermined&&(q.original.state.undetermined=!1),(q=this.get_node(C.parents[D],!0))&&q.length&&q.children(".jstree-anchor").removeClass(L?"jstree-clicked":"jstree-checked");for(q=[],D=0,m=this._data[L?"core":"checkbox"].selected.length;m>D;D++)-1!==F.indexOf("down")&&-1!==j.inArray(this._data[L?"core":"checkbox"].selected[D],C.children_d)||-1!==F.indexOf("up")&&-1!==j.inArray(this._data[L?"core":"checkbox"].selected[D],C.parents)||q.push(this._data[L?"core":"checkbox"].selected[D]);this._data[L?"core":"checkbox"].selected=j.vakata.array_unique(q),-1!==F.indexOf("down")&&N.length&&N.find(".jstree-anchor").removeClass(L?"jstree-clicked":"jstree-checked")},this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",j.proxy(function(g,x){for(var D,m,q,F,C=this.get_node(x.parent),N=this._model.data,L=this.settings.checkbox.tie_selection;C&&"#"!==C.id;){for(q=0,D=0,m=C.children.length;m>D;D++)q+=N[C.children[D]].state[L?"selected":"checked"];if(q!==m)break;C.state[L?"selected":"checked"]=!0,this._data[L?"core":"checkbox"].selected.push(C.id),(F=this.get_node(C,!0))&&F.length&&F.children(".jstree-anchor").addClass(L?"jstree-clicked":"jstree-checked"),C=this.get_node(C.parent)}},this)).on("move_node.jstree",j.proxy(function(g,x){var q,F,L,re,G,C=x.is_multi,N=x.old_parent,D=this.get_node(x.parent),m=this._model.data,K=this.settings.checkbox.tie_selection;if(!C)for(q=this.get_node(N);q&&"#"!==q.id;){for(F=0,L=0,re=q.children.length;re>L;L++)F+=m[q.children[L]].state[K?"selected":"checked"];if(F!==re)break;q.state[K?"selected":"checked"]=!0,this._data[K?"core":"checkbox"].selected.push(q.id),(G=this.get_node(q,!0))&&G.length&&G.children(".jstree-anchor").addClass(K?"jstree-clicked":"jstree-checked"),q=this.get_node(q.parent)}for(q=D;q&&"#"!==q.id;){for(F=0,L=0,re=q.children.length;re>L;L++)F+=m[q.children[L]].state[K?"selected":"checked"];if(F===re)q.state[K?"selected":"checked"]||(q.state[K?"selected":"checked"]=!0,this._data[K?"core":"checkbox"].selected.push(q.id),(G=this.get_node(q,!0))&&G.length&&G.children(".jstree-anchor").addClass(K?"jstree-clicked":"jstree-checked"));else{if(!q.state[K?"selected":"checked"])break;q.state[K?"selected":"checked"]=!1,this._data[K?"core":"checkbox"].selected=j.vakata.array_remove_item(this._data[K?"core":"checkbox"].selected,q.id),(G=this.get_node(q,!0))&&G.length&&G.children(".jstree-anchor").removeClass(K?"jstree-clicked":"jstree-checked")}q=this.get_node(q.parent)}},this))},this._undetermined=function(){var g,x,C=this._model.data,N=this.settings.checkbox.tie_selection,D=this._data[N?"core":"checkbox"].selected,m=[],q=this;for(g=0,x=D.length;x>g;g++)C[D[g]]&&C[D[g]].parents&&(m=m.concat(C[D[g]].parents));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var L,F=q.get_node(this);if(F.state.loaded)for(g=0,x=F.children_d.length;x>g;g++)!(L=C[F.children_d[g]]).state.loaded&&L.original&&L.original.state&&L.original.state.undetermined&&!0===L.original.state.undetermined&&(m.push(L.id),m=m.concat(L.parents));else F.original&&F.original.state&&F.original.state.undetermined&&!0===F.original.state.undetermined&&(m.push(F.id),m=m.concat(F.parents))}),m=j.vakata.array_unique(m),m=j.vakata.array_remove_item(m,"#"),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),g=0,x=m.length;x>g;g++)C[m[g]].state[N?"selected":"checked"]||(D=this.get_node(m[g],!0))&&D.length&&D.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")},this.redraw_node=function(g,x,C){if(g=k.redraw_node.call(this,g,x,C)){var N,D,m=null;for(N=0,D=g.childNodes.length;D>N;N++)if(g.childNodes[N]&&g.childNodes[N].className&&-1!==g.childNodes[N].className.indexOf("jstree-anchor")){m=g.childNodes[N];break}m&&(!this.settings.checkbox.tie_selection&&this._model.data[g.id].state.checked&&(m.className+=" jstree-checked"),m.insertBefore(U.cloneNode(!1),m.childNodes[0]))}return C||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(j.proxy(this._undetermined,this),50)),g},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(g){g=this.get_node(g);var C,N,x=this.settings.checkbox.cascade,D=this.settings.checkbox.tie_selection,m=this._data[D?"core":"checkbox"].selected,q=this._model.data;if(!g||!0===g.state[D?"selected":"checked"]||-1===x.indexOf("undetermined")||-1===x.indexOf("down")&&-1===x.indexOf("up"))return!1;if(!g.state.loaded&&!0===g.original.state.undetermined)return!0;for(C=0,N=g.children_d.length;N>C;C++)if(-1!==j.inArray(g.children_d[C],m)||!q[g.children_d[C]].state.loaded&&q[g.children_d[C]].original.state.undetermined)return!0;return!1},this.activate_node=function(g,x){return this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||j(x.target).hasClass("jstree-checkbox"))&&(x.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!j(x.target).hasClass("jstree-checkbox")?k.activate_node.call(this,g,x):(this.is_checked(g)?this.uncheck_node(g,x):this.check_node(g,x),void this.trigger("activate_node",{node:this.get_node(g)}))},this.check_node=function(g,x){if(this.settings.checkbox.tie_selection)return this.select_node(g,!1,!0,x);var C,N,D;if(j.isArray(g)){for(N=0,D=(g=g.slice()).length;D>N;N++)this.check_node(g[N],x);return!0}return!(!(g=this.get_node(g))||"#"===g.id)&&(C=this.get_node(g,!0),void(g.state.checked||(g.state.checked=!0,this._data.checkbox.selected.push(g.id),C&&C.length&&C.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:g,selected:this._data.checkbox.selected,event:x}))))},this.uncheck_node=function(g,x){if(this.settings.checkbox.tie_selection)return this.deselect_node(g,!1,x);var C,N,D;if(j.isArray(g)){for(C=0,N=(g=g.slice()).length;N>C;C++)this.uncheck_node(g[C],x);return!0}return!(!(g=this.get_node(g))||"#"===g.id)&&(D=this.get_node(g,!0),void(g.state.checked&&(g.state.checked=!1,this._data.checkbox.selected=j.vakata.array_remove_item(this._data.checkbox.selected,g.id),D.length&&D.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:g,selected:this._data.checkbox.selected,event:x}))))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var x,C;for(this._data.checkbox.selected.concat([]),this._data.checkbox.selected=this._model.data["#"].children_d.concat(),x=0,C=this._data.checkbox.selected.length;C>x;x++)this._model.data[this._data.checkbox.selected[x]]&&(this._model.data[this._data.checkbox.selected[x]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var x,C,g=this._data.checkbox.selected.concat([]);for(x=0,C=this._data.checkbox.selected.length;C>x;x++)this._model.data[this._data.checkbox.selected[x]]&&(this._model.data[this._data.checkbox.selected[x]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:g})},this.is_checked=function(g){return this.settings.checkbox.tie_selection?this.is_selected(g):!(!(g=this.get_node(g))||"#"===g.id)&&g.state.checked},this.get_checked=function(g){return this.settings.checkbox.tie_selection?this.get_selected(g):g?j.map(this._data.checkbox.selected,j.proxy(function(x){return this.get_node(x)},this)):this._data.checkbox.selected},this.get_top_checked=function(g){if(this.settings.checkbox.tie_selection)return this.get_top_selected(g);var N,D,m,q,x=this.get_checked(!0),C={};for(N=0,D=x.length;D>N;N++)C[x[N].id]=x[N];for(N=0,D=x.length;D>N;N++)for(m=0,q=x[N].children_d.length;q>m;m++)C[x[N].children_d[m]]&&delete C[x[N].children_d[m]];for(N in x=[],C)C.hasOwnProperty(N)&&x.push(N);return g?j.map(x,j.proxy(function(F){return this.get_node(F)},this)):x},this.get_bottom_checked=function(g){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(g);var N,D,x=this.get_checked(!0),C=[];for(N=0,D=x.length;D>N;N++)x[N].children.length||C.push(x[N].id);return g?j.map(C,j.proxy(function(m){return this.get_node(m)},this)):C}},j.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(u,k){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(g){var x=j.jstree.reference(g.reference),C=x.get_node(g.reference);x.create_node(C,{},"last",function(N){setTimeout(function(){x.edit(N)},0)})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(g){var x=j.jstree.reference(g.reference),C=x.get_node(g.reference);x.edit(C)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(g){var x=j.jstree.reference(g.reference),C=x.get_node(g.reference);x.delete_node(x.is_selected(C)?x.get_selected():C)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(g){var x=j.jstree.reference(g.reference),C=x.get_node(g.reference);x.cut(x.is_selected(C)?x.get_selected():C)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(g){var x=j.jstree.reference(g.reference),C=x.get_node(g.reference);x.copy(x.is_selected(C)?x.get_selected():C)}},paste:{separator_before:!1,icon:!1,_disabled:function(g){return!j.jstree.reference(g.reference).can_paste()},separator_after:!1,label:"Paste",action:function(g){var x=j.jstree.reference(g.reference),C=x.get_node(g.reference);x.paste(C)}}}}}}},j.jstree.plugins.contextmenu=function(u,k){this.bind=function(){k.bind.call(this);var g=0;this.element.on("contextmenu.jstree",".jstree-anchor",j.proxy(function(x){x.preventDefault(),g=x.ctrlKey?x.timeStamp:0,this.is_loading(x.currentTarget)||this.show_contextmenu(x.currentTarget,x.pageX,x.pageY,x)},this)).on("click.jstree",".jstree-anchor",j.proxy(function(x){this._data.contextmenu.visible&&(!g||x.timeStamp-g>250)&&j.vakata.context.hide()},this)),j(document).on("context_hide.vakata.jstree",j.proxy(function(){this._data.contextmenu.visible=!1},this))},this.teardown=function(){this._data.contextmenu.visible&&j.vakata.context.hide(),k.teardown.call(this)},this.show_contextmenu=function(g,x,C,N){if(!(g=this.get_node(g))||"#"===g.id)return!1;var D=this.settings.contextmenu,q=this.get_node(g,!0).children(".jstree-anchor"),F=!1,L=!1;(D.show_at_node||x===jt||C===jt)&&(F=q.offset(),x=F.left,C=F.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(g)&&this.activate_node(g,N),j.isFunction(L=D.items)&&(L=L.call(this,g,j.proxy(function(re){this._show_contextmenu(g,x,C,re)},this))),j.isPlainObject(L)&&this._show_contextmenu(g,x,C,L)},this._show_contextmenu=function(g,x,C,N){var m=this.get_node(g,!0).children(".jstree-anchor");j(document).one("context_show.vakata.jstree",j.proxy(function(q,F){var L="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";j(F.element).addClass(L)},this)),this._data.contextmenu.visible=!0,j.vakata.context.show(m,{x,y:C},N),this.trigger("show_contextmenu",{node:g,x,y:C})}},k=!1,g={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1},(u=j).vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(x){u(document).triggerHandler("context_"+x+".vakata",{reference:g.reference,element:g.element,position:{x:g.position_x,y:g.position_y}})},_execute:function(x){return!(!(x=g.items[x])||x._disabled&&(!u.isFunction(x._disabled)||x._disabled({item:x,reference:g.reference,element:g.element}))||!x.action)&&x.action.call(null,{item:x,reference:g.reference,element:g.element,position:{x:g.position_x,y:g.position_y}})},_parse:function(x,C){if(!x)return!1;C||(g.html="",g.items=[]);var m,N="",D=!1;return C&&(N+="<ul>"),u.each(x,function(q,F){return!F||(g.items.push(F),!D&&F.separator_before&&(N+="<li class='vakata-context-separator'><a href='#' "+(u.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),D=!1,N+="<li class='"+(F._class||"")+(!0===F._disabled||u.isFunction(F._disabled)&&F._disabled({item:F,reference:g.reference,element:g.element})?" vakata-contextmenu-disabled ":"")+"' "+(F.shortcut?" data-shortcut='"+F.shortcut+"' ":"")+">",N+="<a href='#' rel='"+(g.items.length-1)+"'>",u.vakata.context.settings.icons&&(N+="<i ",F.icon&&(N+=-1!==F.icon.indexOf("/")||-1!==F.icon.indexOf(".")?" style='background:url(\""+F.icon+"\") center center no-repeat' ":" class='"+F.icon+"' "),N+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),N+=(u.isFunction(F.label)?F.label({item:q,reference:g.reference,element:g.element}):F.label)+(F.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+F.shortcut+'">'+(F.shortcut_label||"")+"</span>":"")+"</a>",F.submenu&&(m=u.vakata.context._parse(F.submenu,!0))&&(N+=m),N+="</li>",void(F.separator_after&&(N+="<li class='vakata-context-separator'><a href='#' "+(u.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",D=!0)))}),N=N.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),C&&(N+="</ul>"),C||(g.html=N,u.vakata.context._trigger("parse")),N.length>10&&N},_show_submenu:function(x){if((x=u(x)).length&&x.children("ul").length){var C=x.children("ul"),N=x.offset().left+x.outerWidth(),D=x.offset().top,m=C.width(),q=C.height(),F=u(window).width()+u(window).scrollLeft(),L=u(window).height()+u(window).scrollTop();k?x[N-(m+10+x.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):x[N+m+10>F?"addClass":"removeClass"]("vakata-context-right"),D+q+10>L&&C.css("bottom","-1px"),C.show()}},show:function(x,C,N){var D,m,q,F,L,re,G,K;switch(g.element&&g.element.length&&g.element.width(""),!0){case!C&&!x:return!1;case!!C&&!!x:g.reference=x,g.position_x=C.x,g.position_y=C.y;break;case!C&&!!x:g.reference=x,D=x.offset(),g.position_x=D.left+x.outerHeight(),g.position_y=D.top;break;case!!C&&!x:g.position_x=C.x,g.position_y=C.y}x&&!N&&u(x).data("vakata_contextmenu")&&(N=u(x).data("vakata_contextmenu")),u.vakata.context._parse(N)&&g.element.html(g.html),g.items.length&&(g.element.appendTo("body"),q=g.position_x,F=g.position_y,L=(m=g.element).width(),re=m.height(),G=u(window).width()+u(window).scrollLeft(),K=u(window).height()+u(window).scrollTop(),k&&(q-=m.outerWidth())<u(window).scrollLeft()+20&&(q=u(window).scrollLeft()+20),q+L+20>G&&(q=G-(L+20)),F+re+20>K&&(F=K-(re+20)),g.element.css({left:q,top:F}).show().find("a:eq(0)").focus().parent().addClass("vakata-context-hover"),g.is_visible=!0,u.vakata.context._trigger("show"))},hide:function(){g.is_visible&&(g.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),g.is_visible=!1,u.vakata.context._trigger("hide"))}},u(function(){k="rtl"===u("body").css("direction");var x=!1;g.element=u("<ul class='vakata-context'></ul>"),g.element.on("mouseenter","li",function(C){C.stopImmediatePropagation(),u.contains(this,C.relatedTarget)||(x&&clearTimeout(x),g.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),u(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),u.vakata.context._show_submenu(this))}).on("mouseleave","li",function(C){u.contains(this,C.relatedTarget)||u(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(C){u(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),u.vakata.context.settings.hide_onmouseleave&&(x=setTimeout(function(){u.vakata.context.hide()},u.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(C){C.preventDefault(),u(this).blur().parent().hasClass("vakata-context-disabled")||!1===u.vakata.context._execute(u(this).attr("rel"))||u.vakata.context.hide()}).on("keydown","a",function(C){var N=null;switch(C.which){case 13:case 32:C.type="mouseup",C.preventDefault(),u(C.currentTarget).trigger(C);break;case 37:g.is_visible&&(g.element.find(".vakata-context-hover").last().parents("li:eq(0)").find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),C.stopImmediatePropagation(),C.preventDefault());break;case 38:g.is_visible&&((N=g.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first()).length||(N=g.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),N.addClass("vakata-context-hover").children("a").focus(),C.stopImmediatePropagation(),C.preventDefault());break;case 39:g.is_visible&&(g.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),C.stopImmediatePropagation(),C.preventDefault());break;case 40:g.is_visible&&((N=g.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first()).length||(N=g.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),N.addClass("vakata-context-hover").children("a").focus(),C.stopImmediatePropagation(),C.preventDefault());break;case 27:u.vakata.context.hide(),C.preventDefault()}}).on("keydown",function(C){C.preventDefault();var N=g.element.find(".vakata-contextmenu-shortcut-"+C.which).parent();N.parent().not(".vakata-context-disabled")&&N.click()}),u(document).on("mousedown.vakata.jstree",function(C){g.is_visible&&!u.contains(g.element[0],C.target)&&u.vakata.context.hide()}).on("context_show.vakata.jstree",function(C,N){g.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),k&&g.element.addClass("vakata-context-rtl").css("direction","rtl"),g.element.find("ul").hide().end()})}),j.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0},j.jstree.plugins.dnd=function(u,k){this.bind=function(){k.bind.call(this),this.element.on("mousedown.jstree touchstart.jstree",".jstree-anchor",j.proxy(function(g){var x=this.get_node(g.target),C=this.is_selected(x)?this.get_selected().length:1;return x&&x.id&&"#"!==x.id&&(1===g.which||"touchstart"===g.type)&&(!0===this.settings.dnd.is_draggable||j.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,C>1?this.get_selected(!0):[x]))?(this.element.trigger("mousedown.jstree"),j.vakata.dnd.start(g,{jstree:!0,origin:this,obj:this.get_node(x,!0),nodes:C>1?this.get_selected():[x.id]},'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+(C>1?C+" "+this.get_string("nodes"):this.get_text(g.currentTarget,!0))+'<ins class="jstree-copy" style="display:none;">+</ins></div>')):void 0},this))}},j(function(){var u=!1,k=!1,g=!1,x=j('<div id="jstree-marker">&#160;</div>').hide();j(document).on("dnd_start.vakata.jstree",function(C,N){u=!1,N&&N.data&&N.data.jstree&&x.appendTo("body")}).on("dnd_move.vakata.jstree",function(C,N){if(g&&clearTimeout(g),N&&N.data&&N.data.jstree&&(!N.event.target.id||"jstree-marker"!==N.event.target.id)){var L,re,G,K,we,ge,St,l,vt,ue,Tt,_t,R,Ne,D=j.jstree.reference(N.event.target),m=!1,q=!1,F=!1;if(D&&D._data&&D._data.dnd)if(x.attr("class","jstree-"+D.get_theme()+(D.settings.core.themes.responsive?" jstree-dnd-responsive":"")),N.helper.children().attr("class","jstree-"+D.get_theme()+" jstree-"+D.get_theme()+"-"+D.get_theme_variant()+" "+(D.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy:eq(0)")[N.data.origin&&(N.data.origin.settings.dnd.always_copy||N.data.origin.settings.dnd.copy&&(N.event.metaKey||N.event.ctrlKey))?"show":"hide"](),N.event.target!==D.element[0]&&N.event.target!==D.get_container_ul()[0]||0!==D.get_container_ul().children().length){if((m=j(N.event.target).closest(".jstree-anchor"))&&m.length&&m.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(q=m.offset(),F=N.event.pageY-q.top,G=m.height(),j.each(ge=G/3>F?["b","i","a"]:F>G-G/3?["a","i","b"]:F>G/2?["i","a","b"]:["i","b","a"],function(Jt,Dn){switch(Dn){case"b":L=q.left-6,re=q.top,K=D.get_parent(m),we=m.parent().index();break;case"i":R=D.settings.dnd.inside_pos,Ne=D.get_node(m.parent()),L=q.left-2,re=q.top+G/2+1,K=Ne.id,we="first"===R?0:"last"===R?Ne.children.length:Math.min(R,Ne.children.length);break;case"a":L=q.left-6,re=q.top+G,K=D.get_parent(m),we=m.parent().index()+1}for(St=!0,l=0,vt=N.data.nodes.length;vt>l;l++)if(Tt=we,"move_node"==(ue=N.data.origin&&(N.data.origin.settings.dnd.always_copy||N.data.origin.settings.dnd.copy&&(N.event.metaKey||N.event.ctrlKey))?"copy_node":"move_node")&&"a"===Dn&&N.data.origin&&N.data.origin===D&&K===D.get_parent(N.data.nodes[l])&&(_t=D.get_node(K),Tt>j.inArray(N.data.nodes[l],_t.children)&&(Tt-=1)),!(St=St&&(D&&D.settings&&D.settings.dnd&&!1===D.settings.dnd.check_while_dragging||D.check(ue,N.data.origin&&N.data.origin!==D?N.data.origin.get_node(N.data.nodes[l]):N.data.nodes[l],K,Tt,{dnd:!0,ref:D.get_node(m.parent()),pos:Dn,is_multi:N.data.origin&&N.data.origin!==D,is_foreign:!N.data.origin})))){D&&D.last_error&&(k=D.last_error());break}return St?("i"===Dn&&m.parent().is(".jstree-closed")&&D.settings.dnd.open_timeout&&(g=setTimeout((Zn=D,Oe=m,function(){Zn.open_node(Oe)}),D.settings.dnd.open_timeout)),u={ins:D,par:K,pos:"i"!==Dn||"last"!==R||0!==we||D.is_loaded(Ne)?we:"last"},x.css({left:L+"px",top:re+"px"}).show(),N.helper.find(".jstree-icon:eq(0)").removeClass("jstree-er").addClass("jstree-ok"),k={},ge=!0,!1):void 0;var Zn,Oe}),!0===ge))return}else{for(St=!0,l=0,vt=N.data.nodes.length;vt>l&&(St=St&&D.check(N.data.origin&&(N.data.origin.settings.dnd.always_copy||N.data.origin.settings.dnd.copy&&(N.event.metaKey||N.event.ctrlKey))?"copy_node":"move_node",N.data.origin&&N.data.origin!==D?N.data.origin.get_node(N.data.nodes[l]):N.data.nodes[l],"#","last",{dnd:!0,ref:D.get_node("#"),pos:"i",is_multi:N.data.origin&&N.data.origin!==D,is_foreign:!N.data.origin}));l++);if(St)return u={ins:D,par:"#",pos:"last"},x.hide(),void N.helper.find(".jstree-icon:eq(0)").removeClass("jstree-er").addClass("jstree-ok")}u=!1,N.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),x.hide()}}).on("dnd_scroll.vakata.jstree",function(C,N){N&&N.data&&N.data.jstree&&(x.hide(),u=!1,N.helper.find(".jstree-icon:eq(0)").removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(C,N){if(g&&clearTimeout(g),N&&N.data&&N.data.jstree){x.hide().detach();var D,m,q=[];if(u){for(D=0,m=N.data.nodes.length;m>D;D++)q[D]=N.data.origin?N.data.origin.get_node(N.data.nodes[D]):N.data.nodes[D],N.data.origin&&(q[D].instance=N.data.origin);for(u.ins[N.data.origin&&(N.data.origin.settings.dnd.always_copy||N.data.origin.settings.dnd.copy&&(N.event.metaKey||N.event.ctrlKey))?"copy_node":"move_node"](q,u.par,u.pos),D=0,m=q.length;m>D;D++)q[D].instance&&(q[D].instance=null)}else(D=j(N.event.target).closest(".jstree")).length&&k&&k.error&&"check"===k.error&&(D=D.jstree(!0))&&D.settings.core.error.call(this,k)}}).on("keyup.jstree keydown.jstree",function(C,N){(N=j.vakata.dnd._get())&&N.data&&N.data.jstree&&N.helper.find(".jstree-copy:eq(0)")[N.data.origin&&(N.data.origin.settings.dnd.always_copy||N.data.origin.settings.dnd.copy&&(C.metaKey||C.ctrlKey))?"show":"hide"]()})}),function(u){var k={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};u.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(g,x){var C=u.vakata.dnd._get();C.event=x,u(document).triggerHandler("dnd_"+g+".vakata",C)},_get:function(){return{data:k.data,element:k.element,helper:k.helper}},_clean:function(){k.helper&&k.helper.remove(),k.scroll_i&&(clearInterval(k.scroll_i),k.scroll_i=!1),k={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},u(document).off("mousemove.vakata.jstree touchmove.vakata.jstree",u.vakata.dnd.drag),u(document).off("mouseup.vakata.jstree touchend.vakata.jstree",u.vakata.dnd.stop)},_scroll:function(g){if(!k.scroll_e||!k.scroll_l&&!k.scroll_t)return k.scroll_i&&(clearInterval(k.scroll_i),k.scroll_i=!1),!1;if(!k.scroll_i)return k.scroll_i=setInterval(u.vakata.dnd._scroll,100),!1;if(!0===g)return!1;var x=k.scroll_e.scrollTop(),C=k.scroll_e.scrollLeft();k.scroll_e.scrollTop(x+k.scroll_t*u.vakata.dnd.settings.scroll_speed),k.scroll_e.scrollLeft(C+k.scroll_l*u.vakata.dnd.settings.scroll_speed),(x!==k.scroll_e.scrollTop()||C!==k.scroll_e.scrollLeft())&&u.vakata.dnd._trigger("scroll",k.scroll_e)},start:function(g,x,C){"touchstart"===g.type&&g.originalEvent&&g.originalEvent.changedTouches&&g.originalEvent.changedTouches[0]&&(g.pageX=g.originalEvent.changedTouches[0].pageX,g.pageY=g.originalEvent.changedTouches[0].pageY,g.target=document.elementFromPoint(g.originalEvent.changedTouches[0].pageX-window.pageXOffset,g.originalEvent.changedTouches[0].pageY-window.pageYOffset)),k.is_drag&&u.vakata.dnd.stop({});try{g.currentTarget.unselectable="on",g.currentTarget.onselectstart=function(){return!1},g.currentTarget.style&&(g.currentTarget.style.MozUserSelect="none")}catch{}return k.init_x=g.pageX,k.init_y=g.pageY,k.data=x,k.is_down=!0,k.element=g.currentTarget,k.target=g.target,k.is_touch="touchstart"===g.type,!1!==C&&(k.helper=u("<div id='vakata-dnd'></div>").html(C).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),u(document).on("mousemove.vakata.jstree touchmove.vakata.jstree",u.vakata.dnd.drag),u(document).on("mouseup.vakata.jstree touchend.vakata.jstree",u.vakata.dnd.stop),!1},drag:function(g){if("touchmove"===g.type&&g.originalEvent&&g.originalEvent.changedTouches&&g.originalEvent.changedTouches[0]&&(g.pageX=g.originalEvent.changedTouches[0].pageX,g.pageY=g.originalEvent.changedTouches[0].pageY,g.target=document.elementFromPoint(g.originalEvent.changedTouches[0].pageX-window.pageXOffset,g.originalEvent.changedTouches[0].pageY-window.pageYOffset)),k.is_down){if(!k.is_drag){if(!(Math.abs(g.pageX-k.init_x)>(k.is_touch?u.vakata.dnd.settings.threshold_touch:u.vakata.dnd.settings.threshold)||Math.abs(g.pageY-k.init_y)>(k.is_touch?u.vakata.dnd.settings.threshold_touch:u.vakata.dnd.settings.threshold)))return;k.helper&&(k.helper.appendTo("body"),k.helper_w=k.helper.outerWidth()),k.is_drag=!0,u.vakata.dnd._trigger("start",g)}var x=!1,C=!1,N=!1,D=!1,m=!1,q=!1,F=!1,L=!1,re=!1,G=!1;return k.scroll_t=0,k.scroll_l=0,k.scroll_e=!1,u(u(g.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(u(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var K=u(this),we=K.offset();return this.scrollHeight>this.offsetHeight&&(we.top+K.height()-g.pageY<u.vakata.dnd.settings.scroll_proximity&&(k.scroll_t=1),g.pageY-we.top<u.vakata.dnd.settings.scroll_proximity&&(k.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(we.left+K.width()-g.pageX<u.vakata.dnd.settings.scroll_proximity&&(k.scroll_l=1),g.pageX-we.left<u.vakata.dnd.settings.scroll_proximity&&(k.scroll_l=-1)),k.scroll_t||k.scroll_l?(k.scroll_e=u(this),!1):void 0}),k.scroll_e||(x=u(document),C=u(window),N=x.height(),D=C.height(),m=x.width(),q=C.width(),F=x.scrollTop(),L=x.scrollLeft(),N>D&&g.pageY-F<u.vakata.dnd.settings.scroll_proximity&&(k.scroll_t=-1),N>D&&D-(g.pageY-F)<u.vakata.dnd.settings.scroll_proximity&&(k.scroll_t=1),m>q&&g.pageX-L<u.vakata.dnd.settings.scroll_proximity&&(k.scroll_l=-1),m>q&&q-(g.pageX-L)<u.vakata.dnd.settings.scroll_proximity&&(k.scroll_l=1),(k.scroll_t||k.scroll_l)&&(k.scroll_e=x)),k.scroll_e&&u.vakata.dnd._scroll(!0),k.helper&&(re=parseInt(g.pageY+u.vakata.dnd.settings.helper_top,10),G=parseInt(g.pageX+u.vakata.dnd.settings.helper_left,10),N&&re+25>N&&(re=N-50),m&&G+k.helper_w>m&&(G=m-(k.helper_w+2)),k.helper.css({left:G+"px",top:re+"px"})),u.vakata.dnd._trigger("move",g),!1}},stop:function(g){if("touchend"===g.type&&g.originalEvent&&g.originalEvent.changedTouches&&g.originalEvent.changedTouches[0]&&(g.pageX=g.originalEvent.changedTouches[0].pageX,g.pageY=g.originalEvent.changedTouches[0].pageY,g.target=document.elementFromPoint(g.originalEvent.changedTouches[0].pageX-window.pageXOffset,g.originalEvent.changedTouches[0].pageY-window.pageYOffset)),k.is_drag)u.vakata.dnd._trigger("stop",g);else if("touchend"===g.type&&g.target===k.target){var x=setTimeout(function(){u(g.target).click()},100);u(g.target).one("click",function(){x&&clearTimeout(x)})}return u.vakata.dnd._clean(),!1}}}(j),j.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},j.jstree.plugins.search=function(u,k){this.bind=function(){k.bind.call(this),this._data.search.str="",this._data.search.dom=j(),this._data.search.res=[],this._data.search.opn=[],this.element.on("before_open.jstree",j.proxy(function(g,x){var C,N,m=this._data.search.res,q=[],F=j();if(m&&m.length&&(this._data.search.dom=j(this.element[0].querySelectorAll("#"+j.map(m,function(L){return-1!=="0123456789".indexOf(L[0])?"\\3"+L[0]+" "+L.substr(1).replace(j.jstree.idregex,"\\$&"):L.replace(j.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search"),this.settings.search.show_only_matches&&this._data.search.res.length)){for(C=0,N=m.length;N>C;C++)q=q.concat(this.get_node(m[C]).parents);F=(q=j.vakata.array_remove_item(j.vakata.array_unique(q),"#")).length?j(this.element[0].querySelectorAll("#"+j.map(q,function(L){return-1!=="0123456789".indexOf(L[0])?"\\3"+L[0]+" "+L.substr(1).replace(j.jstree.idregex,"\\$&"):L.replace(j.jstree.idregex,"\\$&")}).join(", #"))):j(),this.element.find(".jstree-node").hide().filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last"),(F=F.add(this._data.search.dom)).parentsUntil(".jstree").addBack().show().filter(".jstree-children").each(function(){j(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")})}},this)),this.settings.search.show_only_matches&&this.element.on("search.jstree",function(g,x){x.nodes.length&&(j(this).find(".jstree-node").hide().filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last"),x.nodes.parentsUntil(".jstree").addBack().show().filter(".jstree-children").each(function(){j(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")}))}).on("clear_search.jstree",function(g,x){x.nodes.length&&j(this).find(".jstree-node").css("display","").filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last")})},this.search=function(g,x){if(!1===g||""===j.trim(g.toString()))return this.clear_search();g=g.toString();var C=this.settings.search,N=!!C.ajax&&C.ajax,D=null,m=[],q=[];return this._data.search.res.length&&this.clear_search(),x||!1===N?(this._data.search.str=g,this._data.search.dom=j(),this._data.search.res=[],this._data.search.opn=[],D=new j.vakata.search(g,!0,{caseSensitive:C.case_sensitive,fuzzy:C.fuzzy}),j.each(this._model.data,function(re,G){G.text&&(C.search_callback&&C.search_callback.call(this,g,G)||!C.search_callback&&D.search(G.text).isMatch)&&(!C.search_leaves_only||G.state.loaded&&0===G.children.length)&&(m.push(re),q=q.concat(G.parents))}),m.length&&(q=j.vakata.array_unique(q),this._search_open(q),this._data.search.dom=j(this.element[0].querySelectorAll("#"+j.map(m,function(re){return-1!=="0123456789".indexOf(re[0])?"\\3"+re[0]+" "+re.substr(1).replace(j.jstree.idregex,"\\$&"):re.replace(j.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=m,this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")),void this.trigger("search",{nodes:this._data.search.dom,str:g,res:this._data.search.res})):j.isFunction(N)?N.call(this,g,j.proxy(function(re){re&&re.d&&(re=re.d),this._load_nodes(j.isArray(re)?j.vakata.array_unique(re):[],function(){this.search(g,!0)},!0)},this)):((N=j.extend({},N)).data||(N.data={}),N.data.str=g,j.ajax(N).fail(j.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(N)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done(j.proxy(function(re){re&&re.d&&(re=re.d),this._load_nodes(j.isArray(re)?j.vakata.array_unique(re):[],function(){this.search(g,!0)},!0)},this)))},this.clear_search=function(){this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search"),this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=j()},this._search_open=function(g){var x=this;j.each(g.concat([]),function(C,N){if("#"===N)return!0;try{N=j("#"+N.replace(j.jstree.idregex,"\\$&"),x.element)}catch{}N&&N.length&&x.is_closed(N)&&(x._data.search.opn.push(N[0].id),x.open_node(N,function(){x._search_open(g)},0))})}},function(u){u.vakata.search=function(k,g,x){!1!==(x=x||{}).fuzzy&&(x.fuzzy=!0),k=x.caseSensitive?k:k.toLowerCase();var q,F,L,re,C=x.location||0,N=x.distance||100,D=x.threshold||.6,m=k.length;return m>32&&(x.fuzzy=!1),x.fuzzy&&(q=1<<m-1,F=function(){var G={},K=0;for(K=0;m>K;K++)G[k.charAt(K)]=0;for(K=0;m>K;K++)G[k.charAt(K)]|=1<<m-K-1;return G}(),L=function(G,K){var we=G/m,ge=Math.abs(C-K);return N?we+ge/N:ge?1:we}),re=function(G){if(G=x.caseSensitive?G:G.toLowerCase(),k===G||-1!==G.indexOf(k))return{isMatch:!0,score:0};if(!x.fuzzy)return{isMatch:!1,score:1};var K,we,vt,ue,_t,R,Ne,Jt,Dn,ge=G.length,St=D,l=G.indexOf(k,C),Tt=m+ge,Zn=1,Oe=[];for(-1!==l&&(St=Math.min(L(0,l),St),-1!==(l=G.lastIndexOf(k,C+m))&&(St=Math.min(L(0,l),St))),l=-1,K=0;m>K;K++){for(vt=0,ue=Tt;ue>vt;)L(K,C+ue)<=St?vt=ue:Tt=ue,ue=Math.floor((Tt-vt)/2+vt);for(Tt=ue,R=Math.max(1,C-ue+1),Ne=Math.min(C+ue,ge)+m,(Jt=new Array(Ne+2))[Ne+1]=(1<<K)-1,we=Ne;we>=R;we--)if(Dn=F[G.charAt(we-1)],Jt[we]=0===K?(Jt[we+1]<<1|1)&Dn:(Jt[we+1]<<1|1)&Dn|(_t[we+1]|_t[we])<<1|1|_t[we+1],Jt[we]&q&&St>=(Zn=L(K,we-1))){if(St=Zn,Oe.push(l=we-1),!(l>C))break;R=Math.max(1,2*C-l)}if(L(K+1,C)>St)break;_t=Jt}return{isMatch:l>=0,score:Zn}},!0===g?{search:re}:re(g)}}(j),j.jstree.defaults.sort=function(u,k){return this.get_text(u)>this.get_text(k)?1:-1},j.jstree.plugins.sort=function(u,k){this.bind=function(){k.bind.call(this),this.element.on("model.jstree",j.proxy(function(g,x){this.sort(x.parent,!0)},this)).on("rename_node.jstree create_node.jstree",j.proxy(function(g,x){this.sort(x.parent||x.node.parent,!1),this.redraw_node(x.parent||x.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",j.proxy(function(g,x){this.sort(x.parent,!1),this.redraw_node(x.parent,!0)},this))},this.sort=function(g,x){var C,N;if((g=this.get_node(g))&&g.children&&g.children.length&&(g.children.sort(j.proxy(this.settings.sort,this)),x))for(C=0,N=g.children_d.length;N>C;C++)this.sort(g.children_d[C],!1)}};var I=!1;j.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree",ttl:!1,filter:!1},j.jstree.plugins.state=function(u,k){this.bind=function(){k.bind.call(this);var g=j.proxy(function(){this.element.on(this.settings.state.events,j.proxy(function(){I&&clearTimeout(I),I=setTimeout(j.proxy(function(){this.save_state()},this),100)},this))},this);this.element.on("ready.jstree",j.proxy(function(x,C){this.element.one("restore_state.jstree",g),this.restore_state()||g()},this))},this.save_state=function(){var g={state:this.get_state(),ttl:this.settings.state.ttl,sec:+new Date};j.vakata.storage.set(this.settings.state.key,JSON.stringify(g))},this.restore_state=function(){var g=j.vakata.storage.get(this.settings.state.key);if(g)try{g=JSON.parse(g)}catch{return!1}return!(g&&g.ttl&&g.sec&&+new Date-g.sec>g.ttl||(g&&g.state&&(g=g.state),g&&j.isFunction(this.settings.state.filter)&&(g=this.settings.state.filter.call(this,g)),!g||(this.element.one("set_state.jstree",function(x,C){C.instance.trigger("restore_state",{state:j.extend(!0,{},g)})}),this.set_state(g),0)))},this.clear_state=function(){return j.vakata.storage.del(this.settings.state.key)}},function(u,k){u.vakata.storage={set:function(g,x){return window.localStorage.setItem(g,x)},get:function(g){return window.localStorage.getItem(g)},del:function(g){return window.localStorage.removeItem(g)}}}(j),j.jstree.defaults.types={"#":{},default:{}},j.jstree.plugins.types=function(u,k){this.init=function(g,x){var C,N;if(x&&x.types&&x.types.default)for(C in x.types)if("default"!==C&&"#"!==C&&x.types.hasOwnProperty(C))for(N in x.types.default)x.types.default.hasOwnProperty(N)&&x.types[C][N]===jt&&(x.types[C][N]=x.types.default[N]);k.init.call(this,g,x),this._model.data["#"].type="#"},this.refresh=function(g,x){k.refresh.call(this,g,x),this._model.data["#"].type="#"},this.bind=function(){this.element.on("model.jstree",j.proxy(function(g,x){var m,q,C=this._model.data,N=x.nodes,D=this.settings.types,F="default";for(m=0,q=N.length;q>m;m++)F="default",C[N[m]].original&&C[N[m]].original.type&&D[C[N[m]].original.type]&&(F=C[N[m]].original.type),C[N[m]].data&&C[N[m]].data.jstree&&C[N[m]].data.jstree.type&&D[C[N[m]].data.jstree.type]&&(F=C[N[m]].data.jstree.type),C[N[m]].type=F,!0===C[N[m]].icon&&D[F].icon!==jt&&(C[N[m]].icon=D[F].icon);C["#"].type="#"},this)),k.bind.call(this)},this.get_json=function(g,x,C){var N,D,m=this._model.data,q=x?j.extend(!0,{},x,{no_id:!1}):{},F=k.get_json.call(this,g,q,C);if(!1===F)return!1;if(j.isArray(F))for(N=0,D=F.length;D>N;N++)F[N].type=F[N].id&&m[F[N].id]&&m[F[N].id].type?m[F[N].id].type:"default",x&&x.no_id&&(delete F[N].id,F[N].li_attr&&F[N].li_attr.id&&delete F[N].li_attr.id);else F.type=F.id&&m[F.id]&&m[F.id].type?m[F.id].type:"default",x&&x.no_id&&(F=this._delete_ids(F));return F},this._delete_ids=function(g){if(j.isArray(g)){for(var x=0,C=g.length;C>x;x++)g[x]=this._delete_ids(g[x]);return g}return delete g.id,g.li_attr&&g.li_attr.id&&delete g.li_attr.id,g.children&&j.isArray(g.children)&&(g.children=this._delete_ids(g.children)),g},this.check=function(g,x,C,N,D){if(!1===k.check.call(this,g,x,C,N,D))return!1;x=x&&x.id?x:this.get_node(x),C=C&&C.id?C:this.get_node(C);var q,F,L,re,m=x&&x.id?j.jstree.reference(x.id):null;switch(m=m&&m._model&&m._model.data?m._model.data:null,g){case"create_node":case"move_node":case"copy_node":if("move_node"!==g||-1===j.inArray(x.id,C.children)){if((q=this.get_rules(C)).max_children!==jt&&-1!==q.max_children&&q.max_children===C.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+g,data:JSON.stringify({chk:g,pos:N,obj:!(!x||!x.id)&&x.id,par:!(!C||!C.id)&&C.id})},!1;if(q.valid_children!==jt&&-1!==q.valid_children&&-1===j.inArray(x.type||"default",q.valid_children))return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+g,data:JSON.stringify({chk:g,pos:N,obj:!(!x||!x.id)&&x.id,par:!(!C||!C.id)&&C.id})},!1;if(m&&x.children_d&&x.parents){for(F=0,L=0,re=x.children_d.length;re>L;L++)F=Math.max(F,m[x.children_d[L]].parents.length);F=F-x.parents.length+1}(0>=F||F===jt)&&(F=1);do{if(q.max_depth!==jt&&-1!==q.max_depth&&q.max_depth<F)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+g,data:JSON.stringify({chk:g,pos:N,obj:!(!x||!x.id)&&x.id,par:!(!C||!C.id)&&C.id})},!1;C=this.get_node(C.parent),q=this.get_rules(C),F++}while(C)}}return!0},this.get_rules=function(g){if(!(g=this.get_node(g)))return!1;var x=this.get_type(g,!0);return x.max_depth===jt&&(x.max_depth=-1),x.max_children===jt&&(x.max_children=-1),x.valid_children===jt&&(x.valid_children=-1),x},this.get_type=function(g,x){return!!(g=this.get_node(g))&&(x?j.extend({type:g.type},this.settings.types[g.type]):g.type)},this.set_type=function(g,x){var C,N,D,m,q;if(j.isArray(g)){for(N=0,D=(g=g.slice()).length;D>N;N++)this.set_type(g[N],x);return!0}return C=this.settings.types,g=this.get_node(g),!(!C[x]||!g||(m=g.type,q=this.get_icon(g),g.type=x,(!0===q||C[m]&&C[m].icon&&q===C[m].icon)&&this.set_icon(g,C[x].icon===jt||C[x].icon),0))}},j.jstree.defaults.unique={case_sensitive:!1,duplicate:function(u,k){return u+" ("+k+")"}},j.jstree.plugins.unique=function(u,k){this.check=function(g,x,C,N,D){if(!1===k.check.call(this,g,x,C,N,D))return!1;if(x=x&&x.id?x:this.get_node(x),!(C=C&&C.id?C:this.get_node(C))||!C.children)return!0;var re,G,m="rename_node"===g?N:x.text,q=[],F=this.settings.unique.case_sensitive,L=this._model.data;for(re=0,G=C.children.length;G>re;re++)q.push(F?L[C.children[re]].text:L[C.children[re]].text.toLowerCase());switch(F||(m=m.toLowerCase()),g){case"delete_node":return!0;case"rename_node":return(re=-1===j.inArray(m,q)||x.text&&x.text[F?"toString":"toLowerCase"]()===m)||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+m+" already exists. Preventing: "+g,data:JSON.stringify({chk:g,pos:N,obj:!(!x||!x.id)&&x.id,par:!(!C||!C.id)&&C.id})}),re;case"create_node":return(re=-1===j.inArray(m,q))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+m+" already exists. Preventing: "+g,data:JSON.stringify({chk:g,pos:N,obj:!(!x||!x.id)&&x.id,par:!(!C||!C.id)&&C.id})}),re;case"copy_node":return(re=-1===j.inArray(m,q))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+m+" already exists. Preventing: "+g,data:JSON.stringify({chk:g,pos:N,obj:!(!x||!x.id)&&x.id,par:!(!C||!C.id)&&C.id})}),re;case"move_node":return(re=x.parent===C.id||-1===j.inArray(m,q))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+m+" already exists. Preventing: "+g,data:JSON.stringify({chk:g,pos:N,obj:!(!x||!x.id)&&x.id,par:!(!C||!C.id)&&C.id})}),re}return!0},this.create_node=function(g,x,C,N,D){if(!x||x.text===jt){if(null===g&&(g="#"),!(g=this.get_node(g)))return k.create_node.call(this,g,x,C,N,D);if(!(C=C===jt?"last":C).toString().match(/^(before|after)$/)&&!D&&!this.is_loaded(g))return k.create_node.call(this,g,x,C,N,D);x||(x={});var m,q,F,L,re,G=this._model.data,K=this.settings.unique.case_sensitive,we=this.settings.unique.duplicate;for(q=m=this.get_string("New node"),F=[],L=0,re=g.children.length;re>L;L++)F.push(K?G[g.children[L]].text:G[g.children[L]].text.toLowerCase());for(L=1;-1!==j.inArray(K?q:q.toLowerCase(),F);)q=we.call(this,m,++L).toString();x.text=q}return k.create_node.call(this,g,x,C,N,D)}};var ae=document.createElement("DIV");ae.setAttribute("unselectable","on"),ae.className="jstree-wholerow",ae.innerHTML="&#160;",j.jstree.plugins.wholerow=function(u,k){this.bind=function(){k.bind.call(this),this.element.on("ready.jstree set_state.jstree",j.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",j.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",j.proxy(function(g,x){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",j.proxy(function(g,x){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var N,D,C=!1;for(N=0,D=x.selected.length;D>N;N++)(C=this.get_node(x.selected[N],!0))&&C.length&&C.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",j.proxy(function(g,x){this.get_node(x.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",j.proxy(function(g,x){this.get_node(x.node,!0).children(".jstree-wholerow")["hover_node"===g.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",j.proxy(function(g){g.preventDefault();var x=j.Event("contextmenu",{metaKey:g.metaKey,ctrlKey:g.ctrlKey,altKey:g.altKey,shiftKey:g.shiftKey,pageX:g.pageX,pageY:g.pageY});j(g.currentTarget).closest(".jstree-node").children(".jstree-anchor:eq(0)").trigger(x)},this)).on("click.jstree",".jstree-wholerow",function(g){g.stopImmediatePropagation();var x=j.Event("click",{metaKey:g.metaKey,ctrlKey:g.ctrlKey,altKey:g.altKey,shiftKey:g.shiftKey});j(g.currentTarget).closest(".jstree-node").children(".jstree-anchor:eq(0)").trigger(x).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",j.proxy(function(g){g.stopImmediatePropagation();var x=j.Event("click",{metaKey:g.metaKey,ctrlKey:g.ctrlKey,altKey:g.altKey,shiftKey:g.shiftKey});j(g.currentTarget).closest(".jstree-node").children(".jstree-anchor:eq(0)").trigger(x).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",j.proxy(function(g){return g.stopImmediatePropagation(),this.hover_node(g.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",j.proxy(function(g){this.dehover_node(g.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),k.teardown.call(this)},this.redraw_node=function(g,x,C){if(g=k.redraw_node.call(this,g,x,C)){var N=ae.cloneNode(!0);-1!==j.inArray(g.id,this._data.core.selected)&&(N.className+=" jstree-wholerow-clicked"),g.insertBefore(N,g.childNodes[0])}return g}},function(u){if(document.registerElement){var k=Object.create(HTMLElement.prototype);k.createdCallback=function(){var x,g={core:{},plugins:[]};for(x in u.jstree.plugins)u.jstree.plugins.hasOwnProperty(x)&&this.attributes[x]&&(g.plugins.push(x),this.getAttribute(x)&&JSON.parse(this.getAttribute(x))&&(g[x]=JSON.parse(this.getAttribute(x))));for(x in u.jstree.defaults.core)u.jstree.defaults.core.hasOwnProperty(x)&&this.attributes[x]&&(g.core[x]=JSON.parse(this.getAttribute(x))||this.getAttribute(x));jQuery(this).jstree(g)};try{document.registerElement("vakata-jstree",{prototype:k})}catch{}}}(jQuery)}var u,k,g}),function(j){"function"==typeof define&&define.amd?define(["jquery"],j):"object"==typeof exports?module.exports=j(require("jquery")):j(jQuery)}(function(j){"use strict";var jt=!1,on=!1,En=0,an=2e3,Tn=0,at=j,De=document,Ct=window,vn=at(Ct),wn=[],H=Ct.requestAnimationFrame||Ct.webkitRequestAnimationFrame||Ct.mozRequestAnimationFrame||!1,U=Ct.cancelAnimationFrame||Ct.webkitCancelAnimationFrame||Ct.mozCancelAnimationFrame||!1;if(H)Ct.cancelAnimationFrame||(U=function(F){});else{var I=0;H=function(F,L){var re=(new Date).getTime(),G=Math.max(0,16-(re-I)),K=Ct.setTimeout(function(){F(re+G)},G);return I=re+G,K},U=function(F){Ct.clearTimeout(F)}}var re,F,L,ae=Ct.MutationObserver||Ct.WebKitMutationObserver||!1,u=Date.now||function(){return(new Date).getTime()},k={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"6px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:40,mousescrollstep:27,touchbehavior:!1,emulatetouch:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,railhoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:"auto",cursordragontouch:!1,oneaxismousemode:"auto",scriptpath:(F=De.currentScript||!!(re=De.getElementsByTagName("script")).length&&re[re.length-1],L=F?F.src.split("?")[0]:"",L.split("/").length>0?L.split("/").slice(0,-1).join("/")+"/":""),preventmultitouchscrolling:!0,disablemutationobserver:!1,enableobserver:!0,scrollbarid:!1},g=!1,C=function(F,L){function re(){var W=l.doc.css(Ne.trstyle);return!(!W||"matrix"!=W.substr(0,6))&&W.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/)}function K(W,Z,ke){var ze=W.css(Z),$e=parseFloat(ze);if(isNaN($e)){var Je=3==($e=Zn[ze]||0)?ke?l.win.outerHeight()-l.win.innerHeight():l.win.outerWidth()-l.win.innerWidth():1;return l.isie8&&$e&&($e+=1),Je?$e:0}return $e}function we(W,Z,ke,ze){l._bind(W,Z,function($e){var Je={original:$e=$e||Ct.event,target:$e.target||$e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==$e.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){return $e.preventDefault?$e.preventDefault():$e.returnValue=!1,!1},stopImmediatePropagation:function(){$e.stopImmediatePropagation?$e.stopImmediatePropagation():$e.cancelBubble=!0}};return"mousewheel"==Z?($e.wheelDeltaX&&(Je.deltaX=-.025*$e.wheelDeltaX),$e.wheelDeltaY&&(Je.deltaY=-.025*$e.wheelDeltaY),!Je.deltaY&&!Je.deltaX&&(Je.deltaY=-.025*$e.wheelDelta)):Je.deltaY=$e.detail,ke.call(W,Je)},ze)}function ge(W,Z,ke,ze){l.scrollrunning||(l.newscrolly=l.getScrollTop(),l.newscrollx=l.getScrollLeft(),rr=u());var $e=u()-rr;if(rr=u(),$e>350?tt=1:tt+=(2-tt)/10,Z=Z*tt|0,W=W*tt|0){if(ze)if(W<0){if(l.getScrollLeft()>=l.page.maxw)return!0}else if(l.getScrollLeft()<=0)return!0;var Je=W>0?1:-1;kt!==Je&&(l.scrollmom&&l.scrollmom.stop(),l.newscrollx=l.getScrollLeft(),kt=Je),l.lastdeltax-=W}if(Z){if(function(){var Qt=l.getScrollTop();if(Z<0){if(Qt>=l.page.maxh)return!0}else if(Qt<=0)return!0}()){if(ue.nativeparentscrolling&&ke&&!l.ispage&&!l.zoomactive)return!0;var Ft=l.view.h>>1;l.newscrolly<-Ft?(l.newscrolly=-Ft,Z=-1):l.newscrolly>l.page.maxh+Ft?(l.newscrolly=l.page.maxh+Ft,Z=1):Z=0}var Ye=Z>0?1:-1;ye!==Ye&&(l.scrollmom&&l.scrollmom.stop(),l.newscrolly=l.getScrollTop(),ye=Ye),l.lastdeltay-=Z}(Z||W)&&l.synched("relativexy",function(){var Qt=l.lastdeltay+l.newscrolly;l.lastdeltay=0;var qt=l.lastdeltax+l.newscrollx;l.lastdeltax=0,l.rail.drag||l.doScrollPos(qt,Qt)})}function St(W,Z,ke){var ze,$e;return!(ke||!Vn)||(0===W.deltaMode?(ze=ue.mousescrollstep/54*-W.deltaX|0,$e=ue.mousescrollstep/54*-W.deltaY|0):1===W.deltaMode&&(ze=-W.deltaX*ue.mousescrollstep*50/80|0,$e=-W.deltaY*ue.mousescrollstep*50/80|0),Z&&ue.oneaxismousemode&&0===ze&&$e&&(ze=$e,$e=0,ke&&(ze<0?l.getScrollLeft()>=l.page.maxw:l.getScrollLeft()<=0)&&($e=ze,ze=0)),l.isrtlmode&&(ze=-ze),ge(ze,$e,ke,!0)?void(ke&&(Vn=!0)):(Vn=!1,W.stopImmediatePropagation(),W.preventDefault()))}var l=this;this.version="3.7.6",this.name="nicescroll",this.me=L;var vt=at("body"),ue=this.opt={doc:vt,win:!1};if(at.extend(ue,k),ue.snapbackspeed=80,F)for(var Tt in ue)void 0!==F[Tt]&&(ue[Tt]=F[Tt]);if(ue.disablemutationobserver&&(ae=!1),this.doc=ue.doc,this.iddoc=this.doc&&this.doc[0]&&this.doc[0].id||"",this.ispage=/^BODY|HTML/.test(ue.win?ue.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=!1!==ue.win,this.win=ue.win||(this.ispage?vn:this.doc),this.docscroll=this.ispage&&!this.haswrapper?vn:this.win,this.body=vt,this.viewport=!1,this.isfixed=!1,this.iframe=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=ue.autohidemode,this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,"auto"==ue.rtlmode){var _t=this.win[0]==Ct?this.body:this.win,R=_t.css("writing-mode")||_t.css("-webkit-writing-mode")||_t.css("-ms-writing-mode")||_t.css("-moz-writing-mode");"horizontal-tb"==R||"lr-tb"==R||""===R?(this.isrtlmode="rtl"==_t.css("direction"),this.isvertical=!1):(this.isrtlmode="vertical-rl"==R||"tb"==R||"tb-rl"==R||"rl-tb"==R,this.isvertical="vertical-rl"==R||"tb"==R||"tb-rl"==R)}else this.isrtlmode=!0===ue.rtlmode,this.isvertical=!1;if(this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1,this.observerremover=!1,this.observerbody=!1,!1!==ue.scrollbarid)this.id=ue.scrollbarid;else do{this.id="ascrail"+an++}while(De.getElementById(this.id));this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.selectiondrag=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.railslocked=!1,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.wheelprevented=!1,this.overflowx=ue.overflowx,this.overflowy=ue.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0,this.detected=function(){if(g)return g;var F=De.createElement("DIV"),L=F.style,re=navigator.userAgent,G=navigator.platform,K={};return K.haspointerlock="pointerLockElement"in De||"webkitPointerLockElement"in De||"mozPointerLockElement"in De,K.isopera="opera"in Ct,K.isopera12=K.isopera&&"getUserMedia"in navigator,K.isoperamini="[object OperaMini]"===Object.prototype.toString.call(Ct.operamini),K.isie="all"in De&&"attachEvent"in F&&!K.isopera,K.isieold=K.isie&&!("msInterpolationMode"in L),K.isie7=K.isie&&!K.isieold&&(!("documentMode"in De)||7===De.documentMode),K.isie8=K.isie&&"documentMode"in De&&8===De.documentMode,K.isie9=K.isie&&"performance"in Ct&&9===De.documentMode,K.isie10=K.isie&&"performance"in Ct&&10===De.documentMode,K.isie11="msRequestFullscreen"in F&&De.documentMode>=11,K.ismsedge="msCredentials"in Ct,K.ismozilla="MozAppearance"in L,K.iswebkit=!K.ismsedge&&"WebkitAppearance"in L,K.ischrome=K.iswebkit&&"chrome"in Ct,K.ischrome38=K.ischrome&&"touchAction"in L,K.ischrome22=!K.ischrome38&&K.ischrome&&K.haspointerlock,K.ischrome26=!K.ischrome38&&K.ischrome&&"transition"in L,K.cantouch="ontouchstart"in De.documentElement||"ontouchstart"in Ct,K.hasw3ctouch=!!Ct.PointerEvent&&(navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),K.hasmstouch=!K.hasw3ctouch&&(Ct.MSPointerEvent||!1),K.ismac=/^mac$/i.test(G),K.isios=K.cantouch&&/iphone|ipad|ipod/i.test(G),K.isios4=K.isios&&!("seal"in Object),K.isios7=K.isios&&"webkitHidden"in De,K.isios8=K.isios&&"hidden"in De,K.isios10=K.isios&&Ct.Proxy,K.isandroid=/android/i.test(re),K.haseventlistener="addEventListener"in F,K.trstyle=!1,K.hastransform=!1,K.hastranslate3d=!1,K.transitionstyle=!1,K.hastransition=!1,K.transitionend=!1,K.trstyle="transform",K.hastransform="transform"in L||function(){for(var we=["msTransform","webkitTransform","MozTransform","OTransform"],ge=0,St=we.length;ge<St;ge++)if(void 0!==L[we[ge]]){K.trstyle=we[ge];break}K.hastransform=!!K.trstyle}(),K.hastransform&&(L[K.trstyle]="translate3d(1px,2px,3px)",K.hastranslate3d=/translate3d/.test(L[K.trstyle])),K.transitionstyle="transition",K.prefixstyle="",K.transitionend="transitionend",K.hastransition="transition"in L||function(){K.transitionend=!1;for(var we=["webkitTransition","msTransition","MozTransition","OTransition","OTransition","KhtmlTransition"],ge=["-webkit-","-ms-","-moz-","-o-","-o","-khtml-"],St=["webkitTransitionEnd","msTransitionEnd","transitionend","otransitionend","oTransitionEnd","KhtmlTransitionEnd"],l=0,vt=we.length;l<vt;l++)if(we[l]in L){K.transitionstyle=we[l],K.prefixstyle=ge[l],K.transitionend=St[l];break}K.ischrome26&&(K.prefixstyle=ge[1]),K.hastransition=K.transitionstyle}(),K.cursorgrabvalue=function(){var we=["grab","-webkit-grab","-moz-grab"];(K.ischrome&&!K.ischrome38||K.isie)&&(we=[]);for(var ge=0,St=we.length;ge<St;ge++){var l=we[ge];if(L.cursor=l,L.cursor==l)return l}return"url(https://cdnjs.cloudflare.com/ajax/libs/slider-pro/1.3.0/css/images/openhand.cur),n-resize"}(),K.hasmousecapture="setCapture"in F,K.hasMutationObserver=!1!==ae,F=null,g=K,K}();var Ne=at.extend({},this.detected);this.canhwscroll=Ne.hastransform&&ue.hwacceleration,this.ishwscroll=this.canhwscroll&&l.haswrapper,this.hasreversehr=!(!this.isrtlmode||(this.isvertical?Ne.iswebkit||Ne.isie||Ne.isie11:Ne.iswebkit||Ne.isie&&!Ne.isie10&&!Ne.isie11)),this.istouchcapable=!1,(Ne.cantouch||!Ne.hasw3ctouch&&!Ne.hasmstouch)&&(!Ne.cantouch||Ne.isios||Ne.isandroid||!Ne.iswebkit&&!Ne.ismozilla)||(this.istouchcapable=!0),ue.enablemouselockapi||(Ne.hasmousecapture=!1,Ne.haspointerlock=!1),this.debounced=function(W,Z,ke){l&&(l.delaylist[W]||(l.delaylist[W]={h:H(function(){l.delaylist[W].fn.call(l),l.delaylist[W]=!1},ke)},Z.call(l)),l.delaylist[W].fn=Z)},this.synched=function(W,Z){l.synclist[W]?l.synclist[W]=Z:(l.synclist[W]=Z,H(function(){l&&(l.synclist[W]&&l.synclist[W].call(l),l.synclist[W]=null)}))},this.unsynched=function(W){l.synclist[W]&&(l.synclist[W]=!1)},this.css=function(W,Z){for(var ke in Z)l.saved.css.push([W,ke,W.css(ke)]),W.css(ke,Z[ke])},this.scrollTop=function(W){return void 0===W?l.getScrollTop():l.setScrollTop(W)},this.scrollLeft=function(W){return void 0===W?l.getScrollLeft():l.setScrollLeft(W)};var Jt=function(W,Z,ke,ze,$e,Je,Ft){this.st=W,this.ed=Z,this.spd=ke,this.p1=ze||0,this.p2=$e||1,this.p3=Je||0,this.p4=Ft||1,this.ts=u(),this.df=Z-W};if(Jt.prototype={B2:function(W){return 3*(1-W)*(1-W)*W},B3:function(W){return 3*(1-W)*W*W},B4:function(W){return W*W*W},getPos:function(){return(u()-this.ts)/this.spd},getNow:function(){var W=(u()-this.ts)/this.spd,Z=this.B2(W)+this.B3(W)+this.B4(W);return W>=1?this.ed:this.st+this.df*Z|0},update:function(W,Z){return this.st=this.getNow(),this.ed=W,this.spd=Z,this.ts=u(),this.df=this.ed-this.st,this}},this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},Ne.hastranslate3d&&Ne.isios&&this.doc.css("-webkit-backface-visibility","hidden"),this.getScrollTop=function(W){if(!W){var Z=re();if(Z)return 16==Z.length?-Z[13]:-Z[5];if(l.timerscroll&&l.timerscroll.bz)return l.timerscroll.bz.getNow()}return l.doc.translate.y},this.getScrollLeft=function(W){if(!W){var Z=re();if(Z)return 16==Z.length?-Z[12]:-Z[4];if(l.timerscroll&&l.timerscroll.bh)return l.timerscroll.bh.getNow()}return l.doc.translate.x},this.notifyScrollEvent=function(W){var Z=De.createEvent("UIEvents");Z.initUIEvent("scroll",!1,!1,Ct,1),Z.niceevent=!0,W.dispatchEvent(Z)};var Dn=this.isrtlmode?1:-1;Ne.hastranslate3d&&ue.enabletranslate3d?(this.setScrollTop=function(W,Z){l.doc.translate.y=W,l.doc.translate.ty=-1*W+"px",l.doc.css(Ne.trstyle,"translate3d("+l.doc.translate.tx+","+l.doc.translate.ty+",0)"),Z||l.notifyScrollEvent(l.win[0])},this.setScrollLeft=function(W,Z){l.doc.translate.x=W,l.doc.translate.tx=W*Dn+"px",l.doc.css(Ne.trstyle,"translate3d("+l.doc.translate.tx+","+l.doc.translate.ty+",0)"),Z||l.notifyScrollEvent(l.win[0])}):(this.setScrollTop=function(W,Z){l.doc.translate.y=W,l.doc.translate.ty=-1*W+"px",l.doc.css(Ne.trstyle,"translate("+l.doc.translate.tx+","+l.doc.translate.ty+")"),Z||l.notifyScrollEvent(l.win[0])},this.setScrollLeft=function(W,Z){l.doc.translate.x=W,l.doc.translate.tx=W*Dn+"px",l.doc.css(Ne.trstyle,"translate("+l.doc.translate.tx+","+l.doc.translate.ty+")"),Z||l.notifyScrollEvent(l.win[0])})}else this.getScrollTop=function(){return l.docscroll.scrollTop()},this.setScrollTop=function(W){l.docscroll.scrollTop(W)},this.getScrollLeft=function(){return l.hasreversehr?l.detected.ismozilla?l.page.maxw-Math.abs(l.docscroll.scrollLeft()):l.page.maxw-l.docscroll.scrollLeft():l.docscroll.scrollLeft()},this.setScrollLeft=function(W){return setTimeout(function(){if(l)return l.hasreversehr&&(W=l.detected.ismozilla?-(l.page.maxw-W):l.page.maxw-W),l.docscroll.scrollLeft(W)},1)};this.getTarget=function(W){return!!W&&(W.target?W.target:!!W.srcElement&&W.srcElement)},this.hasParent=function(W,Z){if(!W)return!1;for(var ke=W.target||W.srcElement||W||!1;ke&&ke.id!=Z;)ke=ke.parentNode||!1;return!1!==ke};var Zn={thin:1,medium:3,thick:5};this.getDocumentScrollOffset=function(){return{top:Ct.pageYOffset||De.documentElement.scrollTop,left:Ct.pageXOffset||De.documentElement.scrollLeft}},this.getOffset=function(){if(l.isfixed){var W=l.win.offset(),Z=l.getDocumentScrollOffset();return W.top-=Z.top,W.left-=Z.left,W}var ke=l.win.offset();if(!l.viewport)return ke;var ze=l.viewport.offset();return{top:ke.top-ze.top,left:ke.left-ze.left}},this.updateScrollBar=function(W){var Z,ke;if(l.ishwscroll)l.rail.css({height:l.win.innerHeight()-(ue.railpadding.top+ue.railpadding.bottom)}),l.railh&&l.railh.css({width:l.win.innerWidth()-(ue.railpadding.left+ue.railpadding.right)});else{var ze=l.getOffset();if((Z={top:ze.top,left:ze.left-(ue.railpadding.left+ue.railpadding.right)}).top+=K(l.win,"border-top-width",!0),Z.left+=l.rail.align?l.win.outerWidth()-K(l.win,"border-right-width")-l.rail.width:K(l.win,"border-left-width"),(ke=ue.railoffset)&&(ke.top&&(Z.top+=ke.top),ke.left&&(Z.left+=ke.left)),l.railslocked||l.rail.css({top:Z.top,left:Z.left,height:(W?W.h:l.win.innerHeight())-(ue.railpadding.top+ue.railpadding.bottom)}),l.zoom&&l.zoom.css({top:Z.top+1,left:1==l.rail.align?Z.left-20:Z.left+l.rail.width+4}),l.railh&&!l.railslocked){Z={top:ze.top,left:ze.left},(ke=ue.railhoffset)&&(ke.top&&(Z.top+=ke.top),ke.left&&(Z.left+=ke.left));var $e=l.railh.align?Z.top+K(l.win,"border-top-width",!0)+l.win.innerHeight()-l.railh.height:Z.top+K(l.win,"border-top-width",!0),Je=Z.left+K(l.win,"border-left-width");l.railh.css({top:$e-(ue.railpadding.top+ue.railpadding.bottom),left:Je,width:l.railh.width})}}},this.doRailClick=function(W,Z,ke){var ze,$e,Je,Ft;l.railslocked||(l.cancelEvent(W),"pageY"in W||(W.pageX=W.clientX+De.documentElement.scrollLeft,W.pageY=W.clientY+De.documentElement.scrollTop),Z?(ze=ke?l.doScrollLeft:l.doScrollTop,Je=ke?(W.pageX-l.railh.offset().left-l.cursorwidth/2)*l.scrollratio.x:(W.pageY-l.rail.offset().top-l.cursorheight/2)*l.scrollratio.y,l.unsynched("relativexy"),ze(0|Je)):(ze=ke?l.doScrollLeftBy:l.doScrollBy,Je=ke?l.scroll.x:l.scroll.y,Ft=ke?W.pageX-l.railh.offset().left:W.pageY-l.rail.offset().top,$e=ke?l.view.w:l.view.h,ze(Je>=Ft?$e:-$e)))},l.newscrolly=l.newscrollx=0,l.hasanimationframe="requestAnimationFrame"in Ct,l.hascancelanimationframe="cancelAnimationFrame"in Ct,l.hasborderbox=!1,this.init=function(){if(l.saved.css=[],Ne.isoperamini||Ne.isandroid&&!("hidden"in De))return!0;ue.emulatetouch=ue.emulatetouch||ue.touchbehavior,l.hasborderbox=Ct.getComputedStyle&&"border-box"===Ct.getComputedStyle(De.body)["box-sizing"];var W={"overflow-y":"hidden"};if((Ne.isie11||Ne.isie10)&&(W["-ms-overflow-style"]="none"),l.ishwscroll&&(this.doc.css(Ne.transitionstyle,Ne.prefixstyle+"transform 0ms ease-out"),Ne.transitionend&&l.bind(l.doc,Ne.transitionend,l.onScrollTransitionEnd,!1)),l.zindex="auto",l.zindex=l.ispage||"auto"!=ue.zindex?ue.zindex:function G(){var W=l.win;if("zIndex"in W)return W.zIndex();for(;W.length>0;){if(9==W[0].nodeType)return!1;var Z=W.css("zIndex");if(!isNaN(Z)&&0!==Z)return parseInt(Z);W=W.parent()}return!1}()||"auto",!l.ispage&&"auto"!=l.zindex&&l.zindex>Tn&&(Tn=l.zindex),l.isie&&0===l.zindex&&"auto"==ue.zindex&&(l.zindex="auto"),!l.ispage||!Ne.isieold){var Z=l.docscroll;l.ispage&&(Z=l.haswrapper?l.win:l.doc),l.css(Z,W),l.ispage&&(Ne.isie11||Ne.isie)&&l.css(at("html"),W),!Ne.isios||l.ispage||l.haswrapper||l.css(vt,{"-webkit-overflow-scrolling":"touch"});var ke=at(De.createElement("div"));ke.css({position:"relative",top:0,float:"right",width:ue.cursorwidth,height:0,"background-color":ue.cursorcolor,border:ue.cursorborder,"background-clip":"padding-box","-webkit-border-radius":ue.cursorborderradius,"-moz-border-radius":ue.cursorborderradius,"border-radius":ue.cursorborderradius}),ke.addClass("nicescroll-cursors"),l.cursor=ke;var ze=at(De.createElement("div"));ze.attr("id",l.id),ze.addClass("nicescroll-rails nicescroll-rails-vr");var $e,Je,Ft=["left","right","top","bottom"];for(var Ye in Ft)($e=ue.railpadding[Je=Ft[Ye]]||0)&&ze.css("padding-"+Je,$e+"px");ze.append(ke),ze.width=Math.max(parseFloat(ue.cursorwidth),ke.outerWidth()),ze.css({width:ze.width+"px",zIndex:l.zindex,background:ue.background,cursor:"default"}),ze.visibility=!0,ze.scrollable=!0,ze.align="left"==ue.railalign?0:1,l.rail=ze,l.rail.drag=!1;var qt,Qt=!1;if(!ue.boxzoom||l.ispage||Ne.isieold||(Qt=De.createElement("div"),l.bind(Qt,"click",l.doZoom),l.bind(Qt,"mouseenter",function(){l.zoom.css("opacity",ue.cursoropacitymax)}),l.bind(Qt,"mouseleave",function(){l.zoom.css("opacity",ue.cursoropacitymin)}),l.zoom=at(Qt),l.zoom.css({cursor:"pointer",zIndex:l.zindex,backgroundImage:"url("+ue.scriptpath+"zoomico.png)",height:18,width:18,backgroundPosition:"0 0"}),ue.dblclickzoom&&l.bind(l.win,"dblclick",l.doZoom),Ne.cantouch&&ue.gesturezoom&&(l.ongesturezoom=function(me){return me.scale>1.5&&l.doZoomIn(me),me.scale<.8&&l.doZoomOut(me),l.cancelEvent(me)},l.bind(l.win,"gestureend",l.ongesturezoom))),l.railh=!1,ue.horizrailenabled&&(l.css(Z,{overflowX:"hidden"}),(ke=at(De.createElement("div"))).css({position:"absolute",top:0,height:ue.cursorwidth,width:0,backgroundColor:ue.cursorcolor,border:ue.cursorborder,backgroundClip:"padding-box","-webkit-border-radius":ue.cursorborderradius,"-moz-border-radius":ue.cursorborderradius,"border-radius":ue.cursorborderradius}),Ne.isieold&&ke.css("overflow","hidden"),ke.addClass("nicescroll-cursors"),l.cursorh=ke,(qt=at(De.createElement("div"))).attr("id",l.id+"-hr"),qt.addClass("nicescroll-rails nicescroll-rails-hr"),qt.height=Math.max(parseFloat(ue.cursorwidth),ke.outerHeight()),qt.css({height:qt.height+"px",zIndex:l.zindex,background:ue.background}),qt.append(ke),qt.visibility=!0,qt.scrollable=!0,qt.align="top"==ue.railvalign?0:1,l.railh=qt,l.railh.drag=!1),l.ispage)ze.css({position:"fixed",top:0,height:"100%"}),ze.css(ze.align?{right:0}:{left:0}),l.body.append(ze),l.railh&&(qt.css({position:"fixed",left:0,width:"100%"}),qt.css(qt.align?{bottom:0}:{top:0}),l.body.append(qt));else{if(l.ishwscroll){"static"==l.win.css("position")&&l.css(l.win,{position:"relative"});var Hr="HTML"==l.win[0].nodeName?l.body:l.win;at(Hr).scrollTop(0).scrollLeft(0),l.zoom&&(l.zoom.css({position:"absolute",top:1,right:0,"margin-right":ze.width+4}),Hr.append(l.zoom)),ze.css({position:"absolute",top:0}),ze.css(ze.align?{right:0}:{left:0}),Hr.append(ze),qt&&(qt.css({position:"absolute",left:0,bottom:0}),qt.css(qt.align?{bottom:0}:{top:0}),Hr.append(qt))}else{l.isfixed="fixed"==l.win.css("position");var Hn=l.isfixed?"fixed":"absolute";l.isfixed||(l.viewport=l.getViewport(l.win[0])),l.viewport&&(l.body=l.viewport,/fixed|absolute/.test(l.viewport.css("position"))||l.css(l.viewport,{position:"relative"})),ze.css({position:Hn}),l.zoom&&l.zoom.css({position:Hn}),l.updateScrollBar(),l.body.append(ze),l.zoom&&l.body.append(l.zoom),l.railh&&(qt.css({position:Hn}),l.body.append(qt))}Ne.isios&&l.css(l.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),ue.disableoutline&&(Ne.isie&&l.win.attr("hideFocus","true"),Ne.iswebkit&&l.win.css("outline","none"))}if(!1===ue.autohidemode?(l.autohidedom=!1,l.rail.css({opacity:ue.cursoropacitymax}),l.railh&&l.railh.css({opacity:ue.cursoropacitymax})):!0===ue.autohidemode||"leave"===ue.autohidemode?(l.autohidedom=at().add(l.rail),Ne.isie8&&(l.autohidedom=l.autohidedom.add(l.cursor)),l.railh&&(l.autohidedom=l.autohidedom.add(l.railh)),l.railh&&Ne.isie8&&(l.autohidedom=l.autohidedom.add(l.cursorh))):"scroll"==ue.autohidemode?(l.autohidedom=at().add(l.rail),l.railh&&(l.autohidedom=l.autohidedom.add(l.railh))):"cursor"==ue.autohidemode?(l.autohidedom=at().add(l.cursor),l.railh&&(l.autohidedom=l.autohidedom.add(l.cursorh))):"hidden"==ue.autohidemode&&(l.autohidedom=!1,l.hide(),l.railslocked=!1),Ne.cantouch||l.istouchcapable||ue.emulatetouch||Ne.hasmstouch){l.scrollmom=new N(l),l.ontouchstart=function(me){if(l.locked||me.pointerType&&("mouse"===me.pointerType||me.pointerType===me.MSPOINTER_TYPE_MOUSE))return!1;if(l.hasmoving=!1,l.scrollmom.timer&&(l.triggerScrollEnd(),l.scrollmom.stop()),!l.railslocked){var Ot=l.getTarget(me);if(Ot&&/INPUT/i.test(Ot.nodeName)&&/range/i.test(Ot.type))return l.stopPropagation(me);var Yt="mousedown"===me.type;if(!("clientX"in me)&&"changedTouches"in me&&(me.clientX=me.changedTouches[0].clientX,me.clientY=me.changedTouches[0].clientY),l.forcescreen){var xn=me;(me={original:me.original?me.original:me}).clientX=xn.screenX,me.clientY=xn.screenY}if(l.rail.drag={x:me.clientX,y:me.clientY,sx:l.scroll.x,sy:l.scroll.y,st:l.getScrollTop(),sl:l.getScrollLeft(),pt:2,dl:!1,tg:Ot},l.ispage||!ue.directionlockdeadzone)l.rail.drag.dl="f";else{var mr={w:vn.width(),h:vn.height()},ln=l.getContentSize();l.rail.drag.ck=l.rail.scrollable&&!l.railh.scrollable?ln.h-mr.h>0&&"v":!(l.rail.scrollable||!l.railh.scrollable)&&ln.w-mr.w>0&&"h"}if(ue.emulatetouch&&l.isiframe&&Ne.isie){var kn=l.win.position();l.rail.drag.x+=kn.left,l.rail.drag.y+=kn.top}if(l.hasmoving=!1,l.lastmouseup=!1,l.scrollmom.reset(me.clientX,me.clientY),Ot&&Yt){if(!/INPUT|SELECT|BUTTON|TEXTAREA/i.test(Ot.nodeName))return Ne.hasmousecapture&&Ot.setCapture(),ue.emulatetouch?(Ot.onclick&&!Ot._onclick&&(Ot._onclick=Ot.onclick,Ot.onclick=function(tn){if(l.hasmoving)return!1;Ot._onclick.call(this,tn)}),l.cancelEvent(me)):l.stopPropagation(me);/SUBMIT|CANCEL|BUTTON/i.test(at(Ot).attr("type"))&&(l.preventclick={tg:Ot,click:!1})}}},l.ontouchend=function(me){if(!l.rail.drag)return!0;if(2==l.rail.drag.pt){if(me.pointerType&&("mouse"===me.pointerType||me.pointerType===me.MSPOINTER_TYPE_MOUSE))return!1;l.rail.drag=!1;var Ot="mouseup"===me.type;if(l.hasmoving&&(l.scrollmom.doMomentum(),l.lastmouseup=!0,l.hideCursor(),Ne.hasmousecapture&&De.releaseCapture(),Ot))return l.cancelEvent(me)}else if(1==l.rail.drag.pt)return l.onmouseup(me)};var co=ue.emulatetouch&&l.isiframe&&!Ne.hasmousecapture,Nn=.3*ue.directionlockdeadzone|0;l.ontouchmove=function(me,Ot){if(!l.rail.drag||me.targetTouches&&ue.preventmultitouchscrolling&&me.targetTouches.length>1||me.pointerType&&("mouse"===me.pointerType||me.pointerType===me.MSPOINTER_TYPE_MOUSE))return!0;if(2==l.rail.drag.pt){var Yt,xn;if("changedTouches"in me&&(me.clientX=me.changedTouches[0].clientX,me.clientY=me.changedTouches[0].clientY),xn=Yt=0,co&&!Ot){var mr=l.win.position();xn=-mr.left,Yt=-mr.top}var ln=me.clientY+Yt,Gt=ln-l.rail.drag.y,ft=me.clientX+xn,kn=ft-l.rail.drag.x,tn=l.rail.drag.st-Gt;if(l.ishwscroll&&ue.bouncescroll)tn<0?tn=Math.round(tn/2):tn>l.page.maxh&&(tn=l.page.maxh+Math.round((tn-l.page.maxh)/2));else if(tn<0?(tn=0,ln=0):tn>l.page.maxh&&(tn=l.page.maxh,ln=0),0===ln&&!l.hasmoving)return l.ispage||(l.rail.drag=!1),!0;var Kn=l.getScrollLeft();if(l.railh&&l.railh.scrollable&&(Kn=l.isrtlmode?kn-l.rail.drag.sl:l.rail.drag.sl-kn,l.ishwscroll&&ue.bouncescroll?Kn<0?Kn=Math.round(Kn/2):Kn>l.page.maxw&&(Kn=l.page.maxw+Math.round((Kn-l.page.maxw)/2)):(Kn<0&&(Kn=0,ft=0),Kn>l.page.maxw&&(Kn=l.page.maxw,ft=0))),!l.hasmoving){if(l.rail.drag.y===me.clientY&&l.rail.drag.x===me.clientX)return l.cancelEvent(me);var ho=Math.abs(Gt),Lr=Math.abs(kn),Or=ue.directionlockdeadzone;if(l.rail.drag.ck?"v"==l.rail.drag.ck?Lr>Or&&ho<=Nn?l.rail.drag=!1:ho>Or&&(l.rail.drag.dl="v"):"h"==l.rail.drag.ck&&(ho>Or&&Lr<=Nn?l.rail.drag=!1:Lr>Or&&(l.rail.drag.dl="h")):ho>Or&&Lr>Or?l.rail.drag.dl="f":ho>Or?l.rail.drag.dl=Lr>Nn?"f":"v":Lr>Or&&(l.rail.drag.dl=ho>Nn?"f":"h"),!l.rail.drag.dl)return l.cancelEvent(me);l.triggerScrollStart(me.clientX,me.clientY,0,0,0),l.hasmoving=!0}return l.preventclick&&!l.preventclick.click&&(l.preventclick.click=l.preventclick.tg.onclick||!1,l.preventclick.tg.onclick=l.onpreventclick),l.rail.drag.dl&&("v"==l.rail.drag.dl?Kn=l.rail.drag.sl:"h"==l.rail.drag.dl&&(tn=l.rail.drag.st)),l.synched("touchmove",function(){l.rail.drag&&2==l.rail.drag.pt&&(l.prepareTransition&&l.resetTransition(),l.rail.scrollable&&l.setScrollTop(tn),l.scrollmom.update(ft,ln),l.railh&&l.railh.scrollable?(l.setScrollLeft(Kn),l.showCursor(tn,Kn)):l.showCursor(tn),Ne.isie10&&De.selection.clear())}),l.cancelEvent(me)}return 1==l.rail.drag.pt?l.onmousemove(me):void 0},l.ontouchstartCursor=function(me,Ot){if(!l.rail.drag||3==l.rail.drag.pt){if(l.locked)return l.cancelEvent(me);l.cancelScroll(),l.rail.drag={x:me.touches[0].clientX,y:me.touches[0].clientY,sx:l.scroll.x,sy:l.scroll.y,pt:3,hr:!!Ot};var Yt=l.getTarget(me);return!l.ispage&&Ne.hasmousecapture&&Yt.setCapture(),l.isiframe&&!Ne.hasmousecapture&&(l.saved.csspointerevents=l.doc.css("pointer-events"),l.css(l.doc,{"pointer-events":"none"})),l.cancelEvent(me)}},l.ontouchendCursor=function(me){if(l.rail.drag)return Ne.hasmousecapture&&De.releaseCapture(),l.isiframe&&!Ne.hasmousecapture&&l.doc.css("pointer-events",l.saved.csspointerevents),3!=l.rail.drag.pt?void 0:(l.rail.drag=!1,l.cancelEvent(me))},l.ontouchmoveCursor=function(me){if(l.rail.drag){if(3!=l.rail.drag.pt)return;if(l.cursorfreezed=!0,l.rail.drag.hr){l.scroll.x=l.rail.drag.sx+(me.touches[0].clientX-l.rail.drag.x),l.scroll.x<0&&(l.scroll.x=0);var Ot=l.scrollvaluemaxw;l.scroll.x>Ot&&(l.scroll.x=Ot)}else{l.scroll.y=l.rail.drag.sy+(me.touches[0].clientY-l.rail.drag.y),l.scroll.y<0&&(l.scroll.y=0);var Yt=l.scrollvaluemax;l.scroll.y>Yt&&(l.scroll.y=Yt)}return l.synched("touchmove",function(){l.rail.drag&&3==l.rail.drag.pt&&(l.showCursor(),l.rail.drag.hr?l.doScrollLeft(Math.round(l.scroll.x*l.scrollratio.x),ue.cursordragspeed):l.doScrollTop(Math.round(l.scroll.y*l.scrollratio.y),ue.cursordragspeed))}),l.cancelEvent(me)}}}if(l.onmousedown=function(me,Ot){if(!l.rail.drag||1==l.rail.drag.pt){if(l.railslocked)return l.cancelEvent(me);l.cancelScroll(),l.rail.drag={x:me.clientX,y:me.clientY,sx:l.scroll.x,sy:l.scroll.y,pt:1,hr:Ot||!1};var Yt=l.getTarget(me);return Ne.hasmousecapture&&Yt.setCapture(),l.isiframe&&!Ne.hasmousecapture&&(l.saved.csspointerevents=l.doc.css("pointer-events"),l.css(l.doc,{"pointer-events":"none"})),l.hasmoving=!1,l.cancelEvent(me)}},l.onmouseup=function(me){if(l.rail.drag)return 1!=l.rail.drag.pt||(Ne.hasmousecapture&&De.releaseCapture(),l.isiframe&&!Ne.hasmousecapture&&l.doc.css("pointer-events",l.saved.csspointerevents),l.rail.drag=!1,l.cursorfreezed=!1,l.hasmoving&&l.triggerScrollEnd(),l.cancelEvent(me))},l.onmousemove=function(me){if(l.rail.drag){if(1!==l.rail.drag.pt)return;if(Ne.ischrome&&0===me.which)return l.onmouseup(me);if(l.cursorfreezed=!0,l.hasmoving||l.triggerScrollStart(me.clientX,me.clientY,0,0,0),l.hasmoving=!0,l.rail.drag.hr){l.scroll.x=l.rail.drag.sx+(me.clientX-l.rail.drag.x),l.scroll.x<0&&(l.scroll.x=0);var Ot=l.scrollvaluemaxw;l.scroll.x>Ot&&(l.scroll.x=Ot)}else{l.scroll.y=l.rail.drag.sy+(me.clientY-l.rail.drag.y),l.scroll.y<0&&(l.scroll.y=0);var Yt=l.scrollvaluemax;l.scroll.y>Yt&&(l.scroll.y=Yt)}return l.synched("mousemove",function(){l.cursorfreezed&&(l.showCursor(),l.rail.drag.hr?l.scrollLeft(Math.round(l.scroll.x*l.scrollratio.x)):l.scrollTop(Math.round(l.scroll.y*l.scrollratio.y)))}),l.cancelEvent(me)}l.checkarea=0},Ne.cantouch||ue.emulatetouch)l.onpreventclick=function(me){if(l.preventclick)return l.preventclick.tg.onclick=l.preventclick.click,l.preventclick=!1,l.cancelEvent(me)},l.onclick=!Ne.isios&&function(me){return!l.lastmouseup||(l.lastmouseup=!1,l.cancelEvent(me))},ue.grabcursorenabled&&Ne.cursorgrabvalue&&(l.css(l.ispage?l.doc:l.win,{cursor:Ne.cursorgrabvalue}),l.css(l.rail,{cursor:Ne.cursorgrabvalue}));else{var or=function(me){if(l.selectiondrag){if(me){var Ot=l.win.outerHeight(),Yt=me.pageY-l.selectiondrag.top;Yt>0&&Yt<Ot&&(Yt=0),Yt>=Ot&&(Yt-=Ot),l.selectiondrag.df=Yt}0!==l.selectiondrag.df&&(l.doScrollBy(-2*l.selectiondrag.df/6|0),l.debounced("doselectionscroll",function(){or()},50))}};l.hasTextSelected="getSelection"in De?function(){return De.getSelection().rangeCount>0}:"selection"in De?function(){return"None"!=De.selection.type}:function(){return!1},l.onselectionstart=function(me){l.ispage||(l.selectiondrag=l.win.offset())},l.onselectionend=function(me){l.selectiondrag=!1},l.onselectiondrag=function(me){l.selectiondrag&&l.hasTextSelected()&&l.debounced("selectionscroll",function(){or(me)},250)}}if(Ne.hasw3ctouch?(l.css(l.ispage?at("html"):l.win,{"touch-action":"none"}),l.css(l.rail,{"touch-action":"none"}),l.css(l.cursor,{"touch-action":"none"}),l.bind(l.win,"pointerdown",l.ontouchstart),l.bind(De,"pointerup",l.ontouchend),l.delegate(De,"pointermove",l.ontouchmove)):Ne.hasmstouch?(l.css(l.ispage?at("html"):l.win,{"-ms-touch-action":"none"}),l.css(l.rail,{"-ms-touch-action":"none"}),l.css(l.cursor,{"-ms-touch-action":"none"}),l.bind(l.win,"MSPointerDown",l.ontouchstart),l.bind(De,"MSPointerUp",l.ontouchend),l.delegate(De,"MSPointerMove",l.ontouchmove),l.bind(l.cursor,"MSGestureHold",function(me){me.preventDefault()}),l.bind(l.cursor,"contextmenu",function(me){me.preventDefault()})):Ne.cantouch&&(l.bind(l.win,"touchstart",l.ontouchstart,!1,!0),l.bind(De,"touchend",l.ontouchend,!1,!0),l.bind(De,"touchcancel",l.ontouchend,!1,!0),l.delegate(De,"touchmove",l.ontouchmove,!1,!0)),ue.emulatetouch&&(l.bind(l.win,"mousedown",l.ontouchstart,!1,!0),l.bind(De,"mouseup",l.ontouchend,!1,!0),l.bind(De,"mousemove",l.ontouchmove,!1,!0)),(ue.cursordragontouch||!Ne.cantouch&&!ue.emulatetouch)&&(l.rail.css({cursor:"default"}),l.railh&&l.railh.css({cursor:"default"}),l.jqbind(l.rail,"mouseenter",function(){if(!l.ispage&&!l.win.is(":visible"))return!1;l.canshowonmouseevent&&l.showCursor(),l.rail.active=!0}),l.jqbind(l.rail,"mouseleave",function(){l.rail.active=!1,l.rail.drag||l.hideCursor()}),ue.sensitiverail&&(l.bind(l.rail,"click",function(me){l.doRailClick(me,!1,!1)}),l.bind(l.rail,"dblclick",function(me){l.doRailClick(me,!0,!1)}),l.bind(l.cursor,"click",function(me){l.cancelEvent(me)}),l.bind(l.cursor,"dblclick",function(me){l.cancelEvent(me)})),l.railh&&(l.jqbind(l.railh,"mouseenter",function(){if(!l.ispage&&!l.win.is(":visible"))return!1;l.canshowonmouseevent&&l.showCursor(),l.rail.active=!0}),l.jqbind(l.railh,"mouseleave",function(){l.rail.active=!1,l.rail.drag||l.hideCursor()}),ue.sensitiverail&&(l.bind(l.railh,"click",function(me){l.doRailClick(me,!1,!0)}),l.bind(l.railh,"dblclick",function(me){l.doRailClick(me,!0,!0)}),l.bind(l.cursorh,"click",function(me){l.cancelEvent(me)}),l.bind(l.cursorh,"dblclick",function(me){l.cancelEvent(me)})))),ue.cursordragontouch&&(this.istouchcapable||Ne.cantouch)&&(l.bind(l.cursor,"touchstart",l.ontouchstartCursor),l.bind(l.cursor,"touchmove",l.ontouchmoveCursor),l.bind(l.cursor,"touchend",l.ontouchendCursor),l.cursorh&&l.bind(l.cursorh,"touchstart",function(me){l.ontouchstartCursor(me,!0)}),l.cursorh&&l.bind(l.cursorh,"touchmove",l.ontouchmoveCursor),l.cursorh&&l.bind(l.cursorh,"touchend",l.ontouchendCursor)),ue.emulatetouch||Ne.isandroid||Ne.isios?(l.bind(Ne.hasmousecapture?l.win:De,"mouseup",l.ontouchend),l.onclick&&l.bind(De,"click",l.onclick),ue.cursordragontouch?(l.bind(l.cursor,"mousedown",l.onmousedown),l.bind(l.cursor,"mouseup",l.onmouseup),l.cursorh&&l.bind(l.cursorh,"mousedown",function(me){l.onmousedown(me,!0)}),l.cursorh&&l.bind(l.cursorh,"mouseup",l.onmouseup)):(l.bind(l.rail,"mousedown",function(me){me.preventDefault()}),l.railh&&l.bind(l.railh,"mousedown",function(me){me.preventDefault()}))):(l.bind(Ne.hasmousecapture?l.win:De,"mouseup",l.onmouseup),l.bind(De,"mousemove",l.onmousemove),l.onclick&&l.bind(De,"click",l.onclick),l.bind(l.cursor,"mousedown",l.onmousedown),l.bind(l.cursor,"mouseup",l.onmouseup),l.railh&&(l.bind(l.cursorh,"mousedown",function(me){l.onmousedown(me,!0)}),l.bind(l.cursorh,"mouseup",l.onmouseup)),!l.ispage&&ue.enablescrollonselection&&(l.bind(l.win[0],"mousedown",l.onselectionstart),l.bind(De,"mouseup",l.onselectionend),l.bind(l.cursor,"mouseup",l.onselectionend),l.cursorh&&l.bind(l.cursorh,"mouseup",l.onselectionend),l.bind(De,"mousemove",l.onselectiondrag)),l.zoom&&(l.jqbind(l.zoom,"mouseenter",function(){l.canshowonmouseevent&&l.showCursor(),l.rail.active=!0}),l.jqbind(l.zoom,"mouseleave",function(){l.rail.active=!1,l.rail.drag||l.hideCursor()}))),ue.enablemousewheel&&(l.isiframe||l.mousewheel(Ne.isie&&l.ispage?De:l.win,l.onmousewheel),l.mousewheel(l.rail,l.onmousewheel),l.railh&&l.mousewheel(l.railh,l.onmousewheelhr)),l.ispage||Ne.cantouch||/HTML|^BODY/.test(l.win[0].nodeName)||(l.win.attr("tabindex")||l.win.attr({tabindex:++En}),l.bind(l.win,"focus",function(me){jt=l.getTarget(me).id||l.getTarget(me)||!1,l.hasfocus=!0,l.canshowonmouseevent&&l.noticeCursor()}),l.bind(l.win,"blur",function(me){jt=!1,l.hasfocus=!1}),l.bind(l.win,"mouseenter",function(me){on=l.getTarget(me).id||l.getTarget(me)||!1,l.hasmousefocus=!0,l.canshowonmouseevent&&l.noticeCursor()}),l.bind(l.win,"mouseleave",function(me){on=!1,l.hasmousefocus=!1,l.rail.drag||l.hideCursor()})),l.onkeypress=function(me){if(l.railslocked&&0===l.page.maxh)return!0;var Ot=l.getTarget(me=me||Ct.event);if(Ot&&/INPUT|TEXTAREA|SELECT|OPTION/.test(Ot.nodeName)&&(!Ot.getAttribute("type")&&!Ot.type||!/submit|button|cancel/i.tp)||at(Ot).attr("contenteditable"))return!0;if(l.hasfocus||l.hasmousefocus&&!jt||l.ispage&&!jt&&!on){var Yt=me.keyCode;if(l.railslocked&&27!=Yt)return l.cancelEvent(me);var xn=me.ctrlKey||!1,mr=me.shiftKey||!1,ln=!1;switch(Yt){case 38:case 63233:l.doScrollBy(72),ln=!0;break;case 40:case 63235:l.doScrollBy(-72),ln=!0;break;case 37:case 63232:l.railh&&(xn?l.doScrollLeft(0):l.doScrollLeftBy(72),ln=!0);break;case 39:case 63234:l.railh&&(xn?l.doScrollLeft(l.page.maxw):l.doScrollLeftBy(-72),ln=!0);break;case 33:case 63276:l.doScrollBy(l.view.h),ln=!0;break;case 34:case 63277:l.doScrollBy(-l.view.h),ln=!0;break;case 36:case 63273:l.railh&&xn?l.doScrollPos(0,0):l.doScrollTo(0),ln=!0;break;case 35:case 63275:l.railh&&xn?l.doScrollPos(l.page.maxw,l.page.maxh):l.doScrollTo(l.page.maxh),ln=!0;break;case 32:ue.spacebarenabled&&(l.doScrollBy(mr?l.view.h:-l.view.h),ln=!0);break;case 27:l.zoomactive&&(l.doZoom(),ln=!0)}if(ln)return l.cancelEvent(me)}},ue.enablekeyboard&&l.bind(De,Ne.isopera&&!Ne.isopera12?"keypress":"keydown",l.onkeypress),l.bind(De,"keydown",function(me){me.ctrlKey&&(l.wheelprevented=!0)}),l.bind(De,"keyup",function(me){me.ctrlKey||(l.wheelprevented=!1)}),l.bind(Ct,"blur",function(me){l.wheelprevented=!1}),l.bind(Ct,"resize",l.onscreenresize),l.bind(Ct,"orientationchange",l.onscreenresize),l.bind(Ct,"load",l.lazyResize),Ne.ischrome&&!l.ispage&&!l.haswrapper){var An=l.win.attr("style"),zo=parseFloat(l.win.css("width"))+1;l.win.css("width",zo),l.synched("chromefix",function(){l.win.attr("style",An)})}if(l.onAttributeChange=function(me){l.lazyResize(l.isieold?250:30)},ue.enableobserver&&(l.isie11||!1===ae||(l.observerbody=new ae(function(me){if(me.forEach(function(Ot){if("attributes"==Ot.type)return vt.hasClass("modal-open")&&vt.hasClass("modal-dialog")&&!at.contains(at(".modal-dialog")[0],l.doc[0])?l.hide():l.show()}),l.me.clientWidth!=l.page.width||l.me.clientHeight!=l.page.height)return l.lazyResize(30)}),l.observerbody.observe(De.body,{childList:!0,subtree:!0,characterData:!1,attributes:!0,attributeFilter:["class"]})),!l.ispage&&!l.haswrapper)){var Wt=l.win[0];!1!==ae?(l.observer=new ae(function(me){me.forEach(l.onAttributeChange)}),l.observer.observe(Wt,{childList:!0,characterData:!1,attributes:!0,subtree:!1}),l.observerremover=new ae(function(me){me.forEach(function(Ot){if(Ot.removedNodes.length>0)for(var Yt in Ot.removedNodes)if(l&&Ot.removedNodes[Yt]===Wt)return l.remove()})}),l.observerremover.observe(Wt.parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(l.bind(Wt,Ne.isie&&!Ne.isie9?"propertychange":"DOMAttrModified",l.onAttributeChange),Ne.isie9&&Wt.attachEvent("onpropertychange",l.onAttributeChange),l.bind(Wt,"DOMNodeRemoved",function(me){me.target===Wt&&l.remove()}))}!l.ispage&&ue.boxzoom&&l.bind(Ct,"resize",l.resizeZoom),l.istextarea&&(l.bind(l.win,"keydown",l.lazyResize),l.bind(l.win,"mouseup",l.lazyResize)),l.lazyResize(30)}if("IFRAME"==this.doc[0].nodeName){var uo=function(){var me;l.iframexd=!1;try{me="contentDocument"in this?this.contentDocument:this.contentWindow._doc}catch{l.iframexd=!0,me=!1}if(l.iframexd)return"console"in Ct&&console.log("NiceScroll error: policy restriced iframe"),!0;if(l.forcescreen=!0,l.isiframe&&(l.iframe={doc:at(me),html:l.doc.contents().find("html")[0],body:l.doc.contents().find("body")[0]},l.getContentSize=function(){return{w:Math.max(l.iframe.html.scrollWidth,l.iframe.body.scrollWidth),h:Math.max(l.iframe.html.scrollHeight,l.iframe.body.scrollHeight)}},l.docscroll=at(l.iframe.body)),!Ne.isios&&ue.iframeautoresize&&!l.isiframe){l.win.scrollTop(0),l.doc.height("");var Ot=Math.max(me.getElementsByTagName("html")[0].scrollHeight,me.body.scrollHeight);l.doc.height(Ot)}l.lazyResize(30),l.css(at(l.iframe.body),W),Ne.isios&&l.haswrapper&&l.css(at(me.body),{"-webkit-transform":"translate3d(0,0,0)"}),l.bind("contentWindow"in this?this.contentWindow:me,"scroll",l.onscroll),ue.enablemousewheel&&l.mousewheel(me,l.onmousewheel),ue.enablekeyboard&&l.bind(me,Ne.isopera?"keypress":"keydown",l.onkeypress),Ne.cantouch?(l.bind(me,"touchstart",l.ontouchstart),l.bind(me,"touchmove",l.ontouchmove)):ue.emulatetouch&&(l.bind(me,"mousedown",l.ontouchstart),l.bind(me,"mousemove",function(Yt){return l.ontouchmove(Yt,!0)}),ue.grabcursorenabled&&Ne.cursorgrabvalue&&l.css(at(me.body),{cursor:Ne.cursorgrabvalue})),l.bind(me,"mouseup",l.ontouchend),l.zoom&&(ue.dblclickzoom&&l.bind(me,"dblclick",l.doZoom),l.ongesturezoom&&l.bind(me,"gestureend",l.ongesturezoom))};this.doc[0].readyState&&"complete"===this.doc[0].readyState&&setTimeout(function(){uo.call(l.doc[0],!1)},500),l.bind(this.doc,"load",uo)}},this.showCursor=function(W,Z){if(l.cursortimeout&&(clearTimeout(l.cursortimeout),l.cursortimeout=0),l.rail){if(l.autohidedom&&(l.autohidedom.stop().css({opacity:ue.cursoropacitymax}),l.cursoractive=!0),l.rail.drag&&1==l.rail.drag.pt||(void 0!==W&&!1!==W&&(l.scroll.y=W/l.scrollratio.y|0),void 0!==Z&&(l.scroll.x=Z/l.scrollratio.x|0)),l.cursor.css({height:l.cursorheight,top:l.scroll.y}),l.cursorh){var ke=l.hasreversehr?l.scrollvaluemaxw-l.scroll.x:l.scroll.x;l.cursorh.css({width:l.cursorwidth,left:!l.rail.align&&l.rail.visibility?ke+l.rail.width:ke}),l.cursoractive=!0}l.zoom&&l.zoom.stop().css({opacity:ue.cursoropacitymax})}},this.hideCursor=function(W){l.cursortimeout||l.rail&&l.autohidedom&&(l.hasmousefocus&&"leave"===ue.autohidemode||(l.cursortimeout=setTimeout(function(){l.rail.active&&l.showonmouseevent||(l.autohidedom.stop().animate({opacity:ue.cursoropacitymin}),l.zoom&&l.zoom.stop().animate({opacity:ue.cursoropacitymin}),l.cursoractive=!1),l.cursortimeout=0},W||ue.hidecursordelay)))},this.noticeCursor=function(W,Z,ke){l.showCursor(Z,ke),l.rail.active||l.hideCursor(W)},this.getContentSize=l.ispage?function(){return{w:Math.max(De.body.scrollWidth,De.documentElement.scrollWidth),h:Math.max(De.body.scrollHeight,De.documentElement.scrollHeight)}}:l.haswrapper?function(){return{w:l.doc[0].offsetWidth,h:l.doc[0].offsetHeight}}:function(){return{w:l.docscroll[0].scrollWidth,h:l.docscroll[0].scrollHeight}},this.onResize=function(W,Z){if(!l||!l.win)return!1;var ke=l.page.maxh,ze=l.page.maxw,$e=l.view.h,Je=l.view.w;if(l.view={w:l.ispage?l.win.width():l.win[0].clientWidth,h:l.ispage?l.win.height():l.win[0].clientHeight},l.page=Z||l.getContentSize(),l.page.maxh=Math.max(0,l.page.h-l.view.h),l.page.maxw=Math.max(0,l.page.w-l.view.w),l.page.maxh==ke&&l.page.maxw==ze&&l.view.w==Je&&l.view.h==$e){if(l.ispage)return l;var Ft=l.win.offset();if(l.lastposition){var Ye=l.lastposition;if(Ye.top==Ft.top&&Ye.left==Ft.left)return l}l.lastposition=Ft}return 0===l.page.maxh?(l.hideRail(),l.scrollvaluemax=0,l.scroll.y=0,l.scrollratio.y=0,l.cursorheight=0,l.setScrollTop(0),l.rail&&(l.rail.scrollable=!1)):(l.page.maxh-=ue.railpadding.top+ue.railpadding.bottom,l.rail.scrollable=!0),0===l.page.maxw?(l.hideRailHr(),l.scrollvaluemaxw=0,l.scroll.x=0,l.scrollratio.x=0,l.cursorwidth=0,l.setScrollLeft(0),l.railh&&(l.railh.scrollable=!1)):(l.page.maxw-=ue.railpadding.left+ue.railpadding.right,l.railh&&(l.railh.scrollable=ue.horizrailenabled)),l.railslocked=l.locked||0===l.page.maxh&&0===l.page.maxw,l.railslocked?(l.ispage||l.updateScrollBar(l.view),!1):(l.hidden||(l.rail.visibility||l.showRail(),l.railh&&!l.railh.visibility&&l.showRailHr()),l.istextarea&&l.win.css("resize")&&"none"!=l.win.css("resize")&&(l.view.h-=20),l.cursorheight=Math.min(l.view.h,Math.round(l.view.h*(l.view.h/l.page.h))),l.cursorheight=ue.cursorfixedheight?ue.cursorfixedheight:Math.max(ue.cursorminheight,l.cursorheight),l.cursorwidth=Math.min(l.view.w,Math.round(l.view.w*(l.view.w/l.page.w))),l.cursorwidth=ue.cursorfixedheight?ue.cursorfixedheight:Math.max(ue.cursorminheight,l.cursorwidth),l.scrollvaluemax=l.view.h-l.cursorheight-(ue.railpadding.top+ue.railpadding.bottom),l.hasborderbox||(l.scrollvaluemax-=l.cursor[0].offsetHeight-l.cursor[0].clientHeight),l.railh&&(l.railh.width=l.page.maxh>0?l.view.w-l.rail.width:l.view.w,l.scrollvaluemaxw=l.railh.width-l.cursorwidth-(ue.railpadding.left+ue.railpadding.right)),l.ispage||l.updateScrollBar(l.view),l.scrollratio={x:l.page.maxw/l.scrollvaluemaxw,y:l.page.maxh/l.scrollvaluemax},l.getScrollTop()>l.page.maxh?l.doScrollTop(l.page.maxh):(l.scroll.y=l.getScrollTop()/l.scrollratio.y|0,l.scroll.x=l.getScrollLeft()/l.scrollratio.x|0,l.cursoractive&&l.noticeCursor()),l.scroll.y&&0===l.getScrollTop()&&l.doScrollTo(l.scroll.y*l.scrollratio.y|0),l)},this.resize=l.onResize;var Oe=0;this.onscreenresize=function(W){clearTimeout(Oe);var Z=!l.ispage&&!l.haswrapper;Z&&l.hideRails(),Oe=setTimeout(function(){l&&(Z&&l.showRails(),l.resize()),Oe=0},120)},this.lazyResize=function(W){return clearTimeout(Oe),W=isNaN(W)?240:W,Oe=setTimeout(function(){l&&l.resize(),Oe=0},W),l},this.jqbind=function(W,Z,ke){l.events.push({e:W,n:Z,f:ke,q:!0}),at(W).on(Z,ke)},this.mousewheel=function(W,Z,ke){var ze="jquery"in W?W[0]:W;if("onwheel"in De.createElement("div"))l._bind(ze,"wheel",Z,ke||!1);else{var $e=void 0!==De.onmousewheel?"mousewheel":"DOMMouseScroll";we(ze,$e,Z,ke||!1),"DOMMouseScroll"==$e&&we(ze,"MozMousePixelScroll",Z,ke||!1)}};var Kt=!1;if(Ne.haseventlistener){try{var ut=Object.defineProperty({},"passive",{get:function(){Kt=!0}});Ct.addEventListener("test",null,ut)}catch{}this.stopPropagation=function(W){return!!W&&((W=W.original?W.original:W).stopPropagation(),!1)},this.cancelEvent=function(W){return W.cancelable&&W.preventDefault(),W.stopImmediatePropagation(),W.preventManipulation&&W.preventManipulation(),!1}}else Event.prototype.preventDefault=function(){this.returnValue=!1},Event.prototype.stopPropagation=function(){this.cancelBubble=!0},Ct.constructor.prototype.addEventListener=De.constructor.prototype.addEventListener=Element.prototype.addEventListener=function(W,Z,ke){this.attachEvent("on"+W,Z)},Ct.constructor.prototype.removeEventListener=De.constructor.prototype.removeEventListener=Element.prototype.removeEventListener=function(W,Z,ke){this.detachEvent("on"+W,Z)},this.cancelEvent=function(W){return(W=W||Ct.event)&&(W.cancelBubble=!0,W.cancel=!0,W.returnValue=!1),!1},this.stopPropagation=function(W){return(W=W||Ct.event)&&(W.cancelBubble=!0),!1};this.delegate=function(W,Z,ke,ze,$e){var Je=wn[Z]||!1;Je||(l.bind(W,Z,(Je={a:[],l:[],f:function(Ft){for(var Ye=Je.l,Qt=!1,qt=Ye.length-1;qt>=0;qt--)if(!1===(Qt=Ye[qt].call(Ft.target,Ft)))return!1;return Qt}}).f,ze,$e),wn[Z]=Je),l.ispage?(Je.a=[l.id].concat(Je.a),Je.l=[ke].concat(Je.l)):(Je.a.push(l.id),Je.l.push(ke))},this.undelegate=function(W,Z,ke,ze,$e){var Je=wn[Z]||!1;if(Je&&Je.l)for(var Ft=0,Ye=Je.l.length;Ft<Ye;Ft++)Je.a[Ft]===l.id&&(Je.a.splice(Ft),Je.l.splice(Ft),0===Je.a.length&&(l._unbind(W,Z,Je.l.f),wn[Z]=null))},this.bind=function(W,Z,ke,ze,$e){l._bind("jquery"in W?W[0]:W,Z,ke,ze||!1,$e||!1)},this._bind=function(W,Z,ke,ze,$e){l.events.push({e:W,n:Z,f:ke,b:ze,q:!1}),W.addEventListener(Z,ke,Kt&&$e?{passive:!1,capture:ze}:ze||!1)},this._unbind=function(W,Z,ke,ze){wn[Z]?l.undelegate(W,Z,ke,ze):W.removeEventListener(Z,ke,ze)},this.unbindAll=function(){for(var W=0;W<l.events.length;W++){var Z=l.events[W];Z.q?Z.e.unbind(Z.n,Z.f):l._unbind(Z.e,Z.n,Z.f,Z.b)}},this.showRails=function(){return l.showRail().showRailHr()},this.showRail=function(){return 0===l.page.maxh||!l.ispage&&"none"==l.win.css("display")||(l.rail.visibility=!0,l.rail.css("display","block")),l},this.showRailHr=function(){return l.railh&&(0===l.page.maxw||!l.ispage&&"none"==l.win.css("display")||(l.railh.visibility=!0,l.railh.css("display","block"))),l},this.hideRails=function(){return l.hideRail().hideRailHr()},this.hideRail=function(){return l.rail.visibility=!1,l.rail.css("display","none"),l},this.hideRailHr=function(){return l.railh&&(l.railh.visibility=!1,l.railh.css("display","none")),l},this.show=function(){return l.hidden=!1,l.railslocked=!1,l.showRails()},this.hide=function(){return l.hidden=!0,l.railslocked=!0,l.hideRails()},this.toggle=function(){return l.hidden?l.show():l.hide()},this.remove=function(){for(var W in l.stop(),l.cursortimeout&&clearTimeout(l.cursortimeout),l.delaylist)l.delaylist[W]&&U(l.delaylist[W].h);l.doZoomOut(),l.unbindAll(),Ne.isie9&&l.win[0].detachEvent("onpropertychange",l.onAttributeChange),!1!==l.observer&&l.observer.disconnect(),!1!==l.observerremover&&l.observerremover.disconnect(),!1!==l.observerbody&&l.observerbody.disconnect(),l.events=null,l.cursor&&l.cursor.remove(),l.cursorh&&l.cursorh.remove(),l.rail&&l.rail.remove(),l.railh&&l.railh.remove(),l.zoom&&l.zoom.remove();for(var Z=0;Z<l.saved.css.length;Z++){var ke=l.saved.css[Z];ke[0].css(ke[1],void 0===ke[2]?"":ke[2])}l.saved=!1,l.me.data("__nicescroll","");var ze=at.nicescroll;for(var $e in ze.each(function(Je){if(this&&this.id===l.id){delete ze[Je];for(var Ft=++Je;Ft<ze.length;Ft++,Je++)ze[Je]=ze[Ft];--ze.length&&delete ze[ze.length]}}),l)l[$e]=null,delete l[$e];l=null},this.scrollstart=function(W){return this.onscrollstart=W,l},this.scrollend=function(W){return this.onscrollend=W,l},this.scrollcancel=function(W){return this.onscrollcancel=W,l},this.zoomin=function(W){return this.onzoomin=W,l},this.zoomout=function(W){return this.onzoomout=W,l},this.isScrollable=function(W){var Z=W.target?W.target:W;if("OPTION"==Z.nodeName)return!0;for(;Z&&1==Z.nodeType&&Z!==this.me[0]&&!/^BODY|HTML/.test(Z.nodeName);){var ke=at(Z),ze=ke.css("overflowY")||ke.css("overflowX")||ke.css("overflow")||"";if(/scroll|auto/.test(ze))return Z.clientHeight!=Z.scrollHeight;Z=!!Z.parentNode&&Z.parentNode}return!1},this.getViewport=function(W){for(var Z=!(!W||!W.parentNode)&&W.parentNode;Z&&1==Z.nodeType&&!/^BODY|HTML/.test(Z.nodeName);){var ke=at(Z);if(/fixed|absolute/.test(ke.css("position")))return ke;var ze=ke.css("overflowY")||ke.css("overflowX")||ke.css("overflow")||"";if(/scroll|auto/.test(ze)&&Z.clientHeight!=Z.scrollHeight||ke.getNiceScroll().length>0)return ke;Z=!!Z.parentNode&&Z.parentNode}return!1},this.triggerScrollStart=function(W,Z,ke,ze,$e){l.onscrollstart&&l.onscrollstart.call(l,{type:"scrollstart",current:{x:W,y:Z},request:{x:ke,y:ze},end:{x:l.newscrollx,y:l.newscrolly},speed:$e})},this.triggerScrollEnd=function(){if(l.onscrollend){var W=l.getScrollLeft(),Z=l.getScrollTop();l.onscrollend.call(l,{type:"scrollend",current:{x:W,y:Z},end:{x:W,y:Z}})}};var ye=0,kt=0,rr=0,tt=1,Vn=!1;if(this.onmousewheel=function(W){if(l.wheelprevented||l.locked)return!1;if(l.railslocked)return l.debounced("checkunlock",l.resize,250),!1;if(l.rail.drag)return l.cancelEvent(W);if("auto"===ue.oneaxismousemode&&0!==W.deltaX&&(ue.oneaxismousemode=!1),ue.oneaxismousemode&&0===W.deltaX&&!l.rail.scrollable)return!l.railh||!l.railh.scrollable||l.onmousewheelhr(W);var Z=u(),ke=!1;if(ue.preservenativescrolling&&l.checkarea+600<Z&&(l.nativescrollingarea=l.isScrollable(W),ke=!0),l.checkarea=Z,l.nativescrollingarea)return!0;var ze=St(W,!1,ke);return ze&&(l.checkarea=0),ze},this.onmousewheelhr=function(W){if(!l.wheelprevented){if(l.railslocked||!l.railh.scrollable)return!0;if(l.rail.drag)return l.cancelEvent(W);var Z=u(),ke=!1;return ue.preservenativescrolling&&l.checkarea+600<Z&&(l.nativescrollingarea=l.isScrollable(W),ke=!0),l.checkarea=Z,!!l.nativescrollingarea||(l.railslocked?l.cancelEvent(W):St(W,!0,ke))}},this.stop=function(){return l.cancelScroll(),l.scrollmon&&l.scrollmon.stop(),l.cursorfreezed=!1,l.scroll.y=Math.round(l.getScrollTop()*(1/l.scrollratio.y)),l.noticeCursor(),l},this.getTransitionSpeed=function(W){return 80+W/72*ue.scrollspeed|0},ue.smoothscroll)if(l.ishwscroll&&Ne.hastransition&&ue.usetransition&&ue.smoothscroll){var Ge="";this.resetTransition=function(){Ge="",l.doc.css(Ne.prefixstyle+"transition-duration","0ms")},this.prepareTransition=function(W,Z){var ke=Z?W:l.getTransitionSpeed(W),ze=ke+"ms";return Ge!==ze&&(Ge=ze,l.doc.css(Ne.prefixstyle+"transition-duration",ze)),ke},this.doScrollLeft=function(W,Z){var ke=l.scrollrunning?l.newscrolly:l.getScrollTop();l.doScrollPos(W,ke,Z)},this.doScrollTop=function(W,Z){var ke=l.scrollrunning?l.newscrollx:l.getScrollLeft();l.doScrollPos(ke,W,Z)},this.cursorupdate={running:!1,start:function(){var W=this;if(!W.running){W.running=!0;var Z=function(){W.running&&H(Z),l.showCursor(l.getScrollTop(),l.getScrollLeft()),l.notifyScrollEvent(l.win[0])};H(Z)}},stop:function(){this.running=!1}},this.doScrollPos=function(W,Z,ke){var ze=l.getScrollTop(),$e=l.getScrollLeft();if(((l.newscrolly-ze)*(Z-ze)<0||(l.newscrollx-$e)*(W-$e)<0)&&l.cancelScroll(),ue.bouncescroll?(Z<0?Z=Z/2|0:Z>l.page.maxh&&(Z=l.page.maxh+(Z-l.page.maxh)/2|0),W<0?W=W/2|0:W>l.page.maxw&&(W=l.page.maxw+(W-l.page.maxw)/2|0)):(Z<0?Z=0:Z>l.page.maxh&&(Z=l.page.maxh),W<0?W=0:W>l.page.maxw&&(W=l.page.maxw)),l.scrollrunning&&W==l.newscrollx&&Z==l.newscrolly)return!1;l.newscrolly=Z,l.newscrollx=W;var Je=l.getScrollTop(),Ft=l.getScrollLeft(),Ye={};Ye.x=W-Ft,Ye.y=Z-Je;var Qt=0|Math.sqrt(Ye.x*Ye.x+Ye.y*Ye.y),qt=l.prepareTransition(Qt);l.scrollrunning||(l.scrollrunning=!0,l.triggerScrollStart(Ft,Je,W,Z,qt),l.cursorupdate.start()),l.scrollendtrapped=!0,Ne.transitionend||(l.scrollendtrapped&&clearTimeout(l.scrollendtrapped),l.scrollendtrapped=setTimeout(l.onScrollTransitionEnd,qt)),l.setScrollTop(l.newscrolly),l.setScrollLeft(l.newscrollx)},this.cancelScroll=function(){if(!l.scrollendtrapped)return!0;var W=l.getScrollTop(),Z=l.getScrollLeft();return l.scrollrunning=!1,Ne.transitionend||clearTimeout(Ne.transitionend),l.scrollendtrapped=!1,l.resetTransition(),l.setScrollTop(W),l.railh&&l.setScrollLeft(Z),l.timerscroll&&l.timerscroll.tm&&clearInterval(l.timerscroll.tm),l.timerscroll=!1,l.cursorfreezed=!1,l.cursorupdate.stop(),l.showCursor(W,Z),l},this.onScrollTransitionEnd=function(){if(l.scrollendtrapped){var W=l.getScrollTop(),Z=l.getScrollLeft();if(W<0?W=0:W>l.page.maxh&&(W=l.page.maxh),Z<0?Z=0:Z>l.page.maxw&&(Z=l.page.maxw),W!=l.newscrolly||Z!=l.newscrollx)return l.doScrollPos(Z,W,ue.snapbackspeed);l.scrollrunning&&l.triggerScrollEnd(),l.scrollrunning=!1,l.scrollendtrapped=!1,l.resetTransition(),l.timerscroll=!1,l.setScrollTop(W),l.railh&&l.setScrollLeft(Z),l.cursorupdate.stop(),l.noticeCursor(!1,W,Z),l.cursorfreezed=!1}}}else this.doScrollLeft=function(W,Z){var ke=l.scrollrunning?l.newscrolly:l.getScrollTop();l.doScrollPos(W,ke,Z)},this.doScrollTop=function(W,Z){var ke=l.scrollrunning?l.newscrollx:l.getScrollLeft();l.doScrollPos(ke,W,Z)},this.doScrollPos=function(W,Z,ke){var ze=l.getScrollTop(),$e=l.getScrollLeft();((l.newscrolly-ze)*(Z-ze)<0||(l.newscrollx-$e)*(W-$e)<0)&&l.cancelScroll();var Je=!1;if(l.bouncescroll&&l.rail.visibility||(Z<0?(Z=0,Je=!0):Z>l.page.maxh&&(Z=l.page.maxh,Je=!0)),l.bouncescroll&&l.railh.visibility||(W<0?(W=0,Je=!0):W>l.page.maxw&&(W=l.page.maxw,Je=!0)),l.scrollrunning&&l.newscrolly===Z&&l.newscrollx===W)return!0;l.newscrolly=Z,l.newscrollx=W,l.dst={},l.dst.x=W-$e,l.dst.y=Z-ze,l.dst.px=$e,l.dst.py=ze;var Ft=0|Math.sqrt(l.dst.x*l.dst.x+l.dst.y*l.dst.y),Ye=l.getTransitionSpeed(Ft);l.bzscroll={};var Qt=Je?1:.58;l.bzscroll.x=new Jt($e,l.newscrollx,Ye,0,0,Qt,1),l.bzscroll.y=new Jt(ze,l.newscrolly,Ye,0,0,Qt,1),u();var qt=function(){if(l.scrollrunning){var Hr=l.bzscroll.y.getPos();l.setScrollLeft(l.bzscroll.x.getNow()),l.setScrollTop(l.bzscroll.y.getNow()),Hr<=1?l.timer=H(qt):(l.scrollrunning=!1,l.timer=0,l.triggerScrollEnd())}};l.scrollrunning||(l.triggerScrollStart($e,ze,W,Z,Ye),l.scrollrunning=!0,l.timer=H(qt))},this.cancelScroll=function(){return l.timer&&U(l.timer),l.timer=0,l.bzscroll=!1,l.scrollrunning=!1,l};else this.doScrollLeft=function(W,Z){var ke=l.getScrollTop();l.doScrollPos(W,ke,Z)},this.doScrollTop=function(W,Z){var ke=l.getScrollLeft();l.doScrollPos(ke,W,Z)},this.doScrollPos=function(W,Z,ke){var ze=W>l.page.maxw?l.page.maxw:W;ze<0&&(ze=0);var $e=Z>l.page.maxh?l.page.maxh:Z;$e<0&&($e=0),l.synched("scroll",function(){l.setScrollTop($e),l.setScrollLeft(ze)})},this.cancelScroll=function(){};this.doScrollBy=function(W,Z){ge(0,W)},this.doScrollLeftBy=function(W,Z){ge(W,0)},this.doScrollTo=function(W,Z){var ke=Z?Math.round(W*l.scrollratio.y):W;ke<0?ke=0:ke>l.page.maxh&&(ke=l.page.maxh),l.cursorfreezed=!1,l.doScrollTop(W)},this.checkContentSize=function(){var W=l.getContentSize();W.h==l.page.h&&W.w==l.page.w||l.resize(!1,W)},l.onscroll=function(W){l.rail.drag||l.cursorfreezed||l.synched("scroll",function(){l.scroll.y=Math.round(l.getScrollTop()/l.scrollratio.y),l.railh&&(l.scroll.x=Math.round(l.getScrollLeft()/l.scrollratio.x)),l.noticeCursor()})},l.bind(l.docscroll,"scroll",l.onscroll),this.doZoomIn=function(W){if(!l.zoomactive){l.zoomactive=!0,l.zoomrestore={style:{}};var Z=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],ke=l.win[0].style;for(var ze in Z){var $e=Z[ze];l.zoomrestore.style[$e]=void 0!==ke[$e]?ke[$e]:""}l.zoomrestore.style.width=l.win.css("width"),l.zoomrestore.style.height=l.win.css("height"),l.zoomrestore.padding={w:l.win.outerWidth()-l.win.width(),h:l.win.outerHeight()-l.win.height()},Ne.isios4&&(l.zoomrestore.scrollTop=vn.scrollTop(),vn.scrollTop(0)),l.win.css({position:Ne.isios4?"absolute":"fixed",top:0,left:0,zIndex:Tn+100,margin:0});var Je=l.win.css("backgroundColor");return(""===Je||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(Je))&&l.win.css("backgroundColor","#fff"),l.rail.css({zIndex:Tn+101}),l.zoom.css({zIndex:Tn+102}),l.zoom.css("backgroundPosition","0 -18px"),l.resizeZoom(),l.onzoomin&&l.onzoomin.call(l),l.cancelEvent(W)}},this.doZoomOut=function(W){if(l.zoomactive)return l.zoomactive=!1,l.win.css("margin",""),l.win.css(l.zoomrestore.style),Ne.isios4&&vn.scrollTop(l.zoomrestore.scrollTop),l.rail.css({"z-index":l.zindex}),l.zoom.css({"z-index":l.zindex}),l.zoomrestore=!1,l.zoom.css("backgroundPosition","0 0"),l.onResize(),l.onzoomout&&l.onzoomout.call(l),l.cancelEvent(W)},this.doZoom=function(W){return l.zoomactive?l.doZoomOut(W):l.doZoomIn(W)},this.resizeZoom=function(){if(l.zoomactive){var W=l.getScrollTop();l.win.css({width:vn.width()-l.zoomrestore.padding.w+"px",height:vn.height()-l.zoomrestore.padding.h+"px"}),l.onResize(),l.setScrollTop(Math.min(l.page.maxh,W))}},this.init(),at.nicescroll.push(this)},N=function(F){var L=this;this.nc=F,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.reset=function(re,G){L.stop(),L.steptime=0,L.lasttime=u(),L.speedx=0,L.speedy=0,L.lastx=re,L.lasty=G,L.lastscrollx=-1,L.lastscrolly=-1},this.update=function(re,G){var K=u();L.steptime=K-L.lasttime,L.lasttime=K;var we=G-L.lasty,ge=re-L.lastx,St=L.nc.getScrollTop()+we,l=L.nc.getScrollLeft()+ge;L.snapx=l<0||l>L.nc.page.maxw,L.snapy=St<0||St>L.nc.page.maxh,L.speedx=ge,L.speedy=we,L.lastx=re,L.lasty=G},this.stop=function(){L.nc.unsynched("domomentum2d"),L.timer&&clearTimeout(L.timer),L.timer=0,L.lastscrollx=-1,L.lastscrolly=-1},this.doSnapy=function(re,G){var K=!1;G<0?(G=0,K=!0):G>L.nc.page.maxh&&(G=L.nc.page.maxh,K=!0),re<0?(re=0,K=!0):re>L.nc.page.maxw&&(re=L.nc.page.maxw,K=!0),K?L.nc.doScrollPos(re,G,L.nc.opt.snapbackspeed):L.nc.triggerScrollEnd()},this.doMomentum=function(re){var G=u(),K=re?G+re:L.lasttime,we=L.nc.getScrollLeft(),ge=L.nc.getScrollTop(),St=L.nc.page.maxh,l=L.nc.page.maxw;L.speedx=l>0?Math.min(60,L.speedx):0,L.speedy=St>0?Math.min(60,L.speedy):0;var vt=K&&G-K<=60;if((ge<0||ge>St||we<0||we>l)&&(vt=!1),L.speedy&&vt&&L.speedy||L.speedx&&vt&&L.speedx){var _t=Math.max(16,L.steptime);if(_t>50){var R=_t/50;L.speedx*=R,L.speedy*=R,_t=50}L.demulxy=0,L.lastscrollx=L.nc.getScrollLeft(),L.chkx=L.lastscrollx,L.lastscrolly=L.nc.getScrollTop(),L.chky=L.lastscrolly;var Ne=L.lastscrollx,Jt=L.lastscrolly,Dn=function(){var Zn=u()-G>600?.04:.02;L.speedx&&(Ne=Math.floor(L.lastscrollx-L.speedx*(1-L.demulxy)),L.lastscrollx=Ne,(Ne<0||Ne>l)&&(Zn=.1)),L.speedy&&(Jt=Math.floor(L.lastscrolly-L.speedy*(1-L.demulxy)),L.lastscrolly=Jt,(Jt<0||Jt>St)&&(Zn=.1)),L.demulxy=Math.min(1,L.demulxy+Zn),L.nc.synched("domomentum2d",function(){L.speedx&&(L.nc.getScrollLeft(),L.chkx=Ne,L.nc.setScrollLeft(Ne)),L.speedy&&(L.nc.getScrollTop(),L.chky=Jt,L.nc.setScrollTop(Jt)),L.timer||(L.nc.hideCursor(),L.doSnapy(Ne,Jt))}),L.demulxy<1?L.timer=setTimeout(Dn,_t):(L.stop(),L.nc.hideCursor(),L.doSnapy(Ne,Jt))};Dn()}else L.doSnapy(L.nc.getScrollLeft(),L.nc.getScrollTop())}},D=j.fn.scrollTop;j.cssHooks.pageYOffset={get:function(F,L,re){var G=at.data(F,"__nicescroll")||!1;return G&&G.ishwscroll?G.getScrollTop():D.call(F)},set:function(F,L){var re=at.data(F,"__nicescroll")||!1;return re&&re.ishwscroll?re.setScrollTop(parseInt(L)):D.call(F,L),this}},j.fn.scrollTop=function(F){if(void 0===F){var L=!!this[0]&&(at.data(this[0],"__nicescroll")||!1);return L&&L.ishwscroll?L.getScrollTop():D.call(this)}return this.each(function(){var re=at.data(this,"__nicescroll")||!1;re&&re.ishwscroll?re.setScrollTop(parseInt(F)):D.call(at(this),F)})};var m=j.fn.scrollLeft;at.cssHooks.pageXOffset={get:function(F,L,re){var G=at.data(F,"__nicescroll")||!1;return G&&G.ishwscroll?G.getScrollLeft():m.call(F)},set:function(F,L){var re=at.data(F,"__nicescroll")||!1;return re&&re.ishwscroll?re.setScrollLeft(parseInt(L)):m.call(F,L),this}},j.fn.scrollLeft=function(F){if(void 0===F){var L=!!this[0]&&(at.data(this[0],"__nicescroll")||!1);return L&&L.ishwscroll?L.getScrollLeft():m.call(this)}return this.each(function(){var re=at.data(this,"__nicescroll")||!1;re&&re.ishwscroll?re.setScrollLeft(parseInt(F)):m.call(at(this),F)})};var q=function(F){var L=this;if(this.length=0,this.name="nicescrollarray",this.each=function(K){return at.each(L,K),L},this.push=function(K){L[L.length]=K,L.length++},this.eq=function(K){return L[K]},F)for(var re=0;re<F.length;re++){var G=at.data(F[re],"__nicescroll")||!1;G&&(this[this.length]=G,this.length++)}return this};(function(F,L,re){for(var G=0,K=L.length;G<K;G++)re(F,L[G])})(q.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPos"],function(F,L){F[L]=function(){var re=arguments;return this.each(function(){this[L].apply(this,re)})}}),j.fn.getNiceScroll=function(F){return void 0===F?new q(this):this[F]&&at.data(this[F],"__nicescroll")||!1},(j.expr.pseudos||j.expr[":"]).nicescroll=function(F){return void 0!==at.data(F,"__nicescroll")},at.fn.niceScroll=function(F,L){void 0!==L||"object"!=typeof F||"jquery"in F||(L=F,F=!1);var re=new q;return this.each(function(){var G=at(this),K=at.extend({},L);if(F){var we=at(F);K.doc=we.length>1?at(F,G):we,K.win=G}!("doc"in K)||"win"in K||(K.win=G);var ge=G.data("__nicescroll")||!1;ge||(K.doc=K.doc||G,ge=new C(K,G),G.data("__nicescroll",ge)),re.push(ge)}),1===re.length?re[0]:re},Ct.NiceScroll={getjQuery:function(){return j}},at.nicescroll||(at.nicescroll=new q,at.nicescroll.options=k)}),function(j,jt){"function"==typeof define&&define.amd?define(["jquery"],function(on){return jt(on)}):"object"==typeof exports?module.exports=jt(require("jquery")):jt(jQuery)}(0,function(j){function jt(H){this.constraints=null,this.__init(H)}function on(H,U){var I=!0;return j.each(H,function(ae,u){return void 0===U[ae]||H[ae]!==U[ae]?(I=!1,!1):void 0}),I}function En(H){var U=H.attr("id"),I=U?De.window.document.getElementById(U):null;return I?I===H[0]:j.contains(De.window.document.body,H[0])}var Tn={animation:"fade",animationDuration:350,content:null,contentAsHTML:!1,contentCloning:!1,debug:!0,delay:300,delayTouch:[300,500],functionInit:null,functionBefore:null,functionReady:null,functionAfter:null,functionFormat:null,IEmin:6,interactive:!1,multiple:!1,parent:null,plugins:["sideTip"],repositionOnScroll:!1,restoration:"none",selfDestruction:!0,theme:[],timer:0,trackerInterval:500,trackOrigin:!1,trackTooltip:!1,trigger:"hover",triggerClose:{click:!1,mouseleave:!1,originClick:!1,scroll:!1,tap:!1,touchleave:!1},triggerOpen:{click:!1,mouseenter:!1,tap:!1,touchstart:!1},updateAnimation:"rotate",zIndex:9999999},at=typeof window<"u"?window:null,De={hasTouchCapability:!(!at||!("ontouchstart"in at||at.DocumentTouch&&at.document instanceof at.DocumentTouch||at.navigator.maxTouchPoints)),hasTransitions:function an(){if(!at)return!1;var U=(at.document.body||at.document.documentElement).style,I="transition",ae=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof U[I])return!0;I=I.charAt(0).toUpperCase()+I.substr(1);for(var u=0;u<ae.length;u++)if("string"==typeof U[ae[u]+I])return!0;return!1}(),IE:!1,semVer:"4.2.8",window:at},Ct=function(){this.__$emitterPrivate=j({}),this.__$emitterPublic=j({}),this.__instancesLatestArr=[],this.__plugins={},this._env=De};Ct.prototype={__bridge:function(H,U,I){if(!U[I]){var ae=function(){};ae.prototype=H;var u=new ae;u.__init&&u.__init(U),j.each(H,function(k,g){0!=k.indexOf("__")&&(U[k]?Tn.debug&&console.log("The "+k+" method of the "+I+" plugin conflicts with another plugin or native methods"):(U[k]=function(){return u[k].apply(u,Array.prototype.slice.apply(arguments))},U[k].bridged=u))}),U[I]=u}return this},__setWindow:function(H){return De.window=H,this},_getRuler:function(H){return new jt(H)},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_plugin:function(H){var U=this;if("string"==typeof H){var I=H,ae=null;return I.indexOf(".")>0?ae=U.__plugins[I]:j.each(U.__plugins,function(u,k){return k.name.substring(k.name.length-I.length-1)=="."+I?(ae=k,!1):void 0}),ae}if(H.name.indexOf(".")<0)throw new Error("Plugins must be namespaced");return U.__plugins[H.name]=H,H.core&&U.__bridge(H.core,U,H.name),this},_trigger:function(){var H=Array.prototype.slice.apply(arguments);return"string"==typeof H[0]&&(H[0]={type:H[0]}),this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,H),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,H),this},instances:function(H){var U=[];return j(H||".tooltipstered").each(function(){var ae=j(this),u=ae.data("tooltipster-ns");u&&j.each(u,function(k,g){U.push(ae.data(g))})}),U},instancesLatest:function(){return this.__instancesLatestArr},off:function(){return this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},origins:function(H){return j((H?H+" ":"")+".tooltipstered").toArray()},setDefaults:function(H){return j.extend(Tn,H),this},triggerHandler:function(){return this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},j.tooltipster=new Ct,j.Tooltipster=function(H,U){this.__callbacks={close:[],open:[]},this.__destroyed=!1,this.__$emitterPrivate=j({}),this.__$emitterPublic=j({}),this.__enabled=!0,this.__namespace="tooltipster-"+Math.round(1e6*Math.random()),this.__pointerIsOverOrigin=!1,this.__previousThemes=[],this.__state="closed",this.__timeouts={close:[],open:null},this.__touchEvents=[],this.__tracker=null,this.__init(H,U)},j.Tooltipster.prototype={__init:function(H,U){var I=this;if(I._$origin=j(H),I.__options=j.extend(!0,{},Tn,U),I.__optionsFormat(),!De.IE||De.IE>=I.__options.IEmin){var ae=null;if(void 0===I._$origin.data("tooltipster-initialTitle")&&(void 0===(ae=I._$origin.attr("title"))&&(ae=null),I._$origin.data("tooltipster-initialTitle",ae)),null!==I.__options.content)I.__contentSet(I.__options.content);else{var u,k=I._$origin.attr("data-tooltip-content");k&&(u=j(k)),I.__contentSet(u&&u[0]?u.first():ae)}I._$origin.removeAttr("title").addClass("tooltipstered"),I.__prepareOrigin(),I.__prepareGC(),j.each(I.__options.plugins,function(g,x){I._plug(x)}),De.hasTouchCapability&&j(De.window.document.body).on("touchmove."+I.__namespace+"-triggerOpen",function(g){I._touchRecordEvent(g)}),I._on("created",function(){I.__prepareTooltip()})._on("repositioned",function(g){I.__lastPosition=g.position})}else I.__options.disabled=!0},__contentInsert:function(){var H=this,U=H._$tooltip.find(".tooltipster-content"),I=H.__Content;return H._trigger({type:"format",content:H.__Content,format:function(u){I=u}}),H.__options.functionFormat&&(I=H.__options.functionFormat.call(H,H,{origin:H._$origin[0]},H.__Content)),"string"!=typeof I||H.__options.contentAsHTML?U.empty().append(I):U.text(I),H},__contentSet:function(H){return H instanceof j&&this.__options.contentCloning&&(H=H.clone(!0)),this.__Content=H,this._trigger({type:"updated",content:H}),this},__destroyError:function(){throw new Error("This tooltip has been destroyed and cannot execute your method call.")},__geometry:function(){var H=this,U=H._$origin,I=H._$origin.is("area");if(I){var ae=H._$origin.parent().attr("name");U=j('img[usemap="#'+ae+'"]')}var u=U[0].getBoundingClientRect(),k=j(De.window.document),g=j(De.window),x=U,C={available:{document:null,window:null},document:{size:{height:k.height(),width:k.width()}},window:{scroll:{left:De.window.scrollX||De.window.document.documentElement.scrollLeft,top:De.window.scrollY||De.window.document.documentElement.scrollTop},size:{height:g.height(),width:g.width()}},origin:{fixedLineage:!1,offset:{},size:{height:u.bottom-u.top,width:u.right-u.left},usemapImage:I?U[0]:null,windowOffset:{bottom:u.bottom,left:u.left,right:u.right,top:u.top}}};if(I){var N=H._$origin.attr("shape"),D=H._$origin.attr("coords");if(D&&(D=D.split(","),j.map(D,function(Jt,Dn){D[Dn]=parseInt(Jt)})),"default"!=N)switch(N){case"circle":var F=D[2],L=D[1]-F,re=D[0]-F;C.origin.size.height=2*F,C.origin.size.width=C.origin.size.height,C.origin.windowOffset.left+=re,C.origin.windowOffset.top+=L;break;case"rect":var G=D[0],K=D[1],we=D[2];C.origin.size.height=D[3]-K,C.origin.size.width=we-G,C.origin.windowOffset.left+=G,C.origin.windowOffset.top+=K;break;case"poly":for(var St=0,l=0,vt=0,ue=0,Tt="even",_t=0;_t<D.length;_t++){var R=D[_t];"even"==Tt?(R>vt&&(vt=R,0===_t&&(St=vt)),St>R&&(St=R),Tt="odd"):(R>ue&&(ue=R,1==_t&&(l=ue)),l>R&&(l=R),Tt="even")}C.origin.size.height=ue-l,C.origin.size.width=vt-St,C.origin.windowOffset.left+=St,C.origin.windowOffset.top+=l}}for(H._trigger({type:"geometry",edit:function(Jt){C.origin.size.height=Jt.height,C.origin.windowOffset.left=Jt.left,C.origin.windowOffset.top=Jt.top,C.origin.size.width=Jt.width},geometry:{height:C.origin.size.height,left:C.origin.windowOffset.left,top:C.origin.windowOffset.top,width:C.origin.size.width}}),C.origin.windowOffset.right=C.origin.windowOffset.left+C.origin.size.width,C.origin.windowOffset.bottom=C.origin.windowOffset.top+C.origin.size.height,C.origin.offset.left=C.origin.windowOffset.left+C.window.scroll.left,C.origin.offset.top=C.origin.windowOffset.top+C.window.scroll.top,C.origin.offset.bottom=C.origin.offset.top+C.origin.size.height,C.origin.offset.right=C.origin.offset.left+C.origin.size.width,C.available.document={bottom:{height:C.document.size.height-C.origin.offset.bottom,width:C.document.size.width},left:{height:C.document.size.height,width:C.origin.offset.left},right:{height:C.document.size.height,width:C.document.size.width-C.origin.offset.right},top:{height:C.origin.offset.top,width:C.document.size.width}},C.available.window={bottom:{height:Math.max(C.window.size.height-Math.max(C.origin.windowOffset.bottom,0),0),width:C.window.size.width},left:{height:C.window.size.height,width:Math.max(C.origin.windowOffset.left,0)},right:{height:C.window.size.height,width:Math.max(C.window.size.width-Math.max(C.origin.windowOffset.right,0),0)},top:{height:Math.max(C.origin.windowOffset.top,0),width:C.window.size.width}};"html"!=x[0].tagName.toLowerCase();){if("fixed"==x.css("position")){C.origin.fixedLineage=!0;break}x=x.parent()}return C},__optionsFormat:function(){return"number"==typeof this.__options.animationDuration&&(this.__options.animationDuration=[this.__options.animationDuration,this.__options.animationDuration]),"number"==typeof this.__options.delay&&(this.__options.delay=[this.__options.delay,this.__options.delay]),"number"==typeof this.__options.delayTouch&&(this.__options.delayTouch=[this.__options.delayTouch,this.__options.delayTouch]),"string"==typeof this.__options.theme&&(this.__options.theme=[this.__options.theme]),null===this.__options.parent?this.__options.parent=j(De.window.document.body):"string"==typeof this.__options.parent&&(this.__options.parent=j(this.__options.parent)),"hover"==this.__options.trigger?(this.__options.triggerOpen={mouseenter:!0,touchstart:!0},this.__options.triggerClose={mouseleave:!0,originClick:!0,touchleave:!0}):"click"==this.__options.trigger&&(this.__options.triggerOpen={click:!0,tap:!0},this.__options.triggerClose={click:!0,tap:!0}),this._trigger("options"),this},__prepareGC:function(){var H=this;return H.__options.selfDestruction?H.__garbageCollector=setInterval(function(){var U=(new Date).getTime();H.__touchEvents=j.grep(H.__touchEvents,function(I,ae){return U-I.time>6e4}),En(H._$origin)||H.close(function(){H.destroy()})},2e4):clearInterval(H.__garbageCollector),H},__prepareOrigin:function(){var H=this;if(H._$origin.off("."+H.__namespace+"-triggerOpen"),De.hasTouchCapability&&H._$origin.on("touchstart."+H.__namespace+"-triggerOpen touchend."+H.__namespace+"-triggerOpen touchcancel."+H.__namespace+"-triggerOpen",function(I){H._touchRecordEvent(I)}),H.__options.triggerOpen.click||H.__options.triggerOpen.tap&&De.hasTouchCapability){var U="";H.__options.triggerOpen.click&&(U+="click."+H.__namespace+"-triggerOpen "),H.__options.triggerOpen.tap&&De.hasTouchCapability&&(U+="touchend."+H.__namespace+"-triggerOpen"),H._$origin.on(U,function(I){H._touchIsMeaningfulEvent(I)&&H._open(I)})}return(H.__options.triggerOpen.mouseenter||H.__options.triggerOpen.touchstart&&De.hasTouchCapability)&&(U="",H.__options.triggerOpen.mouseenter&&(U+="mouseenter."+H.__namespace+"-triggerOpen "),H.__options.triggerOpen.touchstart&&De.hasTouchCapability&&(U+="touchstart."+H.__namespace+"-triggerOpen"),H._$origin.on(U,function(ae){!H._touchIsTouchEvent(ae)&&H._touchIsEmulatedEvent(ae)||(H.__pointerIsOverOrigin=!0,H._openShortly(ae))})),(H.__options.triggerClose.mouseleave||H.__options.triggerClose.touchleave&&De.hasTouchCapability)&&(U="",H.__options.triggerClose.mouseleave&&(U+="mouseleave."+H.__namespace+"-triggerOpen "),H.__options.triggerClose.touchleave&&De.hasTouchCapability&&(U+="touchend."+H.__namespace+"-triggerOpen touchcancel."+H.__namespace+"-triggerOpen"),H._$origin.on(U,function(ae){H._touchIsMeaningfulEvent(ae)&&(H.__pointerIsOverOrigin=!1)})),H},__prepareTooltip:function(){var H=this,U=H.__options.interactive?"auto":"";return H._$tooltip.attr("id",H.__namespace).css({"pointer-events":U,zIndex:H.__options.zIndex}),j.each(H.__previousThemes,function(I,ae){H._$tooltip.removeClass(ae)}),j.each(H.__options.theme,function(I,ae){H._$tooltip.addClass(ae)}),H.__previousThemes=j.merge([],H.__options.theme),H},__scrollHandler:function(H){var U=this;if(U.__options.triggerClose.scroll)U._close(H);else if(En(U._$origin)&&En(U._$tooltip)){var I=null;if(H.target===De.window.document)U.__Geometry.origin.fixedLineage||U.__options.repositionOnScroll&&U.reposition(H);else{I=U.__geometry();var ae=!1;"fixed"!=U._$origin.css("position")&&U.__$originParents.each(function(g,x){var C=j(x),N=C.css("overflow-x"),D=C.css("overflow-y");if("visible"!=N||"visible"!=D){var m=x.getBoundingClientRect();if("visible"!=N&&(I.origin.windowOffset.left<m.left||I.origin.windowOffset.right>m.right)||"visible"!=D&&(I.origin.windowOffset.top<m.top||I.origin.windowOffset.bottom>m.bottom))return ae=!0,!1}return"fixed"!=C.css("position")&&void 0}),ae?U._$tooltip.css("visibility","hidden"):(U._$tooltip.css("visibility","visible"),U.__options.repositionOnScroll?U.reposition(H):U._$tooltip.css({left:U.__lastPosition.coord.left+(I.origin.offset.left-U.__Geometry.origin.offset.left),top:U.__lastPosition.coord.top+(I.origin.offset.top-U.__Geometry.origin.offset.top)}))}U._trigger({type:"scroll",event:H,geo:I})}return U},__stateSet:function(H){return this.__state=H,this._trigger({type:"state",state:H}),this},__timeoutsClear:function(){return clearTimeout(this.__timeouts.open),this.__timeouts.open=null,j.each(this.__timeouts.close,function(H,U){clearTimeout(U)}),this.__timeouts.close=[],this},__trackerStart:function(){var H=this,U=H._$tooltip.find(".tooltipster-content");return H.__options.trackTooltip&&(H.__contentBcr=U[0].getBoundingClientRect()),H.__tracker=setInterval(function(){if(En(H._$origin)&&En(H._$tooltip)){if(H.__options.trackOrigin){var I=H.__geometry(),ae=!1;on(I.origin.size,H.__Geometry.origin.size)&&(H.__Geometry.origin.fixedLineage?on(I.origin.windowOffset,H.__Geometry.origin.windowOffset)&&(ae=!0):on(I.origin.offset,H.__Geometry.origin.offset)&&(ae=!0)),ae||(H.__options.triggerClose.mouseleave?H._close():H.reposition())}if(H.__options.trackTooltip){var u=U[0].getBoundingClientRect();u.height===H.__contentBcr.height&&u.width===H.__contentBcr.width||(H.reposition(),H.__contentBcr=u)}}else H._close()},H.__options.trackerInterval),H},_close:function(H,U,I){var ae=this,u=!0;if(ae._trigger({type:"close",event:H,stop:function(){u=!1}}),u||I){U&&ae.__callbacks.close.push(U),ae.__callbacks.open=[],ae.__timeoutsClear();var k=function(){j.each(ae.__callbacks.close,function(m,q){q.call(ae,ae,{event:H,origin:ae._$origin[0]})}),ae.__callbacks.close=[]};if("closed"!=ae.__state){var g=!0,N=(new Date).getTime()+ae.__options.animationDuration[1];if("disappearing"==ae.__state&&N>ae.__closingTime&&ae.__options.animationDuration[1]>0&&(g=!1),g){ae.__closingTime=N,"disappearing"!=ae.__state&&ae.__stateSet("disappearing");var D=function(){clearInterval(ae.__tracker),ae._trigger({type:"closing",event:H}),ae._$tooltip.off("."+ae.__namespace+"-triggerClose").removeClass("tooltipster-dying"),j(De.window).off("."+ae.__namespace+"-triggerClose"),ae.__$originParents.each(function(m,q){j(q).off("scroll."+ae.__namespace+"-triggerClose")}),ae.__$originParents=null,j(De.window.document.body).off("."+ae.__namespace+"-triggerClose"),ae._$origin.off("."+ae.__namespace+"-triggerClose"),ae._off("dismissable"),ae.__stateSet("closed"),ae._trigger({type:"after",event:H}),ae.__options.functionAfter&&ae.__options.functionAfter.call(ae,ae,{event:H,origin:ae._$origin[0]}),k()};De.hasTransitions?(ae._$tooltip.css({"-moz-animation-duration":ae.__options.animationDuration[1]+"ms","-ms-animation-duration":ae.__options.animationDuration[1]+"ms","-o-animation-duration":ae.__options.animationDuration[1]+"ms","-webkit-animation-duration":ae.__options.animationDuration[1]+"ms","animation-duration":ae.__options.animationDuration[1]+"ms","transition-duration":ae.__options.animationDuration[1]+"ms"}),ae._$tooltip.clearQueue().removeClass("tooltipster-show").addClass("tooltipster-dying"),ae.__options.animationDuration[1]>0&&ae._$tooltip.delay(ae.__options.animationDuration[1]),ae._$tooltip.queue(D)):ae._$tooltip.stop().fadeOut(ae.__options.animationDuration[1],D)}}else k()}return ae},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_open:function(H,U){var I=this;if(!I.__destroying&&En(I._$origin)&&I.__enabled){var ae=!0;if("closed"==I.__state&&(I._trigger({type:"before",event:H,stop:function(){ae=!1}}),ae&&I.__options.functionBefore&&(ae=I.__options.functionBefore.call(I,I,{event:H,origin:I._$origin[0]}))),!1!==ae&&null!==I.__Content){U&&I.__callbacks.open.push(U),I.__callbacks.close=[],I.__timeoutsClear();var u,k=function(){"stable"!=I.__state&&I.__stateSet("stable"),j.each(I.__callbacks.open,function(D,m){m.call(I,I,{origin:I._$origin[0],tooltip:I._$tooltip[0]})}),I.__callbacks.open=[]};if("closed"!==I.__state)u=0,"disappearing"===I.__state?(I.__stateSet("appearing"),De.hasTransitions?(I._$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-show"),I.__options.animationDuration[0]>0&&I._$tooltip.delay(I.__options.animationDuration[0]),I._$tooltip.queue(k)):I._$tooltip.stop().fadeIn(k)):"stable"==I.__state&&k();else{if(I.__stateSet("appearing"),u=I.__options.animationDuration[0],I.__contentInsert(),I.reposition(H,!0),De.hasTransitions?(I._$tooltip.addClass("tooltipster-"+I.__options.animation).addClass("tooltipster-initial").css({"-moz-animation-duration":I.__options.animationDuration[0]+"ms","-ms-animation-duration":I.__options.animationDuration[0]+"ms","-o-animation-duration":I.__options.animationDuration[0]+"ms","-webkit-animation-duration":I.__options.animationDuration[0]+"ms","animation-duration":I.__options.animationDuration[0]+"ms","transition-duration":I.__options.animationDuration[0]+"ms"}),setTimeout(function(){"closed"!=I.__state&&(I._$tooltip.addClass("tooltipster-show").removeClass("tooltipster-initial"),I.__options.animationDuration[0]>0&&I._$tooltip.delay(I.__options.animationDuration[0]),I._$tooltip.queue(k))},0)):I._$tooltip.css("display","none").fadeIn(I.__options.animationDuration[0],k),I.__trackerStart(),j(De.window).on("resize."+I.__namespace+"-triggerClose",function(D){var m=j(document.activeElement);(m.is("input")||m.is("textarea"))&&j.contains(I._$tooltip[0],m[0])||I.reposition(D)}).on("scroll."+I.__namespace+"-triggerClose",function(D){I.__scrollHandler(D)}),I.__$originParents=I._$origin.parents(),I.__$originParents.each(function(D,m){j(m).on("scroll."+I.__namespace+"-triggerClose",function(q){I.__scrollHandler(q)})}),I.__options.triggerClose.mouseleave||I.__options.triggerClose.touchleave&&De.hasTouchCapability){I._on("dismissable",function(D){D.dismissable?D.delay?(N=setTimeout(function(){I._close(D.event)},D.delay),I.__timeouts.close.push(N)):I._close(D):clearTimeout(N)});var g=I._$origin,x="",C="",N=null;I.__options.interactive&&(g=g.add(I._$tooltip)),I.__options.triggerClose.mouseleave&&(x+="mouseenter."+I.__namespace+"-triggerClose ",C+="mouseleave."+I.__namespace+"-triggerClose "),I.__options.triggerClose.touchleave&&De.hasTouchCapability&&(x+="touchstart."+I.__namespace+"-triggerClose",C+="touchend."+I.__namespace+"-triggerClose touchcancel."+I.__namespace+"-triggerClose"),g.on(C,function(D){!I._touchIsTouchEvent(D)&&I._touchIsEmulatedEvent(D)||I._trigger({delay:("mouseleave"==D.type?I.__options.delay:I.__options.delayTouch)[1],dismissable:!0,event:D,type:"dismissable"})}).on(x,function(D){!I._touchIsTouchEvent(D)&&I._touchIsEmulatedEvent(D)||I._trigger({dismissable:!1,event:D,type:"dismissable"})})}I.__options.triggerClose.originClick&&I._$origin.on("click."+I.__namespace+"-triggerClose",function(D){I._touchIsTouchEvent(D)||I._touchIsEmulatedEvent(D)||I._close(D)}),(I.__options.triggerClose.click||I.__options.triggerClose.tap&&De.hasTouchCapability)&&setTimeout(function(){if("closed"!=I.__state){var D="",m=j(De.window.document.body);I.__options.triggerClose.click&&(D+="click."+I.__namespace+"-triggerClose "),I.__options.triggerClose.tap&&De.hasTouchCapability&&(D+="touchend."+I.__namespace+"-triggerClose"),m.on(D,function(q){I._touchIsMeaningfulEvent(q)&&(I._touchRecordEvent(q),I.__options.interactive&&j.contains(I._$tooltip[0],q.target)||I._close(q))}),I.__options.triggerClose.tap&&De.hasTouchCapability&&m.on("touchstart."+I.__namespace+"-triggerClose",function(q){I._touchRecordEvent(q)})}},0),I._trigger("ready"),I.__options.functionReady&&I.__options.functionReady.call(I,I,{origin:I._$origin[0],tooltip:I._$tooltip[0]})}I.__options.timer>0&&(N=setTimeout(function(){I._close()},I.__options.timer+u),I.__timeouts.close.push(N))}}return I},_openShortly:function(H){var U=this,I=!0;if("stable"!=U.__state&&"appearing"!=U.__state&&!U.__timeouts.open&&(U._trigger({type:"start",event:H,stop:function(){I=!1}}),I)){var ae=0==H.type.indexOf("touch")?U.__options.delayTouch:U.__options.delay;ae[0]?U.__timeouts.open=setTimeout(function(){U.__timeouts.open=null,U.__pointerIsOverOrigin&&U._touchIsMeaningfulEvent(H)?(U._trigger("startend"),U._open(H)):U._trigger("startcancel")},ae[0]):(U._trigger("startend"),U._open(H))}return U},_optionsExtract:function(H,U){var I=this,ae=j.extend(!0,{},U),u=I.__options[H];return u||(u={},j.each(U,function(k,g){var x=I.__options[k];void 0!==x&&(u[k]=x)})),j.each(ae,function(k,g){void 0!==u[k]&&("object"!=typeof g||g instanceof Array||null==g||"object"!=typeof u[k]||u[k]instanceof Array||null==u[k]?ae[k]=u[k]:j.extend(ae[k],u[k]))}),ae},_plug:function(H){var U=j.tooltipster._plugin(H);if(!U)throw new Error('The "'+H+'" plugin is not defined');return U.instance&&j.tooltipster.__bridge(U.instance,this,U.name),this},_touchIsEmulatedEvent:function(H){for(var U=!1,I=(new Date).getTime(),ae=this.__touchEvents.length-1;ae>=0;ae--){var u=this.__touchEvents[ae];if(!(I-u.time<500))break;u.target===H.target&&(U=!0)}return U},_touchIsMeaningfulEvent:function(H){return this._touchIsTouchEvent(H)&&!this._touchSwiped(H.target)||!this._touchIsTouchEvent(H)&&!this._touchIsEmulatedEvent(H)},_touchIsTouchEvent:function(H){return 0==H.type.indexOf("touch")},_touchRecordEvent:function(H){return this._touchIsTouchEvent(H)&&(H.time=(new Date).getTime(),this.__touchEvents.push(H)),this},_touchSwiped:function(H){for(var U=!1,I=this.__touchEvents.length-1;I>=0;I--){var ae=this.__touchEvents[I];if("touchmove"==ae.type){U=!0;break}if("touchstart"==ae.type&&H===ae.target)break}return U},_trigger:function(){var H=Array.prototype.slice.apply(arguments);return"string"==typeof H[0]&&(H[0]={type:H[0]}),H[0].instance=this,H[0].origin=this._$origin?this._$origin[0]:null,H[0].tooltip=this._$tooltip?this._$tooltip[0]:null,this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,H),j.tooltipster._trigger.apply(j.tooltipster,H),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,H),this},_unplug:function(H){var U=this;if(U[H]){var I=j.tooltipster._plugin(H);I.instance&&j.each(I.instance,function(ae,u){U[ae]&&U[ae].bridged===U[H]&&delete U[ae]}),U[H].__destroy&&U[H].__destroy(),delete U[H]}return U},close:function(H){return this.__destroyed?this.__destroyError():this._close(null,H),this},content:function(H){var U=this;if(void 0===H)return U.__Content;if(U.__destroyed)U.__destroyError();else if(U.__contentSet(H),null!==U.__Content){if("closed"!==U.__state&&(U.__contentInsert(),U.reposition(),U.__options.updateAnimation))if(De.hasTransitions){var I=U.__options.updateAnimation;U._$tooltip.addClass("tooltipster-update-"+I),setTimeout(function(){"closed"!=U.__state&&U._$tooltip.removeClass("tooltipster-update-"+I)},1e3)}else U._$tooltip.fadeTo(200,.5,function(){"closed"!=U.__state&&U._$tooltip.fadeTo(200,1)})}else U._close();return U},destroy:function(){var H=this;if(H.__destroyed)H.__destroyError();else{"closed"!=H.__state?H.option("animationDuration",0)._close(null,null,!0):H.__timeoutsClear(),H._trigger("destroy"),H.__destroyed=!0,H._$origin.removeData(H.__namespace).off("."+H.__namespace+"-triggerOpen"),j(De.window.document.body).off("."+H.__namespace+"-triggerOpen");var U=H._$origin.data("tooltipster-ns");if(U)if(1===U.length){var I=null;"previous"==H.__options.restoration?I=H._$origin.data("tooltipster-initialTitle"):"current"==H.__options.restoration&&(I="string"==typeof H.__Content?H.__Content:j("<div></div>").append(H.__Content).html()),I&&H._$origin.attr("title",I),H._$origin.removeClass("tooltipstered"),H._$origin.removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else U=j.grep(U,function(ae,u){return ae!==H.__namespace}),H._$origin.data("tooltipster-ns",U);H._trigger("destroyed"),H._off(),H.off(),H.__Content=null,H.__$emitterPrivate=null,H.__$emitterPublic=null,H.__options.parent=null,H._$origin=null,H._$tooltip=null,j.tooltipster.__instancesLatestArr=j.grep(j.tooltipster.__instancesLatestArr,function(ae,u){return H!==ae}),clearInterval(H.__garbageCollector)}return H},disable:function(){return this.__destroyed?(this.__destroyError(),this):(this._close(),this.__enabled=!1,this)},elementOrigin:function(){return this.__destroyed?void this.__destroyError():this._$origin[0]},elementTooltip:function(){return this._$tooltip?this._$tooltip[0]:null},enable:function(){return this.__enabled=!0,this},hide:function(H){return this.close(H)},instance:function(){return this},off:function(){return this.__destroyed||this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},open:function(H){return this.__destroyed?this.__destroyError():this._open(null,H),this},option:function(H,U){return void 0===U?this.__options[H]:(this.__destroyed?this.__destroyError():(this.__options[H]=U,this.__optionsFormat(),j.inArray(H,["trigger","triggerClose","triggerOpen"])>=0&&this.__prepareOrigin(),"selfDestruction"===H&&this.__prepareGC()),this)},reposition:function(H,U){var I=this;return I.__destroyed?I.__destroyError():"closed"!=I.__state&&En(I._$origin)&&(U||En(I._$tooltip))&&(U||I._$tooltip.detach(),I.__Geometry=I.__geometry(),I._trigger({type:"reposition",event:H,helper:{geo:I.__Geometry}})),I},show:function(H){return this.open(H)},status:function(){return{destroyed:this.__destroyed,enabled:this.__enabled,open:"closed"!==this.__state,state:this.__state}},triggerHandler:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},j.fn.tooltipster=function(){var H=Array.prototype.slice.apply(arguments),U="You are using a single HTML element as content for several tooltips. You probably want to set the contentCloning option to TRUE.";if(0===this.length)return this;if("string"==typeof H[0]){var I="#*$~&";return this.each(function(){var m=j(this).data("tooltipster-ns"),q=m?j(this).data(m[0]):null;if(!q)throw new Error("You called Tooltipster's \""+H[0]+'" method on an uninitialized element');if("function"!=typeof q[H[0]])throw new Error('Unknown method "'+H[0]+'"');this.length>1&&"content"==H[0]&&(H[1]instanceof j||"object"==typeof H[1]&&null!=H[1]&&H[1].tagName)&&!q.__options.contentCloning&&q.__options.debug&&console.log(U);var F=q[H[0]](H[1],H[2]);return F!==q||"instance"===H[0]?(I=F,!1):void 0}),"#*$~&"!==I?I:this}j.tooltipster.__instancesLatestArr=[];var ae=H[0]&&void 0!==H[0].multiple,u=ae&&H[0].multiple||!ae&&Tn.multiple,k=H[0]&&void 0!==H[0].content,g=k&&H[0].content||!k&&Tn.content,x=H[0]&&void 0!==H[0].contentCloning,N=H[0]&&void 0!==H[0].debug,D=N&&H[0].debug||!N&&Tn.debug;return this.length>1&&(g instanceof j||"object"==typeof g&&null!=g&&g.tagName)&&!(x&&H[0].contentCloning||!x&&Tn.contentCloning)&&D&&console.log(U),this.each(function(){var m=!1,q=j(this),F=q.data("tooltipster-ns"),L=null;F?u?m=!0:D&&(console.log("Tooltipster: one or more tooltips are already attached to the element below. Ignoring."),console.log(this)):m=!0,m&&(L=new j.Tooltipster(this,H[0]),F||(F=[]),F.push(L.__namespace),q.data("tooltipster-ns",F),q.data(L.__namespace,L),L.__options.functionInit&&L.__options.functionInit.call(L,L,{origin:this}),L._trigger("init")),j.tooltipster.__instancesLatestArr.push(L)}),this},jt.prototype={__init:function(H){this.__$tooltip=H,this.__$tooltip.css({left:0,overflow:"hidden",position:"absolute",top:0}).find(".tooltipster-content").css("overflow","auto"),this.$container=j('<div class="tooltipster-ruler"></div>').append(this.__$tooltip).appendTo(De.window.document.body)},__forceRedraw:function(){var H=this.__$tooltip.parent();this.__$tooltip.detach(),this.__$tooltip.appendTo(H)},constrain:function(H,U){return this.constraints={width:H,height:U},this.__$tooltip.css({display:"block",height:"",overflow:"auto",width:H}),this},destroy:function(){this.__$tooltip.detach().find(".tooltipster-content").css({display:"",overflow:""}),this.$container.remove()},free:function(){return this.constraints=null,this.__$tooltip.css({display:"",height:"",overflow:"visible",width:""}),this},measure:function(){this.__forceRedraw();var H=this.__$tooltip[0].getBoundingClientRect(),U={size:{height:H.height||H.bottom-H.top,width:H.width||H.right-H.left}};if(this.constraints){var I=this.__$tooltip.find(".tooltipster-content"),ae=this.__$tooltip.outerHeight(),u=I[0].getBoundingClientRect(),k={height:ae<=this.constraints.height,width:H.width<=this.constraints.width&&u.width>=I[0].scrollWidth-1};U.fits=k.height&&k.width}return De.IE&&De.IE<=11&&U.size.width!==De.window.document.documentElement.clientWidth&&(U.size.width=Math.ceil(U.size.width)+1),U}};var vn=navigator.userAgent.toLowerCase();-1!=vn.indexOf("msie")?De.IE=parseInt(vn.split("msie")[1]):-1!==vn.toLowerCase().indexOf("trident")&&-1!==vn.indexOf(" rv:11")?De.IE=11:-1!=vn.toLowerCase().indexOf("edge/")&&(De.IE=parseInt(vn.toLowerCase().split("edge/")[1]));var wn="tooltipster.sideTip";return j.tooltipster._plugin({name:wn,instance:{__defaults:function(){return{arrow:!0,distance:6,functionPosition:null,maxWidth:null,minIntersection:16,minWidth:0,position:null,side:"top",viewportAware:!0}},__init:function(H){var U=this;U.__instance=H,U.__namespace="tooltipster-sideTip-"+Math.round(1e6*Math.random()),U.__previousState="closed",U.__optionsFormat(),U.__instance._on("state."+U.__namespace,function(I){"closed"==I.state?U.__close():"appearing"==I.state&&"closed"==U.__previousState&&U.__create(),U.__previousState=I.state}),U.__instance._on("options."+U.__namespace,function(){U.__optionsFormat()}),U.__instance._on("reposition."+U.__namespace,function(I){U.__reposition(I.event,I.helper)})},__close:function(){this.__instance.content()instanceof j&&this.__instance.content().detach(),this.__instance._$tooltip.remove(),this.__instance._$tooltip=null},__create:function(){var H=j('<div class="tooltipster-base tooltipster-sidetip"><div class="tooltipster-box"><div class="tooltipster-content"></div></div><div class="tooltipster-arrow"><div class="tooltipster-arrow-uncropped"><div class="tooltipster-arrow-border"></div><div class="tooltipster-arrow-background"></div></div></div></div>');this.__options.arrow||H.find(".tooltipster-box").css("margin",0).end().find(".tooltipster-arrow").hide(),this.__options.minWidth&&H.css("min-width",this.__options.minWidth+"px"),this.__options.maxWidth&&H.css("max-width",this.__options.maxWidth+"px"),this.__instance._$tooltip=H,this.__instance._trigger("created")},__destroy:function(){this.__instance._off("."+self.__namespace)},__optionsFormat:function(){var H=this;H.__options=H.__instance._optionsExtract(wn,H.__defaults()),H.__options.position&&(H.__options.side=H.__options.position),"object"!=typeof H.__options.distance&&(H.__options.distance=[H.__options.distance]),H.__options.distance.length<4&&(void 0===H.__options.distance[1]&&(H.__options.distance[1]=H.__options.distance[0]),void 0===H.__options.distance[2]&&(H.__options.distance[2]=H.__options.distance[0]),void 0===H.__options.distance[3]&&(H.__options.distance[3]=H.__options.distance[1])),H.__options.distance={top:H.__options.distance[0],right:H.__options.distance[1],bottom:H.__options.distance[2],left:H.__options.distance[3]},"string"==typeof H.__options.side&&(H.__options.side=[H.__options.side,{top:"bottom",right:"left",bottom:"top",left:"right"}[H.__options.side]],"left"==H.__options.side[0]||"right"==H.__options.side[0]?H.__options.side.push("top","bottom"):H.__options.side.push("right","left")),6===j.tooltipster._env.IE&&!0!==H.__options.arrow&&(H.__options.arrow=!1)},__reposition:function(H,U){var I,ae=this,u=ae.__targetFind(U),k=[];ae.__instance._$tooltip.detach();var g=ae.__instance._$tooltip.clone(),x=j.tooltipster._getRuler(g),C=!1,N=ae.__instance.option("animation");switch(N&&g.removeClass("tooltipster-"+N),j.each(["window","document"],function(re,G){var K=null;if(ae.__instance._trigger({container:G,helper:U,satisfied:C,takeTest:function(St){K=St},results:k,type:"positionTest"}),1==K||0!=K&&0==C&&("window"!=G||ae.__options.viewportAware))for(re=0;re<ae.__options.side.length;re++){var we={horizontal:0,vertical:0},ge=ae.__options.side[re];"top"==ge||"bottom"==ge?we.vertical=ae.__options.distance[ge]:we.horizontal=ae.__options.distance[ge],ae.__sideChange(g,ge),j.each(["natural","constrained"],function(l,vt){if(K=null,ae.__instance._trigger({container:G,event:H,helper:U,mode:vt,results:k,satisfied:C,side:ge,takeTest:function(R){K=R},type:"positionTest"}),1==K||0!=K&&0==C){var ue={container:G,distance:we,fits:null,mode:vt,outerSize:null,side:ge,size:null,target:u[ge],whole:null},_t=("natural"==vt?x.free():x.constrain(U.geo.available[G][ge].width-we.horizontal,U.geo.available[G][ge].height-we.vertical)).measure();if(ue.size=_t.size,ue.outerSize={height:_t.size.height+we.vertical,width:_t.size.width+we.horizontal},ue.fits="natural"==vt?U.geo.available[G][ge].width>=ue.outerSize.width&&U.geo.available[G][ge].height>=ue.outerSize.height:_t.fits,"window"==G&&(ue.whole=!!ue.fits&&("top"==ge||"bottom"==ge?U.geo.origin.windowOffset.right>=ae.__options.minIntersection&&U.geo.window.size.width-U.geo.origin.windowOffset.left>=ae.__options.minIntersection:U.geo.origin.windowOffset.bottom>=ae.__options.minIntersection&&U.geo.window.size.height-U.geo.origin.windowOffset.top>=ae.__options.minIntersection)),k.push(ue),ue.whole)C=!0;else if("natural"==ue.mode&&(ue.fits||ue.size.width<=U.geo.available[G][ge].width))return!1}})}}),ae.__instance._trigger({edit:function(re){k=re},event:H,helper:U,results:k,type:"positionTested"}),k.sort(function(re,G){if(re.whole&&!G.whole)return-1;if(!re.whole&&G.whole)return 1;if(re.whole&&G.whole){var K=ae.__options.side.indexOf(re.side);return(we=ae.__options.side.indexOf(G.side))>K?-1:K>we?1:"natural"==re.mode?-1:1}return re.fits&&!G.fits?-1:!re.fits&&G.fits?1:re.fits&&G.fits?(K=ae.__options.side.indexOf(re.side),(we=ae.__options.side.indexOf(G.side))>K?-1:K>we?1:"natural"==re.mode?-1:1):"document"==re.container&&"bottom"==re.side&&"natural"==re.mode?-1:1;var we}),(I=k[0]).coord={},I.side){case"left":case"right":I.coord.top=Math.floor(I.target-I.size.height/2);break;case"bottom":case"top":I.coord.left=Math.floor(I.target-I.size.width/2)}switch(I.side){case"left":I.coord.left=U.geo.origin.windowOffset.left-I.outerSize.width;break;case"right":I.coord.left=U.geo.origin.windowOffset.right+I.distance.horizontal;break;case"top":I.coord.top=U.geo.origin.windowOffset.top-I.outerSize.height;break;case"bottom":I.coord.top=U.geo.origin.windowOffset.bottom+I.distance.vertical}"window"==I.container?"top"==I.side||"bottom"==I.side?I.coord.left<0?I.coord.left=U.geo.origin.windowOffset.right-this.__options.minIntersection>=0?0:U.geo.origin.windowOffset.right-this.__options.minIntersection-1:I.coord.left>U.geo.window.size.width-I.size.width&&(I.coord.left=U.geo.origin.windowOffset.left+this.__options.minIntersection<=U.geo.window.size.width?U.geo.window.size.width-I.size.width:U.geo.origin.windowOffset.left+this.__options.minIntersection+1-I.size.width):I.coord.top<0?I.coord.top=U.geo.origin.windowOffset.bottom-this.__options.minIntersection>=0?0:U.geo.origin.windowOffset.bottom-this.__options.minIntersection-1:I.coord.top>U.geo.window.size.height-I.size.height&&(I.coord.top=U.geo.origin.windowOffset.top+this.__options.minIntersection<=U.geo.window.size.height?U.geo.window.size.height-I.size.height:U.geo.origin.windowOffset.top+this.__options.minIntersection+1-I.size.height):(I.coord.left>U.geo.window.size.width-I.size.width&&(I.coord.left=U.geo.window.size.width-I.size.width),I.coord.left<0&&(I.coord.left=0)),ae.__sideChange(g,I.side),U.tooltipClone=g[0],U.tooltipParent=ae.__instance.option("parent").parent[0],U.mode=I.mode,U.whole=I.whole,U.origin=ae.__instance._$origin[0],U.tooltip=ae.__instance._$tooltip[0],delete I.container,delete I.fits,delete I.mode,delete I.outerSize,delete I.whole,I.distance=I.distance.horizontal||I.distance.vertical;var q,F,L,D=j.extend(!0,{},I);if(ae.__instance._trigger({edit:function(re){I=re},event:H,helper:U,position:D,type:"position"}),ae.__options.functionPosition){var m=ae.__options.functionPosition.call(ae,ae.__instance,U,D);m&&(I=m)}x.destroy(),"top"==I.side||"bottom"==I.side?(q={prop:"left",val:I.target-I.coord.left},F=I.size.width-this.__options.minIntersection):(q={prop:"top",val:I.target-I.coord.top},F=I.size.height-this.__options.minIntersection),q.val<this.__options.minIntersection?q.val=this.__options.minIntersection:q.val>F&&(q.val=F),I.coord={left:(L=U.geo.origin.fixedLineage?U.geo.origin.windowOffset:{left:U.geo.origin.windowOffset.left+U.geo.window.scroll.left,top:U.geo.origin.windowOffset.top+U.geo.window.scroll.top}).left+(I.coord.left-U.geo.origin.windowOffset.left),top:L.top+(I.coord.top-U.geo.origin.windowOffset.top)},ae.__sideChange(ae.__instance._$tooltip,I.side),ae.__instance._$tooltip.css("position",U.geo.origin.fixedLineage?"fixed":""),ae.__instance._$tooltip.css({left:I.coord.left,top:I.coord.top,height:I.size.height,width:I.size.width}).find(".tooltipster-arrow").css({left:"",top:""}).css(q.prop,q.val),ae.__instance._$tooltip.appendTo(ae.__instance.option("parent")),ae.__instance._trigger({type:"repositioned",event:H,position:I})},__sideChange:function(H,U){H.removeClass("tooltipster-bottom").removeClass("tooltipster-left").removeClass("tooltipster-right").removeClass("tooltipster-top").addClass("tooltipster-"+U)},__targetFind:function(H){var U={},I=this.__instance._$origin[0].getClientRects();if(I.length>1&&1==this.__instance._$origin.css("opacity")&&(this.__instance._$origin.css("opacity",.99),I=this.__instance._$origin[0].getClientRects(),this.__instance._$origin.css("opacity",1)),I.length<2)U.top=Math.floor(H.geo.origin.windowOffset.left+H.geo.origin.size.width/2),U.bottom=U.top,U.left=Math.floor(H.geo.origin.windowOffset.top+H.geo.origin.size.height/2),U.right=U.left;else{var u=I[0];U.top=Math.floor(u.left+(u.right-u.left)/2),u=I.length>2?I[Math.ceil(I.length/2)-1]:I[0],U.right=Math.floor(u.top+(u.bottom-u.top)/2),u=I[I.length-1],U.bottom=Math.floor(u.left+(u.right-u.left)/2),u=I.length>2?I[Math.ceil((I.length+1)/2)-1]:I[I.length-1],U.left=Math.floor(u.top+(u.bottom-u.top)/2)}return U}}}),j}),function(){"use strict";var j=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},jt=function(e){return{eq:e}},on=jt(function(e,t){return e===t}),En=function(e){return jt(function(t,n){if(t.length!==n.length)return!1;for(var r=t.length,o=0;o<r;o++)if(!e.eq(t[o],n[o]))return!1;return!0})},an=function(e){return jt(function(t,n){var c,f,p,r=Object.keys(t),o=Object.keys(n);if(!(c=on,f=En(c),p=function(f){return Array.prototype.slice.call(f).sort(void 0)},jt(function(v,w){return f.eq(p(v),p(w))})).eq(r,o))return!1;for(var i=r.length,s=0;s<i;s++){var a=r[s];if(!e.eq(t[a],n[a]))return!1}return!0})},Tn=jt(function(e,t){if(e===t)return!0;var n=j(e);return n===j(t)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?e===t:"array"===n?En(Tn).eq(e,t):"object"===n&&an(Tn).eq(e,t))});const at=Object.getPrototypeOf,De=(e,t,n)=>{var r;return!!n(e,t.prototype)||(null===(r=e.constructor)||void 0===r?void 0:r.name)===t.name},Ct=e=>t=>(n=>{const r=typeof n;return null===n?"null":"object"===r&&Array.isArray(n)?"array":"object"===r&&De(n,String,(o,i)=>i.isPrototypeOf(o))?"string":r})(t)===e,vn=e=>t=>typeof t===e,wn=e=>t=>e===t,H=(e,t)=>I(e)&&De(e,t,(n,r)=>at(n)===r),U=Ct("string"),I=Ct("object"),ae=e=>H(e,Object),u=Ct("array"),k=wn(null),g=vn("boolean"),x=wn(void 0),C=e=>null==e,N=e=>!C(e),D=vn("function"),m=vn("number"),q=(e,t)=>{if(u(e)){for(let n=0,r=e.length;n<r;++n)if(!t(e[n]))return!1;return!0}return!1},F=()=>{},L=(e,t)=>(...n)=>e(t.apply(null,n)),re=(e,t)=>n=>e(t(n)),G=e=>()=>e,K=e=>e,we=(e,t)=>e===t;function ge(e,...t){return(...n)=>{const r=t.concat(n);return e.apply(null,r)}}const St=e=>t=>!e(t),l=e=>()=>{throw new Error(e)},vt=e=>e(),ue=e=>{e()},Tt=G(!1),_t=G(!0);class R{constructor(t,n){this.tag=t,this.value=n}static some(t){return new R(!0,t)}static none(){return R.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?R.some(t(this.value)):R.none()}bind(t){return this.tag?t(this.value):R.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:R.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return N(t)?R.some(t):R.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}R.singletonNone=new R(!1);const Ne=Array.prototype.slice,Jt=Array.prototype.indexOf,Dn=Array.prototype.push,Zn=(e,t)=>Jt.call(e,t),Oe=(e,t)=>Zn(e,t)>-1,Kt=(e,t)=>{for(let n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1},ut=(e,t)=>{const n=e.length,r=new Array(n);for(let o=0;o<n;o++)r[o]=t(e[o],o);return r},ye=(e,t)=>{for(let n=0,r=e.length;n<r;n++)t(e[n],n)},kt=(e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)},rr=(e,t)=>{const n=[],r=[];for(let o=0,i=e.length;o<i;o++){const s=e[o];(t(s,o)?n:r).push(s)}return{pass:n,fail:r}},tt=(e,t)=>{const n=[];for(let r=0,o=e.length;r<o;r++){const i=e[r];t(i,r)&&n.push(i)}return n},Vn=(e,t,n)=>(kt(e,(r,o)=>{n=t(n,r,o)}),n),Ge=(e,t,n)=>(ye(e,(r,o)=>{n=t(n,r,o)}),n),W=(e,t,n)=>{for(let r=0,o=e.length;r<o;r++){const i=e[r];if(t(i,r))return R.some(i);if(n(i,r))break}return R.none()},Z=(e,t)=>W(e,t,Tt),ke=(e,t)=>{for(let n=0,r=e.length;n<r;n++)if(t(e[n],n))return R.some(n);return R.none()},ze=e=>{const t=[];for(let n=0,r=e.length;n<r;++n){if(!u(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Dn.apply(t,e[n])}return t},$e=(e,t)=>ze(ut(e,t)),Je=(e,t)=>{for(let n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n))return!1;return!0},Ft=e=>{const t=Ne.call(e,0);return t.reverse(),t},Ye=(e,t)=>tt(e,n=>!Oe(t,n)),Qt=(e,t)=>{const n={};for(let r=0,o=e.length;r<o;r++){const i=e[r];n[String(i)]=t(i,r)}return n},qt=(e,t)=>{const n=Ne.call(e,0);return n.sort(t),n},Hr=(e,t)=>t>=0&&t<e.length?R.some(e[t]):R.none(),Hn=e=>Hr(e,0),co=e=>Hr(e,e.length-1),Nn=D(Array.from)?Array.from:e=>Ne.call(e),or=(e,t)=>{for(let n=0;n<e.length;n++){const r=t(e[n],n);if(r.isSome())return r}return R.none()},An=Object.keys,zo=Object.hasOwnProperty,Wt=(e,t)=>{const n=An(e);for(let r=0,o=n.length;r<o;r++){const i=n[r];t(e[i],i)}},uo=(e,t)=>me(e,(n,r)=>({k:r,v:t(n,r)})),me=(e,t)=>{const n={};return Wt(e,(r,o)=>{const i=t(r,o);n[i.k]=i.v}),n},Ot=e=>(t,n)=>{e[n]=t},Yt=(e,t,n,r)=>{Wt(e,(o,i)=>{(t(o,i)?n:r)(o,i)})},xn=(e,t)=>{const n={};return Yt(e,t,Ot(n),F),n},mr=(e,t)=>{const n=[];return Wt(e,(r,o)=>{n.push(t(r,o))}),n},ln=e=>mr(e,K),Gt=(e,t)=>ft(e,t)?R.from(e[t]):R.none(),ft=(e,t)=>zo.call(e,t),kn=(e,t)=>ft(e,t)&&null!=e[t],tn=e=>{const t={};return ye(e,n=>{t[n]={}}),An(t)},Kn=e=>void 0!==e.length,ho=Array.isArray,Lr=(e,t,n)=>{if(!e)return!1;if(n=n||e,Kn(e)){for(let r=0,o=e.length;r<o;r++)if(!1===t.call(n,e[r],r,e))return!1}else for(const r in e)if(ft(e,r)&&!1===t.call(n,e[r],r,e))return!1;return!0},Or=(e,t)=>{const n=[];return Lr(e,(r,o)=>{n.push(t(r,o,e))}),n},fo=(e,t)=>{const n=[];return Lr(e,(r,o)=>{t&&!t(r,o,e)||n.push(r)}),n},Eo=(e,t,n,r)=>{let o=x(n)?e[0]:n;for(let i=0;i<e.length;i++)o=t.call(r,o,e[i],i);return o},Ps=(e,t,n)=>{for(let r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e))return r;return-1},po=e=>e[e.length-1],ri=e=>{let t,n=!1;return(...r)=>(n||(n=!0,t=e.apply(null,r)),t)},ec=()=>Ca(0,0),Ca=(e,t)=>({major:e,minor:t}),_i={nu:Ca,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?ec():((r,o)=>{const i=((a,c)=>{for(let d=0;d<a.length;d++){const f=a[d];if(f.test(c))return f}})(r,o);if(!i)return{major:0,minor:0};const s=a=>Number(o.replace(i,"$"+a));return Ca(s(1),s(2))})(e,n)},unknown:ec},tc=(e,t)=>{const n=String(t).toLowerCase();return Z(e,r=>r.search(n))},nc=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,ka=(e,t)=>Mn(e,t)?e.substring(t.length):e,On=(e,t,n=0,r)=>{const o=e.indexOf(t,n);return-1!==o&&(!!x(r)||o+t.length<=r)},Mn=(e,t)=>nc(e,t,0),Wi=(e,t)=>nc(e,t,e.length-t.length),Vi=e=>t=>t.replace(e,""),To=Vi(/^\s+|\s+$/g),rc=Vi(/^\s+/g),oc=Vi(/\s+$/g),xr=e=>e.length>0,yi=e=>!xr(e),Ki=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?R.none():R.some(n)},Ds=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,go=e=>t=>On(t,e),Sa=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>On(e,"edge/")&&On(e,"chrome")&&On(e,"safari")&&On(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ds],search:e=>On(e,"chrome")&&!On(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>On(e,"msie")||On(e,"trident")},{name:"Opera",versionRegexes:[Ds,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:go("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:go("firefox")},{name:"Safari",versionRegexes:[Ds,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(On(e,"safari")||On(e,"mobile/"))&&On(e,"applewebkit")}],iu=[{name:"Windows",search:go("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>On(e,"iphone")||On(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:go("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:go("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:go("linux"),versionRegexes:[]},{name:"Solaris",search:go("sunos"),versionRegexes:[]},{name:"FreeBSD",search:go("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:go("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ic={browsers:G(Sa),oses:G(iu)},Ta="Chromium",Na="Firefox",oi=e=>{const t=e.current,r=o=>()=>t===o;return{current:t,version:e.version,isEdge:r("Edge"),isChromium:r(Ta),isIE:r("IE"),isOpera:r("Opera"),isFirefox:r(Na),isSafari:r("Safari")}},Bs=()=>oi({current:void 0,version:_i.unknown()}),bi=oi,Aa=(G("Edge"),G(Ta),G("IE"),G("Opera"),G(Na),G("Safari"),"Windows"),sc="Android",Oa="Solaris",Yi="FreeBSD",Ra="ChromeOS",Mr=e=>{const t=e.current,r=o=>()=>t===o;return{current:t,version:e.version,isWindows:r(Aa),isiOS:r("iOS"),isAndroid:r(sc),isMacOS:r("macOS"),isLinux:r("Linux"),isSolaris:r(Oa),isFreeBSD:r(Yi),isChromeOS:r(Ra)}},lc=()=>Mr({current:void 0,version:_i.unknown()}),Xi=Mr,su=(G(Aa),G("iOS"),G(sc),G("Linux"),G("macOS"),G(Oa),G(Yi),G(Ra),e=>window.matchMedia(e).matches);let au=ri(()=>((e,t,n)=>{const r=ic.browsers(),o=ic.oses(),i=t.bind(c=>{return d=r,or(c.brands,p=>{const v=p.brand.toLowerCase();return Z(d,w=>{var y;return v===(null===(y=w.brand)||void 0===y?void 0:y.toLowerCase())}).map(w=>({current:w.name,version:_i.nu(parseInt(p.version,10),0)}))});var d}).orThunk(()=>{return tc(r,d=e).map(f=>{const p=_i.detect(f.versionRegexes,d);return{current:f.name,version:p}});var d}).fold(Bs,bi),s=(c=o,d=e,tc(c,d).map(f=>{const p=_i.detect(f.versionRegexes,d);return{current:f.name,version:p}})).fold(lc,Xi),a=((c,d,f,p)=>{const v=c.isiOS()&&!0===/ipad/i.test(f),w=c.isiOS()&&!v,y=c.isiOS()||c.isAndroid(),S=y||p("(pointer:coarse)"),b=v||!w&&y&&p("(min-device-width:768px)"),T=w||y&&!b,O=d.isSafari()&&c.isiOS()&&!1===/safari/i.test(f),P=!T&&!b&&!O;return{isiPad:G(v),isiPhone:G(w),isTablet:G(b),isPhone:G(T),isTouch:G(S),isAndroid:c.isAndroid,isiOS:c.isiOS,isWebView:G(O),isDesktop:G(P)}})(s,i,e,n);var c,d;return{browser:i,os:s,deviceType:a}})(navigator.userAgent,R.from(navigator.userAgentData),su));const dr=()=>au(),ii=navigator.userAgent,Gi=dr(),mo=Gi.browser,Cr=Gi.os,Fo=Gi.deviceType,ja=-1!==ii.indexOf("Windows Phone"),$t={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:mo.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!mo.isIE(),windowsPhone:ja,browser:{current:mo.current,version:mo.version,isChromium:mo.isChromium,isEdge:mo.isEdge,isFirefox:mo.isFirefox,isIE:mo.isIE,isOpera:mo.isOpera,isSafari:mo.isSafari},os:{current:Cr.current,version:Cr.version,isAndroid:Cr.isAndroid,isChromeOS:Cr.isChromeOS,isFreeBSD:Cr.isFreeBSD,isiOS:Cr.isiOS,isLinux:Cr.isLinux,isMacOS:Cr.isMacOS,isSolaris:Cr.isSolaris,isWindows:Cr.isWindows},deviceType:{isDesktop:Fo.isDesktop,isiPad:Fo.isiPad,isiPhone:Fo.isiPhone,isPhone:Fo.isPhone,isTablet:Fo.isTablet,isTouch:Fo.isTouch,isWebView:Fo.isWebView}},cc=/^\s*|\s*$/g,dc=e=>C(e)?"":(""+e).replace(cc,""),Pa=function(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),Lr(e,(o,i)=>!1!==t.call(r,o,i,n)&&(Pa(o,t,n,r),!0)))},Be={trim:dc,isArray:ho,is:(e,t)=>t?!("array"!==t||!ho(e))||typeof e===t:void 0!==e,toArray:e=>{if(ho(e))return e;{const t=[];for(let n=0,r=e.length;n<r;n++)t[n]=e[n];return t}},makeMap:(e,t,n={})=>{const r=U(e)?e.split(t||","):e||[];let o=r.length;for(;o--;)n[r[o]]={};return n},each:Lr,map:Or,grep:fo,inArray:(e,t)=>{if(e)for(let n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},hasOwn:ft,extend:(e,...t)=>{for(let n=0;n<t.length;n++){const r=t[n];for(const o in r)if(ft(r,o)){const i=r[o];void 0!==i&&(e[o]=i)}}return e},walk:Pa,resolve:(e,t=window)=>{const n=e.split(".");for(let r=0,o=n.length;r<o&&(t=t[n[r]]);r++);return t},explode:(e,t)=>u(e)?e:""===e?[]:Or(e.split(t||","),dc),_addCacheSuffix:e=>{const t=$t.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},wi=(e,t,n=we)=>e.exists(r=>n(r,t)),Is=(e,t,n=we)=>er(e,t,n).getOr(e.isNone()&&t.isNone()),er=(e,t,n)=>e.isSome()&&t.isSome()?R.some(n(e.getOrDie(),t.getOrDie())):R.none(),xi=(e,t)=>e?R.some(t):R.none(),lu=typeof window<"u"?window:Function("return this;")(),uc=(e,t)=>((n,r)=>{let o=r??lu;for(let i=0;i<n.length&&null!=o;++i)o=o[n[i]];return o})(e.split("."),t),cu=Object.getPrototypeOf,It=e=>e.dom.nodeName.toLowerCase(),zs=e=>e.dom.nodeType,Ji=e=>t=>zs(t)===e,Ci=e=>vr(e)&&(e=>{const t=uc("ownerDocument.defaultView",e);return I(e)&&((n=t,((r,o)=>{const i=uc(r,o);if(null==i)throw new Error(r+" not available on this browser");return i})("HTMLElement",n)).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(cu(e).constructor.name));var n})(e.dom),vr=Ji(1),kr=Ji(3),Da=Ji(9),uu=Ji(11),$o=e=>t=>vr(t)&&It(t)===e,La=(e,t,n)=>{if(!(U(n)||g(n)||m(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},In=(e,t,n)=>{La(e.dom,t,n)},qr=(e,t)=>{const n=e.dom;Wt(t,(r,o)=>{La(n,o,r)})},Sr=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},No=(e,t)=>R.from(Sr(e,t)),Qi=(e,t)=>{const n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},h=(e,t)=>{e.dom.removeAttribute(t)},_=e=>Ge(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),E=(e,t)=>{const n=Sr(e,t);return void 0===n||""===n?[]:n.split(" ")},A=e=>void 0!==e.dom.classList,B=e=>E(e,"class"),$=(e,t)=>((n,r,o)=>{const i=E(n,r).concat([o]);return In(n,r,i.join(" ")),!0})(e,"class",t),V=(e,t)=>((n,r,o)=>{const i=tt(E(n,r),s=>s!==o);return i.length>0?In(n,r,i.join(" ")):h(n,r),!1})(e,"class",t),le=(e,t)=>{A(e)?e.dom.classList.add(t):$(e,t)},se=e=>{0===(A(e)?e.dom.classList:B(e)).length&&h(e,"class")},ve=(e,t)=>{A(e)?e.dom.classList.remove(t):V(e,t),se(e)},Se=(e,t)=>A(e)&&e.dom.classList.contains(t),Pe=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},be=(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const r="HTML does not have a single root node";throw console.error(r,e),new Error(r)}return Pe(n.childNodes[0])},je=(e,t)=>{const n=(t||document).createElement(e);return Pe(n)},wt=(e,t)=>{const n=(t||document).createTextNode(e);return Pe(n)},X=Pe,Ln=(e,t)=>{const n=[],r=i=>(n.push(i),t(i));let o=t(e);do{o=o.bind(r)}while(o.isSome());return n},cn=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const r=n;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Ur=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,Lt=(e,t)=>e.dom===t.dom,Ht=(e,t)=>{const n=e.dom,r=t.dom;return n!==r&&n.contains(r)},Ho=e=>X(e.dom.ownerDocument),Ut=e=>Da(e)?e:Ho(e),_n=e=>X(Ut(e).dom.defaultView),ur=e=>R.from(e.dom.parentNode).map(X),ki=e=>R.from(e.dom.parentElement).map(X),Wr=(e,t)=>{const n=D(t)?t:Tt;let r=e.dom;const o=[];for(;null!=r.parentNode;){const i=r.parentNode,s=X(i);if(o.push(s),!0===n(s))break;r=i}return o},Vr=e=>R.from(e.dom.previousSibling).map(X),Rr=e=>R.from(e.dom.nextSibling).map(X),Ao=e=>Ft(Ln(e,Vr)),si=e=>Ln(e,Rr),rn=e=>ut(e.dom.childNodes,X),Rn=(e,t)=>R.from(e.dom.childNodes[t]).map(X),Bn=e=>Rn(e,0),ir=e=>Rn(e,e.dom.childNodes.length-1),vo=e=>e.dom.childNodes.length,sr=e=>uu(e)&&N(e.dom.host),Nt=D(Element.prototype.attachShadow)&&D(Node.prototype.getRootNode),zn=G(Nt),dn=Nt?e=>X(e.dom.getRootNode()):Ut,hn=e=>sr(e)?e:(t=>{const n=t.dom.head;if(null==n)throw new Error("Head is not available yet");return X(n)})(Ut(e)),_o=e=>X(e.dom.host),ai=e=>{if(zn()&&N(e.target)){const t=X(e.target);if(vr(t)&&Fs(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return Hn(n)}}return R.from(e.target)},Fs=e=>N(e.dom.shadowRoot),Ir=e=>{const t=kr(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return(r=>{const o=dn(r);return sr(o)?R.some(o):R.none()})(X(t)).fold(()=>n.body.contains(t),re(Ir,_o))};var $s=(e,t,n,r,o)=>e(n,r)?R.some(n):D(o)&&o(n)?R.none():t(n,r,o);const hr=(e,t,n)=>{let r=e.dom;const o=D(n)?n:Tt;for(;r.parentNode;){r=r.parentNode;const i=X(r);if(t(i))return R.some(i);if(o(i))break}return R.none()},qo=(e,t,n)=>$s((r,o)=>o(r),hr,e,t,n),Si=(e,t)=>{const n=r=>{for(let o=0;o<r.childNodes.length;o++){const i=X(r.childNodes[o]);if(t(i))return R.some(i);const s=n(r.childNodes[o]);if(s.isSome())return s}return R.none()};return n(e.dom)},Uo=(e,t,n)=>hr(e,r=>cn(r,t),n),Wo=(e,t)=>((n,r)=>{const o=void 0===r?document:r.dom;return Ur(o)?R.none():R.from(o.querySelector(n)).map(X)})(t,e),Oo=(e,t,n)=>$s((r,o)=>cn(r,o),Uo,e,t,n),yo=(e,t=!1)=>{return Ir(e)?e.dom.isContentEditable:(n=e,Oo(n,"[contenteditable]")).fold(G(t),r=>"true"===Ba(r));var n},Ba=e=>e.dom.contentEditable,li=e=>void 0!==e.style&&D(e.style.getPropertyValue),Hs=(e,t,n)=>{if(!U(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);li(e)&&e.style.setProperty(t,n)},Ma=(e,t,n)=>{Hs(e.dom,t,n)},J=(e,t)=>{const n=e.dom;Wt(t,(r,o)=>{Hs(n,o,r)})},he=(e,t)=>{const n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||Ir(e)?r:Ee(n,t)},Ee=(e,t)=>li(e)?e.style.getPropertyValue(t):"",Re=(e,t)=>{const r=Ee(e.dom,t);return R.from(r).filter(o=>o.length>0)},Ie=e=>{const t={},n=e.dom;if(li(n))for(let r=0;r<n.style.length;r++){const o=n.style.item(r);t[o]=n.style[o]}return t},ht=(e,t)=>{var n,r;r=t,li(n=e.dom)&&n.style.removeProperty(r),wi(No(e,"style").map(To),"")&&h(e,"style")},Qe=(e,t)=>{ur(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},pt=(e,t)=>{Rr(e).fold(()=>{ur(e).each(n=>{Et(n,t)})},n=>{Qe(n,t)})},ct=(e,t)=>{Bn(e).fold(()=>{Et(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})},Et=(e,t)=>{e.dom.appendChild(t.dom)},zt=(e,t)=>{Qe(e,t),Et(t,e)},Bt=(e,t)=>{ye(t,n=>{Et(e,n)})},Vt=e=>{e.dom.textContent="",ye(rn(e),t=>{rt(t)})},rt=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},fn=e=>{const t=rn(e);var n,r;t.length>0&&(n=e,ye(r=t,(o,i)=>{pt(0===i?n:r[i-1],o)})),rt(e)},tr=e=>ut(e,X),Yn=e=>e.dom.innerHTML,ar=(e,t)=>{const n=Ho(e).dom,r=X(n.createDocumentFragment()),o=((i,s)=>{const a=(s||document).createElement("div");return a.innerHTML=i,rn(X(a))})(t,n);Bt(r,o),Vt(e),Et(e,r)},Kr=(e,t,n,r)=>{e.dom.removeEventListener(t,n,r)},yn=(e,t)=>({left:e,top:t,translate:(n,r)=>yn(e+n,t+r)}),zr=yn,Er=(e,t)=>void 0!==e?e:void 0!==t?t:0,Ei=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?zr(n.offsetLeft,n.offsetTop):Ir(e)?(r=>{const o=r.getBoundingClientRect();return zr(o.left,o.top)})(t):zr(0,0)},qs=e=>{const t=void 0!==e?e.dom:document;return zr(t.body.scrollLeft||t.documentElement.scrollLeft,t.body.scrollTop||t.documentElement.scrollTop)},Ia=(e,t,n)=>{const r=(void 0!==n?n.dom:document).defaultView;r&&r.scrollTo(e,t)},hc=(e,t)=>{dr().browser.isSafari()&&D(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},_g=(e,t,n,r)=>({x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}),yg=e=>{const t=void 0===e?window:e,r=qs(X(t.document));return(o=>{const i=void 0===o?window:o;return dr().browser.isFirefox()?R.none():R.from(i.visualViewport)})(t).fold(()=>{const o=t.document.documentElement;return _g(r.left,r.top,o.clientWidth,o.clientHeight)},o=>_g(Math.max(o.pageLeft,r.left),Math.max(o.pageTop,r.top),o.width,o.height))},bg=(e,t)=>{let n=[];return ye(rn(e),r=>{t(r)&&(n=n.concat([r])),n=n.concat(bg(r,t))}),n},fr=(e,t)=>((n,r)=>{const o=void 0===r?document:r.dom;return Ur(o)?[]:ut(o.querySelectorAll(n),X)})(t,e),wg=(e,t,n)=>Uo(e,t,n).isSome();class qn{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,r,o){if(t){if(!o&&t[n])return t[n];if(t!==this.rootNode){let i=t[r];if(i)return i;for(let s=t.parentNode;s&&s!==this.rootNode;s=s.parentNode)if(i=s[r],i)return i}}}findPreviousNode(t,n){if(t){const r=t.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!n)for(let i=r.lastChild;i;i=i.lastChild)if(!i.lastChild)return i;return r}const o=t.parentNode;if(o&&o!==this.rootNode)return o}}}const Zi=e=>t=>!!t&&t.nodeType===e,fc=e=>!!e&&!Object.getPrototypeOf(e),Ke=Zi(1),ci=e=>Ke(e)&&Ci(X(e)),za=e=>{const t=e.toLowerCase();return n=>N(n)&&n.nodeName.toLowerCase()===t},Ro=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const r=n.nodeName.toLowerCase();return Oe(t,r)}return!1}},pc=(e,t)=>{const n=t.toLowerCase().split(" ");return r=>{if(Ke(r)){const o=r.ownerDocument.defaultView;if(o)for(let i=0;i<n.length;i++){const s=o.getComputedStyle(r,null);if((s?s.getPropertyValue(e):null)===n[i])return!0}}return!1}},xg=e=>t=>Ke(t)&&t.hasAttribute(e),es=e=>Ke(e)&&e.hasAttribute("data-mce-bogus"),di=e=>Ke(e)&&"TABLE"===e.tagName,Cg=e=>t=>!(!ci(t)||t.contentEditable!==e&&t.getAttribute("data-mce-contenteditable")!==e),hu=Ro(["textarea","input"]),Le=Zi(3),mk=Zi(4),vk=Zi(7),Ti=Zi(8),Fa=Zi(9),fu=Zi(11),Cn=za("br"),kg=za("img"),bo=Cg("true"),sn=Cg("false"),gc=Ro(["td","th"]),_k=Ro(["td","th","caption"]),Vo=Ro(["video","audio","object","embed"]),yk=za("li"),pu=za("details"),bk=za("summary"),Xn="\xa0",gu=e=>"\ufeff"===e,mu=((e,t)=>{const n=r=>e(r)?R.from(r.dom.nodeValue):R.none();return{get:r=>{if(!e(r))throw new Error("Can only get text value of a text node");return n(r).getOr("")},getOption:n,set:(r,o)=>{if(!e(r))throw new Error("Can only set raw text value of a text node");r.dom.nodeValue=o}}})(kr),mc=e=>mu.get(e),Sg=e=>mu.getOption(e),Us=e=>{let t;return n=>(t=t||Qt(e,_t),ft(t,It(n)))},ts=e=>vr(e)&&"br"===It(e),Eg=Us(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),vu=Us(["ul","ol","dl"]),Ha=Us(["li","dd","dt"]),wk=Us(["thead","tbody","tfoot"]),qa=Us(["td","th"]),vc=Us(["pre","script","textarea","style"]),Ua=()=>{const e=je("br");return In(e,"data-mce-bogus","1"),e},Ni=e=>{Vt(e),Et(e,Ua())},Gn="\ufeff",_c=gu,Fr=e=>e.replace(/\uFEFF/g,""),xk=Ke,Ws=Le,Vs=e=>(Ws(e)&&(e=e.parentNode),xk(e)&&e.hasAttribute("data-mce-caret")),Ai=e=>Ws(e)&&_c(e.data),Yr=e=>Vs(e)||Ai(e),Tg=e=>e.firstChild!==e.lastChild||!Cn(e.firstChild),_u=e=>{const t=e.container();return!!Le(t)&&(t.data.charAt(e.offset())===Gn||e.isAtStart()&&Ai(t.previousSibling))},yu=e=>{const t=e.container();return!!Le(t)&&(t.data.charAt(e.offset()-1)===Gn||e.isAtEnd()&&Ai(t.nextSibling))},yc=e=>Ws(e)&&e.data[0]===Gn,bc=e=>Ws(e)&&e.data[e.data.length-1]===Gn,bu=e=>e&&e.hasAttribute("data-mce-caret")?((t=>{var n;const r=t.getElementsByTagName("br"),o=r[r.length-1];es(o)&&(null===(n=o.parentNode)||void 0===n||n.removeChild(o))})(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Ng=e=>Vs(e.startContainer),Ag=bo,Ck=sn,kk=Cn,Sk=Le,Ek=Ro(["script","style","textarea"]),Og=Ro(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Tk=Ro(["table"]),Nk=Yr,wo=e=>!Nk(e)&&(Sk(e)?!Ek(e.parentNode):Og(e)||kk(e)||Tk(e)||wu(e)),wu=e=>{return!(Ke(t=e)&&"true"===t.getAttribute("unselectable"))&&Ck(e);var t},Rg=(e,t)=>wo(e)&&((n,r)=>{for(let o=n.parentNode;o&&o!==r;o=o.parentNode){if(wu(o))return!1;if(Ag(o))return!0}return!0})(e,t),Ak=/^[ \t\r\n]*$/,Oi=e=>Ak.test(e),Ok=e=>{for(const t of e)if(!gu(t))return!1;return!0},jg=e=>"\n"===e||"\r"===e,Pg=(e,t=4,n=!0,r=!0)=>{const o=(c=t)<=0?"":new Array(c+1).join(" "),i=e.replace(/\t/g,o);var c;return Ge(i,(a,c)=>{return-1!==" \f\t\v".indexOf(c)||c===Xn?a.pcIsSpace||""===a.str&&n||a.str.length===i.length-1&&r||(f=a.str.length+1)<(d=i).length&&f>=0&&jg(d[f])?{pcIsSpace:!1,str:a.str+Xn}:{pcIsSpace:!0,str:a.str+" "}:{pcIsSpace:jg(c),str:a.str+c};var d,f},{pcIsSpace:!1,str:""}).str},wc=(e,t)=>{return wo(e)&&(r=t,!(Le(n=e)&&Oi(n.data)&&!((o,i)=>{const s=X(i),a=X(o);return wg(a,"pre,code",ge(Lt,s))})(n,r)))||(n=>Ke(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(e)||Rk(e);var n,r},Rk=xg("data-mce-bookmark"),jk=xg("data-mce-bogus"),Pk=e=>Ke(e)&&"all"===e.getAttribute("data-mce-bogus"),Dk=e=>ki(X(e)).exists(t=>!yo(t)),jn=(e,t=!0)=>((n,r)=>{let o=0;if(wc(n,n))return!1;{let i=n.firstChild;if(!i)return!0;const s=new qn(i,n);do{if(r){if(Pk(i)){i=s.next(!0);continue}if(jk(i)){i=s.next();continue}}if(bo(i)&&Dk(i))return!1;if(Cn(i))o++,i=s.next();else{if(wc(i,n))return!1;i=s.next()}}while(i);return o<=1}})(e.dom,t),ns=e=>"svg"===e.toLowerCase(),xu=e=>ns(e.nodeName),Dg=e=>"svg"===e?.nodeName?"svg":"html",Lk=["svg"],xc="data-mce-block",Cu=e=>{return ut((t=e,tt(An(t),n=>!/[A-Z]/.test(n))),t=>`${t}:`+ut(Lk,n=>`not(${n} ${t})`).join(":")).join(",");var t},Lg=(e,t)=>N(t.querySelector(e))?(t.setAttribute(xc,"true"),"inline-boundary"===t.getAttribute("data-mce-selected")&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(xc),!1),Bg=(e,t)=>{const n=Cu(e.getTransparentElements()),r=Cu(e.getBlockElements());return tt(t.querySelectorAll(n),o=>Lg(r,o))},Mg=(e,t)=>{var n;const r=t?"lastChild":"firstChild";for(let o=e[r];o;o=o[r])if(jn(X(o)))return void(null===(n=o.parentNode)||void 0===n||n.removeChild(o))},ku=(e,t)=>{const n=Bg(e,t);var r,o,i;((e,t,n)=>{const r=e.getBlockElements(),o=X(t),i=a=>It(a)in r,s=a=>Lt(a,o);ye(tr(n),a=>{hr(a,i,s).each(c=>{const d=tt(rn(a),v=>i(v)&&!e.isValidChild(It(c),It(v)));if(d.length>0){const f=ki(c);ye(d,p=>{hr(p,i,s).each(v=>{((w,y)=>{const S=document.createRange(),b=w.parentNode;if(b){S.setStartBefore(w),S.setEndBefore(y);const T=S.extractContents();Mg(T,!0),S.setStartAfter(y),S.setEndAfter(w);const O=S.extractContents();Mg(O,!1),jn(X(T))||b.insertBefore(T,w),jn(X(y))||b.insertBefore(y,w),jn(X(O))||b.insertBefore(O,w),b.removeChild(w)}})(v.dom,p.dom)})}),f.each(p=>Bg(e,p.dom))}})})})(e,t,n),r=e,o=t,i=n,ye([...i,...rs(r,o)?[o]:[]],s=>ye(fr(X(s),s.nodeName.toLowerCase()),a=>{Ik(r,a.dom)&&fn(a)}))},Mk=(e,t)=>{if(Tu(e,t)){const n=Cu(e.getBlockElements());Lg(n,t)}},Su=e=>e.hasAttribute(xc),Eu=(e,t)=>ft(e.getTransparentElements(),t),Tu=(e,t)=>Ke(t)&&Eu(e,t.nodeName),rs=(e,t)=>Tu(e,t)&&Su(t),Ik=(e,t)=>Tu(e,t)&&!Su(t),Nu=(e,t)=>1===t.type&&Eu(e,t.name)&&U(t.attr(xc)),zk=dr().browser,Ig=e=>Z(e,vr),zg=(e,t)=>e.children&&Oe(e.children,t),Fg=(e,t={})=>{let n=0;const r={},o=X(e),i=Ut(o),s=p=>{Et(hn(o),p)},a=p=>{const v=hn(o);Wo(v,"#"+p).each(rt)},c=p=>Gt(r,p).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),d=p=>new Promise((v,w)=>{let y;const S=Be._addCacheSuffix(p),b=c(S);r[S]=b,b.count++;const T=(M,Y)=>{ye(M,ue),b.status=Y,b.passed=[],b.failed=[],y&&(y.onload=null,y.onerror=null,y=null)},O=()=>T(b.passed,2),P=()=>T(b.failed,3);if(v&&b.passed.push(v),w&&b.failed.push(w),1===b.status)return;if(2===b.status)return void O();if(3===b.status)return void P();b.status=1;const z=je("link",i.dom);qr(z,{rel:"stylesheet",type:"text/css",id:b.id}),t.contentCssCors&&In(z,"crossOrigin","anonymous"),t.referrerPolicy&&In(z,"referrerpolicy",t.referrerPolicy),y=z.dom,y.onload=O,y.onerror=P,s(z),In(z,"href",S)}),f=p=>{const v=Be._addCacheSuffix(p);Gt(r,v).each(w=>{0==--w.count&&(delete r[v],a(w.id))})};return{load:d,loadRawCss:(p,v)=>{const w=c(p);r[p]=w,w.count++;const y=je("style",i.dom);qr(y,{rel:"stylesheet",type:"text/css",id:w.id}),y.dom.innerHTML=v,s(y)},loadAll:p=>Promise.allSettled(ut(p,v=>d(v).then(G(v)))).then(v=>{const w=rr(v,y=>"fulfilled"===y.status);return w.fail.length>0?Promise.reject(ut(w.fail,y=>y.reason)):ut(w.pass,y=>y.value)}),unload:f,unloadRawCss:p=>{Gt(r,p).each(v=>{0==--v.count&&(delete r[p],a(v.id))})},unloadAll:p=>{ye(p,v=>{f(v)})},_setReferrerPolicy:p=>{t.referrerPolicy=p},_setContentCssCors:p=>{t.contentCssCors=p}}},$g=(()=>{const e=new WeakMap;return{forElement:(t,n)=>{const r=dn(t).dom;return R.from(e.get(r)).getOrThunk(()=>{const o=Fg(r,n);return e.set(r,o),o})}}})(),Hg=(e,t,n)=>N(e)&&(wc(e,t)||n.isInline(e.nodeName.toLowerCase())),qg=e=>"span"===e.nodeName.toLowerCase()&&"bookmark"===e.getAttribute("data-mce-type"),Au=(e,t,n,r)=>{var o;const i=r||t;if(Ke(t)&&qg(t))return t;const s=t.childNodes;for(let a=s.length-1;a>=0;a--)Au(e,s[a],n,i);if(Ke(t)){const a=t.childNodes;1===a.length&&qg(a[0])&&(null===(o=t.parentNode)||void 0===o||o.insertBefore(a[0],t))}return fu(a=t)||Fa(a)||wc(t,i)||(a=>!!Ke(a)&&a.childNodes.length>0)(t)||((a,c,d)=>Le(a)&&a.data.length>0&&((f,p,v)=>{const w=new qn(f,p).prev(!1),y=new qn(f,p).next(!1),S=x(w)||Hg(w,p,v),b=x(y)||Hg(y,p,v);return S&&b})(a,c,d))(t,i,n)||e.remove(t),t;var a},Fk=Be.makeMap,Cc=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,kc=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$k=/[<>&\"\']/g,Hk=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,qk={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},os={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Uk={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Ug=(e,t)=>{const n={};if(e){const r=e.split(",");t=t||10;for(let o=0;o<r.length;o+=2){const i=String.fromCharCode(parseInt(r[o],t));if(!os[i]){const s="&"+r[o+1]+";";n[i]=s,n[s]=i}}return n}},Ou=Ug("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Wg=(e,t)=>e.replace(t?Cc:kc,n=>os[n]||n),Vg=(e,t)=>e.replace(t?Cc:kc,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":os[n]||"&#"+n.charCodeAt(0)+";"),Ru=(e,t,n)=>{const r=n||Ou;return e.replace(t?Cc:kc,o=>os[o]||r[o]||o)},Ri={encodeRaw:Wg,encodeAllRaw:e=>(""+e).replace($k,t=>os[t]||t),encodeNumeric:Vg,encodeNamed:Ru,getEncodeFunc:(e,t)=>{const n=Ug(t)||Ou,r=Fk(e.replace(/\+/g,","));return r.named&&r.numeric?(o,i)=>o.replace(i?Cc:kc,s=>void 0!==os[s]?os[s]:void 0!==n[s]?n[s]:s.length>1?"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";":"&#"+s.charCodeAt(0)+";"):r.named?t?(o,i)=>Ru(o,i,n):Ru:r.numeric?Vg:Wg},decode:e=>e.replace(Hk,(t,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):qk[n]||String.fromCharCode(n):Uk[t]||Ou[t]||(r=>{const o=je("div").dom;return o.innerHTML=r,o.textContent||o.innerText||r})(t))},lr=(e,t)=>(e=Be.trim(e))?e.split(t||" "):[],Kg=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Sc={},Wa=Be.makeMap,jo=Be.each,ju=Be.extend,Yg=Be.explode,Xg=(e,t={})=>{const n=Wa(e," ",Wa(e.toUpperCase()," "));return ju(n,t)},Gg=e=>Xg("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Pu=(e,t)=>{if(e){const n={};return U(e)&&(e={"*":e}),jo(e,(r,o)=>{n[o]=n[o.toUpperCase()]="map"===t?Wa(r,/[, ]/):Yg(r,/[, ]/)}),n}},ji=(e={})=>{var t;const n={},r={};let o=[];const i={},s={},a=(Xe,At,Pt)=>{const xt=e[Xe];if(xt)return Wa(xt,/[, ]/,Wa(xt.toUpperCase(),/[, ]/));{let Dt=Sc[Xe];return Dt||(Dt=Xg(At,Pt),Sc[Xe]=Dt),Dt}},c=null!==(t=e.schema)&&void 0!==t?t:"html5",d=(Xe=>{const{globalAttributes:At,phrasingContent:Pt,flowContent:xt}=(pn=>{let Fn,nr,wr;Fn="id accesskey class dir lang style tabindex title role",nr="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",wr="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==pn&&(Fn+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",nr+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",wr+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==pn&&(Fn+=" xml:lang",wr=[wr,"acronym applet basefont big font strike tt"].join(" "),nr=[nr,"center dir isindex noframes"].join(" "));const io=[nr,wr].join(" ");return{globalAttributes:Fn,blockContent:nr,phrasingContent:wr,flowContent:io}})(Xe),Dt={},Wn=(pn,Fn,nr)=>{Dt[pn]={attributes:Qt(Fn,G({})),attributesOrder:Fn,children:Qt(nr,G({}))}},it=(pn,Fn="",nr="")=>{const wr=lr(nr),io=lr(pn);let cr=io.length;const so=lr([At,Fn].join(" "));for(;cr--;)Wn(io[cr],so.slice(),wr)},Rt=(pn,Fn)=>{const nr=lr(pn),wr=lr(Fn);let io=nr.length;for(;io--;){const cr=Dt[nr[io]];for(let so=0,$n=wr.length;so<$n;so++)cr.attributes[wr[so]]={},cr.attributesOrder.push(wr[so])}};return"html5-strict"!==Xe&&(ye(lr("acronym applet basefont big font strike tt"),pn=>{it(pn,"",Pt)}),ye(lr("center dir isindex noframes"),pn=>{it(pn,"",xt)})),it("html","manifest","head body"),it("head","","base command link meta noscript script style title"),it("title hr noscript br"),it("base","href target"),it("link","href rel media hreflang type sizes hreflang"),it("meta","name http-equiv content charset"),it("style","media type scoped"),it("script","src async defer type charset"),it("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",xt),it("dd div","",xt),it("address dt caption","","html4"===Xe?Pt:xt),it("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",Pt),it("blockquote","cite",xt),it("ol","reversed start type","li"),it("ul","","li"),it("li","value",xt),it("dl","","dt dd"),it("a","href target rel media hreflang type","html4"===Xe?Pt:xt),it("q","cite",Pt),it("ins del","cite datetime",xt),it("img","src sizes srcset alt usemap ismap width height"),it("iframe","src name width height",xt),it("embed","src type width height"),it("object","data type typemustmatch name usemap form width height",[xt,"param"].join(" ")),it("param","name value"),it("map","name",[xt,"area"].join(" ")),it("area","alt coords shape href target rel media hreflang type"),it("table","border","caption colgroup thead tfoot tbody tr"+("html4"===Xe?" col":"")),it("colgroup","span","col"),it("col","span"),it("tbody thead tfoot","","tr"),it("tr","","td th"),it("td","colspan rowspan headers",xt),it("th","colspan rowspan headers scope abbr",xt),it("form","accept-charset action autocomplete enctype method name novalidate target",xt),it("fieldset","disabled form name",[xt,"legend"].join(" ")),it("label","form for",Pt),it("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),it("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===Xe?xt:Pt),it("select","disabled form multiple name required size","option optgroup"),it("optgroup","disabled label","option"),it("option","disabled label selected value"),it("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),it("menu","type label",[xt,"li"].join(" ")),it("noscript","",xt),"html4"!==Xe&&(it("wbr"),it("ruby","",[Pt,"rt rp"].join(" ")),it("figcaption","",xt),it("mark rt rp bdi","",Pt),it("summary","",[Pt,"h1 h2 h3 h4 h5 h6"].join(" ")),it("canvas","width height",xt),it("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[xt,"track source"].join(" ")),it("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[xt,"track source"].join(" ")),it("picture","","img source"),it("source","src srcset type media sizes"),it("track","kind src srclang label default"),it("datalist","",[Pt,"option"].join(" ")),it("article section nav aside main header footer","",xt),it("hgroup","","h1 h2 h3 h4 h5 h6"),it("figure","",[xt,"figcaption"].join(" ")),it("time","datetime",Pt),it("dialog","open",xt),it("command","type label icon disabled checked radiogroup command"),it("output","for form name",Pt),it("progress","value max",Pt),it("meter","value min max low high optimum",Pt),it("details","open",[xt,"summary"].join(" ")),it("keygen","autofocus challenge disabled form keytype name"),Wn("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==Xe&&(Rt("script","language xml:space"),Rt("style","xml:space"),Rt("object","declare classid code codebase codetype archive standby align border hspace vspace"),Rt("embed","align name hspace vspace"),Rt("param","valuetype type"),Rt("a","charset name rev shape coords"),Rt("br","clear"),Rt("applet","codebase archive code object alt name width height align hspace vspace"),Rt("img","name longdesc align border hspace vspace"),Rt("iframe","longdesc frameborder marginwidth marginheight scrolling align"),Rt("font basefont","size color face"),Rt("input","usemap align"),Rt("select"),Rt("textarea"),Rt("h1 h2 h3 h4 h5 h6 div p legend caption","align"),Rt("ul","type compact"),Rt("li","type"),Rt("ol dl menu dir","compact"),Rt("pre","width xml:space"),Rt("hr","align noshade size width"),Rt("isindex","prompt"),Rt("table","summary width frame rules cellspacing cellpadding align bgcolor"),Rt("col","width align char charoff valign"),Rt("colgroup","width align char charoff valign"),Rt("thead","align char charoff valign"),Rt("tr","align char charoff valign bgcolor"),Rt("th","axis align char charoff valign nowrap bgcolor width height"),Rt("form","accept"),Rt("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),Rt("tfoot","align char charoff valign"),Rt("tbody","align char charoff valign"),Rt("area","nohref"),Rt("body","background bgcolor text link vlink alink")),"html4"!==Xe&&(Rt("input button select textarea","autofocus"),Rt("input textarea","placeholder"),Rt("a","download"),Rt("link script img","crossorigin"),Rt("img","loading"),Rt("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==Xe&&ye([Dt.video,Dt.audio],pn=>{delete pn.children.audio,delete pn.children.video}),ye(lr("a form meter progress dfn"),pn=>{Dt[pn]&&delete Dt[pn].children[pn]}),delete Dt.caption.children.table,delete Dt.script,Dt})(c);!1===e.verify_html&&(e.valid_elements="*[*]");const f=Pu(e.valid_styles),p=Pu(e.invalid_styles,"map"),v=Pu(e.valid_classes,"map"),w=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),y=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),S=a("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),b=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),T="td th iframe video audio object script code",O=a("non_empty_elements",T+" pre svg",S),P=a("move_caret_before_on_enter_elements",T+" table",S),z="h1 h2 h3 h4 h5 h6",M=a("text_block_elements",z+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Y=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",M),te=a("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),ie=a("transparent_elements","a ins del canvas map"),ce=a("wrap_block_elements","pre "+z);jo("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Xe=>{s[Xe]=new RegExp("</"+Xe+"[^>]*>","gi")});const fe=Xe=>{const At=R.from(n["@"]),Pt=/[*?+]/;ye(((xt,Dt)=>{const Wn=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return $e(lr(Dt,","),it=>{const Rt=Wn.exec(it);if(Rt){const pn=Rt[1],Fn=Rt[2],nr=Rt[3],wr=Rt[4],io=Rt[5],cr={attributes:{},attributesOrder:[]};if(xt.each(so=>{return mi=cr,Wt(($n=so).attributes,(ao,So)=>{mi.attributes[So]=ao}),void mi.attributesOrder.push(...$n.attributesOrder);var $n,mi}),"#"===pn?cr.paddEmpty=!0:"-"===pn&&(cr.removeEmpty=!0),"!"===wr&&(cr.removeEmptyAttrs=!0),io&&((so,$n)=>{const mi=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,ao=/[*?+]/,{attributes:So,attributesOrder:As}=$n;ye(lr(so,"|"),Jl=>{const Os=mi.exec(Jl);if(Os){const lo={},nu=Os[1],gn=Os[2].replace(/[\\:]:/g,":"),Io=Os[3],Rs=Os[4];if("!"===nu&&($n.attributesRequired=$n.attributesRequired||[],$n.attributesRequired.push(gn),lo.required=!0),"-"===nu)return delete So[gn],void As.splice(Be.inArray(As,gn),1);if(Io&&("="===Io?($n.attributesDefault=$n.attributesDefault||[],$n.attributesDefault.push({name:gn,value:Rs}),lo.defaultValue=Rs):"~"===Io?($n.attributesForced=$n.attributesForced||[],$n.attributesForced.push({name:gn,value:Rs}),lo.forcedValue=Rs):"<"===Io&&(lo.validValues=Be.makeMap(Rs,"?"))),ao.test(gn)){const Ql=lo;$n.attributePatterns=$n.attributePatterns||[],Ql.pattern=Kg(gn),$n.attributePatterns.push(Ql)}else So[gn]||As.push(gn),So[gn]=lo}})})(io,cr),nr&&(cr.outputName=Fn),"@"===Fn){if(!xt.isNone())return[];xt=R.some(cr)}return[nr?{name:Fn,element:cr,aliasName:nr}:{name:Fn,element:cr}]}return[]})})(At,Xe??""),({name:xt,element:Dt,aliasName:Wn})=>{if(Wn&&(n[Wn]=Dt),Pt.test(xt)){const it=Dt;it.pattern=Kg(xt),o.push(it)}else n[xt]=Dt})},Q=Xe=>{o=[],ye(An(n),At=>{delete n[At]}),fe(Xe)},ne=Xe=>{delete Sc.text_block_elements,delete Sc.block_elements,ye((At=>{const Pt=/^(~)?(.+)$/;return $e(lr(At,","),xt=>{const Dt=Pt.exec(xt);if(Dt){const Wn="~"===Dt[1];return[{inline:Wn,cloneName:Wn?"span":"div",name:Dt[2]}]}return[]})})(Xe??""),({inline:At,name:Pt,cloneName:xt})=>{if(r[Pt]=r[xt],i[Pt]=xt,O[Pt.toUpperCase()]={},O[Pt]={},At||(Y[Pt.toUpperCase()]={},Y[Pt]={}),!n[Pt]){let Dt=n[xt];Dt=ju({},Dt),delete Dt.removeEmptyAttrs,delete Dt.removeEmpty,n[Pt]=Dt}Wt(r,(Dt,Wn)=>{Dt[xt]&&(r[Wn]=Dt=ju({},r[Wn]),Dt[Pt]=Dt[xt])})})},de=Xe=>{ye((At=>{const Pt=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return $e(lr(At,","),xt=>{const Dt=Pt.exec(xt);if(Dt){const Wn=Dt[1];return[{operation:Wn?(Rt=Wn,"-"===Rt?"remove":"add"):"replace",name:Dt[2],validChildren:lr(Dt[3],"|")}]}var Rt;return[]})})(Xe??""),({operation:At,name:Pt,validChildren:xt})=>{const Dt="replace"===At?{"#comment":{}}:r[Pt];ye(xt,Wn=>{"remove"===At?delete Dt[Wn]:Dt[Wn]={}}),r[Pt]=Dt})},xe=Xe=>{const At=n[Xe];if(At)return At;let Pt=o.length;for(;Pt--;){const xt=o[Pt];if(xt.pattern.test(Xe))return xt}};e.valid_elements?(Q(e.valid_elements),jo(d,(Xe,At)=>{r[At]=Xe.children})):(jo(d,(Xe,At)=>{n[At]={attributes:Xe.attributes,attributesOrder:Xe.attributesOrder},r[At]=Xe.children}),jo(lr("strong/b em/i"),Xe=>{const At=lr(Xe,"/");n[At[1]].outputName=At[0]}),jo(te,(Xe,At)=>{n[At]&&(e.padd_empty_block_inline_children&&(n[At].paddInEmptyBlock=!0),n[At].removeEmpty=!0)}),jo(lr("ol ul blockquote a table tbody"),Xe=>{n[Xe]&&(n[Xe].removeEmpty=!0)}),jo(lr("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Xe=>{n[Xe]&&(n[Xe].paddEmpty=!0)}),jo(lr("span"),Xe=>{n[Xe].removeEmptyAttrs=!0})),delete n.svg,ne(e.custom_elements),de(e.valid_children),fe(e.extended_valid_elements),de("+ol[ul|ol],+ul[ul|ol]"),jo({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Xe,At)=>{n[At]&&(n[At].parentsRequired=lr(Xe))}),e.invalid_elements&&jo(Yg(e.invalid_elements),Xe=>{n[Xe]&&delete n[Xe]}),xe("span")||fe("span[!data-mce-type|*]");const Fe=G(f),Me=G(p),nt=G(v),Ze=G(b),lt=G(Y),ot=G(M),He=G(te),We=G(Object.seal(S)),yt=G(y),ee=G(O),oe=G(P),Ce=G(w),Te=G(ie),Ae=G(ce),Ve=G(Object.seal(s)),st=(Xe,At)=>{const Pt=xe(Xe);if(Pt){if(!At)return!0;{if(Pt.attributes[At])return!0;const xt=Pt.attributePatterns;if(xt){let Dt=xt.length;for(;Dt--;)if(xt[Dt].pattern.test(At))return!0}}}return!1},bt=Xe=>ft(lt(),Xe),dt=Xe=>!Mn(Xe,"#")&&st(Xe)&&!bt(Xe),en=G(i);return{type:c,children:r,elements:n,getValidStyles:Fe,getValidClasses:nt,getBlockElements:lt,getInvalidStyles:Me,getVoidElements:We,getTextBlockElements:ot,getTextInlineElements:He,getBoolAttrs:Ze,getElementRule:xe,getSelfClosingElements:yt,getNonEmptyElements:ee,getMoveCaretBeforeOnEnterElements:oe,getWhitespaceElements:Ce,getTransparentElements:Te,getSpecialElements:Ve,isValidChild:(Xe,At)=>{const Pt=r[Xe.toLowerCase()];return!(!Pt||!Pt[At.toLowerCase()])},isValid:st,isBlock:bt,isInline:dt,isWrapper:Xe=>ft(Ae(),Xe)||dt(Xe),getCustomElements:en,addValidElements:fe,setValidElements:Q,addCustomElements:ne,addValidChildren:de}},Du=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},Wk=e=>{return{value:(n=Du(e.red)+Du(e.green)+Du(e.blue),ka(n,"#").toUpperCase())};var n},Vk=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Kk=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Jg=(e,t,n,r)=>({red:e,green:t,blue:n,alpha:r}),Qg=(e,t,n,r)=>{const o=parseInt(e,10),i=parseInt(t,10),s=parseInt(n,10),a=parseFloat(r);return Jg(o,i,s,a)},Zg=e=>{if("transparent"===e)return R.some(Jg(0,0,0,0));const t=Vk.exec(e);if(null!==t)return R.some(Qg(t[1],t[2],t[3],"1"));const n=Kk.exec(e);return null!==n?R.some(Qg(n[1],n[2],n[3],n[4])):R.none()},Yk=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,Va=e=>Zg(e).map(Wk).map(t=>"#"+t.value).getOr(e),Lu=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,i={};let s,a;t&&(s=t.getValidStyles(),a=t.getInvalidStyles());const d="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let p=0;p<d.length;p++)i[d[p]]="\ufeff"+p,i["\ufeff"+p]=d[p];const f={parse:p=>{const v={};let w=!1;const y=e.url_converter,S=e.url_converter_scope||f,b=(fe,Q,ne)=>{const de=v[fe+"-top"+Q];if(!de)return;const xe=v[fe+"-right"+Q];if(!xe)return;const Fe=v[fe+"-bottom"+Q];if(!Fe)return;const Me=v[fe+"-left"+Q];if(!Me)return;const nt=[de,xe,Fe,Me];let Ze=nt.length-1;for(;Ze--&&nt[Ze]===nt[Ze+1];);Ze>-1&&ne||(v[fe+Q]=-1===Ze?nt[0]:nt.join(" "),delete v[fe+"-top"+Q],delete v[fe+"-right"+Q],delete v[fe+"-bottom"+Q],delete v[fe+"-left"+Q])},T=fe=>{const Q=v[fe];if(!Q)return;const ne=Q.indexOf(",")>-1?[Q]:Q.split(" ");let de=ne.length;for(;de--;)if(ne[de]!==ne[0])return!1;return v[fe]=ne[0],!0},O=fe=>(w=!0,i[fe]),P=(fe,Q)=>(w&&(fe=fe.replace(/\uFEFF[0-9]/g,ne=>i[ne])),Q||(fe=fe.replace(/\\([\'\";:])/g,"$1")),fe),z=fe=>String.fromCharCode(parseInt(fe.slice(1),16)),M=fe=>fe.replace(/\\[0-9a-f]+/gi,z),Y=(fe,Q,ne,de,xe,Fe)=>{if(xe=xe||Fe)return"'"+(xe=P(xe)).replace(/\'/g,"\\'")+"'";if(Q=P(Q||ne||de||""),!e.allow_script_urls){const Me=Q.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Me)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Me))return""}return y&&(Q=y.call(S,Q,"style")),"url('"+Q.replace(/\'/g,"\\'")+"')"};if(p){let fe;for(p=(p=p.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,O).replace(/\"[^\"]+\"|\'[^\']+\'/g,Q=>Q.replace(/[;:]/g,O));fe=r.exec(p);){r.lastIndex=fe.index+fe[0].length;let Q=fe[1].replace(o,"").toLowerCase(),ne=fe[2].replace(o,"");if(Q&&ne){if(Q=M(Q),ne=M(ne),-1!==Q.indexOf("\ufeff")||-1!==Q.indexOf('"')||!e.allow_script_urls&&("behavior"===Q||/expression\s*\(|\/\*|\*\//.test(ne)))continue;"font-weight"===Q&&"700"===ne?ne="bold":"color"!==Q&&"background-color"!==Q||(ne=ne.toLowerCase()),U(e.force_hex_color)&&"off"!==e.force_hex_color&&Zg(ne).each(de=>{"always"!==e.force_hex_color&&1!==de.alpha||(ne=Va(Yk(de)))}),ne=ne.replace(n,Y),v[Q]=w?P(ne,!0):ne}}b("border","",!0),b("border","-width"),b("border","-color"),b("border","-style"),b("padding",""),b("margin",""),ie="border-style",ce="border-color",T(te="border-width")&&T(ie)&&T(ce)&&(v.border=v[te]+" "+v[ie]+" "+v[ce],delete v[te],delete v[ie],delete v[ce]),"medium none"===v.border&&delete v.border,"none"===v["border-image"]&&delete v["border-image"]}var te,ie,ce;return v},serialize:(p,v)=>{let w="";const y=(S,b)=>{const T=b[S];if(T)for(let O=0,P=T.length;O<P;O++){const z=T[O],M=p[z];M&&(w+=(w.length>0?" ":"")+z+": "+M+";")}};return v&&s?(y("*",s),y(v,s)):Wt(p,(S,b)=>{S&&((T,O)=>{if(!a||!O)return!0;let P=a["*"];return!(P&&P[T]||(P=a[O],P&&P[T]))})(b,v)&&(w+=(w.length>0?" ":"")+b+": "+S+";")}),w}};return f},Xk={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},em=(e,t)=>{const n=t??{};for(const r in e)ft(Xk,r)||(n[r]=e[r]);return N(e.composedPath)&&(n.composedPath=()=>e.composedPath()),N(e.getModifierState)&&(n.getModifierState=r=>e.getModifierState(r)),N(e.getTargetRanges)&&(n.getTargetRanges=()=>e.getTargetRanges()),n},Bu=(e,t,n,r)=>{var o;const i=em(t,r);return i.type=e,C(i.target)&&(i.target=null!==(o=i.srcElement)&&void 0!==o?o:n),(C((s=t).preventDefault)||(a=s)instanceof Event||D(a.initEvent))&&(i.preventDefault=()=>{i.defaultPrevented=!0,i.isDefaultPrevented=_t,D(t.preventDefault)&&t.preventDefault()},i.stopPropagation=()=>{i.cancelBubble=!0,i.isPropagationStopped=_t,D(t.stopPropagation)&&t.stopPropagation()},i.stopImmediatePropagation=()=>{i.isImmediatePropagationStopped=_t,i.stopPropagation()},(s=>s.isDefaultPrevented===_t||s.isDefaultPrevented===Tt)(i)||(i.isDefaultPrevented=!0===i.defaultPrevented?_t:Tt,i.isPropagationStopped=!0===i.cancelBubble?_t:Tt,i.isImmediatePropagationStopped=Tt)),i;var s,a},Gk=/^(?:mouse|contextmenu)|click/,Mu=(e,t,n,r)=>{e.addEventListener(t,n,r||!1)},Ec=(e,t,n,r)=>{e.removeEventListener(t,n,r||!1)},Ka=(e,t)=>{const n=Bu(e.type,e,document,t);if(N(r=e)&&Gk.test(r.type)&&x(e.pageX)&&!x(e.clientX)){const r=n.target.ownerDocument||document,o=r.documentElement,i=r.body,s=n;s.pageX=e.clientX+(o&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),s.pageY=e.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)}var r;return n},Jk=(e,t,n)=>{const r=e.document,o={type:"ready"};if(n.domLoaded)return void t(o);const i=()=>{Ec(e,"DOMContentLoaded",i),Ec(e,"load",i),n.domLoaded||(n.domLoaded=!0,t(o)),e=null};"complete"===r.readyState||"interactive"===r.readyState&&r.body?i():Mu(e,"DOMContentLoaded",i),n.domLoaded||Mu(e,"load",i)};class is{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,r,o){const i=this;let s;const a=window,c=v=>{i.executeHandlers(Ka(v||a.event),d)};if(!t||Le(t)||Ti(t))return r;let d;t[i.expando]?d=t[i.expando]:(d=i.count++,t[i.expando]=d,i.events[d]={}),o=o||t;const f=n.split(" ");let p=f.length;for(;p--;){let v=f[p],w=c,y=!1,S=!1;"DOMContentLoaded"===v&&(v="ready"),i.domLoaded&&"ready"===v&&"complete"===t.readyState?r.call(o,Ka({type:v})):(i.hasFocusIn||"focusin"!==v&&"focusout"!==v||(y=!0,S="focusin"===v?"focus":"blur",w=b=>{const T=Ka(b||a.event);T.type="focus"===T.type?"focusin":"focusout",i.executeHandlers(T,d)}),s=i.events[d][v],s?"ready"===v&&i.domLoaded?r(Ka({type:v})):s.push({func:r,scope:o}):(i.events[d][v]=s=[{func:r,scope:o}],s.fakeName=S,s.capture=y,s.nativeHandler=w,"ready"===v?Jk(t,w,i):Mu(t,S||v,w,y)))}return t=s=null,r}unbind(t,n,r){if(!t||Le(t)||Ti(t))return this;const o=t[this.expando];if(o){let i=this.events[o];if(n){const s=n.split(" ");let a=s.length;for(;a--;){const c=s[a],d=i[c];if(d){if(r){let f=d.length;for(;f--;)if(d[f].func===r){const p=d.nativeHandler,v=d.fakeName,w=d.capture,y=d.slice(0,f).concat(d.slice(f+1));y.nativeHandler=p,y.fakeName=v,y.capture=w,i[c]=y}}r&&0!==d.length||(delete i[c],Ec(t,d.fakeName||c,d.nativeHandler,d.capture))}}}else Wt(i,(s,a)=>{Ec(t,s.fakeName||a,s.nativeHandler,s.capture)}),i={};for(const s in i)if(ft(i,s))return this;delete this.events[o];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,r){return this.dispatch(t,n,r)}dispatch(t,n,r){if(!t||Le(t)||Ti(t))return this;const o=Ka({type:n,target:t},r);do{const i=t[this.expando];i&&this.executeHandlers(o,i),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!o.isPropagationStopped());return this}clean(t){if(!t||Le(t)||Ti(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const n=t.getElementsByTagName("*");let r=n.length;for(;r--;)(t=n[r])[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const r=this.events[n],o=r&&r[t.type];if(o)for(let i=0,s=o.length;i<s;i++){const a=o[i];if(a&&!1===a.func.call(a.scope,t)&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}is.Event=new is;const Iu=Be.each,Qk=Be.grep,zu="data-mce-style",Zk=Be.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Ya=(e,t,n)=>{C(n)||""===n?h(e,t):In(e,t,n)},tm=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),Ks=(e,t)=>{let n=0;if(e)for(let r=e.nodeType,o=e.previousSibling;o;o=o.previousSibling){const i=o.nodeType;(!t||!Le(o)||i!==r&&o.data.length)&&(n++,r=i)}return n},nm=(e,t)=>{const n=Sr(t,"style"),r=e.serialize(e.parse(n),It(t));Ya(t,zu,r)},rm=(e,t,n)=>{const r=tm(t);var o,i;C(n)||""===n?ht(e,r):Ma(e,r,(i=r,m(o=n)?ft(Zk,i)?o+"":o+"px":o))},nn=(e,t={})=>{const n={},r=window,o={};let i=0;const s=$g.forElement(X(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),a=[],c=t.schema?t.schema:ji({}),d=Lu({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope,force_hex_color:t.force_hex_color},t.schema),f=t.ownEvents?new is:is.Event,p=c.getBlockElements(),v=ee=>ee&&e&&U(ee)?e.getElementById(ee):ee,w=ee=>{const oe=v(ee);return N(oe)?X(oe):null},y=(ee,oe,Ce="")=>{let Te;const Ae=w(ee);if(N(Ae)&&vr(Ae)){const Ve=yt[oe];Te=Ve&&Ve.get?Ve.get(Ae.dom,oe):Sr(Ae,oe)}return N(Te)?Te:Ce},S=ee=>{const oe=v(ee);return C(oe)?[]:oe.attributes},b=(ee,oe,Ce)=>{ie(ee,Te=>{if(Ke(Te)){const Ae=X(Te),Ve=""===Ce?null:Ce,st=Sr(Ae,oe),bt=yt[oe];bt&&bt.set?bt.set(Ae.dom,Ve,oe):Ya(Ae,oe,Ve),st!==Ve&&t.onSetAttrib&&t.onSetAttrib({attrElm:Ae.dom,attrName:oe,attrValue:Ve})}})},T=()=>t.root_element||e.body,O=(ee,oe)=>((Ce,Te,Ae)=>{let Ve=0,st=0;const bt=Ce.ownerDocument;if(Ae=Ae||Ce,Te){if(Ae===Ce&&Te.getBoundingClientRect&&"static"===he(X(Ce),"position")){const en=Te.getBoundingClientRect();return Ve=en.left+(bt.documentElement.scrollLeft||Ce.scrollLeft)-bt.documentElement.clientLeft,st=en.top+(bt.documentElement.scrollTop||Ce.scrollTop)-bt.documentElement.clientTop,{x:Ve,y:st}}let dt=Te;for(;dt&&dt!==Ae&&dt.nodeType&&!zg(dt,Ae);)Ve+=dt.offsetLeft||0,st+=dt.offsetTop||0,dt=dt.offsetParent;for(dt=Te.parentNode;dt&&dt!==Ae&&dt.nodeType&&!zg(dt,Ae);)Ve-=dt.scrollLeft||0,st-=dt.scrollTop||0,dt=dt.parentNode;st+=(en=X(Te),zk.isFirefox()&&"table"===It(en)?Ig(rn(en)).filter(Xe=>"caption"===It(Xe)).bind(Xe=>Ig(si(Xe)).map(At=>At.dom.offsetTop<=Xe.dom.offsetTop?-Xe.dom.offsetHeight:0)).getOr(0):0)}var en;return{x:Ve,y:st}})(e.body,v(ee),oe),P=(ee,oe,Ce)=>{const Te=v(ee);var Ae;if(!C(Te)&&(ci(Te)||Ke(Ae=Te)&&"http://www.w3.org/2000/svg"===Ae.namespaceURI))return Ce?he(X(Te),tm(oe)):("float"===(oe=oe.replace(/-(\D)/g,(Ve,st)=>st.toUpperCase()))&&(oe="cssFloat"),Te.style?Te.style[oe]:void 0)},z=ee=>{const oe=v(ee);if(!oe)return{w:0,h:0};let Ce=P(oe,"width"),Te=P(oe,"height");return Ce&&-1!==Ce.indexOf("px")||(Ce="0"),Te&&-1!==Te.indexOf("px")||(Te="0"),{w:parseInt(Ce,10)||oe.offsetWidth||oe.clientWidth,h:parseInt(Te,10)||oe.offsetHeight||oe.clientHeight}},M=(ee,oe)=>{if(!ee)return!1;const Ce=u(ee)?ee:[ee];return Kt(Ce,Te=>cn(X(Te),oe))},Y=(ee,oe,Ce,Te)=>{const Ae=[];let Ve=v(ee);Te=void 0===Te;const st=Ce||("BODY"!==T().nodeName?T().parentNode:null);if(U(oe))if("*"===oe)oe=Ke;else{const bt=oe;oe=dt=>M(dt,bt)}for(;Ve&&!(Ve===st||C(Ve.nodeType)||Fa(Ve)||fu(Ve));){if(!oe||oe(Ve)){if(!Te)return[Ve];Ae.push(Ve)}Ve=Ve.parentNode}return Te?Ae:null},te=(ee,oe,Ce)=>{let Te=oe;if(ee){U(oe)&&(Te=Ae=>M(Ae,oe));for(let Ae=ee[Ce];Ae;Ae=Ae[Ce])if(D(Te)&&Te(Ae))return Ae}return null},ie=function(ee,oe,Ce){const Te=Ce??this;if(u(ee)){const Ae=[];return Iu(ee,(Ve,st)=>{const bt=v(Ve);bt&&Ae.push(oe.call(Te,bt,st))}),Ae}{const Ae=v(ee);return!!Ae&&oe.call(Te,Ae)}},ce=(ee,oe)=>{ie(ee,Ce=>{Wt(oe,(Te,Ae)=>{b(Ce,Ae,Te)})})},fe=(ee,oe)=>{ie(ee,Ce=>{const Te=X(Ce);ar(Te,oe)})},Q=(ee,oe,Ce,Te,Ae)=>ie(ee,Ve=>{const st=U(oe)?e.createElement(oe):oe;return N(Ce)&&ce(st,Ce),Te&&(!U(Te)&&Te.nodeType?st.appendChild(Te):U(Te)&&fe(st,Te)),Ae?st:Ve.appendChild(st)}),ne=(ee,oe,Ce)=>Q(e.createElement(ee),ee,oe,Ce,!0),de=Ri.encodeAllRaw,xe=(ee,oe)=>ie(ee,Ce=>{const Te=X(Ce);return oe&&ye(rn(Te),Ae=>{kr(Ae)&&0===Ae.dom.length?rt(Ae):Qe(Te,Ae)}),rt(Te),Te.dom}),Fe=(ee,oe,Ce)=>{ie(ee,Te=>{if(Ke(Te)){const Ae=X(Te),Ve=oe.split(" ");ye(Ve,st=>{var bt,dt,Xe,At;N(Ce)?(Ce?le:ve)(Ae,st):(dt=st,A(bt=Ae)?bt.dom.classList.toggle(dt):(At=dt,Oe(B(Xe=bt),At)?V(Xe,At):$(Xe,At)),se(bt))})}})},Me=(ee,oe,Ce)=>ie(oe,Te=>{var Ae;const Ve=u(oe)?ee.cloneNode(!0):ee;return Ce&&Iu(Qk(Te.childNodes),st=>{Ve.appendChild(st)}),null===(Ae=Te.parentNode)||void 0===Ae||Ae.replaceChild(Ve,Te),Te}),nt=ee=>{if(Ke(ee)){const oe="a"===ee.nodeName.toLowerCase()&&!y(ee,"href")&&y(ee,"id");if(y(ee,"name")||y(ee,"data-mce-bookmark")||oe)return!0}return!1},Ze=()=>e.createRange(),lt=(ee,oe,Ce,Te)=>{if(u(ee)){let Ae=ee.length;const Ve=[];for(;Ae--;)Ve[Ae]=lt(ee[Ae],oe,Ce,Te);return Ve}return!t.collect||ee!==e&&ee!==r||a.push([ee,oe,Ce,Te]),f.bind(ee,oe,Ce,Te||We)},ot=(ee,oe,Ce)=>{if(u(ee)){let Te=ee.length;const Ae=[];for(;Te--;)Ae[Te]=ot(ee[Te],oe,Ce);return Ae}if(a.length>0&&(ee===e||ee===r)){let Te=a.length;for(;Te--;){const[Ae,Ve,st]=a[Te];ee!==Ae||oe&&oe!==Ve||Ce&&Ce!==st||f.unbind(Ae,Ve,st)}}return f.unbind(ee,oe,Ce)},He=ee=>{if(ee&&ci(ee)){const oe=ee.getAttribute("data-mce-contenteditable");return oe&&"inherit"!==oe?oe:"inherit"!==ee.contentEditable?ee.contentEditable:null}return null},We={doc:e,settings:t,win:r,files:o,stdMode:!0,boxModel:!0,styleSheetLoader:s,boundEvents:a,styles:d,schema:c,events:f,isBlock:ee=>U(ee)?ft(p,ee):Ke(ee)&&(ft(p,ee.nodeName)||rs(c,ee)),root:null,clone:(ee,oe)=>ee.cloneNode(oe),getRoot:T,getViewPort:ee=>{const oe=yg(ee);return{x:oe.x,y:oe.y,w:oe.width,h:oe.height}},getRect:ee=>{const oe=v(ee),Ce=O(oe),Te=z(oe);return{x:Ce.x,y:Ce.y,w:Te.w,h:Te.h}},getSize:z,getParent:(ee,oe,Ce)=>{const Te=Y(ee,oe,Ce,!1);return Te&&Te.length>0?Te[0]:null},getParents:Y,get:v,getNext:(ee,oe)=>te(ee,oe,"nextSibling"),getPrev:(ee,oe)=>te(ee,oe,"previousSibling"),select:(ee,oe)=>{var Ce,Te;const Ae=null!==(Te=null!==(Ce=v(oe))&&void 0!==Ce?Ce:t.root_element)&&void 0!==Te?Te:e;return D(Ae.querySelectorAll)?Nn(Ae.querySelectorAll(ee)):[]},is:M,add:Q,create:ne,createHTML:(ee,oe,Ce="")=>{let Te="<"+ee;for(const Ae in oe)kn(oe,Ae)&&(Te+=" "+Ae+'="'+de(oe[Ae])+'"');return yi(Ce)&&ft(c.getVoidElements(),ee)?Te+" />":Te+">"+Ce+"</"+ee+">"},createFragment:ee=>{const oe=e.createElement("div"),Ce=e.createDocumentFragment();let Te;for(Ce.appendChild(oe),ee&&(oe.innerHTML=ee);Te=oe.firstChild;)Ce.appendChild(Te);return Ce.removeChild(oe),Ce},remove:xe,setStyle:(ee,oe,Ce)=>{ie(ee,Te=>{const Ae=X(Te);rm(Ae,oe,Ce),t.update_styles&&nm(d,Ae)})},getStyle:P,setStyles:(ee,oe)=>{ie(ee,Ce=>{const Te=X(Ce);Wt(oe,(Ae,Ve)=>{rm(Te,Ve,Ae)}),t.update_styles&&nm(d,Te)})},removeAllAttribs:ee=>ie(ee,oe=>{const Ce=oe.attributes;for(let Te=Ce.length-1;Te>=0;Te--)oe.removeAttributeNode(Ce.item(Te))}),setAttrib:b,setAttribs:ce,getAttrib:y,getPos:O,parseStyle:ee=>d.parse(ee),serializeStyle:(ee,oe)=>d.serialize(ee,oe),addStyle:ee=>{if(We!==nn.DOM&&e===document){if(n[ee])return;n[ee]=!0}let oe=e.getElementById("mceDefaultStyles");if(!oe){oe=e.createElement("style"),oe.id="mceDefaultStyles",oe.type="text/css";const Ce=e.head;Ce.firstChild?Ce.insertBefore(oe,Ce.firstChild):Ce.appendChild(oe)}oe.styleSheet?oe.styleSheet.cssText+=ee:oe.appendChild(e.createTextNode(ee))},loadCSS:ee=>{ee||(ee=""),ye(ee.split(","),oe=>{o[oe]=!0,s.load(oe).catch(F)})},addClass:(ee,oe)=>{Fe(ee,oe,!0)},removeClass:(ee,oe)=>{Fe(ee,oe,!1)},hasClass:(ee,oe)=>{const Ce=w(ee),Te=oe.split(" ");return N(Ce)&&Je(Te,Ae=>Se(Ce,Ae))},toggleClass:Fe,show:ee=>{ie(ee,oe=>ht(X(oe),"display"))},hide:ee=>{ie(ee,oe=>Ma(X(oe),"display","none"))},isHidden:ee=>{const oe=w(ee);return N(oe)&&wi(Re(oe,"display"),"none")},uniqueId:ee=>(ee||"mce_")+i++,setHTML:fe,getOuterHTML:ee=>{const oe=w(ee);return N(oe)?Ke(oe.dom)?oe.dom.outerHTML:(Ce=>{const Te=je("div"),Ae=X(Ce.dom.cloneNode(!0));return Et(Te,Ae),Yn(Te)})(oe):""},setOuterHTML:(ee,oe)=>{ie(ee,Ce=>{Ke(Ce)&&(Ce.outerHTML=oe)})},decode:Ri.decode,encode:de,insertAfter:(ee,oe)=>{const Ce=v(oe);return ie(ee,Te=>{const Ae=Ce?.parentNode,Ve=Ce?.nextSibling;return Ae&&(Ve?Ae.insertBefore(Te,Ve):Ae.appendChild(Te)),Te})},replace:Me,rename:(ee,oe)=>{if(ee.nodeName!==oe.toUpperCase()){const Ce=ne(oe);return Iu(S(ee),Te=>{b(Ce,Te.nodeName,y(ee,Te.nodeName))}),Me(Ce,ee,!0),Ce}return ee},findCommonAncestor:(ee,oe)=>{let Ce=ee;for(;Ce;){let Te=oe;for(;Te&&Ce!==Te;)Te=Te.parentNode;if(Ce===Te)break;Ce=Ce.parentNode}return!Ce&&ee.ownerDocument?ee.ownerDocument.documentElement:Ce},run:ie,getAttribs:S,isEmpty:(ee,oe,Ce)=>{let Te=0;if(nt(ee))return!1;const Ae=ee.firstChild;if(Ae){const Ve=new qn(Ae,ee),st=c?c.getWhitespaceElements():{},bt=oe||(c?c.getNonEmptyElements():null);let dt=Ae;do{if(Ke(dt)){const en=dt.getAttribute("data-mce-bogus");if(en){dt=Ve.next("all"===en);continue}const Xe=dt.nodeName.toLowerCase();if(bt&&bt[Xe]){if("br"===Xe){Te++,dt=Ve.next();continue}return!1}if(nt(dt))return!1}if(Ti(dt)||Le(dt)&&!Oi(dt.data)&&(!Ce?.includeZwsp||!Ok(dt.data))||Le(dt)&&dt.parentNode&&st[dt.parentNode.nodeName]&&Oi(dt.data))return!1;dt=Ve.next()}while(dt)}return Te<=1},createRng:Ze,nodeIndex:Ks,split:(ee,oe,Ce)=>{let Te,Ae,Ve=Ze();if(ee&&oe&&ee.parentNode&&oe.parentNode){const st=ee.parentNode;return Ve.setStart(st,Ks(ee)),Ve.setEnd(oe.parentNode,Ks(oe)),Te=Ve.extractContents(),Ve=Ze(),Ve.setStart(oe.parentNode,Ks(oe)+1),Ve.setEnd(st,Ks(ee)+1),Ae=Ve.extractContents(),st.insertBefore(Au(We,Te,c),ee),st.insertBefore(Ce||oe,ee),st.insertBefore(Au(We,Ae,c),ee),xe(ee),Ce||oe}},bind:lt,unbind:ot,fire:(ee,oe,Ce)=>f.dispatch(ee,oe,Ce),dispatch:(ee,oe,Ce)=>f.dispatch(ee,oe,Ce),getContentEditable:He,getContentEditableParent:ee=>{const oe=T();let Ce=null;for(let Te=ee;Te&&Te!==oe&&(Ce=He(Te),null===Ce);Te=Te.parentNode);return Ce},isEditable:ee=>{if(N(ee)){const oe=Ke(ee)?ee:ee.parentElement;return N(oe)&&ci(oe)&&yo(X(oe))}return!1},destroy:()=>{if(a.length>0){let ee=a.length;for(;ee--;){const[oe,Ce,Te]=a[ee];f.unbind(oe,Ce,Te)}}Wt(o,(ee,oe)=>{s.unload(oe),delete o[oe]})},isChildOf:(ee,oe)=>ee===oe||oe.contains(ee),dumpRng:ee=>"startContainer: "+ee.startContainer.nodeName+", startOffset: "+ee.startOffset+", endContainer: "+ee.endContainer.nodeName+", endOffset: "+ee.endOffset},yt=((ee,oe,Ce)=>{const Te=oe.keep_values,Ve={style:{set:(st,bt)=>{const dt=X(st);Te&&Ya(dt,zu,bt),h(dt,"style"),U(bt)&&J(dt,ee.parse(bt))},get:st=>{const bt=X(st),dt=Sr(bt,zu)||Sr(bt,"style");return ee.serialize(ee.parse(dt),It(bt))}}};return Te&&(Ve.href=Ve.src={set:(st,bt,dt)=>{const en=X(st);D(oe.url_converter)&&N(bt)&&(bt=oe.url_converter.call(oe.url_converter_scope||Ce(),String(bt),dt,st)),Ya(en,"data-mce-"+dt,bt),Ya(en,dt,bt)},get:(st,bt)=>{const dt=X(st);return Sr(dt,"data-mce-"+bt)||Sr(dt,bt)}}),Ve})(d,t,G(We));return We};nn.DOM=nn(document),nn.nodeIndex=Ks;const eS=nn.DOM;class ui{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,r)=>{const o=eS;let i;const s=()=>{o.remove(a),i&&(i.onerror=i.onload=i=null)},a=o.uniqueId();i=document.createElement("script"),i.id=a,i.type="text/javascript",i.src=Be._addCacheSuffix(t),this.settings.referrerPolicy&&o.setAttrib(i,"referrerpolicy",this.settings.referrerPolicy),i.onload=()=>{s(),n()},i.onerror=()=>{s(),r("Failed to load script: "+t)},(document.getElementsByTagName("head")[0]||document.body).appendChild(i)})}isDone(t){return 2===this.states[t]}markDone(t){this.states[t]=2}add(t){const n=this;return n.queue.push(t),void 0===n.states[t]&&(n.states[t]=0),new Promise((r,o)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:r,reject:o})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,r=(c,d)=>{Gt(n.scriptLoadedCallbacks,d).each(f=>{ye(f,p=>p[c](d))}),delete n.scriptLoadedCallbacks[d]},o=c=>{const d=tt(c,f=>"rejected"===f.status);return d.length>0?Promise.reject($e(d,({reason:f})=>u(f)?f:[f])):Promise.resolve()},i=c=>Promise.allSettled(ut(c,d=>2===n.states[d]?(r("resolve",d),Promise.resolve()):3===n.states[d]?(r("reject",d),Promise.reject(d)):(n.states[d]=1,n.loadScript(d).then(()=>{n.states[d]=2,r("resolve",d);const f=n.queue;return f.length>0?(n.queue=[],i(f).then(o)):Promise.resolve()},()=>(n.states[d]=3,r("reject",d),Promise.reject(d)))))),s=c=>(n.loading=!0,i(c).then(d=>{n.loading=!1;const f=n.queueLoadedCallbacks.shift();return R.from(f).each(ue),o(d)})),a=tn(t);return n.loading?new Promise((c,d)=>{n.queueLoadedCallbacks.push(()=>{s(a).then(c,d)})}):s(a)}}ui.ScriptLoader=new ui;const Jn=e=>{let t=e;return{get:()=>t,set:n=>{t=n}}},Xa={},Fu=Jn("en"),om=()=>Gt(Xa,Fu.get()),Po={getData:()=>uo(Xa,e=>({...e})),setCode:e=>{e&&Fu.set(e)},getCode:()=>Fu.get(),add:(e,t)=>{let n=Xa[e];n||(Xa[e]=n={});const r=ut(An(t),o=>o.toLowerCase());Wt(t,(o,i)=>{const s=i.toLowerCase();s!==i&&((a,c)=>{const d=a.indexOf(c);return-1!==d&&a.indexOf(c,d+1)>d})(r,s)?(ft(t,s)||(n[s]=o),n[i]=o):n[s]=o})},translate:e=>{const t=om().getOr({}),n=a=>D(a)?Object.prototype.toString.call(a):r(a)?"":""+a,r=a=>""===a||null==a,o=a=>{const c=n(a);return ft(t,c)?n(t[c]):Gt(t,c.toLowerCase()).map(n).getOr(c)},i=a=>a.replace(/{context:\w+}$/,"");if(r(e))return"";if(I(s=e)&&ft(s,"raw"))return n(e.raw);var s,a;if(u(a=e)&&a.length>1){const a=e.slice(1);return i(o(e[0]).replace(/\{([0-9]+)\}/g,(c,d)=>ft(a,d)?n(a[d]):c))}return i(o(e))},isRtl:()=>om().bind(e=>Gt(e,"_dir")).exists(e=>"rtl"===e),hasCode:e=>ft(Xa,e)},_r=()=>{const e=[],t={},n={},r=[],o=(c,d)=>{const f=tt(r,p=>p.name===c&&p.state===d);ye(f,p=>p.resolve())},i=c=>ft(t,c),s=(c,d)=>{const f=Po.getCode();!f||d&&-1===(","+(d||"")+",").indexOf(","+f+",")||ui.ScriptLoader.add(t[c]+"/langs/"+f+".js")},a=(c,d="added")=>"added"===d&&ft(n,c)||"loaded"===d&&i(c)?Promise.resolve():new Promise(f=>{r.push({name:c,state:d,resolve:f})});return{items:e,urls:t,lookup:n,get:c=>{if(n[c])return n[c].instance},requireLangPack:(c,d)=>{!1!==_r.languageLoad&&(i(c)?s(c,d):a(c,"loaded").then(()=>s(c,d)))},add:(c,d)=>(e.push(d),n[c]={instance:d},o(c,"added"),d),remove:c=>{delete t[c],delete n[c]},createUrl:(c,d)=>U(d)?U(c)?{prefix:"",resource:d,suffix:""}:{prefix:c.prefix,resource:d,suffix:c.suffix}:d,load:(c,d)=>{if(t[c])return Promise.resolve();let f=U(d)?d:d.prefix+d.resource+d.suffix;0!==f.indexOf("/")&&-1===f.indexOf("://")&&(f=_r.baseURL+"/"+f),t[c]=f.substring(0,f.lastIndexOf("/"));const p=()=>(o(c,"loaded"),Promise.resolve());return n[c]?p():ui.ScriptLoader.add(f).then(p)},waitFor:a}};_r.languageLoad=!0,_r.baseURL="",_r.PluginManager=_r(),_r.ThemeManager=_r(),_r.ModelManager=_r();const tS=e=>{const t=Jn(R.none()),n=()=>t.get().each(r=>clearInterval(r));return{clear:()=>{n(),t.set(R.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:r=>{n(),t.set(R.some(setInterval(r,e)))}}},Pi=()=>{const e=(t=>{const n=Jn(R.none()),r=()=>n.get().each(t);return{clear:()=>{r(),n.set(R.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:o=>{r(),n.set(R.some(o))}}})(F);return{...e,on:t=>e.get().each(t)}},Tc=(e,t)=>{let n=null;return{cancel:()=>{k(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{k(n)&&(n=setTimeout(()=>{n=null,e.apply(null,r)},t))}}},$u=(e,t)=>{let n=null;const r=()=>{k(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:(...o)=>{r(),n=setTimeout(()=>{n=null,e.apply(null,o)},t)}}},Ga=G("mce-annotation"),ss=G("data-mce-annotation"),Ys=G("data-mce-annotation-uid"),Ja=G("data-mce-annotation-active"),Qa=G("data-mce-annotation-classes"),Za=G("data-mce-annotation-attrs"),im=e=>t=>Lt(t,e),sm=(e,t)=>{const n=e.selection.getRng(),r=X(n.startContainer),o=X(e.getBody()),i=t.fold(()=>"."+Ga(),a=>`[${ss()}="${a}"]`),s=Rn(r,n.startOffset).getOr(r);return Oo(s,i,im(o)).bind(a=>No(a,`${Ys()}`).bind(c=>No(a,`${ss()}`).map(d=>{const f=lm(e,c);return{uid:c,name:d,elements:f}})))},am=(e,t)=>Qi(e,"data-mce-bogus")||wg(e,'[data-mce-bogus="all"]',im(t)),lm=(e,t)=>{const n=X(e.getBody()),r=fr(n,`[${Ys()}="${t}"]`);return tt(r,o=>!am(o,n))},cm=(e,t)=>{const n=X(e.getBody()),r=fr(n,`[${ss()}="${t}"]`),o={};return ye(r,i=>{if(!am(i,n)){const s=Sr(i,Ys()),a=Gt(o,s).getOr([]);o[s]=a.concat([i])}}),o};let dm=0;const el=e=>{const t=(new Date).getTime(),n=Math.floor(1e9*Math.random());return dm++,e+"_"+n+dm+String(t)},um=(e,t)=>X(e.dom.cloneNode(t)),as=e=>um(e,!1),hm=e=>um(e,!0),fm=(e,t,n=Tt)=>{const r=new qn(e,t),o=i=>{let s;do{s=r[i]()}while(s&&!Le(s)&&!n(s));return R.from(s).filter(Le)};return{current:()=>R.from(r.current()).filter(Le),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},ls=(e,t)=>{const n=t||(o=>e.isBlock(o)||Cn(o)||sn(o)),r=(o,i,s,a)=>{if(Le(o)){const c=a(o,i,o.data);if(-1!==c)return R.some({container:o,offset:c})}return s().bind(c=>r(c.container,c.offset,s,a))};return{backwards:(o,i,s,a)=>{const c=fm(o,a??e.getRoot(),n);return r(o,i,()=>c.prev().map(d=>({container:d,offset:d.length})),s).getOrNull()},forwards:(o,i,s,a)=>{const c=fm(o,a??e.getRoot(),n);return r(o,i,()=>c.next().map(d=>({container:d,offset:0})),s).getOrNull()}}},Xs=Math.round,cs=e=>e?{left:Xs(e.left),top:Xs(e.top),bottom:Xs(e.bottom),right:Xs(e.right),width:Xs(e.width),height:Xs(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},pm=(e,t)=>(e=cs(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),gm=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,tl=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&gm(t.top-e.bottom,e,t)},nl=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&gm(t.bottom-e.top,e,t),mm=(e,t,n)=>{const r=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-r)*(t-r)+(n-o)*(n-o))},Nc=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Di=(e,t)=>{if(Ke(e)&&e.hasChildNodes()){const n=e.childNodes;return n[(s=n.length-1,Math.min(Math.max(t,0),s))]}var s;return e},nS=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),vm=e=>U(e)&&e.charCodeAt(0)>=768&&nS.test(e),_m=Ke,rS=wo,ym=pc("display","block table"),oS=pc("float","left right"),rl=((...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0})(_m,rS,St(oS)),iS=St(pc("white-space","pre pre-line pre-wrap")),ol=Le,Hu=Cn,bm=nn.nodeIndex,Ac=(e,t)=>t<0&&Ke(e)&&e.hasChildNodes()?void 0:Di(e,t),qu=e=>e?e.createRange():nn.DOM.createRng(),Uu=e=>U(e)&&/[\r\n\t ]/.test(e),wm=e=>!!e.setStart&&!!e.setEnd,Wu=e=>{const t=e.startContainer,n=e.startOffset;if(Uu(e.toString())&&iS(t.parentNode)&&Le(t)){const r=t.data;if(Uu(r[n-1])||Uu(r[n+1]))return!0}return!1},xm=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,Li=e=>{var t;let n;const r=e.getClientRects();return n=cs(r.length>0?r[0]:e.getBoundingClientRect()),!wm(e)&&Hu(e)&&xm(n)?(o=>{const i=o.ownerDocument,s=qu(i),a=i.createTextNode(Xn),c=o.parentNode;c.insertBefore(a,o),s.setStart(a,0),s.setEnd(a,1);const d=cs(s.getBoundingClientRect());return c.removeChild(a),d})(e):xm(n)&&wm(e)&&null!==(t=(o=>{const s=o.endContainer,a=o.startOffset,c=o.endOffset;if(o.startContainer===s&&Le(s)&&0===a&&1===c){const d=o.cloneRange();return d.setEndAfter(s),Li(d)}return null})(e))&&void 0!==t?t:n},ds=(e,t)=>{const n=pm(e,t);return n.width=1,n.right=n.left+1,n},_e=(e,t,n)=>{const r=()=>(n||(n=(o=>{const i=[],s=f=>{var p,v;0!==f.height&&(i.length>0&&(p=f).left===(v=i[i.length-1]).left&&p.top===v.top&&p.bottom===v.bottom&&p.right===v.right||i.push(f))},a=(f,p)=>{const v=qu(f.ownerDocument);if(p<f.data.length){if(vm(f.data[p]))return;if(vm(f.data[p-1])&&(v.setStart(f,p),v.setEnd(f,p+1),!Wu(v)))return void s(ds(Li(v),!1))}p>0&&(v.setStart(f,p-1),v.setEnd(f,p),Wu(v)||s(ds(Li(v),!1))),p<f.data.length&&(v.setStart(f,p),v.setEnd(f,p+1),Wu(v)||s(ds(Li(v),!0)))},c=o.container(),d=o.offset();if(ol(c))return a(c,d),i;if(_m(c))if(o.isAtEnd()){const f=Ac(c,d);ol(f)&&a(f,f.data.length),rl(f)&&!Hu(f)&&s(ds(Li(f),!1))}else{const f=Ac(c,d);if(ol(f)&&a(f,0),rl(f)&&o.isAtEnd())return s(ds(Li(f),!1)),i;const p=Ac(o.container(),o.offset()-1);rl(p)&&!Hu(p)&&(ym(p)||ym(f)||!rl(f))&&s(ds(Li(p),!1)),rl(f)&&s(ds(Li(f),!0))}return i})(_e(e,t))),n);return{container:G(e),offset:G(t),toRange:()=>{const o=qu(e.ownerDocument);return o.setStart(e,t),o.setEnd(e,t),o},getClientRects:r,isVisible:()=>r().length>0,isAtStart:()=>(ol(e),0===t),isAtEnd:()=>ol(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:o=>o&&e===o.container()&&t===o.offset(),getNode:o=>Ac(e,o?t-1:t)}};_e.fromRangeStart=e=>_e(e.startContainer,e.startOffset),_e.fromRangeEnd=e=>_e(e.endContainer,e.endOffset),_e.after=e=>_e(e.parentNode,bm(e)+1),_e.before=e=>_e(e.parentNode,bm(e)),_e.isAbove=(e,t)=>er(Hn(t.getClientRects()),co(e.getClientRects()),tl).getOr(!1),_e.isBelow=(e,t)=>er(co(t.getClientRects()),Hn(e.getClientRects()),nl).getOr(!1),_e.isAtStart=e=>!!e&&e.isAtStart(),_e.isAtEnd=e=>!!e&&e.isAtEnd(),_e.isTextPosition=e=>!!e&&Le(e.container()),_e.isElementPosition=e=>!_e.isTextPosition(e);const Oc=(e,t)=>{Le(t)&&0===t.data.length&&e.remove(t)},Vu=(e,t,n)=>{var r,i;fu(n)?((r,o,i)=>{const s=R.from(i.firstChild),a=R.from(i.lastChild);o.insertNode(i),s.each(c=>Oc(r,c.previousSibling)),a.each(c=>Oc(r,c.nextSibling))})(e,t,n):(r=e,t.insertNode(i=n),Oc(r,i.previousSibling),Oc(r,i.nextSibling))},Do=Le,Cm=es,km=nn.nodeIndex,Sm=e=>{const t=e.parentNode;return Cm(t)?Sm(t):t},Ku=e=>e?Eo(e.childNodes,(t,n)=>(Cm(n)&&"BR"!==n.nodeName?t=t.concat(Ku(n)):t.push(n),t),[]):[],Em=e=>t=>e===t,Tm=e=>(Do(e)?"text()":e.nodeName.toLowerCase())+"["+(t=>{let n,r;n=Ku(Sm(t)),r=Ps(n,Em(t),t),n=n.slice(0,r+1);const o=Eo(n,(i,s,a)=>(Do(s)&&Do(n[a-1])&&i++,i),0);return n=fo(n,Ro([t.nodeName])),r=Ps(n,Em(t),t),r-o})(e)+"]",Nm=(e,t)=>{let n,r=[],o=t.container(),i=t.offset();if(Do(o))n=((a,c)=>{let d=a;for(;(d=d.previousSibling)&&Do(d);)c+=d.data.length;return c})(o,i);else{const a=o.childNodes;i>=a.length?(n="after",i=a.length-1):n="before",o=a[i]}r.push(Tm(o));let s=((a,c,d)=>{const f=[];for(let p=c.parentNode;p&&p!==a;p=p.parentNode)f.push(p);return f})(e,o);return s=fo(s,St(es)),r=r.concat(Or(s,a=>Tm(a))),r.reverse().join("/")+","+n},Am=(e,t)=>{if(!t)return null;const n=t.split(","),r=n[0].split("/"),o=n.length>1?n[1]:"before",i=Eo(r,(s,a)=>{const c=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(a);return c?("text()"===c[1]&&(c[1]="#text"),((d,f,p)=>{let v=Ku(d);return v=fo(v,(w,y)=>!Do(w)||!Do(v[y-1])),v=fo(v,Ro([f])),v[p]})(s,c[1],parseInt(c[2],10))):null},e);if(!i)return null;if(!Do(i)&&i.parentNode){let s;return s="after"===o?km(i)+1:km(i),_e(i.parentNode,s)}return((s,a)=>{let c=s,d=0;for(;Do(c);){const f=c.data.length;if(a>=d&&a<=d+f){s=c,a-=d;break}if(!Do(c.nextSibling)){s=c,a=f;break}d+=f,c=c.nextSibling}return Do(s)&&a>s.data.length&&(a=s.data.length),_e(s,a)})(i,parseInt(o,10))},Rc=sn,Om=(e,t,n,r,o)=>{const i=o?r.startContainer:r.endContainer;let s=o?r.startOffset:r.endOffset;const a=[],c=e.getRoot();if(Le(i))a.push(n?((d,f,p)=>{let v=d(f.data.slice(0,p)).length;for(let w=f.previousSibling;w&&Le(w);w=w.previousSibling)v+=d(w.data).length;return v})(t,i,s):s);else{let d=0;const f=i.childNodes;s>=f.length&&f.length&&(d=1,s=Math.max(0,f.length-1)),a.push(e.nodeIndex(f[s],n)+d)}for(let d=i;d&&d!==c;d=d.parentNode)a.push(e.nodeIndex(d,n));return a},Yu=(e,t,n)=>{let r=0;return Be.each(e.select(t),o=>"all"===o.getAttribute("data-mce-bogus")?void 0:o!==n&&void r++),r},Rm=(e,t)=>{let n=t?e.startContainer:e.endContainer,r=t?e.startOffset:e.endOffset;if(Ke(n)&&"TR"===n.nodeName){const o=n.childNodes;n=o[Math.min(t?r:r-1,o.length-1)],n&&(r=t?0:n.childNodes.length,t?e.setStart(n,r):e.setEnd(n,r))}},jm=e=>(Rm(e,!0),Rm(e,!1),e),Pm=(e,t)=>{if(Ke(e)&&(e=Di(e,t),Rc(e)))return e;if(Yr(e)){Le(e)&&Vs(e)&&(e=e.parentNode);let n=e.previousSibling;if(Rc(n)||(n=e.nextSibling,Rc(n)))return n}},Dm=(e,t,n)=>{const r=n.getNode(),o=n.getRng();if("IMG"===r.nodeName||Rc(r)){const s=r.nodeName;return{name:s,index:Yu(n.dom,s,r)}}const i=Pm((s=o).startContainer,s.startOffset)||Pm(s.endContainer,s.endOffset);var s;if(i){const s=i.tagName;return{name:s,index:Yu(n.dom,s,i)}}return((s,a,c,d)=>{const f=a.dom,p=Om(f,s,c,d,!0),v=a.isForward(),w=Ng(d)?{isFakeCaret:!0}:{};return a.isCollapsed()?{start:p,forward:v,...w}:{start:p,end:Om(f,s,c,d,!1),forward:v,...w}})(e,n,t,o)},Lm=(e,t,n)=>{const r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",r,"&#xFEFF;"):e.create("span",r)},Bm=(e,t)=>{const n=e.dom;let r=e.getRng();const o=n.uniqueId(),i=e.isCollapsed(),s=e.getNode(),a=s.nodeName,c=e.isForward();if("IMG"===a)return{name:a,index:Yu(n,a,s)};const d=jm(r.cloneRange());if(!i){d.collapse(!1);const p=Lm(n,o+"_end",t);Vu(n,d,p)}r=jm(r),r.collapse(!0);const f=Lm(n,o+"_start",t);return Vu(n,r,f),e.moveToBookmark({id:o,keep:!0,forward:c}),{id:o,forward:c}},Xu=ge(Dm,K,!0),Mm=e=>{const t=i=>i(e),n=G(e),r=()=>o,o={tag:!0,inner:e,fold:(i,s)=>s(e),isValue:_t,isError:Tt,map:i=>Tr.value(i(e)),mapError:r,bind:t,exists:t,forall:t,getOr:n,or:r,getOrThunk:n,orThunk:r,getOrDie:n,each:i=>{i(e)},toOptional:()=>R.some(e)};return o},Im=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(r,o)=>r(e),isValue:Tt,isError:_t,map:t,mapError:r=>Tr.error(r(e)),bind:t,exists:Tt,forall:_t,getOr:K,or:K,getOrThunk:vt,orThunk:vt,getOrDie:l(String(e)),each:F,toOptional:R.none};return n},Tr={value:Mm,error:Im,fromOption:(e,t)=>e.fold(()=>Im(t),Mm)},Ko=e=>{if(!u(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return ye(e,(r,o)=>{const i=An(r);if(1!==i.length)throw new Error("one and only one name per case");const s=i[0],a=r[s];if(void 0!==n[s])throw new Error("duplicate key detected:"+s);if("cata"===s)throw new Error("cannot have a case named cata (sorry)");if(!u(a))throw new Error("case arguments must be an array");t.push(s),n[s]=(...c)=>{const d=c.length;if(d!==a.length)throw new Error("Wrong number of arguments to case "+s+". Expected "+a.length+" ("+a+"), got "+d);return{fold:(...f)=>{if(f.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+f.length);return f[o].apply(null,c)},match:f=>{const p=An(f);if(t.length!==p.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+p.join(","));if(!Je(t,v=>Oe(p,v)))throw new Error("Not all branches were specified when using match. Specified: "+p.join(", ")+"\nRequired: "+t.join(", "));return f[s].apply(null,c)},log:f=>{console.log(f,{constructors:t,constructor:s,params:c})}}}}),n};Ko([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const sS=e=>"inline-command"===e.type||"inline-format"===e.type,aS=e=>"block-command"===e.type||"block-format"===e.type,lS=e=>{const t=r=>Tr.error({message:r,pattern:e}),n=(r,o,i)=>{if(void 0!==e.format){let s;if(u(e.format)){if(!Je(e.format,U))return t(r+" pattern has non-string items in the `format` array");s=e.format}else{if(!U(e.format))return t(r+" pattern has non-string `format` parameter");s=[e.format]}return Tr.value(o(s))}return void 0!==e.cmd?U(e.cmd)?Tr.value(i(e.cmd,e.value)):t(r+" pattern has non-string `cmd` parameter"):t(r+" pattern is missing both `format` and `cmd` parameters")};if(!I(e))return t("Raw pattern is not an object");if(!U(e.start))return t("Raw pattern is missing `start` parameter");if(void 0!==e.end){if(!U(e.end))return t("Inline pattern has non-string `end` parameter");if(0===e.start.length&&0===e.end.length)return t("Inline pattern has empty `start` and `end` parameters");let r=e.start,o=e.end;return 0===o.length&&(o=r,r=""),n("Inline",i=>({type:"inline-format",start:r,end:o,format:i}),(i,s)=>({type:"inline-command",start:r,end:o,cmd:i,value:s}))}return void 0!==e.replacement?U(e.replacement)?0===e.start.length?t("Replacement pattern has empty `start` parameter"):Tr.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):0===e.start.length?t("Block pattern has empty `start` parameter"):n("Block",r=>({type:"block-format",start:e.start,format:r[0]}),(r,o)=>({type:"block-command",start:e.start,cmd:r,value:o}))},zm=e=>tt(e,aS),Fm=e=>tt(e,sS),$m=e=>{const t=(n=>{const r=[],o=[];return ye(n,i=>{i.fold(s=>{r.push(s)},s=>{o.push(s)})}),{errors:r,values:o}})(ut(e,lS));return ye(t.errors,n=>console.error(n.message,n.pattern)),t.values},Gu=dr().deviceType,cS=Gu.isTouch(),dS=nn.DOM,Hm=e=>H(e,RegExp),Ue=e=>t=>t.options.get(e),Ju=e=>U(e)||I(e),qm=(e,t="")=>n=>{const r=U(n);if(r){if(-1!==n.indexOf("=")){const o=(i=>{const s=i.indexOf("=")>0?i.split(/[;,](?![^=;,]*(?:[;,]|$))/):i.split(",");return Ge(s,(a,c)=>{const d=c.split("="),f=d[0],p=d.length>1?d[1]:f;return a[To(f)]=To(p),a},{})})(n);return{value:Gt(o,e.id).getOr(t),valid:r}}return{value:n,valid:r}}return{valid:!1,message:"Must be a string."}},uS=Ue("iframe_attrs"),hS=Ue("doctype"),Um=Ue("document_base_url"),fS=Ue("body_id"),pS=Ue("body_class"),Wm=Ue("content_security_policy"),gS=Ue("br_in_pre"),pr=Ue("forced_root_block"),il=Ue("forced_root_block_attrs"),mS=Ue("newline_behavior"),vS=Ue("br_newline_selector"),_S=Ue("no_newline_selector"),yS=Ue("keep_styles"),bS=Ue("end_container_on_empty_block"),Vm=Ue("automatic_uploads"),Km=Ue("images_reuse_filename"),wS=Ue("images_replace_blob_uris"),Ym=Ue("icons"),xS=Ue("icons_url"),CS=Ue("images_upload_url"),kS=Ue("images_upload_base_path"),SS=Ue("images_upload_credentials"),ES=Ue("images_upload_handler"),TS=Ue("content_css_cors"),Qu=Ue("referrer_policy"),Xm=Ue("language"),NS=Ue("language_url"),Gm=Ue("indent_use_margin"),AS=Ue("indentation"),OS=Ue("content_css"),RS=Ue("content_style"),Jm=Ue("font_css"),jS=Ue("directionality"),PS=Ue("inline_boundaries_selector"),Qm=Ue("object_resizing"),DS=Ue("resize_img_proportional"),LS=Ue("placeholder"),Zm=Ue("event_root"),BS=Ue("service_message"),Gs=Ue("theme"),MS=Ue("theme_url"),Zu=Ue("model"),IS=Ue("model_url"),sl=Ue("inline_boundaries"),zS=Ue("formats"),FS=Ue("preview_styles"),$S=Ue("format_empty_lines"),HS=Ue("format_noneditable_selector"),qS=Ue("custom_ui_selector"),eh=Ue("inline"),US=Ue("hidden_input"),WS=Ue("submit_patch"),VS=Ue("add_form_submit_trigger"),KS=Ue("add_unload_trigger"),YS=Ue("custom_undo_redo_levels"),XS=Ue("disable_nodechange"),ev=Ue("readonly"),GS=Ue("editable_root"),tv=Ue("content_css_cors"),jc=Ue("plugins"),JS=Ue("external_plugins"),QS=Ue("block_unsupported_drop"),ZS=Ue("visual"),eE=Ue("visual_table_class"),nv=Ue("visual_anchor_class"),tE=Ue("iframe_aria_text"),nE=Ue("setup"),rE=Ue("init_instance_callback"),oE=Ue("urlconverter_callback"),iE=Ue("auto_focus"),sE=Ue("browser_spellcheck"),aE=Ue("protect"),lE=Ue("paste_block_drop"),Pc=Ue("paste_data_images"),cE=Ue("paste_preprocess"),dE=Ue("paste_postprocess"),uE=Ue("newdocument_content"),hE=Ue("paste_webkit_styles"),fE=Ue("paste_remove_styles_if_webkit"),pE=Ue("paste_merge_formats"),gE=Ue("smart_paste"),mE=Ue("paste_as_text"),vE=Ue("paste_tab_spaces"),_E=Ue("allow_html_data_urls"),yE=Ue("text_patterns"),bE=Ue("text_patterns_lookup"),rv=Ue("noneditable_class"),wE=Ue("editable_class"),xE=Ue("noneditable_regexp"),CE=Ue("preserve_cdata"),kE=Ue("highlight_on_focus"),th=Ue("xss_sanitization"),SE=Ue("init_content_sync"),ov=e=>Be.explode(e.options.get("images_file_types")),EE=Ue("table_tab_navigation"),TE=Ue("details_initial_state"),NE=Ue("details_serialized_state"),AE=Ue("force_hex_color"),nh=Ue("sandbox_iframes"),OE=Ke,iv=Le,sv=e=>{const t=e.parentNode;t&&t.removeChild(e)},av=e=>{const t=Fr(e);return{count:e.length-t.length,text:t}},lv=e=>{let t;for(;-1!==(t=e.data.lastIndexOf(Gn));)e.deleteData(t,1)},cv=(e,t)=>(us(e),t),us=e=>{OE(e)&&Yr(e)&&(Tg(e)?e.removeAttribute("data-mce-caret"):sv(e)),iv(e)&&(lv(e),0===e.data.length&&sv(e))},jE=sn,PE=Vo,DE=gc,dv=(e,t,n)=>{const r=pm(t.getBoundingClientRect(),n);let o,i;if("BODY"===e.tagName){const a=e.ownerDocument.documentElement;o=e.scrollLeft||a.scrollLeft,i=e.scrollTop||a.scrollTop}else{const a=e.getBoundingClientRect();o=e.scrollLeft-a.left,i=e.scrollTop-a.top}r.left+=o,r.right+=o,r.top+=i,r.bottom+=i,r.width=1;let s=t.offsetWidth-t.clientWidth;return s>0&&(n&&(s*=-1),r.left+=s,r.right+=s),r},uv=()=>$t.browser.isFirefox(),al=e=>jE(e)||PE(e),ll=e=>(al(e)||di(e)&&uv())&&ki(X(e)).exists(yo),BE=bo,rh=sn,ME=Vo,hv=pc("display","block table table-cell table-caption list-item"),fv=Yr,pv=Vs,IE=Ke,zE=Le,FE=wo,Js=e=>e>0,hs=e=>e<0,Dc=(e,t)=>{let n;for(;n=e(t);)if(!pv(n))return n;return null},cl=(e,t,n,r,o)=>{const i=new qn(e,r),s=rh(e)||pv(e);let a;if(hs(t)){if(s&&(a=Dc(i.prev.bind(i),!0),n(a)))return a;for(;a=Dc(i.prev.bind(i),o);)if(n(a))return a}if(Js(t)){if(s&&(a=Dc(i.next.bind(i),!0),n(a)))return a;for(;a=Dc(i.next.bind(i),o);)if(n(a))return a}return null},Bi=(e,t)=>{for(;e&&e!==t;){if(hv(e))return e;e=e.parentNode}return null},Yo=(e,t,n)=>Bi(e.container(),n)===Bi(t.container(),n),oh=(e,t)=>{if(!t)return R.none();const n=t.container(),r=t.offset();return IE(n)?R.from(n.childNodes[r+e]):R.none()},gv=(e,t)=>{var n;const r=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createRange();return e?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),r},$E=(e,t,n)=>Bi(t,e)===Bi(n,e),mv=(e,t,n)=>{const r=e?"previousSibling":"nextSibling";let o=n;for(;o&&o!==t;){let i=o[r];if(i&&fv(i)&&(i=i[r]),rh(i)||ME(i)){if($E(t,i,o))return i;break}if(FE(i))break;o=o.parentNode}return null},dl=ge(gv,!0),ul=ge(gv,!1),ih=(e,t,n)=>{let r;const o=ge(mv,!0,t),i=ge(mv,!1,t),s=n.startContainer,a=n.startOffset;if(Vs(s)){const c=zE(s)?s.parentNode:s,d=c.getAttribute("data-mce-caret");if("before"===d&&(r=c.nextSibling,ll(r)))return dl(r);if("after"===d&&(r=c.previousSibling,ll(r)))return ul(r)}if(!n.collapsed)return n;if(Le(s)){if(fv(s)){if(1===e){if(r=i(s),r)return dl(r);if(r=o(s),r)return ul(r)}if(-1===e){if(r=o(s),r)return ul(r);if(r=i(s),r)return dl(r)}return n}if(bc(s)&&a>=s.data.length-1)return 1===e&&(r=i(s),r)?dl(r):n;if(yc(s)&&a<=1)return-1===e&&(r=o(s),r)?ul(r):n;if(a===s.data.length)return r=i(s),r?dl(r):n;if(0===a)return r=o(s),r?ul(r):n}return n},vv=(e,t)=>oh(e?0:-1,t).filter(rh),hl=(e,t,n)=>{const r=ih(e,t,n);return-1===e?_e.fromRangeStart(r):_e.fromRangeEnd(r)},Lc=e=>R.from(e.getNode()).map(X),sh=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},Bc=(e,t)=>{const n=Yo(e,t);return!(n||!Cn(e.getNode()))||n};var Qn,e;(e=Qn||(Qn={}))[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards";const HE=sn,Xo=Le,_v=Ke,ah=Cn,Qs=wo,yv=e=>{return Og(e)||!!wu(t=e)&&!Ge(Nn(t.getElementsByTagName("*")),(n,r)=>n||Ag(r),!1);var t},Mc=Rg,bv=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,wv=(e,t)=>{if(Js(e)){if(Qs(t.previousSibling)&&!Xo(t.previousSibling))return _e.before(t);if(Xo(t))return _e(t,0)}if(hs(e)){if(Qs(t.nextSibling)&&!Xo(t.nextSibling))return _e.after(t);if(Xo(t))return _e(t,t.data.length)}return hs(e)?ah(t)?_e.before(t):_e.after(t):_e.before(t)},lh=(e,t,n)=>{let r,o,i,s;if(!_v(n)||!t)return null;if(t.isEqual(_e.after(n))&&n.lastChild){if(s=_e.after(n.lastChild),hs(e)&&Qs(n.lastChild)&&_v(n.lastChild))return ah(n.lastChild)?_e.before(n.lastChild):s}else s=t;const a=s.container();let c=s.offset();if(Xo(a)){if(hs(e)&&c>0)return _e(a,--c);if(Js(e)&&c<a.length)return _e(a,++c);r=a}else{if(hs(e)&&c>0&&(o=bv(a,c-1),Qs(o)))return!yv(o)&&(i=cl(o,e,Mc,o),i)?Xo(i)?_e(i,i.data.length):_e.after(i):Xo(o)?_e(o,o.data.length):_e.before(o);if(Js(e)&&c<a.childNodes.length&&(o=bv(a,c),Qs(o)))return ah(o)?((f,p)=>{const v=p.nextSibling;return v&&Qs(v)?Xo(v)?_e(v,0):_e.before(v):lh(Qn.Forwards,_e.after(p),f)})(n,o):!yv(o)&&(i=cl(o,e,Mc,o),i)?Xo(i)?_e(i,0):_e.before(i):Xo(o)?_e(o,0):_e.after(o);r=o||s.getNode()}if(r&&(Js(e)&&s.isAtEnd()||hs(e)&&s.isAtStart())&&(r=cl(r,e,_t,n,!0),Mc(r,n)))return wv(e,r);o=r&&cl(r,e,Mc,n);const d=po(tt(((f,p)=>{const v=[];let w=f;for(;w&&w!==p;)v.push(w),w=w.parentNode;return v})(a,n),HE));return!d||o&&d.contains(o)?o?wv(e,o):null:(s=Js(e)?_e.after(d):_e.before(d),s)},Go=e=>({next:t=>lh(Qn.Forwards,t,e),prev:t=>lh(Qn.Backwards,t,e)}),xv=e=>_e.isTextPosition(e)?0===e.offset():wo(e.getNode()),Cv=e=>{if(_e.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}return wo(e.getNode(!0))},kv=(e,t)=>!_e.isTextPosition(e)&&!_e.isTextPosition(t)&&e.getNode()===t.getNode(!0),Xr=(e,t,n)=>{const r=Go(t);return R.from(e?r.next(n):r.prev(n))},Zs=(e,t,n)=>Xr(e,t,n).bind(r=>{return Yo(n,r,t)&&(i=n,s=r,e?!kv(i,s)&&(_e.isTextPosition(a=i)||!Cn(a.getNode()))&&Cv(i)&&xv(s):!kv(s,i)&&xv(i)&&Cv(s))?Xr(e,t,r):R.some(r);var i,s,a}),Sv=(e,t,n,r)=>Zs(e,t,n).bind(o=>r(o)?Sv(e,t,o,r):R.some(o)),ea=(e,t)=>{const n=e?t.firstChild:t.lastChild;return Le(n)?R.some(_e(n,e?0:n.data.length)):n?wo(n)?R.some(e?_e.before(n):Cn(r=n)?_e.before(r):_e.after(r)):((o,i,s)=>{const a=o?_e.before(s):_e.after(s);return Xr(o,i,a)})(e,t,n):R.none();var r},Nr=ge(Xr,!0),Pr=ge(Xr,!1),gr=ge(ea,!0),xo=ge(ea,!1),ch="_mce_caret",Gr=e=>Ke(e)&&e.id===ch,fs=(e,t)=>{let n=t;for(;n&&n!==e;){if(Gr(n))return n;n=n.parentNode}return null},Ev=e=>ft(e,"name"),Tv=e=>Be.isArray(e.start),Ic=e=>!(!Ev(e)&&g(e.forward))||e.forward,Nv=(e,t)=>(Ke(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),qE=(e,t)=>xo(e).fold(Tt,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),Av=(e,t,n)=>!(t.hasChildNodes()||!fs(e,t)||(((r,o)=>{var i;const s=(null!==(i=r.ownerDocument)&&void 0!==i?i:document).createTextNode(Gn);r.appendChild(s),o.setStart(s,0),o.setEnd(s,0)})(t,n),0)),Ov=(e,t,n,r)=>{const o=n[t?"start":"end"],i=e.getRoot();if(o){let s=i,a=o[0];for(let c=o.length-1;s&&c>=1;c--){const d=s.childNodes;if(Av(i,s,r))return!0;if(o[c]>d.length-1)return!!Av(i,s,r)||qE(s,r);s=d[o[c]]}Le(s)&&(a=Math.min(o[0],s.data.length)),Ke(s)&&(a=Math.min(o[0],s.childNodes.length)),t?r.setStart(s,a):r.setEnd(s,a)}return!0},dh=e=>Le(e)&&e.data.length>0,Rv=(e,t,n)=>{const r=e.get(n.id+"_"+t),o=r?.parentNode,i=n.keep;if(r&&o){let s,a;if("start"===t?i?r.hasChildNodes()?(s=r.firstChild,a=1):dh(r.nextSibling)?(s=r.nextSibling,a=0):dh(r.previousSibling)?(s=r.previousSibling,a=r.previousSibling.data.length):(s=o,a=e.nodeIndex(r)+1):(s=o,a=e.nodeIndex(r)):i?r.hasChildNodes()?(s=r.firstChild,a=1):dh(r.previousSibling)?(s=r.previousSibling,a=r.previousSibling.data.length):(s=o,a=e.nodeIndex(r)):(s=o,a=e.nodeIndex(r)),!i){const c=r.previousSibling,d=r.nextSibling;let f;for(Be.each(Be.grep(r.childNodes),p=>{Le(p)&&(p.data=p.data.replace(/\uFEFF/g,""))});f=e.get(n.id+"_"+t);)e.remove(f,!0);if(Le(d)&&Le(c)&&!$t.browser.isOpera()){const p=c.data.length;c.appendData(d.data),e.remove(d),s=c,a=p}}return R.some(_e(s,a))}return R.none()},UE=(e,t,n)=>((r,o,i=!1)=>{return 2===o?Dm(Fr,i,r):3===o?(s=>{const a=s.getRng();return{start:Nm(s.dom.getRoot(),_e.fromRangeStart(a)),end:Nm(s.dom.getRoot(),_e.fromRangeEnd(a)),forward:s.isForward()}})(r):o?{rng:(s=r).getRng(),forward:s.isForward()}:Bm(r,!1);var s})(e,t,n),WE=(e,t)=>{((n,r)=>{const o=n.dom;if(r){if(Tv(r))return((i,s)=>{const a=i.createRng();return Ov(i,!0,s,a)&&Ov(i,!1,s,a)?R.some({range:a,forward:Ic(s)}):R.none()})(o,r);if(U(r.start))return((i,s)=>{const a=R.from(Am(i.getRoot(),s.start)),c=R.from(Am(i.getRoot(),s.end));return er(a,c,(d,f)=>{const p=i.createRng();return p.setStart(d.container(),d.offset()),p.setEnd(f.container(),f.offset()),{range:p,forward:Ic(s)}})})(o,r);if(ft(r,"id"))return((i,s)=>{const a=Rv(i,"start",s),c=Rv(i,"end",s);return er(a,c.or(a),(d,f)=>{const p=i.createRng();return p.setStart(Nv(i,d.container()),d.offset()),p.setEnd(Nv(i,f.container()),f.offset()),{range:p,forward:Ic(s)}})})(o,r);if(Ev(r))return((i,s)=>R.from(i.select(s.name)[s.index]).map(a=>{const c=i.createRng();return c.selectNode(a),{range:c,forward:!0}}))(o,r);if((i=>ft(i,"rng"))(r))return R.some({range:r.rng,forward:Ic(r)})}return R.none()})(e,t).each(({range:n,forward:r})=>{e.setRng(n,r)})},Jr=e=>Ke(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type"),zc=(jv=Xn,e=>jv===e);var jv;const ta=e=>""!==e&&-1!==" \f\n\r\t\v".indexOf(e),uh=e=>!ta(e)&&!zc(e)&&!gu(e),hh=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},Pv=(e,t)=>{const n=fr(t,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:tt($e(e,i=>{const s=Nc(i);return s?[X(s)]:[]}),qa)},na=e=>Pv(hh(e.selection.getSel()),X(e.getBody())),fl=(e,t)=>Uo(e,"table",t),Dv=e=>Bn(e).fold(G([e]),t=>[e].concat(Dv(t))),fh=e=>ir(e).fold(G([e]),t=>"br"===It(t)?Vr(t).map(n=>[e].concat(fh(n))).getOr([]):[e].concat(fh(t))),ph=(e,t)=>er((n=>{const r=n.startContainer,o=n.startOffset;return Le(r)?0===o?R.some(X(r)):R.none():R.from(r.childNodes[o]).map(X)})(t),(n=>{const r=n.endContainer,o=n.endOffset;return Le(r)?o===r.data.length?R.some(X(r)):R.none():R.from(r.childNodes[o-1]).map(X)})(t),(n,r)=>{const o=Z(Dv(e),ge(Lt,n)),i=Z(fh(e),ge(Lt,r));return o.isSome()&&i.isSome()}).getOr(!1),gh=(e,t,n,r)=>{const o=n,i=new qn(n,o),s=xn(e.schema.getMoveCaretBeforeOnEnterElements(),(c,d)=>!Oe(["td","th","table"],d.toLowerCase()));let a=n;do{if(Le(a)&&0!==Be.trim(a.data).length)return void(r?t.setStart(a,0):t.setEnd(a,a.data.length));if(s[a.nodeName])return void(r?t.setStartBefore(a):"BR"===a.nodeName?t.setEndBefore(a):t.setEndAfter(a))}while(a=r?i.next():i.prev());"BODY"===o.nodeName&&(r?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},Fc=e=>{const t=e.selection.getSel();return N(t)&&t.rangeCount>0},mh=(e,t)=>{const n=na(e);n.length>0?ye(n,r=>{const o=r.dom,i=e.dom.createRng();i.setStartBefore(o),i.setEndAfter(o),t(i,!0)}):t(e.selection.getRng(),!1)},Lv=(e,t,n)=>{const r=Bm(e,t);n(r),e.moveToBookmark(r)},pl=e=>m(e?.nodeType),vh=e=>Ke(e)&&!Jr(e)&&!Gr(e)&&!es(e),Bv=(e,t,n)=>{const{selection:r,dom:o}=e,i=r.getNode(),s=sn(i);Lv(r,!0,()=>{t()}),s&&sn(i)&&o.isChildOf(i,e.getBody())?e.selection.select(i):n(r.getStart())&&VE(o,r)},VE=(e,t)=>{var n,r;const o=t.getRng(),{startContainer:i,startOffset:s}=o;if(!((a,c)=>{if(vh(c)&&!/^(TD|TH)$/.test(c.nodeName)){const d=a.getAttrib(c,"data-mce-selected"),f=parseInt(d,10);return!isNaN(f)&&f>0}return!1})(e,t.getNode())&&Ke(i)){const a=i.childNodes,c=e.getRoot();let d;if(s<a.length){const f=a[s];d=new qn(f,null!==(n=e.getParent(f,e.isBlock))&&void 0!==n?n:c)}else{const f=a[a.length-1];d=new qn(f,null!==(r=e.getParent(f,e.isBlock))&&void 0!==r?r:c),d.next(!0)}for(let f=d.current();f;f=d.next()){if("false"===e.getContentEditable(f))return;if(Le(f)&&!yh(f))return o.setStart(f,0),void t.setRng(o)}}},Mv=(e,t,n)=>{if(e){const r=t?"nextSibling":"previousSibling";for(e=n?e:e[r];e;e=e[r])if(Ke(e)||!yh(e))return e}},_h=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||rs(e,t),ra=(e,t,n)=>e.schema.isValidChild(t,n),yh=(e,t=!1)=>{if(N(e)&&Le(e)){const n=t?e.data.replace(/ /g,"\xa0"):e.data;return Oi(n)}return!1},Iv=(e,t)=>{const n=e.dom;return vh(t)&&"false"===n.getContentEditable(t)&&((r,o)=>{const i="[data-mce-cef-wrappable]",s=HS(r),a=yi(s)?i:`${i},${s}`;return cn(X(o),a)})(e,t)&&0===n.select('[contenteditable="true"]',t).length},Mi=(e,t)=>D(e)?e(t):(N(t)&&(e=e.replace(/%(\w+)/g,(n,r)=>t[r]||n)),e),bh=(e,t)=>(e=""+((e=e||"").nodeName||e),t=""+((t=t||"").nodeName||t),e.toLowerCase()===t.toLowerCase()),wh=(e,t)=>{if(C(e))return null;{let n=String(e);return"color"!==t&&"backgroundColor"!==t||(n=Va(n)),"fontWeight"===t&&700===e&&(n="bold"),"fontFamily"===t&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},$c=(e,t,n)=>{const r=e.getStyle(t,n);return wh(r,n)},zv=(e,t)=>{let n;return e.getParent(t,r=>!!Ke(r)&&(n=e.getStyle(r,"text-decoration"),!!n&&"none"!==n)),n},Hc=(e,t,n)=>e.getParents(t,n,e.getRoot()),xh=(e,t,n)=>{const r=e.formatter.get(t);return N(r)&&Kt(r,n)},Jo=e=>kn(e,"block"),Qr=e=>kn(e,"selector"),Un=e=>kn(e,"inline"),Ch=e=>Qr(e)&&!1!==e.expand&&!Un(e),Fv=e=>(t=>{const n=[];let r=t;for(;r;){if(Le(r)&&r.data!==Gn||r.childNodes.length>1)return[];Ke(r)&&n.push(r),r=r.firstChild}return n})(e).length>0,kh=e=>Gr(e.dom)&&Fv(e.dom),oa=Jr,$v=Hc,Hv=yh,KE=_h,qv=(e,t)=>{let n=t;for(;n;){if(Ke(n)&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},Uv=(e,t,n,r)=>{const o=t.data;if(e){for(let i=n;i>0;i--)if(r(o.charAt(i-1)))return i}else for(let i=n;i<o.length;i++)if(r(o.charAt(i)))return i;return-1},YE=(e,t,n)=>Uv(e,t,n,r=>zc(r)||ta(r)),XE=(e,t,n)=>Uv(e,t,n,uh),Wv=(e,t,n,r,o,i)=>{let s;const a=e.getParent(n,e.isBlock)||t,c=(d,f,p)=>{const v=ls(e);return R.from((o?v.backwards:v.forwards)(d,f,(y,S)=>oa(y.parentNode)?-1:(s=y,p(o,y,S)),a))};return c(n,r,YE).bind(d=>i?c(d.container,d.offset+(o?-1:0),XE):R.some(d)).orThunk(()=>s?R.some({container:s,offset:o?0:s.length}):R.none())},Vv=(e,t,n,r,o)=>{const i=r[o];Le(r)&&yi(r.data)&&i&&(r=i);const s=$v(e,r);for(let a=0;a<s.length;a++)for(let c=0;c<t.length;c++){const d=t[c];if((!N(d.collapsed)||d.collapsed===n.collapsed)&&Qr(d)&&e.is(s[a],d.selector))return s[a]}return r},Kv=(e,t,n,r)=>{var o;let i=n;const s=e.getRoot(),a=t[0];if(Jo(a)&&(i=a.wrapper?null:e.getParent(n,a.block,s)),!i){const c=null!==(o=e.getParent(n,"LI,TD,TH,SUMMARY"))&&void 0!==o?o:s;i=e.getParent(Le(n)?n.parentNode:n,d=>d!==s&&KE(e.schema,d),c)}if(i&&Jo(a)&&a.wrapper&&(i=$v(e,i,"ul,ol").reverse()[0]||i),!i)for(i=n;i&&i[r]&&!e.isBlock(i[r])&&(i=i[r],!bh(i,"br")););return i||n},Yv=(e,t,n,r)=>{const o=n.parentNode;return!N(n[r])&&(!(o!==t&&!C(o)&&!e.isBlock(o))||Yv(e,t,o,r))},qc=(e,t,n,r,o)=>{let i=n;const s=o?"previousSibling":"nextSibling",a=e.getRoot();if(Le(n)&&!Hv(n)&&(o?r>0:r<n.data.length))return n;for(;i;){if(!t[0].block_expand&&e.isBlock(i))return i;for(let d=i[s];d;d=d[s]){const f=Le(d)&&!Yv(e,a,d,s);if(!oa(d)&&(!Cn(c=d)||!c.getAttribute("data-mce-bogus")||c.nextSibling)&&!Hv(d,f))return i}if(i===a||i.parentNode===a){n=i;break}i=i.parentNode}var c;return n},Xv=e=>oa(e.parentNode)||oa(e),ps=(e,t,n,r=!1)=>{let{startContainer:o,startOffset:i,endContainer:s,endOffset:a}=t;const c=n[0];return Ke(o)&&o.hasChildNodes()&&(o=Di(o,i),Le(o)&&(i=0)),Ke(s)&&s.hasChildNodes()&&(s=Di(s,t.collapsed?a:a-1),Le(s)&&(a=s.data.length)),o=qv(e,o),s=qv(e,s),Xv(o)&&(o=oa(o)?o:o.parentNode,o=t.collapsed?o.previousSibling||o:o.nextSibling||o,Le(o)&&(i=t.collapsed?o.length:0)),Xv(s)&&(s=oa(s)?s:s.parentNode,s=t.collapsed?s.nextSibling||s:s.previousSibling||s,Le(s)&&(a=t.collapsed?0:s.length)),t.collapsed&&(Wv(e,e.getRoot(),o,i,!0,r).each(({container:d,offset:f})=>{o=d,i=f}),Wv(e,e.getRoot(),s,a,!1,r).each(({container:d,offset:f})=>{s=d,a=f})),(Un(c)||c.block_expand)&&(Un(c)&&Le(o)&&0!==i||(o=qc(e,n,o,i,!0)),Un(c)&&Le(s)&&a!==s.data.length||(s=qc(e,n,s,a,!1))),Ch(c)&&(o=Vv(e,n,t,o,"previousSibling"),s=Vv(e,n,t,s,"nextSibling")),(Jo(c)||Qr(c))&&(o=Kv(e,n,o,"previousSibling"),s=Kv(e,n,s,"nextSibling"),Jo(c)&&(e.isBlock(o)||(o=qc(e,n,o,i,!0)),e.isBlock(s)||(s=qc(e,n,s,a,!1)))),Ke(o)&&o.parentNode&&(i=e.nodeIndex(o),o=o.parentNode),Ke(s)&&s.parentNode&&(a=e.nodeIndex(s)+1,s=s.parentNode),{startContainer:o,startOffset:i,endContainer:s,endOffset:a}},gl=(e,t,n)=>{var r;const o=t.startOffset,i=Di(t.startContainer,o),s=t.endOffset,a=Di(t.endContainer,s-1),c=b=>{const T=b[0];Le(T)&&T===i&&o>=T.data.length&&b.splice(0,1);const O=b[b.length-1];return 0===s&&b.length>0&&O===a&&Le(O)&&b.splice(b.length-1,1),b},d=(b,T,O)=>{const P=[];for(;b&&b!==O;b=b[T])P.push(b);return P},f=(b,T)=>e.getParent(b,O=>O.parentNode===T,T),p=(b,T,O)=>{const P=O?"nextSibling":"previousSibling";for(let z=b,M=z.parentNode;z&&z!==T;z=M){M=z.parentNode;const Y=d(z===b?z:z[P],P);Y.length&&(O||Y.reverse(),n(c(Y)))}};if(i===a)return n(c([i]));const v=null!==(r=e.findCommonAncestor(i,a))&&void 0!==r?r:e.getRoot();if(e.isChildOf(i,a))return p(i,v,!0);if(e.isChildOf(a,i))return p(a,v);const w=f(i,v)||i,y=f(a,v)||a;p(i,w,!0);const S=d(w===i?w:w.nextSibling,"nextSibling",y===a?y.nextSibling:y);S.length&&n(c(S)),p(a,y)},GE=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Gv=(e,t,n,r,o,i)=>{const{uid:s=t,...a}=n;le(e,Ga()),In(e,`${Ys()}`,s),In(e,`${ss()}`,r);const{attributes:c={},classes:d=[]}=o(s,a);if(qr(e,c),f=e,ye(d,v=>{le(f,v)}),i){d.length>0&&In(e,`${Qa()}`,d.join(","));const f=An(c);f.length>0&&In(e,`${Za()}`,f.join(","))}var f},Jv=(e,t,n,r,o)=>{const i=je("span",e);return Gv(i,t,n,r,o,!1),i},Qv=e=>{const t=(()=>{const i={};return{register:(s,a)=>{i[s]={name:s,settings:a}},lookup:s=>Gt(i,s).map(a=>a.settings),getNames:()=>An(i)}})();((i,s)=>{const a=ss(),c=f=>R.from(f.attr(a)).bind(s.lookup),d=f=>{var p,v;f.attr(Ys(),null),f.attr(ss(),null),f.attr(Ja(),null);const w=R.from(f.attr(Za())).map(T=>T.split(",")).getOr([]),y=R.from(f.attr(Qa())).map(T=>T.split(",")).getOr([]);ye(w,T=>f.attr(T,null));const S=null!==(v=null===(p=f.attr("class"))||void 0===p?void 0:p.split(" "))&&void 0!==v?v:[],b=Ye(S,[Ga()].concat(y));f.attr("class",b.length>0?b.join(" "):null),f.attr(Qa(),null),f.attr(Za(),null)};i.serializer.addTempAttr(Ja()),i.serializer.addAttributeFilter(a,f=>{for(const p of f)c(p).each(v=>{!1===v.persistent&&("span"===p.name?p.unwrap():d(p))})})})(e,t);const n=((i,s)=>{const a=Jn({}),c=()=>({listeners:[],previous:Pi()}),d=(w,y)=>{f(w,S=>(y(S),S))},f=(w,y)=>{const S=a.get(),b=y(Gt(S,w).getOrThunk(c));S[w]=b,a.set(S)},p=(w,y)=>{ye(lm(i,w),S=>{y?In(S,Ja(),"true"):h(S,Ja())})},v=$u(()=>{const w=qt(s.getNames());ye(w,y=>{f(y,S=>{const b=S.previous.get();return sm(i,R.some(y)).fold(()=>{b.each(T=>{var O;d(O=y,P=>{ye(P.listeners,z=>z(!1,O))}),S.previous.clear(),p(T,!1)})},({uid:T,name:O,elements:P})=>{var z,M,Y;wi(b,T)||(b.each(z=>p(z,!1)),M=T,Y=P,d(z=O,te=>{ye(te.listeners,ie=>ie(!0,z,{uid:M,nodes:ut(Y,ce=>ce.dom)}))}),S.previous.set(T),p(T,!0))}),{previous:S.previous,listeners:S.listeners}})})},30);return i.on("remove",()=>{v.cancel()}),i.on("NodeChange",()=>{v.throttle()}),{addListener:(w,y)=>{f(w,S=>({previous:S.previous,listeners:S.listeners.concat([y])}))}}})(e,t),r=$o("span"),o=i=>{ye(i,s=>{r(s)?fn(s):(a=>{ve(a,Ga()),h(a,`${Ys()}`),h(a,`${ss()}`),h(a,`${Ja()}`);const c=No(a,`${Za()}`).map(p=>p.split(",")).getOr([]),d=No(a,`${Qa()}`).map(p=>p.split(",")).getOr([]);var f;ye(c,p=>h(a,p)),f=a,ye(d,p=>{ve(f,p)}),h(a,`${Qa()}`),h(a,`${Za()}`)})(s)})};return{register:(i,s)=>{t.register(i,s)},annotate:(i,s)=>{t.lookup(i).each(a=>{var c,d,f,p;d=i,f=a,p=s,(c=e).undoManager.transact(()=>{const v=c.selection,w=v.getRng(),y=na(c).length>0,S=el("mce-annotation");if(w.collapsed&&!y&&((b,T)=>{const O=ps(b.dom,T,[{inline:"span"}]);T.setStart(O.startContainer,O.startOffset),T.setEnd(O.endContainer,O.endOffset),b.selection.setRng(T)})(c,w),v.getRng().collapsed&&!y){const b=Jv(c.getDoc(),S,p,d,f.decorate);ar(b,Xn),v.getRng().insertNode(b.dom),v.select(b.dom)}else Lv(v,!1,()=>{mh(c,b=>{((e,t,n,r,o,i)=>{const s=[],a=Jv(e.getDoc(),n,i,r,o),c=Pi(),d=()=>{c.clear()},f=v=>{ye(v,p)},p=v=>{switch(w=e,y=v,S="span",b=It(v),ur(y).fold(()=>"skipping",T=>{return"br"===b||kr(O=y)&&mc(O)===Gn?"valid":(O=>vr(O)&&Se(O,Ga()))(y)?"existing":Gr(y.dom)?"caret":Kt(GE,O=>cn(y,O))?"valid-block":ra(w,S,b)&&ra(w,It(T),S)?"valid":"invalid-child";var O})){case"invalid-child":{d();const w=rn(v);f(w),d();break}case"valid-block":d(),Gv(v,n,i,r,o,!0);break;case"valid":{const w=c.get().getOrThunk(()=>{const y=as(a);return s.push(y),c.set(y),y});zt(v,w);break}}var w,y,S,b};gl(e.dom,t,v=>{d(),(w=>{const y=ut(w,X);f(y)})(v)})})(c,b,S,d,f.decorate,p)})})})})},annotationChanged:(i,s)=>{n.addListener(i,s)},remove:i=>{sm(e,R.some(i)).each(({elements:s})=>{const a=e.selection.getBookmark();o(s),e.selection.moveToBookmark(a)})},removeAll:i=>{const s=e.selection.getBookmark();Wt(cm(e,i),(a,c)=>{o(a)}),e.selection.moveToBookmark(s)},getAll:i=>{const s=cm(e,i);return uo(s,a=>ut(a,c=>c.dom))}}},ml=e=>({getBookmark:ge(UE,e),moveToBookmark:ge(WE,e)});ml.isBookmarkNode=Jr;const Zv=(e,t,n)=>!n.collapsed&&Kt(n.getClientRects(),r=>{return s=t,(i=e)>=(o=r).left&&i<=o.right&&s>=o.top&&s<=o.bottom;var o,i,s}),e_=(e,t,n)=>{e.dispatch(t,n)},t_=(e,t,n,r)=>{e.dispatch("FormatApply",{format:t,node:n,vars:r})},n_=(e,t,n,r)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:r})},r_=(e,t)=>e.dispatch("SetContent",t),o_=(e,t)=>e.dispatch("GetContent",t),i_=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),qe={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||qe.metaKeyPressed(e),metaKeyPressed:e=>$t.os.isMacOS()||$t.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},gs="data-mce-selected",s_=Math.abs,Uc=Math.round,Sh={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},a_=(e,t)=>{const n=t.dom,r=t.getDoc(),o=document,i=t.getBody();let s,a,c,d,f,p,v,w,y,S,b,T,O,P,z;const M=He=>N(He)&&(kg(He)||n.is(He,"figure.image")),Y=He=>Vo(He)||n.hasClass(He,"mce-preview-object"),te=He=>{const We=He.target;((yt,ee)=>{if("longpress"===(oe=yt).type||0===oe.type.indexOf("touch")){const oe=yt.touches[0];return M(yt.target)&&!Zv(oe.clientX,oe.clientY,ee)}var oe;return M(yt.target)&&!Zv(yt.clientX,yt.clientY,ee)})(He,t.selection.getRng())&&!He.isDefaultPrevented()&&t.selection.select(We)},ie=He=>n.hasClass(He,"mce-preview-object")&&N(He.firstElementChild)?[He,He.firstElementChild]:n.is(He,"figure.image")?[He.querySelector("img")]:[He],ce=He=>{const We=Qm(t);return!!We&&"false"!==He.getAttribute("data-mce-resize")&&He!==t.getBody()&&(n.hasClass(He,"mce-preview-object")&&N(He.firstElementChild)?cn(X(He.firstElementChild),We):cn(X(He),We))},fe=(He,We,yt)=>{if(N(yt)){const ee=ie(He);ye(ee,oe=>{oe.style[We]||!t.schema.isValid(oe.nodeName.toLowerCase(),We)?n.setStyle(oe,We,yt):n.setAttrib(oe,We,""+yt)})}},Q=(He,We,yt)=>{fe(He,"width",We),fe(He,"height",yt)},ne=He=>{let We,yt,ee,oe,Ce;We=He.screenX-p,yt=He.screenY-v,T=We*d[2]+w,O=yt*d[3]+y,T=T<5?5:T,O=O<5?5:O,ee=(M(s)||Y(s))&&!1!==DS(t)?!qe.modifierPressed(He):qe.modifierPressed(He),ee&&(s_(We)>s_(yt)?(O=Uc(T*S),T=Uc(O/S)):(T=Uc(O/S),O=Uc(T*S))),Q(a,T,O),oe=d.startPos.x+We,Ce=d.startPos.y+yt,oe=oe>0?oe:0,Ce=Ce>0?Ce:0,n.setStyles(c,{left:oe,top:Ce,display:"block"}),c.innerHTML=T+" &times; "+O,d[2]<0&&a.clientWidth<=T&&n.setStyle(a,"left",void 0+(w-T)),d[3]<0&&a.clientHeight<=O&&n.setStyle(a,"top",void 0+(y-O)),We=i.scrollWidth-P,yt=i.scrollHeight-z,We+yt!==0&&n.setStyles(c,{left:oe-We,top:Ce-yt}),b||(t.dispatch("ObjectResizeStart",{target:s,width:w,height:y,origin:"corner-"+d.name}),b=!0)},de=()=>{const He=b;b=!1,He&&(fe(s,"width",T),fe(s,"height",O)),n.unbind(r,"mousemove",ne),n.unbind(r,"mouseup",de),o!==r&&(n.unbind(o,"mousemove",ne),n.unbind(o,"mouseup",de)),n.remove(a),n.remove(c),n.remove(f),xe(s),He&&(t.dispatch("ObjectResized",{target:s,width:T,height:O,origin:"corner-"+d.name}),n.setAttrib(s,"style",n.getAttrib(s,"style"))),t.nodeChanged()},xe=He=>{lt();const We=n.getPos(He,i),yt=We.x,ee=We.y,oe=He.getBoundingClientRect(),Ce=oe.width||oe.right-oe.left,Te=oe.height||oe.bottom-oe.top;s!==He&&(Me(),s=He,T=O=0);const Ae=t.dispatch("ObjectSelected",{target:He});ce(He)&&!Ae.isDefaultPrevented()?Wt(Sh,(Ve,st)=>{let bt=n.get("mceResizeHandle"+st);bt&&n.remove(bt),bt=n.add(i,"div",{id:"mceResizeHandle"+st,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+st+"-resize; margin:0; padding:0"}),n.bind(bt,"mousedown",dt=>{dt.stopImmediatePropagation(),dt.preventDefault(),(en=>{const Xe=ie(s)[0];var At;p=en.screenX,v=en.screenY,w=Xe.clientWidth,y=Xe.clientHeight,S=y/w,d=Ve,d.name=st,d.startPos={x:Ce*Ve[0]+yt,y:Te*Ve[1]+ee},P=i.scrollWidth,z=i.scrollHeight,f=n.add(i,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(f,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),a=Y(At=s)?n.create("img",{src:$t.transparentSrc}):At.cloneNode(!0),n.addClass(a,"mce-clonedresizable"),n.setAttrib(a,"data-mce-bogus","all"),a.contentEditable="false",n.setStyles(a,{left:yt,top:ee,margin:0}),Q(a,Ce,Te),a.removeAttribute(gs),i.appendChild(a),n.bind(r,"mousemove",ne),n.bind(r,"mouseup",de),o!==r&&(n.bind(o,"mousemove",ne),n.bind(o,"mouseup",de)),c=n.add(i,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},w+" &times; "+y)})(dt)}),Ve.elm=bt,n.setStyles(bt,{left:Ce*Ve[0]+yt-bt.offsetWidth/2,top:Te*Ve[1]+ee-bt.offsetHeight/2})}):Me(!1)},Fe=Tc(xe,0),Me=(He=!0)=>{Fe.cancel(),lt(),s&&He&&s.removeAttribute(gs),Wt(Sh,(We,yt)=>{const ee=n.get("mceResizeHandle"+yt);ee&&(n.unbind(ee),n.remove(ee))})},nt=(He,We)=>n.isChildOf(He,We),Ze=He=>{if(b||t.removed||t.composing)return;const We="mousedown"===He.type?He.target:e.getNode(),yt=Oo(X(We),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(oe=>oe.dom).filter(oe=>n.isEditable(oe.parentElement)||"IMG"===oe.nodeName&&n.isEditable(oe)).getOrUndefined(),ee=N(yt)?n.getAttrib(yt,gs,"1"):"1";if(ye(n.select(`img[${gs}],hr[${gs}]`),oe=>{oe.removeAttribute(gs)}),N(yt)&&nt(yt,i)&&t.hasFocus()){ot();const oe=e.getStart(!0);if(nt(oe,yt)&&nt(e.getEnd(!0),yt))return n.setAttrib(yt,gs,ee),void Fe.throttle(yt)}Me()},lt=()=>{Wt(Sh,He=>{He.elm&&(n.unbind(He.elm),delete He.elm)})},ot=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{ot(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Ze),t.on("keyup compositionend",He=>{s&&"TABLE"===s.nodeName&&Ze(He)}),t.on("hide blur",Me),t.on("contextmenu longpress",te,!0)}),t.on("remove",lt),{isResizable:ce,showResizeRect:xe,hideResizeRect:Me,updateResizeRect:Ze,destroy:()=>{Fe.cancel(),s=a=f=null}}},l_=(e,t,n)=>{const r=e.document.createRange();var o,i;return o=r,t.fold(i=>{o.setStartBefore(i.dom)},(i,s)=>{o.setStart(i.dom,s)},i=>{o.setStartAfter(i.dom)}),i=r,n.fold(a=>{i.setEndBefore(a.dom)},(a,c)=>{i.setEnd(a.dom,c)},a=>{i.setEndAfter(a.dom)}),r},Eh=(e,t,n,r,o)=>{const i=e.document.createRange();return i.setStart(t.dom,n),i.setEnd(r.dom,o),i},vl=Ko([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),c_=(e,t,n)=>t(X(n.startContainer),n.startOffset,X(n.endContainer),n.endOffset),d_=(e,t,n,r)=>({start:e,soffset:t,finish:n,foffset:r}),QE=document.caretPositionFromPoint?(e,t,n)=>{var r,o;return R.from(null===(o=(r=e.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,t,n)).bind(i=>{if(null===i.offsetNode)return R.none();const s=e.dom.createRange();return s.setStart(i.offsetNode,i.offset),s.collapse(),R.some(s)})}:document.caretRangeFromPoint?(e,t,n)=>{var r,o;return R.from(null===(o=(r=e.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,t,n))}:R.none,Th=Ko([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),hi={before:Th.before,on:Th.on,after:Th.after,cata:(e,t,n,r)=>e.fold(t,n,r),getStart:e=>e.fold(K,K,K)},Wc=Ko([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ia={domRange:Wc.domRange,relative:Wc.relative,exact:Wc.exact,exactFromRange:e=>Wc.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=e.match({domRange:r=>X(r.startContainer),relative:(r,o)=>hi.getStart(r),exact:(r,o,i,s)=>r});return _n(t)},range:d_},Vc=(e,t)=>{const n=It(e);return"input"===n?hi.after(e):Oe(["br","img"],n)?0===t?hi.before(e):hi.after(e):hi.on(e,t)},ZE=(e,t)=>{const n=e.fold(hi.before,Vc,hi.after),r=t.fold(hi.before,Vc,hi.after);return ia.relative(n,r)},u_=(e,t,n,r)=>{const o=Vc(e,t),i=Vc(n,r);return ia.relative(o,i)},Nh=(e,t)=>{const n=(t||document).createDocumentFragment();return ye(e,r=>{n.appendChild(r.dom)}),X(n)},h_=(e,t,n)=>{return(r=_n(X(n)).dom,o=e,i=t,((s,a,c)=>{const d=X(s.document);return QE(d,a,c).map(f=>d_(X(f.startContainer),f.startOffset,X(f.endContainer),f.endOffset))})(r,o,i)).map(r=>{const o=n.createRange();return o.setStart(r.start.dom,r.soffset),o.setEnd(r.finish.dom,r.foffset),o}).getOrUndefined();var r,o,i},Ah=(e,t)=>N(e)&&N(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,f_=(e,t,n)=>null!==((r,o,i)=>{let s=r;for(;s&&s!==o;){if(i(s))return s;s=s.parentNode}return null})(e,t,n),tT=(e,t,n)=>f_(e,t,r=>r.nodeName===n),nT=(e,t)=>Yr(e)&&!f_(e,t,Gr),p_=(e,t,n)=>{const r=t.parentNode;if(r){const o=new qn(t,e.getParent(r,e.isBlock)||e.getRoot());let i;for(;i=o[n?"prev":"next"]();)if(Cn(i))return!0}return!1},Oh=(e,t,n,r,o)=>{const i=e.getRoot(),s=e.schema.getNonEmptyElements(),a=o.parentNode;let c,d;if(!a)return R.none();const f=e.getParent(a,e.isBlock)||i;if(r&&Cn(o)&&t&&e.isEmpty(f))return R.some(_e(a,e.nodeIndex(o)));const p=new qn(o,f);for(;d=p[r?"prev":"next"]();){if("false"===e.getContentEditableParent(d)||nT(d,i))return R.none();if(Le(d)&&d.data.length>0)return tT(d,i,"A")?R.none():R.some(_e(d,r?d.data.length:0));if(e.isBlock(d)||s[d.nodeName.toLowerCase()])return R.none();c=d}return Ti(c)?R.none():n&&c?R.some(_e(c,0)):R.none()},g_=(e,t,n,r)=>{const o=e.getRoot();let i,s=!1,a=n?r.startContainer:r.endContainer,c=n?r.startOffset:r.endOffset;const d=Ke(a)&&c===a.childNodes.length,f=e.schema.getNonEmptyElements();let p=n;if(Yr(a))return R.none();if(Ke(a)&&c>a.childNodes.length-1&&(p=!1),Fa(a)&&(a=o,c=0),a===o){if(p&&(i=a.childNodes[c>0?c-1:0],i)&&(Yr(i)||f[i.nodeName]||di(i)))return R.none();if(a.hasChildNodes()){if(c=Math.min(!p&&c>0?c-1:c,a.childNodes.length-1),a=a.childNodes[c],c=Le(a)&&d?a.data.length:0,!t&&a===o.lastChild&&di(a)||((v,w)=>{let y=w;for(;y&&y!==v;){if(sn(y))return!0;y=y.parentNode}return!1})(o,a)||Yr(a)||pu(a))return R.none();if(a.hasChildNodes()&&!di(a)){i=a;const v=new qn(a,o);do{if(sn(i)||Yr(i)){s=!1;break}if(Le(i)&&i.data.length>0){c=p?0:i.data.length,a=i,s=!0;break}if(f[i.nodeName.toLowerCase()]&&!_k(i)){c=e.nodeIndex(i),a=i.parentNode,p||c++,s=!0;break}}while(i=p?v.next():v.prev())}}}return t&&(Le(a)&&0===c&&Oh(e,d,t,!0,a).each(v=>{a=v.container(),c=v.offset(),s=!0}),Ke(a)&&(i=a.childNodes[c],i||(i=a.childNodes[c-1]),!i||!Cn(i)||"A"===(null===(y=i.previousSibling)||void 0===y?void 0:y.nodeName)||p_(e,i,!1)||p_(e,i,!0)||Oh(e,d,t,!0,i).each(v=>{a=v.container(),c=v.offset(),s=!0}))),p&&!t&&Le(a)&&c===a.data.length&&Oh(e,d,t,!1,a).each(v=>{a=v.container(),c=v.offset(),s=!0}),s&&a?R.some(_e(a,c)):R.none();var y},Kc=(e,t)=>{const n=t.collapsed,r=t.cloneRange(),o=_e.fromRangeStart(t);return g_(e,n,!0,r).each(i=>{n&&_e.isAbove(o,i)||r.setStart(i.container(),i.offset())}),n||g_(e,n,!1,r).each(i=>{r.setEnd(i.container(),i.offset())}),n&&r.collapse(!0),Ah(t,r)?R.none():R.some(r)},Yc=(e,t)=>e.splitText(t),Xc=e=>{let t=e.startContainer,n=e.startOffset,r=e.endContainer,o=e.endOffset;if(t===r&&Le(t)){if(n>0&&n<t.data.length)if(r=Yc(t,n),t=r.previousSibling,o>n){o-=n;const i=Yc(r,o).previousSibling;t=r=i,o=i.data.length,n=0}else o=0}else if(Le(t)&&n>0&&n<t.data.length&&(t=Yc(t,n),n=0),Le(r)&&o>0&&o<r.data.length){const i=Yc(r,o).previousSibling;r=i,o=i.data.length}return{startContainer:t,startOffset:n,endContainer:r,endOffset:o}},ms=e=>({walk:(t,n)=>gl(e,t,n),split:Xc,expand:(t,n={type:"word"})=>{if("word"===n.type){const r=ps(e,t,[{inline:"span"}]),o=e.createRng();return o.setStart(r.startContainer,r.startOffset),o.setEnd(r.endContainer,r.endOffset),o}return t},normalize:t=>Kc(e,t).fold(Tt,n=>(t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),!0))});ms.compareRanges=Ah,ms.getCaretRangeFromPoint=h_,ms.getSelectedNode=Nc,ms.getNode=Di;const rT=((e,t)=>{const n=o=>{const i=(s=>{const a=s.dom;return Ir(s)?a.getBoundingClientRect().height:a.offsetHeight})(o);if(i<=0||null===i){const s=he(o,e);return parseFloat(s)||0}return i},r=(o,i)=>Ge(i,(s,a)=>{const c=he(o,a),d=void 0===c?0:parseInt(c,10);return isNaN(d)?s:s+d},0);return{set:(o,i)=>{if(!m(i)&&!i.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+i);const s=o.dom;li(s)&&(s.style[e]=i+"px")},get:n,getOuter:n,aggregate:r,max:(o,i,s)=>{const a=r(o,s);return i>a?i-a:0}}})("height"),m_=()=>X(document),v_=(e,t)=>e.view(t).fold(G([]),n=>{const r=e.owner(n),o=v_(e,r);return[n].concat(o)});var oT=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?R.none():R.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(X)},owner:e=>Ut(e)});const Rh=e=>"textarea"===It(e),__=(e,t)=>{const n=(o=>{const i=o.dom.ownerDocument,s=i.body,a=i.defaultView,c=i.documentElement;if(s===o.dom)return zr(s.offsetLeft,s.offsetTop);const d=Er(a?.pageYOffset,c.scrollTop),f=Er(a?.pageXOffset,c.scrollLeft),p=Er(c.clientTop,s.clientTop),v=Er(c.clientLeft,s.clientLeft);return Ei(o).translate(f-v,d-p)})(e),r=rT.get(e);return{element:e,bottom:n.top+r,height:r,pos:n,cleanup:t}},y_=(e,t,n,r)=>{sT(e,(o,i)=>iT(e,t,n,r),n)},b_=(e,t,n,r,o)=>{const i={elm:r.element.dom,alignToTop:o};e.dispatch("ScrollIntoView",i).isDefaultPrevented()||(n(e,t,qs(t).top,r,o),e.dispatch("AfterScrollIntoView",i))},iT=(e,t,n,r)=>{X(e.getBody());const i=X(e.getDoc()),s=((a,c)=>{const d=((p,v)=>{const w=rn(p);if(0===w.length||Rh(p))return{element:p,offset:v};if(v<w.length&&!Rh(w[v]))return{element:w[v],offset:0};{const y=w[w.length-1];return Rh(y)?{element:p,offset:v}:"img"===It(y)?{element:y,offset:1}:kr(y)?{element:y,offset:mc(y).length}:{element:y,offset:rn(y).length}}})(a,c),f=be('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return Qe(d.element,f),__(f,()=>rt(f))})(X(n.startContainer),n.startOffset);b_(e,i,t,s,r),s.cleanup()},w_=(e,t,n,r)=>{const o=X(e.getDoc());b_(e,o,n,__(X(t),F),r)},sT=(e,t,n)=>{const r=n.startContainer,o=n.startOffset,i=n.endContainer,s=n.endOffset;t(X(r),X(i));const a=e.dom.createRng();a.setStart(r,o),a.setEnd(i,s),e.selection.setRng(n)},jh=(e,t,n,r,o)=>{const i=t.pos;if(r)Ia(i.left,i.top,o);else{const s=i.top-n+t.height;Ia(-e.getBody().getBoundingClientRect().left,s,o)}},x_=(e,t,n,r,o,i)=>{const s=r+n,a=o.pos.top,c=o.bottom,d=c-a>=r;a<n?jh(e,o,r,!1!==i,t):a>s?jh(e,o,r,d?!1!==i:!0===i,t):c>s&&!d&&jh(e,o,r,!0===i,t)},C_=(e,t,n,r,o)=>{const i=_n(t).dom.innerHeight;x_(e,t,n,i,r,o)},k_=(e,t,n,r,o)=>{const i=_n(t).dom.innerHeight;x_(e,t,n,i,r,o);const s=(c=>{const d=m_(),f=qs(d),p=((y,S)=>{const b=S.owner(y);return v_(S,b)})(c,oT),v=Ei(c),w=Vn(p,(y,S)=>{const b=Ei(S);return{left:y.left+b.left,top:y.top+b.top}},{left:0,top:0});return zr(w.left+v.left+f.left,w.top+v.top+f.top)})(r.element),a=yg(window);s.top<a.y?hc(r.element,!1!==o):s.top>a.bottom&&hc(r.element,!0===o)},aT=(e,t,n)=>y_(e,C_,t,n),lT=(e,t,n)=>w_(e,t,C_,n),cT=(e,t,n)=>y_(e,k_,t,n),dT=(e,t,n)=>w_(e,t,k_,n),_l=(e,t,n)=>{(e.inline?aT:cT)(e,t,n)},S_=(e,t=!1)=>e.dom.focus({preventScroll:t}),E_=e=>{const t=dn(e).dom;return e.dom===t.activeElement},Ph=(e=m_())=>R.from(e.dom.activeElement).map(X),T_=(e,t)=>{const n=kr(t)?mc(t).length:rn(t).length+1;return e>n?n:e<0?0:e},uT=e=>ia.range(e.start,T_(e.soffset,e.start),e.finish,T_(e.foffset,e.finish)),N_=(e,t)=>!fc(t.dom)&&(Ht(e,t)||Lt(e,t)),A_=e=>t=>N_(e,t.start)&&N_(e,t.finish),hT=e=>ia.range(X(e.startContainer),e.startOffset,X(e.endContainer),e.endOffset),fT=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),R.some(t)}catch{return R.none()}},Dh=e=>{const t=e.inline||$t.browser.isFirefox()?(n=X(e.getBody()),(r=>{const o=r.getSelection();return(o&&0!==o.rangeCount?R.from(o.getRangeAt(0)):R.none()).map(hT)})(_n(n).dom).filter(A_(n))):R.none();var n;e.bookmark=t.isSome()?t:e.bookmark},Lh=e=>(e.bookmark?e.bookmark:R.none()).bind(t=>{return n=X(e.getBody()),R.from(t).filter(A_(n)).map(uT);var n}).bind(fT),O_={isEditorUIElement:e=>{const t=e.className.toString();return-1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},Zr={setEditorTimeout:(e,t,n)=>{return m(o=n)||(o=0),setTimeout(()=>{e.removed||t()},o);var o},setEditorInterval:(e,t,n)=>{const r=(m(i=n)||(i=0),setInterval(()=>{e.removed?clearInterval(r):t()},i));var i;return r}};let sa;const Bh=nn.DOM,Mh=e=>{const t=e.classList;return void 0!==t&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},Gc=(e,t)=>{const n=qS(e);return null!==Bh.getParent(t,o=>{return Ke(i=o)&&O_.isEditorUIElement(i)||!!n&&e.dom.is(o,n);var i})},Ih=e=>{try{const t=dn(X(e.getElement()));return Ph(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},pT=(e,t)=>{const n=t.editor;(o=>{const i=Tc(()=>{Dh(o)},0);o.on("init",()=>{var s,d;o.inline&&((s,a)=>{const c=()=>{a.throttle()};nn.DOM.bind(document,"mouseup",c),s.on("remove",()=>{nn.DOM.unbind(document,"mouseup",c)})})(o,i),d=i,(s=o).on("mouseup touchend",f=>{d.throttle()}),s.on("keyup NodeChange AfterSetSelectionRange",c=>{(d=>"nodechange"===d.type&&d.selectionChange)(c)||Dh(s)})}),o.on("remove",()=>{i.cancel()})})(n);const r=(o,i)=>{kE(o)&&!0!==o.inline&&i(X(o.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const o=e.focusedEditor;Mh(Ih(n))&&r(n,le),o!==n&&(o&&o.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:o}),n.focus(!0))}),n.on("focusout",()=>{Zr.setEditorTimeout(n,()=>{const o=e.focusedEditor;Mh(Ih(n))&&o===n||r(n,ve),Gc(n,Ih(n))||o!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),sa||(sa=o=>{const i=e.activeEditor;i&&ai(o).each(s=>{s.ownerDocument===document&&(s===document.body||Gc(i,s)||e.focusedEditor!==i||(i.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null))})},Bh.bind(document,"focusin",sa))},gT=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&sa&&(Bh.unbind(document,"focusin",sa),sa=null)},R_=(e,t)=>{var n,r,o;(n=X(e.getBody()),r=t,(o=r,o.collapsed?R.from(Di(o.startContainer,o.startOffset)).map(X):R.none()).bind(o=>wk(o)?R.some(o):Ht(n,o)?R.none():R.some(n))).bind(n=>gr(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},zh=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},vs=e=>{return e.inline?(t=>{const n=t.getBody();return n&&(r=X(n),E_(r)||(o=r,Ph(dn(o)).filter(i=>o.dom.contains(i.dom))).isSome());var r,o})(e):N((t=e).iframeElement)&&E_(X(t.iframeElement));var t},j_=e=>vs(e)||(t=>{const n=dn(X(t.getElement()));return Ph(n).filter(r=>!Mh(r.dom)&&Gc(t,r.dom)).isSome()})(e),Fh=e=>e.editorManager.setActive(e),P_=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),D_=(e,t,n,r,o)=>{const s=n?t.startOffset:t.endOffset;return R.from(n?t.startContainer:t.endContainer).map(X).map(a=>r&&t.collapsed?a:Rn(a,o(a,s)).getOr(a)).bind(a=>vr(a)?R.some(a):ur(a).filter(vr)).map(a=>a.dom).getOr(e)},L_=(e,t,n=!1)=>D_(e,t,!0,n,(r,o)=>Math.min(vo(r),o)),B_=(e,t,n=!1)=>D_(e,t,!1,n,(r,o)=>o>0?o-1:o),M_=(e,t)=>{const n=e;for(;e&&Le(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},$h=(e,t)=>ut(t,n=>{const r=e.dispatch("GetSelectionRange",{range:n});return r.range!==n?r.range:n}),mT=["img","br"],I_=e=>{return Sg(e).filter(n=>0!==n.trim().length||n.indexOf(Xn)>-1).isSome()||Oe(mT,It(e))||Ci(n=e)&&"false"===Sr(n,"contenteditable");var n},z_="[data-mce-autocompleter]",F_=e=>Wo(e,z_),_T={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Jc=(e,t,n)=>{const r=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[r])return e[r];if(e!==t){let i=e[o];if(i)return i;for(let s=e.parent;s&&s!==t;s=s.parent)if(i=s[o],i)return i}},yT=e=>{var t;const n=null!==(t=e.value)&&void 0!==t?t:"";if(!Oi(n))return!1;const r=e.parent;return!r||"span"===r.name&&!r.attr("style")||!/^[ ]+$/.test(n)},$_=e=>{const t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class yr{static create(t,n){const r=new yr(t,_T[t]||1);return n&&Wt(n,(o,i)=>{r.attr(i,o)}),r}constructor(t,n){this.name=t,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const r=this;if(!U(t))return N(t)&&Wt(t,(i,s)=>{r.attr(s,i)}),r;const o=r.attributes;if(o){if(void 0!==n){if(null===n){if(t in o.map){delete o.map[t];let i=o.length;for(;i--;)if(o[i].name===t)return o.splice(i,1),r}return r}if(t in o.map){let i=o.length;for(;i--;)if(o[i].name===t){o[i].value=n;break}}else o.push({name:t,value:n});return o.map[t]=n,r}return o.map[t]}}clone(){const t=this,n=new yr(t.name,t.type),r=t.attributes;if(r){const o=[];o.map={};for(let i=0,s=r.length;i<s;i++){const a=r[i];"id"!==a.name&&(o[o.length]={name:a.name,value:a.value},o.map[a.name]=a.value)}n.attributes=o}return n.value=t.value,n}wrap(t){const n=this;return n.parent&&(n.parent.insert(t,n),t.append(n)),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const r=n.next;t.insert(n,t,!0),n=r}t.remove()}remove(){const t=this,n=t.parent,r=t.next,o=t.prev;return n&&(n.firstChild===t?(n.firstChild=r,r&&(r.prev=null)):o&&(o.next=r),n.lastChild===t?(n.lastChild=o,o&&(o.next=null)):r&&(r.prev=o),t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const r=n.lastChild;return r?(r.next=t,t.prev=r,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,r){t.parent&&t.remove();const o=n.parent||this;return r?(n===o.firstChild?o.firstChild=t:n.prev&&(n.prev.next=t),t.prev=n.prev,t.next=n,n.prev=t):(n===o.lastChild?o.lastChild=t:n.next&&(n.next.prev=t),t.next=n.next,t.prev=n,n.next=t),t.parent=o,t}getAll(t){const n=this,r=[];for(let o=n.firstChild;o;o=Jc(o,n))o.name===t&&r.push(o);return r}children(){const t=[];for(let n=this.firstChild;n;n=n.next)t.push(n);return t}empty(){const t=this;if(t.firstChild){const n=[];for(let o=t.firstChild;o;o=Jc(o,t))n.push(o);let r=n.length;for(;r--;){const o=n[r];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},r){var o;const i=this;let s=i.firstChild;if($_(i))return!1;if(s)do{if(1===s.type){if(s.attr("data-mce-bogus"))continue;if(t[s.name]||$_(s))return!1}if(8===s.type||3===s.type&&!yT(s)||3===s.type&&s.parent&&n[s.parent.name]&&Oi(null!==(o=s.value)&&void 0!==o?o:"")||r&&r(s))return!1}while(s=Jc(s,i));return!0}walk(t){return Jc(this,null,t)}}const bT=Be.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),H_=e=>U(e.nodeValue)&&e.nodeValue.includes(Gn),q_=e=>(0===e.length?"":`${ut(e,t=>`[${t}]`).join(",")},`)+'[data-mce-bogus="all"]',U_=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,t=>H_(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),W_=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,t=>{if(H_(t)){const n=t.parentNode;return n&&ft(bT,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),wT=e=>null!==U_(e).nextNode(),xT=e=>null!==W_(e).nextNode(),CT=(e,t)=>null!==t.querySelector(q_(e)),kT=(e,t)=>{ye(t.querySelectorAll(q_(e)),n=>{const r=X(n);"all"===Sr(r,"data-mce-bogus")?rt(r):ye(e,o=>{Qi(r,o)&&h(r,o)})})},V_=e=>{let t=e.nextNode();for(;null!==t;)t.nodeValue=null,t=e.nextNode()},ST=L(V_,U_),ET=L(V_,W_),K_=(e,t)=>{const n=[{condition:ge(CT,t),action:ge(kT,t)},{condition:wT,action:ST},{condition:xT,action:ET}];let r=e,o=!1;return ye(n,({condition:i,action:s})=>{i(r)&&(o||(r=e.cloneNode(!0),o=!0),s(r))}),r},Y_=e=>{const t=fr(e,"[data-mce-bogus]");ye(t,n=>{"all"===Sr(n,"data-mce-bogus")?rt(n):ts(n)?(Qe(n,wt("\ufeff")),rt(n)):fn(n)})},X_=e=>{const t=fr(e,"input");ye(t,n=>{h(n,"name")})},G_=Be.makeMap,J_=e=>{const t=[],n=(e=e||{}).indent,r=G_(e.indent_before||""),o=G_(e.indent_after||""),i=Ri.getEncodeFunc(e.entity_encoding||"raw",e.entities),s="xhtml"!==e.element_format;return{start:(a,c,d)=>{if(n&&r[a]&&t.length>0){const f=t[t.length-1];f.length>0&&"\n"!==f&&t.push("\n")}if(t.push("<",a),c)for(let f=0,p=c.length;f<p;f++){const v=c[f];t.push(" ",v.name,'="',i(v.value,!0),'"')}if(t[t.length]=!d||s?">":" />",d&&n&&o[a]&&t.length>0){const f=t[t.length-1];f.length>0&&"\n"!==f&&t.push("\n")}},end:a=>{let c;t.push("</",a,">"),n&&o[a]&&t.length>0&&(c=t[t.length-1],c.length>0&&"\n"!==c&&t.push("\n"))},text:(a,c)=>{a.length>0&&(t[t.length]=c?a:i(a))},cdata:a=>{t.push("<![CDATA[",a,"]]>")},comment:a=>{t.push("\x3c!--",a,"--\x3e")},pi:(a,c)=>{c?t.push("<?",a," ",i(c),"?>"):t.push("<?",a,"?>"),n&&t.push("\n")},doctype:a=>{t.push("<!DOCTYPE",a,">",n?"\n":"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},Ii=(e={},t=ji())=>{const n=J_(e);return e.validate=!("validate"in e)||e.validate,{serialize:r=>{const o=e.validate,i={3:a=>{var c;n.text(null!==(c=a.value)&&void 0!==c?c:"",a.raw)},8:a=>{var c;n.comment(null!==(c=a.value)&&void 0!==c?c:"")},7:a=>{n.pi(a.name,a.value)},10:a=>{var c;n.doctype(null!==(c=a.value)&&void 0!==c?c:"")},4:a=>{var c;n.cdata(null!==(c=a.value)&&void 0!==c?c:"")},11:a=>{let c=a;if(c=c.firstChild)do{s(c)}while(c=c.next)}};n.reset();const s=a=>{var c;const d=i[a.type];if(d)d(a);else{const f=a.name,p=f in t.getVoidElements();let v=a.attributes;if(o&&v&&v.length>1){const w=[];w.map={};const y=t.getElementRule(a.name);if(y){for(let S=0,b=y.attributesOrder.length;S<b;S++){const T=y.attributesOrder[S];if(T in v.map){const O=v.map[T];w.map[T]=O,w.push({name:T,value:O})}}for(let S=0,b=v.length;S<b;S++){const T=v[S].name;if(!(T in w.map)){const O=v.map[T];w.map[T]=O,w.push({name:T,value:O})}}v=w}}if(n.start(f,v,p),ns(f))U(a.value)&&n.text(a.value,!0),n.end(f);else if(!p){let w=a.firstChild;if(w){"pre"!==f&&"textarea"!==f||3!==w.type||"\n"!==(null===(c=w.value)||void 0===c?void 0:c[0])||n.text("\n",!0);do{s(w)}while(w=w.next)}n.end(f)}}};return 1!==r.type||e.inner?3===r.type?i[3](r):i[11](r):s(r),n.getContent()}}},Q_=new Set;ye(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{Q_.add(e)});const Z_=["font","text-decoration","text-emphasis"],Hh=(e,t)=>An(e.parseStyle(e.getAttrib(t,"style"))),NT=(e,t,n)=>{const r=Hh(e,t),o=Hh(e,n),i=s=>{var a,c;const d=null!==(a=e.getStyle(t,s))&&void 0!==a?a:"",f=null!==(c=e.getStyle(n,s))&&void 0!==c?c:"";return xr(d)&&xr(f)&&d!==f};return Kt(r,s=>{const a=c=>Kt(c,d=>d===s);if(!a(o)&&a(Z_)){const c=tt(o,d=>Kt(Z_,f=>Mn(d,f)));return Kt(c,i)}return i(s)})},e0=(e,t,n)=>R.from(n.container()).filter(Le).exists(r=>{const o=e?0:-1;return t(r.data.charAt(n.offset()+o))}),qh=ge(e0,!0,ta),Uh=ge(e0,!1,ta),AT=e=>{const t=e.container();return Le(t)&&(0===t.data.length||_c(t.data)&&ml.isBookmarkNode(t.parentNode))},zi=(e,t)=>n=>oh(e?0:-1,n).filter(t).isSome(),t0=e=>kg(e)&&"block"===he(X(e),"display"),n0=e=>{return sn(e)&&!(Ke(t=e)&&"all"===t.getAttribute("data-mce-bogus"));var t},OT=zi(!0,t0),RT=zi(!1,t0),yl=zi(!0,Vo),bl=zi(!1,Vo),r0=zi(!0,di),o0=zi(!1,di),Fi=zi(!0,n0),$i=zi(!1,n0),i0=(e,t)=>{return o=Tt,Ht(r=t,n=e)?Wr(n,i=>o(i)||Lt(i,r)).slice(0,-1):[];var n,r,o},fi=(e,t)=>[e].concat(i0(e,t)),Wh=(e,t,n)=>Sv(e,t,n,AT),s0=(e,t,n)=>{return Z(fi(X(t.container()),e),(r=n,o=>r.isBlock(It(o))));var r},a0=(e,t,n,r)=>Wh(e,t.dom,n).forall(o=>s0(t,n,r).fold(()=>!Yo(o,n,t.dom),i=>!Yo(o,n,t.dom)&&Ht(i,X(o.container())))),l0=(e,t,n,r)=>s0(t,n,r).fold(()=>Wh(e,t.dom,n).forall(o=>!Yo(o,n,t.dom)),o=>Wh(e,o.dom,n).isNone()),Vh=ge(l0,!1),c0=ge(l0,!0),jT=ge(a0,!1),PT=ge(a0,!0),DT=e=>Lc(e).exists(ts),Qc=(e,t,n,r)=>{const o=tt(fi(X(n.container()),t),s=>r.isBlock(It(s))),i=Hn(o).getOr(t);return Xr(e,i.dom,n).filter(DT)},Kh=(e,t,n)=>Lc(t).exists(ts)||Qc(!0,e,t,n).isSome(),Yh=(e,t,n)=>{return(r=t,R.from(r.getNode(!0)).map(X)).exists(ts)||Qc(!1,e,t,n).isSome();var r},LT=ge(Qc,!1),BT=ge(Qc,!0),d0=e=>_e.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),u0=(e,t,n)=>{const r=tt(fi(X(t.container()),e),o=>n.isBlock(It(o)));return Hn(r).getOr(e)},h0=(e,t,n)=>d0(t)?Uh(t):Uh(t)||Pr(u0(e,t,n).dom,t).exists(Uh),f0=(e,t,n)=>d0(t)?qh(t):qh(t)||Nr(u0(e,t,n).dom,t).exists(qh),Xh=e=>Lc(e).bind(t=>qo(t,vr)).exists(t=>{return n=he(t,"white-space"),Oe(["pre","pre-wrap"],n);var n}),p0=(e,t)=>n=>{return r=new qn(n,e)[t](),N(r)&&sn(r)&&hv(r);var r},g0=(e,t,n)=>{return!Xh(t)&&(i=n,Pr((r=e).dom,o=t).isNone()||Nr(r.dom,o).isNone()||Vh(r,o,i)||c0(r,o,i)||Yh(r,o,i)||Kh(r,o,i)||h0(e,t,n)||f0(e,t,n));var r,o,i},wl=(e,t,n)=>!Xh(t)&&(Vh(e,t,n)||jT(e,t,n)||Yh(e,t,n)||h0(e,t,n)||((r,o)=>{const i=Pr(r.dom,o).getOr(o),s=p0(r.dom,"prev");return o.isAtStart()&&(s(o.container())||s(i.container()))})(e,t)),xl=(e,t,n)=>!Xh(t)&&(c0(e,t,n)||PT(e,t,n)||Kh(e,t,n)||f0(e,t,n)||((r,o)=>{const i=Nr(r.dom,o).getOr(o),s=p0(r.dom,"next");return o.isAtEnd()&&(s(o.container())||s(i.container()))})(e,t)),Gh=(e,t,n)=>wl(e,t,n)||xl(e,(r=>{const o=r.container(),i=r.offset();return Le(o)&&i<o.data.length?_e(o,i+1):r})(t),n),m0=(e,t)=>zc(e.charAt(t)),v0=(e,t)=>ta(e.charAt(t)),_0=(e,t,n,r)=>{const o=t.data,i=_e(t,0);return n||!m0(o,0)||Gh(e,i,r)?!!(n&&v0(o,0)&&wl(e,i,r))&&(t.data=Xn+o.slice(1),!0):(t.data=" "+o.slice(1),!0)},y0=(e,t,n,r)=>{const o=t.data,i=_e(t,o.length-1);return n||!m0(o,o.length-1)||Gh(e,i,r)?!!(n&&v0(o,o.length-1)&&xl(e,i,r))&&(t.data=o.slice(0,-1)+Xn,!0):(t.data=o.slice(0,-1)+" ",!0)},b0=(e,t,n,r)=>{if(0===n)return;const o=X(e),i=hr(o,d=>r.isBlock(It(d))).getOr(o),s=e.data.slice(t,t+n),a=t+n>=e.data.length&&xl(i,_e(e,e.data.length),r),c=0===t&&wl(i,_e(e,0),r);e.replaceData(t,n,Pg(s,4,c,a))},Zc=(e,t,n)=>{const r=e.data.slice(t),o=r.length-rc(r).length;b0(e,t,o,n)},Jh=(e,t,n)=>{const r=e.data.slice(0,t),o=r.length-oc(r).length;b0(e,t-o,o,n)},Qh=(e,t,n,r,o=!0)=>{const i=oc(e.data).length,s=o?e:t,a=o?t:e;return o?s.appendData(a.data):s.insertData(0,a.data),rt(X(a)),r&&Zc(s,i,n),s},IT=(e,t)=>((n,r)=>{const o=n.container(),i=n.offset();return!_e.isTextPosition(n)&&o===r.parentNode&&i>_e.before(r).offset()})(t,e)?_e(t.container(),t.offset()-1):t,w0=e=>{return wo(e.previousSibling)?R.some(Le(t=e.previousSibling)?_e(t,t.data.length):_e.after(t)):e.previousSibling?xo(e.previousSibling):R.none();var t},x0=e=>{return wo(e.nextSibling)?R.some(Le(t=e.nextSibling)?_e(t,0):_e.before(t)):e.nextSibling?gr(e.nextSibling):R.none();var t},C0=(e,t,n)=>{n.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),t)})},FT=(e,t)=>t&&ft(e.schema.getBlockElements(),It(t)),_s=(e,t,n,r=!0,o=!1)=>{const i=((e,t,n)=>{return(r=e,o=t,i=n,r?(s=o,x0(a=i).orThunk(()=>w0(a)).orThunk(()=>{return Nr(c=s,_e.after(d=a)).orThunk(()=>Pr(c,_e.before(d)));var c,d})):((s,a)=>w0(a).orThunk(()=>x0(a)).orThunk(()=>{return c=s,R.from((d=a).previousSibling?d.previousSibling:d.parentNode).bind(f=>Pr(c,_e.before(f))).orThunk(()=>Nr(c,_e.after(d)));var c,d}))(o,i)).map(ge(IT,n));var r,o,i,s,a})(t,e.getBody(),n.dom),s=hr(n,ge(FT,e),(a=e.getBody(),d=>d.dom===a));var a;const c=((d,f,p,v)=>{const w=Vr(d).filter(kr),y=Rr(d).filter(kr);return rt(d),(S=w,b=y,T=f,O=(P,z,M)=>{const Y=P.dom,te=z.dom,ie=Y.data.length;return Qh(Y,te,p,v),M.container()===te?_e(Y,ie):M},S.isSome()&&b.isSome()&&T.isSome()?R.some(O(S.getOrDie(),b.getOrDie(),T.getOrDie())):R.none()).orThunk(()=>(v&&(w.each(P=>Jh(P.dom,P.dom.length,p)),y.each(P=>Zc(P.dom,0,p))),f));var S,b,T,O})(n,i,e.schema,(f=n,ft(e.schema.getTextInlineElements(),It(f))));var f;e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):s.bind(d=>((f,p)=>{if(jn(f)){const v=be('<br data-mce-bogus="1">');return p?ye(rn(f),w=>{kh(w)||rt(w)}):Vt(f),Et(f,v),R.some(_e.before(v.dom))}return R.none()})(d,o)).fold(()=>{r&&C0(e,t,c)},d=>{r&&C0(e,t,R.some(d))})},$T=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,ys=(e,t)=>cn(X(t),PS(e))&&!rs(e.schema,t)&&e.dom.isEditable(t),k0=e=>{var t,n;return"rtl"===nn.DOM.getStyle(e,"direction",!0)||(n=null!==(t=e.textContent)&&void 0!==t?t:"",$T.test(n))},Hi=(e,t,n)=>{const r=(o=e,i=t,tt(nn.DOM.getParents(n.container(),"*",i),o));var o,i;return R.from(r[r.length-1])},eo=(e,t)=>{const n=t.container(),r=t.offset();return e?Ai(n)?Le(n.nextSibling)?_e(n.nextSibling,0):_e.after(n):_u(t)?_e(n,r+1):t:Ai(n)?Le(n.previousSibling)?_e(n.previousSibling,n.previousSibling.data.length):_e.before(n):yu(t)?_e(n,r-1):t},S0=ge(eo,!0),E0=ge(eo,!1),T0=(e,t)=>{const n=r=>r.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},Zh=e=>T0(e,"Delete"),HT=e=>Eg(e)||Ha(e),ed=(e,t)=>{return Ht(e,t)?qo(t,HT,(n=e,r=>wi(ur(r),n,Lt))):R.none();var n},ef=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},N0=(e,t,n)=>er(gr(n),xo(n),(r,o)=>{const i=eo(!0,r),s=eo(!1,o),a=eo(!1,t);return e?Nr(n,a).exists(c=>c.isEqual(s)&&t.isEqual(i)):Pr(n,a).exists(c=>c.isEqual(i)&&t.isEqual(s))}).getOr(!0),A0=e=>{var t;return(8===zs(t=e)||"#comment"===It(t)?Vr(e):ir(e)).bind(A0).orThunk(()=>R.some(e))},O0=(e,t,n,r=!0)=>{var o;t.deleteContents();const i=A0(n).getOr(n),s=X(null!==(o=e.dom.getParent(i.dom,e.dom.isBlock))&&void 0!==o?o:n.dom);if(s.dom===e.getBody()?ef(e,r):jn(s)&&(Ni(s),r&&e.selection.setCursorLocation(s.dom,0)),!Lt(n,s)){const c=wi(ur(s),n)?[]:ur(a=s).map(rn).map(d=>tt(d,f=>!Lt(a,f))).getOr([]);ye(c.concat(rn(n)),d=>{Lt(d,s)||Ht(d,s)||!jn(d)||rt(d)})}var a},R0=(e,t)=>Si(e,t).isSome(),tf=e=>fr(e,"td,th"),j0=(e,t)=>fl(X(e),t),nf=(e,t)=>({start:e,end:t}),Cl=Ko([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),td=(e,t)=>Oo(X(e),"td,th",t),P0=e=>!Lt(e.start,e.end),D0=(e,t)=>fl(e.start,t).bind(n=>fl(e.end,t).bind(r=>xi(Lt(n,r),n))),rf=e=>t=>D0(t,e).map(n=>({rng:t,table:n,cells:tf(n)})),L0=(e,t,n,r)=>{if(n.collapsed||!e.forall(P0))return R.none();if(t.isSameTable){const o=e.bind(rf(r));return R.some({start:o,end:o})}{const o=td(n.startContainer,r),i=td(n.endContainer,r),s=o.bind((c=r,d=>fl(d,c).bind(f=>co(tf(f)).map(p=>nf(d,p))))).bind(rf(r)),a=i.bind((c=>d=>fl(d,c).bind(f=>Hn(tf(f)).map(p=>nf(p,d))))(r)).bind(rf(r));return R.some({start:s,end:a})}var c},B0=(e,t)=>ke(e,n=>Lt(n,t)),of=e=>er(B0(e.cells,e.rng.start),B0(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),M0=(e,t)=>{const{startTable:n,endTable:r}=t,o=e.cloneRange();return n.each(i=>o.setStartAfter(i.dom)),r.each(i=>o.setEndBefore(i.dom)),o},I0=e=>ye(e,t=>{h(t,"contenteditable"),Ni(t)}),sf=(e,t,n,r)=>{const o=n.cloneRange();r?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),af(e,o,t,!1).each(i=>i())},z0=e=>{const t=na(e),n=X(e.selection.getNode());gc(n.dom)&&jn(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&Kt(t,r=>Lt(r,n))&&In(n,"data-mce-selected","1")},F0=(e,t,n)=>R.some(()=>{const r=e.selection.getRng(),o=n.bind(({rng:i,isStartInTable:s})=>{const a=R.from((d=e).dom.getParent(s?i.endContainer:i.startContainer,d.dom.isBlock)).map(X);var d;i.deleteContents(),((d,f,p)=>{p.each(v=>{f?rt(v):(Ni(v),d.selection.setCursorLocation(v.dom,0))})})(e,s,a.filter(jn));const c=s?t[0]:t[t.length-1];return sf(e,c,r,s),jn(c)?R.none():R.some(s?t.slice(1):t.slice(0,-1))}).getOr(t);I0(o),z0(e)}),WT=(e,t,n,r)=>R.some(()=>{const o=e.selection.getRng(),i=t[0],s=n[n.length-1];sf(e,i,o,!0),sf(e,s,o,!1);const a=jn(i)?t:t.slice(1),c=jn(s)?n:n.slice(0,-1);I0(a.concat(c)),r.deleteContents(),z0(e)}),af=(e,t,n,r=!0)=>R.some(()=>{O0(e,t,n,r)}),VT=(e,t)=>R.some(()=>_s(e,!1,t)),$0=(e,t)=>Z(fi(t,e),qa),lf=(e,t)=>Z(fi(t,e),$o("caption")),nd=(e,t)=>R.some(()=>{Ni(t),e.selection.setCursorLocation(t.dom,0)}),H0=(e,t)=>e?r0(t):o0(t),cf=(e,t)=>{const n=X(e.selection.getStart(!0)),r=na(e);return e.selection.isCollapsed()&&0===r.length?((e,t,n)=>{const r=X(e.getBody());return lf(r,n).fold(()=>((o,i,s,a)=>{const c=_e.fromRangeStart(o.selection.getRng());return $0(s,a).bind(d=>{return jn(d)?nd(o,d):(p=s,w=d,y=c,Zs(i,o.getBody(),y).bind(S=>$0(p,X(S.getNode())).bind(b=>Lt(b,w)?R.none():R.some(F))));var p,w,y})})(e,t,r,n).orThunk(()=>xi(((o,i)=>{const s=_e.fromRangeStart(o.selection.getRng());return H0(i,s)||Xr(i,o.getBody(),s).exists(a=>H0(i,a))})(e,t),F)),o=>((i,s,a,c)=>{const d=_e.fromRangeStart(i.selection.getRng());return jn(c)?nd(i,c):(p=a,w=c,y=d,Zs(v=s,(f=i).getBody(),y).fold(()=>R.some(F),S=>{return T=v,O=y,P=S,gr((b=w).dom).bind(z=>xo(b.dom).map(M=>T?O.isEqual(z)&&P.isEqual(M):O.isEqual(M)&&P.isEqual(z))).getOr(!0)?((b,T)=>nd(b,T))(f,w):((b,T,O)=>lf(b,X(O.getNode())).fold(()=>R.some(F),P=>xi(!Lt(P,T),F)))(p,w,S);var b,T,O,P}));var f,p,v,w,y})(e,t,r,o))})(e,t,n):((o,i,s)=>{const a=X(o.getBody()),c=o.selection.getRng();return 0!==s.length?F0(o,s,R.none()):(d=o,p=c,lf(f=a,i).fold(()=>{return w=d,((e,t)=>{const n=(i=e,s=>Lt(i,s)),r=((i,s)=>{const a=td(i.startContainer,s),c=td(i.endContainer,s);return er(a,c,nf)})(t,n),o=((i,s)=>{const a=j0(i.startContainer,s),c=j0(i.endContainer,s),d=a.isSome(),f=c.isSome(),p=er(a,c,Lt).getOr(!1);return er((v={startTable:a,endTable:c,isStartInTable:d,isEndInTable:f,isSameTable:p,isMultiTable:!p&&d&&f}).startTable,v.endTable,(w,y)=>{const S=R0(w,T=>Lt(T,y)),b=R0(y,T=>Lt(T,w));return S||b?{...v,startTable:S?R.none():v.startTable,endTable:b?R.none():v.endTable,isSameTable:!1,isMultiTable:!1}:v}).getOr(v);var v})(t,n);var i;return((i,s,a)=>i.exists(c=>{return f=a,!P0(d=c)&&D0(d,f).exists(p=>{const v=p.dom.rows;return 1===v.length&&1===v[0].cells.length})&&ph(c.start,s);var d,f}))(r,t,n)?r.map(i=>Cl.singleCellTable(t,i.start)):o.isMultiTable?((i,s,a,c)=>L0(i,s,a,c).bind(({start:d,end:f})=>{const p=d.bind(of).getOr([]),v=f.bind(of).getOr([]);if(p.length>0&&v.length>0){const w=M0(a,s);return R.some(Cl.multiTable(p,v,w))}return R.none()}))(r,o,t,n):((i,s,a,c)=>L0(i,s,a,c).bind(({start:d,end:f})=>d.or(f)).bind(d=>{const{isSameTable:f}=s,p=of(d).getOr([]);if(f&&d.cells.length===p.length)return R.some(Cl.fullTable(d.table));if(p.length>0){if(f)return R.some(Cl.partialTable(p,R.none()));{const v=M0(a,s);return R.some(Cl.partialTable(p,R.some({...s,rng:v})))}}return R.none()}))(r,o,t,n)})(f,p).bind(b=>b.fold(ge(af,w),ge(VT,w),ge(F0,w),ge(WT,w)));var w},w=>nd(d,w)));var d,f,p})(e,n,r)},bs=(e,t)=>{let n=t;for(;n&&n!==e;){if(bo(n)||sn(n))return n;n=n.parentNode}return null},YT=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],XT=Be.each,df=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),r=o=>Kt(YT,i=>Mn(o,i))||n.has(o);return{compare:(o,i)=>{if(o.nodeName!==i.nodeName||o.nodeType!==i.nodeType)return!1;const s=c=>{const d={};return XT(t.getAttribs(c),f=>{const p=f.nodeName.toLowerCase();"style"===p||r(p)||(d[p]=t.getAttrib(c,p))}),d},a=(c,d)=>{for(const f in c)if(ft(c,f)){const p=d[f];if(x(p)||c[f]!==p)return!1;delete d[f]}for(const f in d)if(ft(d,f))return!1;return!0};return!(Ke(o)&&Ke(i)&&(!a(s(o),s(i))||!a(t.parseStyle(t.getAttrib(o,"style")),t.parseStyle(t.getAttrib(i,"style"))))||Jr(o)||Jr(i))},isAttributeInternal:r}},q0=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),U0=(e,t,n,r)=>{const o=n.name;for(let i=0,s=e.length;i<s;i++){const a=e[i];if(a.name===o){const c=r.nodes[o];c?c.nodes.push(n):r.nodes[o]={filter:a,nodes:[n]}}}if(n.attributes)for(let i=0,s=t.length;i<s;i++){const a=t[i],c=a.name;if(c in n.attributes.map){const d=r.attributes[c];d?d.nodes.push(n):r.attributes[c]={filter:a,nodes:[n]}}}},W0=(e,t)=>{const n=(r,o)=>{Wt(r,i=>{const s=Nn(i.nodes);ye(i.filter.callbacks,a=>{for(let c=s.length-1;c>=0;c--){const d=s[c];(o?void 0!==d.attr(i.filter.name):d.name===i.filter.name)&&!C(d.parent)||s.splice(c,1)}s.length>0&&a(s,i.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},V0=(e,t,n,r={})=>{const o=((i,s,a)=>{const c={nodes:{},attributes:{}};return a.firstChild&&((d,f)=>{let p=d;for(;p=p.walk();)U0(i,s,p,c)})(a),c})(e,t,n);W0(o,r)},uf=(e,t,n,r)=>{if((e.pad_empty_with_br||t.insert)&&n(r)){const o=new yr("br",1);t.insert&&o.attr("data-mce-bogus","1"),r.empty().append(o)}else r.empty().append(new yr("#text",3)).value=Xn},K0=(e,t)=>{const n=e?.firstChild;return N(n)&&n===e.lastChild&&n.name===t},kl=(e,t,n,r)=>r.isEmpty(t,n,o=>((i,s)=>{const a=i.getElementRule(s.name);return!0===a?.paddEmpty})(e,o)),GT=e=>{let t;for(let n=e;n;n=n.parent){const r=n.attr("contenteditable");if("false"===r)break;"true"===r&&(t=n)}return R.from(t)},hf=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const o of r)n&&!t.isValidChild(n.name,o.name)&&hf(o,t,n);e.unwrap()}},ff=(e,t,n,r=F)=>{const o=t.getTextBlockElements(),i=t.getNonEmptyElements(),s=t.getWhitespaceElements(),a=Be.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),c=new Set,d=f=>f!==n&&!a[f.name];for(let f=0;f<e.length;f++){const p=e[f];let v,w,y;if(!p.parent||c.has(p))continue;if(o[p.name]&&"li"===p.parent.name){let b=p.next;for(;b&&o[b.name];)b.name="li",c.add(b),p.parent.insert(b,p.parent),b=b.next;p.unwrap();continue}const S=[p];for(v=p.parent;v&&!t.isValidChild(v.name,p.name)&&d(v);v=v.parent)S.push(v);if(v&&S.length>1)if(pf(t,p,v))hf(p,t);else{S.reverse(),w=S[0].clone(),r(w);let b=w;for(let T=0;T<S.length-1;T++){t.isValidChild(b.name,S[T].name)&&T>0?(y=S[T].clone(),r(y),b.append(y)):y=b;for(let O=S[T].firstChild;O&&O!==S[T+1];){const P=O.next;y.append(O),O=P}b=y}kl(t,i,s,w)?v.insert(p,S[0],!0):(v.insert(w,S[0],!0),v.insert(p,w)),v=S[0],(kl(t,i,s,v)||K0(v,"br"))&&v.empty().remove()}else if(p.parent){if("li"===p.name){let b=p.prev;if(b&&("ul"===b.name||"ol"===b.name)){b.append(p);continue}if(b=p.next,b&&("ul"===b.name||"ol"===b.name)&&b.firstChild){b.insert(p,b.firstChild,!0);continue}const T=new yr("ul",1);r(T),p.wrap(T);continue}if(t.isValidChild(p.parent.name,"div")&&t.isValidChild("div",p.name)){const b=new yr("div",1);r(b),p.wrap(b)}else hf(p,t)}}},pf=(e,t,n=t.parent)=>{return!(!n||(!e.children[t.name]||e.isValidChild(n.name,t.name))&&("a"!==t.name||!((r,o)=>{let i=r;for(;i;){if("a"===i.name)return!0;i=i.parent}return!1})(n))&&(r=n,"summary"!==r.name||!q0(t)||n?.firstChild===t&&n?.lastChild===t));var r},gf=e=>e.collapsed?e:(t=>{const n=_e.fromRangeStart(t),r=_e.fromRangeEnd(t),o=t.commonAncestorContainer;return Xr(!1,o,r).map(i=>!Yo(n,r,o)&&Yo(n,i,o)?((s,a,c,d)=>{const f=document.createRange();return f.setStart(s,a),f.setEnd(c,d),f})(n.container(),n.offset(),i.container(),i.offset()):t).getOr(t)})(e),mf=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},Y0=(e,t)=>{const n=_e.after(e),r=Go(t).prev(n);return r?r.toRange():null},eN=["pre"],vf=gc,tN=(e,t,n)=>{var r,o;const i=e.selection,s=e.dom,a=e.parser,c=n.merge,d=Ii({validate:!0},e.schema),f='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(t=Fr(t)),-1===t.indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,f);let p=i.getRng();const v=p.startContainer,w=e.getBody();var P,z;v===w&&i.isCollapsed()&&s.isBlock(w.firstChild)&&(P=e,N(z=w.firstChild)&&!P.schema.getVoidElements()[z.nodeName])&&s.isEmpty(w.firstChild)&&(p=s.createRng(),p.setStart(w.firstChild,0),p.setEnd(w.firstChild,0),i.setRng(p)),i.isCollapsed()||(P=>{const z=P.dom,M=gf(P.selection.getRng());P.selection.setRng(M);const Y=z.getParent(M.startContainer,vf);var te,ie,ce;te=z,ie=M,N(ce=Y)&&ce===te.getParent(ie.endContainer,vf)&&ph(X(ce),ie)?af(P,M,X(Y)):M.startContainer===M.endContainer&&M.endOffset-M.startOffset==1&&Le(M.startContainer.childNodes[M.startOffset])?M.deleteContents():P.getDoc().execCommand("Delete",!1)})(e);const y=i.getNode(),S={context:y.nodeName.toLowerCase(),data:n.data,insert:!0},b=a.parse(t,S);if(!0===n.paste&&((e,t)=>{let n=t.firstChild,r=t.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),((o,i)=>{const s=o.getNonEmptyElements();return N(i)&&(i.isEmpty(s)||(c=i,o.getBlockElements()[c.name]&&N((d=c).firstChild)&&d.firstChild===d.lastChild&&(d=>"br"===d.name||d.value===Xn)(c.firstChild)));var c,d})(e,r)&&(r=r?.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)})(e.schema,b)&&((P,z)=>!!mf(P,z))(s,y))return p=((e,t,n,r)=>{const o=((p,v,w)=>{const y=v.serialize(w);return(S=>{var b,T;const O=S.firstChild,P=S.lastChild;return O&&"META"===O.nodeName&&(null===(b=O.parentNode)||void 0===b||b.removeChild(O)),P&&"mce_marker"===P.id&&(null===(T=P.parentNode)||void 0===T||T.removeChild(P)),S})(p.createFragment(y))})(t,e,r),i=mf(t,n.startContainer),s=(e=>{return e.length>0&&(!(n=e[e.length-1]).firstChild||N(null==(t=n)?void 0:t.firstChild)&&t.firstChild===t.lastChild&&((r=t.firstChild).data===Xn||Cn(r)))?e.slice(0,-1):e;var r,t,n})((a=o.firstChild,tt(null!==(c=a?.childNodes)&&void 0!==c?c:[],p=>"LI"===p.nodeName)));var a,c;const d=t.getRoot(),f=p=>{const v=_e.fromRangeStart(n),w=Go(t.getRoot()),y=1===p?w.prev(v):w.next(v),S=y?.getNode();return!S||mf(t,S)!==i};return i?f(1)?((p,v,w)=>{const y=p.parentNode;return y&&Be.each(v,S=>{y.insertBefore(S,p)}),((S,b)=>{const T=_e.before(S),O=Go(b).next(T);return O?O.toRange():null})(p,w)})(i,s,d):f(2)?(p=i,w=d,t.insertAfter((v=s).reverse(),p),Y0(v[0],w)):((p,v,w,y)=>{const S=((T,O)=>{const P=O.cloneRange(),z=O.cloneRange();return P.setStartBefore(T),z.setEndAfter(T),[P.cloneContents(),z.cloneContents()]})(p,y),b=p.parentNode;return b&&(b.insertBefore(S[0],p),Be.each(v,T=>{b.insertBefore(T,p)}),b.insertBefore(S[1],p),b.removeChild(p)),Y0(v[v.length-1],w)})(i,s,d,n):null;var p,v,w})(d,s,i.getRng(),b),p&&i.setRng(p),t;!0===n.paste&&((P,z,M,Y)=>{var te;const ie=z.firstChild,ce=z.lastChild,fe=ie===("bookmark"===ce.attr("data-mce-type")?ce.prev:ce),Q=Oe(eN,ie.name);if(fe&&Q){const ne="false"!==ie.attr("contenteditable"),de=(null===(te=P.getParent(M,P.isBlock))||void 0===te?void 0:te.nodeName.toLowerCase())===ie.name,xe=R.from(bs(Y,M)).forall(bo);return ne&&de&&xe}return!1})(s,b,y,e.getBody())&&(null===(r=b.firstChild)||void 0===r||r.unwrap()),(P=>{let z=P;for(;z=z.walk();)1===z.type&&z.attr("data-mce-fragment","1")})(b);let T=b.lastChild;if(T&&"mce_marker"===T.attr("id")){const P=T;for(T=T.prev;T;T=T.walk(!0))if(3===T.type||!s.isBlock(T.name)){T.parent&&e.schema.isValidChild(T.parent.name,"span")&&T.parent.insert(P,T,"br"===T.name);break}}if(e._selectionOverrides.showBlockCaretContainer(y),S.invalid||((P,z,M)=>{var Y;return Kt(M.children(),q0)&&"SUMMARY"===(null===(Y=P.getParent(z,P.isBlock))||void 0===Y?void 0:Y.nodeName)})(s,y,b)){e.selection.setContent(f);let P,z=i.getNode();const M=e.getBody();for(Fa(z)?z=P=M:P=z;P&&P!==M;)z=P,P=P.parentNode;t=z===M?M.innerHTML:s.getOuterHTML(z);const Y=a.parse(t),te=(ne=>{for(let de=ne;de;de=de.walk())if("mce_marker"===de.attr("id"))return R.some(de);return R.none()})(Y),ie=te.bind(GT).getOr(Y);te.each(ne=>ne.replace(b));const ce=b.children(),fe=null!==(o=b.parent)&&void 0!==o?o:Y;b.unwrap();const Q=tt(ce,ne=>pf(e.schema,ne,fe));ff(Q,e.schema,ie),V0(a.getNodeFilters(),a.getAttributeFilters(),Y),t=d.serialize(Y),z===M?s.setHTML(M,t):s.setOuterHTML(z,t)}else t=d.serialize(b),((P,z,M)=>{var Y;if("all"===M.getAttribute("data-mce-bogus"))null===(Y=M.parentNode)||void 0===Y||Y.insertBefore(P.dom.createFragment(z),M);else{const te=M.firstChild;!te||te===M.lastChild&&"BR"===te.nodeName?P.dom.setHTML(M,z):P.selection.setContent(z,{no_events:!0})}})(e,t,y);var O;return((P,z)=>{const M=P.schema.getTextInlineElements(),Y=P.dom;if(z){const te=P.getBody(),ie=df(P);Be.each(Y.select("*[data-mce-fragment]"),ce=>{if(N(M[ce.nodeName.toLowerCase()])&&Je(Hh(Y,ce),ne=>!Q_.has(ne)))for(let fe=ce.parentElement;N(fe)&&fe!==te&&!NT(Y,ce,fe);fe=fe.parentElement)if(ie.compare(fe,ce)){Y.remove(ce,!0);break}})}})(e,c),((P,z)=>{var M,Y,te;let ie;const ce=P.dom,fe=P.selection;if(!z)return;fe.scrollIntoView(z);const Q=bs(P.getBody(),z);if(Q&&"false"===ce.getContentEditable(Q))return ce.remove(z),void fe.select(Q);let ne=ce.createRng();const de=z.previousSibling;if(Le(de)){ne.setStart(de,null!==(Y=null===(M=de.nodeValue)||void 0===M?void 0:M.length)&&void 0!==Y?Y:0);const Fe=z.nextSibling;Le(Fe)&&(de.appendData(Fe.data),null===(te=Fe.parentNode)||void 0===te||te.removeChild(Fe))}else ne.setStartBefore(z),ne.setEndBefore(z);const xe=ce.getParent(z,ce.isBlock);if(ce.remove(z),xe&&ce.isEmpty(xe)){const Fe=vf(xe);Vt(X(xe)),ne.setStart(xe,0),ne.setEnd(xe,0),Fe||xe.getAttribute("data-mce-fragment")||!(ie=(Me=>{let nt=_e.fromRangeStart(Me);return nt=Go(P.getBody()).next(nt),nt?.toRange()})(ne))?ce.add(xe,ce.create("br",Fe?{}:{"data-mce-bogus":"1"})):(ne=ie,ce.remove(xe))}fe.setRng(ne)})(e,s.get("mce_marker")),O=e.getBody(),Be.each(O.getElementsByTagName("*"),P=>{P.removeAttribute("data-mce-fragment")}),((P,z,M)=>{R.from(P.getParent(z,"td,th")).map(X).each(Y=>{return ie=M,void ir(te=Y).each(ce=>{Vr(ce).each(fe=>{ie.isBlock(It(te))&&ts(ce)&&ie.isBlock(It(fe))&&rt(ce)})});var te,ie})})(s,i.getStart(),e.schema),((P,z,M)=>{const Y=Wr(X(M),te=>Lt(te,X(z)));Hr(Y,Y.length-2).filter(vr).fold(()=>ku(P,z),te=>ku(P,te.dom))})(e.schema,e.getBody(),i.getStart()),t},rd=e=>e instanceof yr,_f=(e,t,n)=>{var r;e.dom.setHTML(e.getBody(),t),!0!==n&&vs(r=e)&&gr(r.getBody()).each(o=>{const i=o.getNode(),s=di(i)?gr(i).getOr(o):o;r.selection.setRng(s.toRange())})},X0=e=>D(e)?e:Tt,yf=(e,t,n)=>{const r=t(e),o=X0(n);return r.orThunk(()=>o(e)?R.none():((i,s,a)=>{let c=i.dom;const d=X0(a);for(;c.parentNode;){c=c.parentNode;const f=X(c),p=s(f);if(p.isSome())return p;if(d(f))break}return R.none()})(e,t,o))},bf=bh,G0=(e,t,n)=>{const r=e.formatter.get(n);if(r)for(let o=0;o<r.length;o++){const i=r[o];if(Qr(i)&&!1===i.inherit&&e.dom.is(t,i.selector))return!0}return!1},wf=(e,t,n,r,o)=>{const i=e.dom.getRoot();if(t===i)return!1;const s=e.dom.getParent(t,a=>!!G0(e,a,n)||a.parentNode===i||!!Qo(e,a,n,r,!0));return!!Qo(e,s,n,r,o)},od=(e,t,n)=>!(!Un(n)||!bf(t,n.inline))||!(!Jo(n)||!bf(t,n.block))||!!Qr(n)&&Ke(t)&&e.is(t,n.selector),J0=(e,t,n,r,o,i)=>{const s=n[r],a="attributes"===r;if(D(n.onmatch))return n.onmatch(t,n,r);if(s)if(Kn(s)){for(let c=0;c<s.length;c++)if(a?e.getAttrib(t,s[c]):$c(e,t,s[c]))return!0}else for(const c in s)if(ft(s,c)){const d=a?e.getAttrib(t,c):$c(e,t,c),f=Mi(s[c],i),p=C(d)||yi(d);if(p&&C(f))continue;if(o&&p&&!n.exact||(!o||n.exact)&&!bf(d,wh(f,c)))return!1}return!0},Qo=(e,t,n,r,o)=>{const i=e.formatter.get(n),s=e.dom;if(i&&Ke(t))for(let a=0;a<i.length;a++){const c=i[a];if(od(e.dom,t,c)&&J0(s,t,c,"attributes",o,r)&&J0(s,t,c,"styles",o,r)){const d=c.classes;if(d)for(let f=0;f<d.length;f++)if(!e.dom.hasClass(t,Mi(d[f],r)))return;return c}}},xf=(e,t,n,r,o)=>{if(r)return wf(e,r,t,n,o);if(r=e.selection.getNode(),wf(e,r,t,n,o))return!0;const i=e.selection.getStart();return!(i===r||!wf(e,i,t,n,o))},Sl=Gn,Q0=e=>{if(e){const t=new qn(e,e);for(let n=t.current();n;n=t.next())if(Le(n))return n}return null},Cf=e=>{const t=je("span");return qr(t,{id:ch,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Et(t,wt(Sl)),t},kf=(e,t,n)=>{const r=e.dom,o=e.selection;if(Fv(t))_s(e,!1,X(t),n,!0);else{const i=o.getRng(),s=r.getParent(t,r.isBlock),a=i.startContainer,c=i.startOffset,d=i.endContainer,f=i.endOffset,p=(v=>{const w=Q0(v);return w&&w.data.charAt(0)===Sl&&w.deleteData(0,1),w})(t);r.remove(t,!0),a===p&&c>0&&i.setStart(p,c-1),d===p&&f>0&&i.setEnd(p,f-1),s&&r.isEmpty(s)&&Ni(X(s)),o.setRng(i)}},Sf=(e,t,n)=>{const r=e.dom,o=e.selection;if(t)kf(e,t,n);else if(!(t=fs(e.getBody(),o.getStart())))for(;t=r.get(ch);)kf(e,t,n)},Z0=(e,t)=>(e.appendChild(t),t),ey=(e,t)=>{var n;const r=Vn(e,(i,s)=>Z0(i,s.cloneNode(!1)),t),o=null!==(n=r.ownerDocument)&&void 0!==n?n:document;return Z0(r,o.createTextNode(Sl))},ty=e=>{const t=Cf(!1),n=ey(e,t.dom);return{caretContainer:t,caretPosition:_e(n,0)}},ny=(e,t)=>{const{caretContainer:n,caretPosition:r}=ty(t);return Qe(X(e),n),rt(X(e)),r},ry=(e,t)=>{if(Gr(t.dom))return!1;const n=e.schema.getTextInlineElements();return ft(n,It(t))&&!Gr(t.dom)&&!es(t.dom)},El={},oy=Ro(["pre"]);((e,t)=>{El[e]||(El[e]=[]),El[e].push(n=>{if(!n.selection.getRng().collapsed){const r=n.selection.getSelectedBlocks(),o=tt(tt(r,oy),(i=r,s=>{const a=s.previousSibling;return oy(a)&&Oe(i,a)}));ye(o,i=>{((s,a)=>{const c=X(a),d=Ut(c).dom;rt(c),Bt(X(s),[je("br",d),je("br",d),...rn(c)])})(i.previousSibling,i)})}var i})})("pre");const iy=["fontWeight","fontStyle","color","fontSize","fontFamily"],sy=(e,t)=>{const n=e.get(t);return u(n)?Z(n,r=>{return Un(r)&&"span"===r.inline&&I((o=r).styles)&&Kt(An(o.styles),i=>Oe(iy,i));var o}):R.none()},ay=(e,t)=>Pr(t,_e.fromRangeStart(e)).isNone(),ly=(e,t)=>!1===Nr(t,_e.fromRangeEnd(e)).exists(n=>!Cn(n.getNode())||Nr(t,n).isSome()),cy=e=>t=>yk(t)&&e.isEditable(t),dy=e=>tt(e.getSelectedBlocks(),cy(e.dom)),Ef=Be.each,Tf=e=>Ke(e)&&!Jr(e)&&!Gr(e)&&!es(e),uy=(e,t)=>{for(let n=e;n;n=n[t]){if(Le(n)&&xr(n.data))return e;if(Ke(n)&&!Jr(n))return n}return e},hy=(e,t,n)=>{const r=df(e),o=ci(t)&&e.dom.isEditable(t),i=ci(n)&&e.dom.isEditable(n);if(o&&i){const s=uy(t,"previousSibling"),a=uy(n,"nextSibling");if(r.compare(s,a)){for(let c=s.nextSibling;c&&c!==a;){const d=c;c=c.nextSibling,s.appendChild(d)}return e.dom.remove(a),Be.each(Be.grep(a.childNodes),c=>{s.appendChild(c)}),s}}return n},fy=(e,t,n,r)=>{var o;if(r&&!1!==t.merge_siblings){const i=null!==(o=hy(e,Mv(r),r))&&void 0!==o?o:r;hy(e,i,Mv(i,!0))}},Nf=(e,t,n)=>{Ef(e.childNodes,r=>{Tf(r)&&(t(r)&&n(r),r.hasChildNodes()&&Nf(r,t,n))})},py=(e,t)=>n=>!(!n||!$c(e,n,t)),gy=(e,t,n)=>r=>{var o,i;e.setStyle(r,t,n),""===r.getAttribute("style")&&r.removeAttribute("style"),o=e,"SPAN"===(i=r).nodeName&&0===o.getAttribs(i).length&&o.remove(i,!0)},ws=Ko([{keep:[]},{rename:["name"]},{removed:[]}]),rN=/^(src|href|style)$/,Af=Be.each,id=bh,my=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),vy=(e,t,n)=>{let r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"];if(Ke(r)){const i=r.childNodes.length-1;!n&&o&&o--,r=r.childNodes[o>i?i:o]}return Le(r)&&n&&o>=r.data.length&&(r=new qn(r,e.getBody()).next()||r),Le(r)&&!n&&0===o&&(r=new qn(r,e.getBody()).prev()||r),r},_y=(e,t)=>{const n=t?"firstChild":"lastChild",r=e[n];return/^(TR|TH|TD)$/.test(e.nodeName)&&r?"TR"===e.nodeName&&r[n]||r:e},Of=(e,t,n,r)=>{var o;const i=e.create(n,r);return null===(o=t.parentNode)||void 0===o||o.insertBefore(i,t),i.appendChild(t),i},yy=(e,t,n,r,o)=>{const i=X(t),s=X(e.create(r,o)),a=n?si(i):Ao(i);return Bt(s,a),n?(Qe(i,s),ct(s,i)):(pt(i,s),Et(s,i)),s.dom},by=(e,t,n)=>{const r=t.parentNode;let o;const i=e.dom,s=pr(e);var a;Jo(n)&&r===i.getRoot()&&(n.list_block&&id(t,n.list_block)||ye(Nn(t.childNodes),a=>{ra(e,s,a.nodeName.toLowerCase())?o?o.appendChild(a):(o=Of(i,a,s),i.setAttribs(o,il(e))):o=null})),Qr(a=n)&&Un(a)&&wi(Gt(a,"mixed"),!0)&&!id(n.inline,t)||i.remove(t,!0)},wy=(e,t,n)=>m(e)?{name:t,value:null}:{name:e,value:Mi(t,n)},xy=(e,t)=>{""===e.getAttrib(t,"style")&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},Cy=(e,t,n,r,o)=>{let i=!1;Af(n.styles,(s,a)=>{const{name:c,value:d}=wy(a,s,r),f=wh(d,c);(n.remove_similar||k(d)||!Ke(o)||id($c(e,o,c),f))&&e.setStyle(t,c,""),i=!0}),i&&xy(e,t)},ky=(e,t,n,r,o)=>{const i=e.dom,s=df(e),a=e.schema;if(Un(t)&&Eu(a,t.inline)&&rs(a,r)&&r.parentElement===e.getBody())return by(e,r,t),ws.removed();if(!t.ceFalseOverride&&r&&"false"===i.getContentEditableParent(r)||r&&!od(i,r,t)&&(!t.links||"A"!==r.nodeName))return ws.keep();const c=r,d=t.preserve_attributes;if(Un(t)&&"all"===t.remove&&u(d)){const f=tt(i.getAttribs(c),p=>Oe(d,p.name.toLowerCase()));if(i.removeAllAttribs(c),ye(f,p=>i.setAttrib(c,p.name,p.value)),f.length>0)return ws.rename("span")}if("all"!==t.remove){Cy(i,c,t,n,o),Af(t.attributes,(p,v)=>{const{name:w,value:y}=wy(v,p,n);if(t.remove_similar||k(y)||!Ke(o)||id(i.getAttrib(o,w),y)){if("class"===w){const S=i.getAttrib(c,w);if(S){let b="";if(ye(S.split(/\s+/),T=>{/mce\-\w+/.test(T)&&(b+=(b?" ":"")+T)}),b)return void i.setAttrib(c,w,b)}}if(rN.test(w)&&c.removeAttribute("data-mce-"+w),"style"===w&&Ro(["li"])(c)&&"none"===i.getStyle(c,"list-style-type"))return c.removeAttribute(w),void i.setStyle(c,"list-style-type","none");"class"===w&&c.removeAttribute("className"),c.removeAttribute(w)}}),Af(t.classes,p=>{p=Mi(p,n),Ke(o)&&!i.hasClass(o,p)||i.removeClass(c,p)});const f=i.getAttribs(c);for(let p=0;p<f.length;p++)if(!s.isAttributeInternal(f[p].nodeName))return ws.keep()}return"none"!==t.remove?(by(e,c,t),ws.removed()):ws.keep()},oN=(e,t,n,r)=>ky(e,t,n,r,r).fold(G(r),o=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,o)),G(null)),Sy=(e,t,n,r,o)=>{(r||e.selection.isEditable())&&((i,s,a,c,d)=>{const f=i.formatter.get(s),p=f[0],v=i.dom,w=i.selection,y=P=>{const z=((M,Y,te,ie,ce)=>{let fe;return Y.parentNode&&ye(Hc(M.dom,Y.parentNode).reverse(),Q=>{if(!fe&&Ke(Q)&&"_start"!==Q.id&&"_end"!==Q.id){const ne=Qo(M,Q,te,ie,ce);ne&&!1!==ne.split&&(fe=Q)}}),fe})(i,P,s,a,d);return((M,Y,te,ie,ce,fe,Q,ne)=>{var de,xe;let Fe,Me;const nt=M.dom;if(te){const Ze=te.parentNode;for(let lt=ie.parentNode;lt&&lt!==Ze;lt=lt.parentNode){let ot=nt.clone(lt,!1);for(let He=0;He<Y.length&&(ot=oN(M,Y[He],ne,ot),null!==ot);He++);ot&&(Fe&&ot.appendChild(Fe),Me||(Me=ot),Fe=ot)}Q.mixed&&nt.isBlock(te)||(ie=null!==(de=nt.split(te,ie))&&void 0!==de?de:ie),Fe&&Me&&(null===(xe=ce.parentNode)||void 0===xe||xe.insertBefore(Fe,ce),Me.appendChild(ce),Un(Q)&&fy(M,Q,0,Fe))}return ie})(i,f,z,P,P,0,p,a)},S=P=>Kt(f,z=>Tl(i,z,a,P,P)),b=P=>{const z=Nn(P.childNodes),M=S(P)||Kt(f,te=>od(v,P,te)),Y=P.parentNode;if(!M&&N(Y)&&Ch(p)&&S(Y),p.deep&&z.length)for(let te=0;te<z.length;te++)b(z[te]);ye(["underline","line-through","overline"],te=>{Ke(P)&&i.dom.getStyle(P,"text-decoration")===te&&P.parentNode&&zv(v,P.parentNode)===te&&Tl(i,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:te}},void 0,P)})},T=P=>{const z=v.get(P?"_start":"_end");if(z){let M=z[P?"firstChild":"lastChild"];return Jr(Y=M)&&Ke(Y)&&("_start"===Y.id||"_end"===Y.id)&&(M=M[P?"firstChild":"lastChild"]),Le(M)&&0===M.data.length&&(M=P?z.previousSibling||z.nextSibling:z.nextSibling||z.previousSibling),v.remove(z,!0),M}var Y;return null},O=P=>{let z,M,Y=ps(v,P,f,P.collapsed);if(p.split){if(Y=Xc(Y),z=vy(i,Y,!0),M=vy(i,Y),z!==M){if(z=_y(z,!0),M=_y(M,!1),my(v,z,M)){const ie=R.from(z.firstChild).getOr(z);return y(yy(v,ie,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void T(!0)}if(my(v,M,z)){const ie=R.from(M.lastChild).getOr(M);return y(yy(v,ie,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void T(!1)}z=Of(v,z,"span",{id:"_start","data-mce-type":"bookmark"}),M=Of(v,M,"span",{id:"_end","data-mce-type":"bookmark"});const te=v.createRng();te.setStartAfter(z),te.setEndBefore(M),gl(v,te,ie=>{ye(ie,ce=>{Jr(ce)||Jr(ce.parentNode)||y(ce)})}),y(z),y(M),z=T(!0),M=T()}else z=M=y(z);Y.startContainer=z.parentNode?z.parentNode:z,Y.startOffset=v.nodeIndex(z),Y.endContainer=M.parentNode?M.parentNode:M,Y.endOffset=v.nodeIndex(M)+1}gl(v,Y,te=>{ye(te,b)})};if(c){if(pl(c)){const P=v.createRng();P.setStartBefore(c),P.setEndAfter(c),O(P)}else O(c);n_(i,s,c,a)}else w.isCollapsed()&&Un(p)&&!na(i).length?((e,t,n,r)=>{const o=e.dom,i=e.selection;let s=!1;const a=e.formatter.get(t);if(!a)return;const c=i.getRng(),d=c.startContainer,f=c.startOffset;let p=d;Le(d)&&(f!==d.data.length&&(s=!0),p=p.parentNode);const v=[];let w;for(;p;){if(Qo(e,p,t,n,r)){w=p;break}p.nextSibling&&(s=!0),v.push(p),p=p.parentNode}if(w)if(s){const y=i.getBookmark();c.collapse(!0);let S=ps(o,c,a,!0);S=Xc(S),e.formatter.remove(t,n,S,r),i.moveToBookmark(y)}else{const y=fs(e.getBody(),w),S=N(y)?o.getParents(w.parentNode,_t,y):[],b=Cf(!1).dom;((P,z,M)=>{var Y,te;const ie=P.dom,ce=ie.getParent(M,ge(_h,P.schema));ce&&ie.isEmpty(ce)?null===(Y=M.parentNode)||void 0===Y||Y.replaceChild(z,M):((fe=>{const Q=fr(fe,"br"),ne=tt((de=>{const xe=[];let Fe=de.dom;for(;Fe;)xe.push(X(Fe)),Fe=Fe.lastChild;return xe})(fe).slice(-1),ts);Q.length===ne.length&&ye(ne,rt)})(X(M)),ie.isEmpty(M)?null===(te=M.parentNode)||void 0===te||te.replaceChild(z,M):ie.insertAfter(z,M))})(e,b,y??w);const T=((P,z,M,Y,te,ie)=>{const ce=P.formatter,fe=P.dom,Q=tt(An(ce.get()),de=>de!==Y&&!On(de,"removeformat")),ne=(de=P,xe=M,Ge(Q,(Me,nt)=>{const Ze=xh(de,nt,He=>{const We=yt=>D(yt)||yt.length>1&&"%"===yt.charAt(0);return Kt(["styles","attributes"],yt=>Gt(He,yt).exists(ee=>{const oe=u(ee)?ee:ln(ee);return Kt(oe,We)}))});return de.formatter.matchNode(xe,nt,{},Ze)?Me.concat([nt]):Me},[]));var de,xe;if(tt(ne,de=>!((xe,Fe,Me)=>{const nt=["inline","block","selector","attributes","styles","classes"],Ze=lt=>xn(lt,(ot,He)=>Kt(nt,We=>We===He));return xh(xe,Fe,lt=>{const ot=Ze(lt);return xh(xe,Me,He=>{const We=Ze(He);return((yt,ee,oe=Tn)=>an(oe).eq(yt,ee))(ot,We)})})})(P,de,Y)).length>0){const de=M.cloneNode(!1);return fe.add(z,de),ce.remove(Y,te,de,ie),fe.remove(de),R.some(de)}return R.none()})(e,b,w,t,n,r),O=ey([...v,...T.toArray(),...S],b);y&&kf(e,y,N(y)),i.setCursorLocation(O,1),o.isEmpty(w)&&o.remove(w)}})(i,s,a,d):(Bv(i,()=>mh(i,O),P=>Un(p)&&xf(i,s,a,P)),i.nodeChanged()),P=i,M=a,"removeformat"===(z=s)?ye(dy(P.selection),Y=>{ye(iy,te=>P.dom.setStyle(Y,te,"")),xy(P.dom,Y)}):sy(P.formatter,z).each(Y=>{ye(dy(P.selection),te=>Cy(P.dom,te,Y,M,null))}),n_(i,s,c,a);var P,z,M})(e,t,n,r,o)},Tl=(e,t,n,r,o)=>ky(e,t,n,r,o).fold(Tt,i=>(e.dom.rename(r,i),!0),_t),Ey=Be.each,sd=Be.each,Ty=(e,t,n,r)=>{if(sd(n.styles,(o,i)=>{e.setStyle(t,i,Mi(o,r))}),n.styles){const o=e.getAttrib(t,"style");o&&e.setAttrib(t,"data-mce-style",o)}},iN=(e,t,n,r)=>{const o=e.formatter.get(t),i=o[0],s=!r&&e.selection.isCollapsed(),a=e.dom,c=e.selection,d=(y,S=i)=>{D(S.onformat)&&S.onformat(y,S,n,r),Ty(a,y,S,n),sd(S.attributes,(b,T)=>{a.setAttrib(y,T,Mi(b,n))}),sd(S.classes,b=>{const T=Mi(b,n);a.hasClass(y,T)||a.addClass(y,T)})},f=(y,S)=>{let b=!1;return sd(y,T=>!(!Qr(T)||("false"!==a.getContentEditable(S)||T.ceFalseOverride)&&(!N(T.collapsed)||T.collapsed===s)&&a.is(S,T.selector)&&!Gr(S)&&(d(S,T),b=!0,1))),b},v=(y,S,b)=>{const T=[];let O=!0;const P=i.inline||i.block,z=(y=>{if(U(y)){const S=a.create(y);return d(S),S}return null})(P);gl(y,S,M=>{let Y;const te=ie=>{let ce=!1,fe=O,Q=!1;const ne=ie.parentNode,de=ne.nodeName.toLowerCase(),xe=y.getContentEditable(ie);N(xe)&&(fe=O,O="true"===xe,ce=!0,Q=Iv(e,ie));const Fe=O&&!ce;if(Cn(ie)&&!((Me,nt,Ze,lt)=>{if($S(Me)&&Un(nt)&&Ze.parentNode){const ot=Gg(Me.schema),He=((e,t)=>((n,r)=>{const o=n.dom;return o.parentNode?(i=X(o.parentNode),Z(i.dom.childNodes,a=>(i=>!Lt(n,i)&&r(i))(X(a))).map(X)):R.none();var i})(e,t).isSome())(X(Ze),We=>Gr(We.dom));return kn(ot,lt)&&jn(X(Ze.parentNode),!1)&&!He}return!1})(e,i,ie,de))return Y=null,void(Jo(i)&&y.remove(ie));if(Me=ie,Jo(nt=i)&&!0===nt.wrapper&&Qo(e,Me,t,n))Y=null;else{if(((Me,nt,Ze)=>{const lt=Jo(ot=i)&&!0!==ot.wrapper&&_h(e.schema,Me)&&ra(e,nt,P);var ot;return Ze&&lt})(ie,de,Fe)){const Me=y.rename(ie,P);return d(Me),T.push(Me),void(Y=null)}if(Qr(i)){let Me=f(o,ie);if(!Me&&N(ne)&&Ch(i)&&(Me=f(o,ne)),!Un(i)||Me)return void(Y=null)}N(z)&&((Me,nt,Ze,lt)=>{const ot=Me.nodeName.toLowerCase(),He=ra(e,P,ot)&&ra(e,nt,P),We=!b&&Le(Me)&&_c(Me.data),yt=Gr(Me),ee=!Un(i)||!y.isBlock(Me);return(Ze||lt)&&He&&!We&&!yt&&ee})(ie,de,Fe,Q)?(Y||(Y=y.clone(z,!1),ne.insertBefore(Y,ie),T.push(Y)),Q&&ce&&(O=fe),Y.appendChild(ie)):(Y=null,ye(Nn(ie.childNodes),te),ce&&(O=fe),Y=null)}var Me,nt};ye(M,te)}),!0===i.links&&ye(T,M=>{const Y=te=>{"A"===te.nodeName&&d(te,i),ye(Nn(te.childNodes),Y)};Y(M)}),ye(T,M=>{const Y=(te=>{let ie=0;return ye(te.childNodes,ce=>{var fe;N(fe=ce)&&Le(fe)&&0===fe.length||Jr(ce)||ie++}),ie})(M);var te;!(T.length>1)&&y.isBlock(M)||0!==Y?(Un(i)||Jo(i)&&i.wrapper)&&(i.exact||1!==Y||(M=Z((te=M).childNodes,vh).filter(ce=>"false"!==y.getContentEditable(ce)&&od(y,ce,i)).map(ce=>{const fe=y.clone(ce,!1);return d(fe),y.replace(fe,te,!0),y.remove(ce,!0),fe}).getOr(te)),((te,ie,ce,fe)=>{Ey(ie,Q=>{var ne,de,xe;Un(Q)&&Ey(te.dom.select(Q.inline,fe),ne=>{Tf(ne)&&Tl(te,Q,ce,ne,Q.exact?ne:null)}),ne=te.dom,xe=fe,(de=Q).clear_child_styles&&Ef(ne.select(de.links?"*:not(a)":"*",xe),Me=>{Tf(Me)&&ne.isEditable(Me)&&Ef(de.styles,(nt,Ze)=>{ne.setStyle(Me,Ze,"")})})})})(e,o,n,M),((te,ie,ce,fe,Q)=>{const ne=Q.parentNode;Qo(te,ne,ce,fe)&&Tl(te,ie,fe,Q)||ie.merge_with_parents&&ne&&te.dom.getParent(ne,de=>!!Qo(te,de,ce,fe)&&(Tl(te,ie,fe,Q),!0))})(e,i,t,n,M),((te,ie,ce,fe)=>{if(ie.styles&&ie.styles.backgroundColor){const Q=py(te,"fontSize");Nf(fe,ne=>Q(ne)&&te.isEditable(ne),gy(te,"backgroundColor",Mi(ie.styles.backgroundColor,ce)))}})(y,i,n,M),((te,ie,ce,fe)=>{const Q=ne=>{if(ci(ne)&&Ke(ne.parentNode)&&te.isEditable(ne)){const de=zv(te,ne.parentNode);te.getStyle(ne,"color")&&de?te.setStyle(ne,"text-decoration",de):te.getStyle(ne,"text-decoration")===de&&te.setStyle(ne,"text-decoration",null)}};ie.styles&&(ie.styles.color||ie.styles.textDecoration)&&(Be.walk(fe,Q,"childNodes"),Q(fe))})(y,i,0,M),((te,ie,ce,fe)=>{if(Un(ie)&&("sub"===ie.inline||"sup"===ie.inline)){const Q=py(te,"fontSize");Nf(fe,de=>Q(de)&&te.isEditable(de),gy(te,"fontSize",""));const ne=tt(te.select("sup"===ie.inline?"sub":"sup",fe),te.isEditable);te.remove(ne,!0)}})(y,i,0,M),fy(e,i,0,M)):y.remove(M,!0)})},w=pl(r)?r:c.getNode();if("false"===a.getContentEditable(w)&&!Iv(e,w))return f(o,r=w),void t_(e,t,r,n);if(i){if(r)if(pl(r)){if(!f(o,r)){const y=a.createRng();y.setStartBefore(r),y.setEndAfter(r),v(a,ps(a,y,o),!0)}}else v(a,r,!0);else s&&Un(i)&&!na(e).length?((y,S,b)=>{let T;const O=y.selection,P=y.formatter.get(S);if(!P)return;const z=O.getRng();let M=z.startOffset;const Y=z.startContainer.nodeValue;T=fs(y.getBody(),O.getStart());const te=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(Y&&M>0&&M<Y.length&&te.test(Y.charAt(M))&&te.test(Y.charAt(M-1))){const fe=O.getBookmark();z.collapse(!0);let Q=ps(y.dom,z,P);Q=Xc(Q),y.formatter.apply(S,b,Q),O.moveToBookmark(fe)}else{let fe=T?Q0(T):null;T&&fe?.data===Sl||(ie=y.getDoc(),ce=Cf(!0).dom,T=ie.importNode(ce,!0),fe=T.firstChild,z.insertNode(T),M=1),y.formatter.apply(S,b,T),O.setCursorLocation(fe,M)}var ie,ce})(e,t,n):(c.setRng(gf(c.getRng())),Bv(e,()=>{mh(e,(y,S)=>{const b=S?y:ps(a,y,o);v(a,b,!1)})},_t),e.nodeChanged()),sy(e.formatter,t).each(y=>{var S;ye(tt((b=>{const T=b.getSelectedBlocks(),O=b.getRng();if(b.isCollapsed())return[];if(1===T.length)return ay(O,T[0])&&ly(O,T[0])?T:[];{const P=Hn(T).filter(Y=>ay(O,Y)).toArray(),z=co(T).filter(Y=>ly(O,Y)).toArray(),M=T.slice(1,-1);return P.concat(M).concat(z)}})(S=e.selection),cy(S.dom)),S=>Ty(a,S,y,n))});S=e,ft(El,y=t)&&ye(El[y],b=>{b(S)})}var y,S;t_(e,t,r,n)},Ny=(e,t,n,r)=>{(r||e.selection.isEditable())&&iN(e,t,n,r)},Ay=e=>ft(e,"vars"),Oy=e=>e.selection.getStart(),Ry=(e,t,n,r,o)=>W(t,i=>{const s=e.formatter.matchNode(i,n,o??{},r);return!x(s)},i=>!!G0(e,i,n)||!r&&N(e.formatter.matchNode(i,n,o,!0))),jy=(e,t)=>{const n=t??Oy(e);return tt(Hc(e.dom,n),r=>Ke(r)&&!es(r))},Py=(e,t,n)=>{const r=jy(e,t);Wt(n,(o,i)=>{const s=a=>{const c=Ry(e,r,i,a.similar,Ay(a)?a.vars:void 0),d=c.isSome();if(a.state.get()!==d){a.state.set(d);const f=c.getOr(t);Ay(a)?a.callback(d,{node:f,format:i,parents:r}):ye(a.callbacks,p=>p(d,{node:f,format:i,parents:r}))}};ye([o.withSimilar,o.withoutSimilar],s),ye(o.withVars,s)})},Dy=Be.explode,Ly=()=>{const e={};return{addFilter:(t,n)=>{ye(Dy(t),r=>{ft(e,r)||(e[r]={name:r,callbacks:[]}),e[r].callbacks.push(n)})},getFilters:()=>ln(e),removeFilter:(t,n)=>{ye(Dy(t),r=>{if(ft(e,r))if(N(n)){const o=e[r],i=tt(o.callbacks,s=>s!==n);i.length>0?o.callbacks=i:delete e[r]}else delete e[r]})}}},By=(e,t,n)=>{t.addNodeFilter("br",(r,o,i)=>{const s=Be.extend({},n.getBlockElements()),a=n.getNonEmptyElements(),c=n.getWhitespaceElements();s.body=1;const d=f=>f.name in s||Nu(n,f);for(let f=0,p=r.length;f<p;f++){let v=r[f],w=v.parent;if(w&&d(w)&&v===w.lastChild){let y=v.prev;for(;y;){const S=y.name;if("span"!==S||"bookmark"!==y.attr("data-mce-type")){"br"===S&&(v=null);break}y=y.prev}if(v&&(v.remove(),kl(n,a,c,w))){const S=n.getElementRule(w.name);S&&(S.removeEmpty?w.remove():S.paddEmpty&&uf(e,i,d,w))}}else{let y=v;for(;w&&w.firstChild===y&&w.lastChild===y&&(y=w,!s[w.name]);)w=w.parent;if(y===w){const S=new yr("#text",3);S.value=Xn,v.replace(S)}}}})},Rf=e=>{const[t,...n]=e.split(","),r=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(o){const i=";base64"===o[2],s=i?(a=>{const c=/([a-z0-9+\/=\s]+)/i.exec(a);return c?c[1]:""})(r):decodeURIComponent(r);return R.some({type:o[1],data:s,base64Encoded:i})}return R.none()},My=(e,t,n=!0)=>{let r=t;if(n)try{r=atob(t)}catch{return R.none()}const o=new Uint8Array(r.length);for(let i=0;i<o.length;i++)o[i]=r.charCodeAt(i);return R.some(new Blob([o],{type:e}))},Iy=e=>new Promise((t,n)=>{const r=new FileReader;r.onloadend=()=>{t(r.result)},r.onerror=()=>{var o;n(null===(o=r.error)||void 0===o?void 0:o.message)},r.readAsDataURL(e)});let aN=0;const zy=(e,t,n)=>Rf(e).bind(({data:r,type:o,base64Encoded:i})=>{if(t&&!i)return R.none();{const s=i?r:btoa(r);return n(s,o)}}),Fy=(e,t,n)=>{const r=e.create("blobid"+aN++,t,n);return e.add(r),r},$y=(e,t,n=!1)=>zy(t,n,(r,o)=>R.from(e.getByData(r,o)).orThunk(()=>My(o,r).map(i=>Fy(e,i,r)))),jf=(e,t)=>Mn(e,`${t}/`),{entries:Hy,setPrototypeOf:qy,isFrozen:cN,getPrototypeOf:dN,getOwnPropertyDescriptor:uN}=Object;let{freeze:Dr,seal:Lo,create:hN}=Object,{apply:Pf,construct:Df}=typeof Reflect<"u"&&Reflect;Pf||(Pf=function(e,t,n){return e.apply(t,n)}),Dr||(Dr=function(e){return e}),Lo||(Lo=function(e){return e}),Df||(Df=function(e,t){return new e(...t)});const fN=Co(Array.prototype.forEach),pN=Co(Array.prototype.pop),Nl=Co(Array.prototype.push),ad=Co(String.prototype.toLowerCase),Lf=Co(String.prototype.toString),gN=Co(String.prototype.match),Bo=Co(String.prototype.replace),mN=Co(String.prototype.indexOf),vN=Co(String.prototype.trim),to=Co(RegExp.prototype.test),Al=(Uy=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Df(Uy,t)});var Uy;function Co(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return Pf(e,t,r)}}function Xt(e,t,n){var r;n=null!==(r=n)&&void 0!==r?r:ad,qy&&qy(e,null);let o=t.length;for(;o--;){let i=t[o];if("string"==typeof i){const s=n(i);s!==i&&(cN(t)||(t[o]=s),i=s)}e[i]=!0}return e}function aa(e){const t=hN(null);for(const[n,r]of Hy(e))t[n]=r;return t}function ld(e,t){for(;null!==e;){const n=uN(e,t);if(n){if(n.get)return Co(n.get);if("function"==typeof n.value)return Co(n.value)}e=dN(e)}return function(n){return console.warn("fallback value for",n),null}}const Wy=Dr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Bf=Dr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Mf=Dr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),_N=Dr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),If=Dr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),yN=Dr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Vy=Dr(["#text"]),Ky=Dr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),zf=Dr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Yy=Dr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),cd=Dr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),bN=Lo(/\{\{[\w\W]*|[\w\W]*\}\}/gm),wN=Lo(/<%[\w\W]*|[\w\W]*%>/gm),xN=Lo(/\${[\w\W]*}/gm),CN=Lo(/^data-[\-\w.\u00B7-\uFFFF]/),kN=Lo(/^aria-[\-\w]+$/),Xy=Lo(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),SN=Lo(/^(?:\w+script|data):/i),EN=Lo(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Gy=Lo(/^html$/i);var Jy=Object.freeze({__proto__:null,MUSTACHE_EXPR:bN,ERB_EXPR:wN,TMPLIT_EXPR:xN,DATA_ATTR:CN,ARIA_ATTR:kN,IS_ALLOWED_URI:Xy,IS_SCRIPT_OR_DATA:SN,ATTR_WHITESPACE:EN,DOCTYPE_NAME:Gy}),Qy=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window;const n=pe=>e(pe);if(n.version="3.0.5",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;const r=t.document,o=r.currentScript;let{document:i}=t;const{DocumentFragment:s,HTMLTemplateElement:a,Node:c,Element:d,NodeFilter:f,NamedNodeMap:p=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:v,DOMParser:w,trustedTypes:y}=t,S=d.prototype,b=ld(S,"cloneNode"),T=ld(S,"nextSibling"),O=ld(S,"childNodes"),P=ld(S,"parentNode");if("function"==typeof a){const pe=i.createElement("template");pe.content&&pe.content.ownerDocument&&(i=pe.content.ownerDocument)}let z,M="";const{implementation:Y,createNodeIterator:te,createDocumentFragment:ie,getElementsByTagName:ce}=i,{importNode:fe}=r;let Q={};n.isSupported="function"==typeof Hy&&"function"==typeof P&&Y&&void 0!==Y.createHTMLDocument;const{MUSTACHE_EXPR:ne,ERB_EXPR:de,TMPLIT_EXPR:xe,DATA_ATTR:Fe,ARIA_ATTR:Me,IS_SCRIPT_OR_DATA:nt,ATTR_WHITESPACE:Ze}=Jy;let{IS_ALLOWED_URI:lt}=Jy,ot=null;const He=Xt({},[...Wy,...Bf,...Mf,...If,...Vy]);let We=null;const yt=Xt({},[...Ky,...zf,...Yy,...cd]);let ee=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),oe=null,Ce=null,Te=!0,Ae=!0,Ve=!1,st=!0,bt=!1,dt=!1,en=!1,Xe=!1,At=!1,Pt=!1,xt=!1,Dt=!0,Wn=!1,it=!0,Rt=!1,pn={},Fn=null;const nr=Xt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let wr=null;const io=Xt({},["audio","video","img","source","image","track"]);let cr=null;const so=Xt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),$n="http://www.w3.org/1998/Math/MathML",mi="http://www.w3.org/2000/svg",ao="http://www.w3.org/1999/xhtml";let So=ao,As=!1,Jl=null;const Os=Xt({},[$n,mi,ao],Lf);let lo;const nu=["application/xhtml+xml","text/html"];let gn,Io=null;const Rs=i.createElement("form"),Ql=function(pe){return pe instanceof RegExp||pe instanceof Function},mg=function(pe){if(!Io||Io!==pe){if(pe&&"object"==typeof pe||(pe={}),pe=aa(pe),lo=lo=-1===nu.indexOf(pe.PARSER_MEDIA_TYPE)?"text/html":pe.PARSER_MEDIA_TYPE,gn="application/xhtml+xml"===lo?Lf:ad,ot="ALLOWED_TAGS"in pe?Xt({},pe.ALLOWED_TAGS,gn):He,We="ALLOWED_ATTR"in pe?Xt({},pe.ALLOWED_ATTR,gn):yt,Jl="ALLOWED_NAMESPACES"in pe?Xt({},pe.ALLOWED_NAMESPACES,Lf):Os,cr="ADD_URI_SAFE_ATTR"in pe?Xt(aa(so),pe.ADD_URI_SAFE_ATTR,gn):so,wr="ADD_DATA_URI_TAGS"in pe?Xt(aa(io),pe.ADD_DATA_URI_TAGS,gn):io,Fn="FORBID_CONTENTS"in pe?Xt({},pe.FORBID_CONTENTS,gn):nr,oe="FORBID_TAGS"in pe?Xt({},pe.FORBID_TAGS,gn):{},Ce="FORBID_ATTR"in pe?Xt({},pe.FORBID_ATTR,gn):{},pn="USE_PROFILES"in pe&&pe.USE_PROFILES,Te=!1!==pe.ALLOW_ARIA_ATTR,Ae=!1!==pe.ALLOW_DATA_ATTR,Ve=pe.ALLOW_UNKNOWN_PROTOCOLS||!1,st=!1!==pe.ALLOW_SELF_CLOSE_IN_ATTR,bt=pe.SAFE_FOR_TEMPLATES||!1,dt=pe.WHOLE_DOCUMENT||!1,At=pe.RETURN_DOM||!1,Pt=pe.RETURN_DOM_FRAGMENT||!1,xt=pe.RETURN_TRUSTED_TYPE||!1,Xe=pe.FORCE_BODY||!1,Dt=!1!==pe.SANITIZE_DOM,Wn=pe.SANITIZE_NAMED_PROPS||!1,it=!1!==pe.KEEP_CONTENT,Rt=pe.IN_PLACE||!1,lt=pe.ALLOWED_URI_REGEXP||Xy,So=pe.NAMESPACE||ao,ee=pe.CUSTOM_ELEMENT_HANDLING||{},pe.CUSTOM_ELEMENT_HANDLING&&Ql(pe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ee.tagNameCheck=pe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),pe.CUSTOM_ELEMENT_HANDLING&&Ql(pe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ee.attributeNameCheck=pe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),pe.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof pe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(ee.allowCustomizedBuiltInElements=pe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),bt&&(Ae=!1),Pt&&(At=!0),pn&&(ot=Xt({},[...Vy]),We=[],!0===pn.html&&(Xt(ot,Wy),Xt(We,Ky)),!0===pn.svg&&(Xt(ot,Bf),Xt(We,zf),Xt(We,cd)),!0===pn.svgFilters&&(Xt(ot,Mf),Xt(We,zf),Xt(We,cd)),!0===pn.mathMl&&(Xt(ot,If),Xt(We,Yy),Xt(We,cd))),pe.ADD_TAGS&&(ot===He&&(ot=aa(ot)),Xt(ot,pe.ADD_TAGS,gn)),pe.ADD_ATTR&&(We===yt&&(We=aa(We)),Xt(We,pe.ADD_ATTR,gn)),pe.ADD_URI_SAFE_ATTR&&Xt(cr,pe.ADD_URI_SAFE_ATTR,gn),pe.FORBID_CONTENTS&&(Fn===nr&&(Fn=aa(Fn)),Xt(Fn,pe.FORBID_CONTENTS,gn)),it&&(ot["#text"]=!0),dt&&Xt(ot,["html","head","body"]),ot.table&&(Xt(ot,["tbody"]),delete oe.tbody),pe.TRUSTED_TYPES_POLICY){if("function"!=typeof pe.TRUSTED_TYPES_POLICY.createHTML)throw Al('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof pe.TRUSTED_TYPES_POLICY.createScriptURL)throw Al('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');z=pe.TRUSTED_TYPES_POLICY,M=z.createHTML("")}else void 0===z&&(z=function(et,mt){if("object"!=typeof et||"function"!=typeof et.createPolicy)return null;let Zt=null;const un="data-tt-policy-suffix";mt&&mt.hasAttribute(un)&&(Zt=mt.getAttribute(un));const bn="dompurify"+(Zt?"#"+Zt:"");try{return et.createPolicy(bn,{createHTML:mn=>mn,createScriptURL:mn=>mn})}catch{return console.warn("TrustedTypes policy "+bn+" could not be created."),null}}(y,o)),null!==z&&"string"==typeof M&&(M=z.createHTML(""));Dr&&Dr(pe),Io=pe}},ak=Xt({},["mi","mo","mn","ms","mtext"]),lk=Xt({},["foreignobject","desc","title","annotation-xml"]),uj=Xt({},["title","style","font","a","script"]),ru=Xt({},Bf);Xt(ru,Mf),Xt(ru,_N);const vg=Xt({},If);Xt(vg,yN);const js=function(pe){Nl(n.removed,{element:pe});try{pe.parentNode.removeChild(pe)}catch{pe.remove()}},Zl=function(pe,et){try{Nl(n.removed,{attribute:et.getAttributeNode(pe),from:et})}catch{Nl(n.removed,{attribute:null,from:et})}if(et.removeAttribute(pe),"is"===pe&&!We[pe])if(At||Pt)try{js(et)}catch{}else try{et.setAttribute(pe,"")}catch{}},ck=function(pe){let et,mt;if(Xe)pe="<remove></remove>"+pe;else{const bn=gN(pe,/^[\r\n\t ]+/);mt=bn&&bn[0]}"application/xhtml+xml"===lo&&So===ao&&(pe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+pe+"</body></html>");const Zt=z?z.createHTML(pe):pe;if(So===ao)try{et=(new w).parseFromString(Zt,lo)}catch{}if(!et||!et.documentElement){et=Y.createDocument(So,"template",null);try{et.documentElement.innerHTML=As?M:Zt}catch{}}const un=et.body||et.documentElement;return pe&&mt&&un.insertBefore(i.createTextNode(mt),un.childNodes[0]||null),So===ao?ce.call(et,dt?"html":"body")[0]:dt?et.documentElement:un},dk=function(pe){return te.call(pe.ownerDocument||pe,pe,f.SHOW_ELEMENT|f.SHOW_COMMENT|f.SHOW_TEXT,null,!1)},ou=function(pe){return"object"==typeof c?pe instanceof c:pe&&"object"==typeof pe&&"number"==typeof pe.nodeType&&"string"==typeof pe.nodeName},vi=function(pe,et,mt){Q[pe]&&fN(Q[pe],Zt=>{Zt.call(n,et,mt,Io)})},uk=function(pe){let et;if(vi("beforeSanitizeElements",pe,null),(mt=pe)instanceof v&&("string"!=typeof mt.nodeName||"string"!=typeof mt.textContent||"function"!=typeof mt.removeChild||!(mt.attributes instanceof p)||"function"!=typeof mt.removeAttribute||"function"!=typeof mt.setAttribute||"string"!=typeof mt.namespaceURI||"function"!=typeof mt.insertBefore||"function"!=typeof mt.hasChildNodes))return js(pe),!0;var mt;const Zt=gn(pe.nodeName);if(vi("uponSanitizeElement",pe,{tagName:Zt,allowedTags:ot}),pe.hasChildNodes()&&!ou(pe.firstElementChild)&&(!ou(pe.content)||!ou(pe.content.firstElementChild))&&to(/<[/\w]/g,pe.innerHTML)&&to(/<[/\w]/g,pe.textContent))return js(pe),!0;if(!ot[Zt]||oe[Zt]){if(!oe[Zt]&&fk(Zt)&&(ee.tagNameCheck instanceof RegExp&&to(ee.tagNameCheck,Zt)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(Zt)))return!1;if(it&&!Fn[Zt]){const un=P(pe)||pe.parentNode,bn=O(pe)||pe.childNodes;if(bn&&un)for(let mn=bn.length-1;mn>=0;--mn)un.insertBefore(b(bn[mn],!0),T(pe))}return js(pe),!0}return pe instanceof d&&!function(un){let bn=P(un);bn&&bn.tagName||(bn={namespaceURI:So,tagName:"template"});const mn=ad(un.tagName),Sn=ad(bn.tagName);return!!Jl[un.namespaceURI]&&(un.namespaceURI===mi?bn.namespaceURI===ao?"svg"===mn:bn.namespaceURI===$n?"svg"===mn&&("annotation-xml"===Sn||ak[Sn]):!!ru[mn]:un.namespaceURI===$n?bn.namespaceURI===ao?"math"===mn:bn.namespaceURI===mi?"math"===mn&&lk[Sn]:!!vg[mn]:un.namespaceURI===ao?!(bn.namespaceURI===mi&&!lk[Sn])&&!(bn.namespaceURI===$n&&!ak[Sn])&&!vg[mn]&&(uj[mn]||!ru[mn]):!("application/xhtml+xml"!==lo||!Jl[un.namespaceURI]))}(pe)?(js(pe),!0):"noscript"!==Zt&&"noembed"!==Zt&&"noframes"!==Zt||!to(/<\/no(script|embed|frames)/i,pe.innerHTML)?(bt&&3===pe.nodeType&&(et=pe.textContent,et=Bo(et,ne," "),et=Bo(et,de," "),et=Bo(et,xe," "),pe.textContent!==et&&(Nl(n.removed,{element:pe.cloneNode()}),pe.textContent=et)),vi("afterSanitizeElements",pe,null),!1):(js(pe),!0)},hk=function(pe,et,mt){if(Dt&&("id"===et||"name"===et)&&(mt in i||mt in Rs))return!1;if((!Ae||Ce[et]||!to(Fe,et))&&(!Te||!to(Me,et)))if(!We[et]||Ce[et]){if(!(fk(pe)&&(ee.tagNameCheck instanceof RegExp&&to(ee.tagNameCheck,pe)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(pe))&&(ee.attributeNameCheck instanceof RegExp&&to(ee.attributeNameCheck,et)||ee.attributeNameCheck instanceof Function&&ee.attributeNameCheck(et))||"is"===et&&ee.allowCustomizedBuiltInElements&&(ee.tagNameCheck instanceof RegExp&&to(ee.tagNameCheck,mt)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(mt))))return!1}else if(!cr[et]&&!to(lt,Bo(mt,Ze,""))&&("src"!==et&&"xlink:href"!==et&&"href"!==et||"script"===pe||0!==mN(mt,"data:")||!wr[pe])&&(!Ve||to(nt,Bo(mt,Ze,"")))&&mt)return!1;return!0},fk=function(pe){return pe.indexOf("-")>0},pk=function(pe){let et,mt,Zt,un;vi("beforeSanitizeAttributes",pe,null);const{attributes:bn}=pe;if(!bn)return;const mn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:We};for(un=bn.length;un--;){et=bn[un];const{name:Sn,namespaceURI:xa}=et;mt="value"===Sn?et.value:vN(et.value);const fj=mt;if(Zt=gn(Sn),mn.attrName=Zt,mn.attrValue=mt,mn.keepAttr=!0,mn.forceKeepAttr=void 0,vi("uponSanitizeAttribute",pe,mn),mt=mn.attrValue,mn.forceKeepAttr)continue;if(!mn.keepAttr){Zl(Sn,pe);continue}if(!st&&to(/\/>/i,mt)){Zl(Sn,pe);continue}bt&&(mt=Bo(mt,ne," "),mt=Bo(mt,de," "),mt=Bo(mt,xe," "));const gk=gn(pe.nodeName);if(hk(gk,Zt,mt)){if(!Wn||"id"!==Zt&&"name"!==Zt||(Zl(Sn,pe),mt="user-content-"+mt),z&&"object"==typeof y&&"function"==typeof y.getAttributeType&&!xa)switch(y.getAttributeType(gk,Zt)){case"TrustedHTML":mt=z.createHTML(mt);break;case"TrustedScriptURL":mt=z.createScriptURL(mt)}if(mt!==fj)try{xa?pe.setAttributeNS(xa,Sn,mt):pe.setAttribute(Sn,mt)}catch{Zl(Sn,pe)}}else Zl(Sn,pe)}vi("afterSanitizeAttributes",pe,null)},hj=function pe(et){let mt;const Zt=dk(et);for(vi("beforeSanitizeShadowDOM",et,null);mt=Zt.nextNode();)vi("uponSanitizeShadowNode",mt,null),uk(mt)||(mt.content instanceof s&&pe(mt.content),pk(mt));vi("afterSanitizeShadowDOM",et,null)};return n.sanitize=function(pe){let et,mt,Zt,un,bn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(As=!pe,As&&(pe="\x3c!--\x3e"),"string"!=typeof pe&&!ou(pe)){if("function"!=typeof pe.toString)throw Al("toString is not a function");if("string"!=typeof(pe=pe.toString()))throw Al("dirty is not a string, aborting")}if(!n.isSupported)return pe;if(en||mg(bn),n.removed=[],"string"==typeof pe&&(Rt=!1),Rt){if(pe.nodeName){const xa=gn(pe.nodeName);if(!ot[xa]||oe[xa])throw Al("root node is forbidden and cannot be sanitized in-place")}}else if(pe instanceof c)et=ck("\x3c!----\x3e"),mt=et.ownerDocument.importNode(pe,!0),1===mt.nodeType&&"BODY"===mt.nodeName||"HTML"===mt.nodeName?et=mt:et.appendChild(mt);else{if(!At&&!bt&&!dt&&-1===pe.indexOf("<"))return z&&xt?z.createHTML(pe):pe;if(et=ck(pe),!et)return At?null:xt?M:""}et&&Xe&&js(et.firstChild);const mn=dk(Rt?pe:et);for(;Zt=mn.nextNode();)uk(Zt)||(Zt.content instanceof s&&hj(Zt.content),pk(Zt));if(Rt)return pe;if(At){if(Pt)for(un=ie.call(et.ownerDocument);et.firstChild;)un.appendChild(et.firstChild);else un=et;return(We.shadowroot||We.shadowrootmode)&&(un=fe.call(r,un,!0)),un}let Sn=dt?et.outerHTML:et.innerHTML;return dt&&ot["!doctype"]&&et.ownerDocument&&et.ownerDocument.doctype&&et.ownerDocument.doctype.name&&to(Gy,et.ownerDocument.doctype.name)&&(Sn="<!DOCTYPE "+et.ownerDocument.doctype.name+">\n"+Sn),bt&&(Sn=Bo(Sn,ne," "),Sn=Bo(Sn,de," "),Sn=Bo(Sn,xe," ")),z&&xt?z.createHTML(Sn):Sn},n.setConfig=function(pe){mg(pe),en=!0},n.clearConfig=function(){Io=null,en=!1},n.isValidAttribute=function(pe,et,mt){Io||mg({});const Zt=gn(pe),un=gn(et);return hk(Zt,un,mt)},n.addHook=function(pe,et){"function"==typeof et&&(Q[pe]=Q[pe]||[],Nl(Q[pe],et))},n.removeHook=function(pe){if(Q[pe])return pN(Q[pe])},n.removeHooks=function(pe){Q[pe]&&(Q[pe]=[])},n.removeAllHooks=function(){Q={}},n}();const Zy=Be.each,NN=Be.trim,AN=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],ON={ftp:21,http:80,https:443,mailto:25},RN=["img","video"],eb=(e,t,n)=>{const r=(o=>{try{return decodeURIComponent(o)}catch{return unescape(o)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(r)||!e.allow_html_data_urls&&(/^data:image\//i.test(r)?(i=n,(N(o=e.allow_svg_data_urls)?!o:!N(i)||!Oe(RN,i))&&/^data:image\/svg\+xml/i.test(r)):/^data:/i.test(r)));var o,i};class ko{static parseDataUri(t){let n;const r=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(r[0]);return o&&(n=o[1]),{type:n,data:r[1]}}static isDomSafe(t,n,r={}){if(r.allow_script_urls)return!0;{const o=Ri.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!eb(r,o,n)}}static getDocumentBaseUrl(t){var n;let r;return r=0!==t.protocol.indexOf("http")&&"file:"!==t.protocol?null!==(n=t.href)&&void 0!==n?n:"":t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(t,n={}){this.path="",this.directory="",t=NN(t),this.settings=n;const r=n.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))return void(o.source=t);const i=0===t.indexOf("//");if(0!==t.indexOf("/")||i||(t=(r&&r.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const a=r?r.path:new ko(document.location.href).directory;if(""===r?.protocol)t="//mce_host"+o.toAbsPath(a,t);else{const c=/([^#?]*)([#?]?.*)/.exec(t);c&&(t=(r&&r.protocol||"http")+"://mce_host"+o.toAbsPath(a,c[1])+c[2])}}t=t.replace(/@@/g,"(mce_at)");const s=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);s&&Zy(AN,(a,c)=>{let d=s[c];d&&(d=d.replace(/\(mce_at\)/g,"@@")),o[a]=d}),r&&(o.protocol||(o.protocol=r.protocol),o.userInfo||(o.userInfo=r.userInfo),o.port||"mce_host"!==o.host||(o.port=r.port),o.host&&"mce_host"!==o.host||(o.host=r.host),o.source=""),i&&(o.protocol="")}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(t){if("./"===t)return t;const n=new ko(t,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const r=this.getURI(),o=n.getURI();if(r===o||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===o)return r;let i=this.toRelPath(this.path,n.path);return n.query&&(i+="?"+n.query),n.anchor&&(i+="#"+n.anchor),i}toAbsolute(t,n){const r=new ko(t,{base_uri:this});return r.getURI(n&&this.isSameOrigin(r))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=this.protocol?ON[this.protocol]:null;if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let r,o,i=0,s="";const a=t.substring(0,t.lastIndexOf("/")).split("/"),c=n.split("/");if(a.length>=c.length)for(r=0,o=a.length;r<o;r++)if(r>=c.length||a[r]!==c[r]){i=r+1;break}if(a.length<c.length)for(r=0,o=c.length;r<o;r++)if(r>=a.length||a[r]!==c[r]){i=r+1;break}if(1===i)return n;for(r=0,o=a.length-(i-1);r<o;r++)s+="../";for(r=i-1,o=c.length;r<o;r++)s+=r!==i-1?"/"+c[r]:c[r];return s}toAbsPath(t,n){let r=0;const o=/\/$/.test(n)?"/":"",i=t.split("/"),s=n.split("/"),a=[];Zy(i,p=>{p&&a.push(p)});const c=[];for(let p=s.length-1;p>=0;p--)0!==s[p].length&&"."!==s[p]&&(".."!==s[p]?r>0?r--:c.push(s[p]):r++);const d=a.length-r;let f;return f=d<=0?Ft(c).join("/"):a.slice(0,d).join("/")+"/"+Ft(c).join("/"),0!==f.indexOf("/")&&(f="/"+f),o&&f.lastIndexOf("/")!==f.length-1&&(f+=o),f}getURI(t=!1){let n;return this.source&&!t||(n="",t||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const jN=Be.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Ff="data-mce-type";let tb=0;const nb=(e,t,n,r,o)=>{var i,s,a,c;const d=t.validate,f=n.getSpecialElements();8===e.nodeType&&!t.allow_conditional_comments&&/^\[if/i.test(null!==(i=e.nodeValue)&&void 0!==i?i:"")&&(e.nodeValue=" "+e.nodeValue);const p=null!==(s=o?.tagName)&&void 0!==s?s:e.nodeName.toLowerCase();if("html"!==r&&n.isValid(r))return void(N(o)&&(o.allowedTags[p]=!0));if(1!==e.nodeType||"body"===p)return;const v=X(e),w=Qi(v,Ff),y=Sr(v,"data-mce-bogus");if(!w&&U(y))return void("all"===y?rt(v):fn(v));const S=n.getElementRule(p);if(!d||S){if(N(o)&&(o.allowedTags[p]=!0),d&&S&&!w){if(ye(null!==(a=S.attributesForced)&&void 0!==a?a:[],b=>{In(v,b.name,"{$uid}"===b.value?"mce_"+tb++:b.value)}),ye(null!==(c=S.attributesDefault)&&void 0!==c?c:[],b=>{Qi(v,b.name)||In(v,b.name,"{$uid}"===b.value?"mce_"+tb++:b.value)}),S.attributesRequired&&!Kt(S.attributesRequired,b=>Qi(v,b))||S.removeEmptyAttrs&&(b=>{const T=b.dom.attributes;return null==T||0===T.length})(v))return void fn(v);S.outputName&&S.outputName!==p&&((b,T)=>{const O=((z,M)=>{const Y=je(M),te=_(z);return qr(Y,te),Y})(b,T);pt(b,O);const P=rn(b);Bt(O,P),rt(b)})(v,S.outputName)}}else ft(f,p)?rt(v):fn(v)},rb=(e,t,n,r,o,i)=>"html"!==n&&!ns(r)||!(o in jN&&eb(e,i,r))&&(!e.validate||t.isValid(r,o)||Mn(o,"data-")||Mn(o,"aria-")),ob=(e,t)=>e.hasAttribute(Ff)&&("id"===t||"class"===t||"style"===t),ib=(e,t)=>e in t.getBoolAttrs(),PN=(e,t,n,r)=>{const{attributes:o}=e;for(let i=o.length-1;i>=0;i--){const s=o[i],a=s.name,c=s.value;rb(t,n,r,e.tagName.toLowerCase(),a,c)||ob(e,a)?ib(a,n)&&e.setAttribute(a,a):e.removeAttribute(a)}},LN=e=>{const n={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`)};return Qy().sanitize(e,n),e.innerHTML},sb=Be.makeMap,ab=Be.extend,lb=(e,t,n,r)=>{const o=e.name,i=o in n&&"title"!==o&&"textarea"!==o,s=t.childNodes;for(let a=0,c=s.length;a<c;a++){const d=s[a],f=new yr(d.nodeName.toLowerCase(),d.nodeType);if(Ke(d)){const p=d.attributes;for(let v=0,w=p.length;v<w;v++){const y=p[v];f.attr(y.name,y.value)}ns(f.name)&&(r(d),f.value=d.innerHTML)}else Le(d)?(f.value=d.data,i&&(f.raw=!0)):(Ti(d)||mk(d)||vk(d))&&(f.value=d.data);ns(f.name)||lb(f,d,n,r),e.append(f)}},la=(e={},t=ji())=>{const n=Ly(),r=Ly(),o={validate:!0,root_name:"body",sanitize:!0,...e},i=new DOMParser,s=((S,b)=>{const T=(()=>{let O=[];const P=()=>O[O.length-1];return{track:z=>{xu(z)&&O.push(z);let M=P();return M&&!M.contains(z)&&(O.pop(),M=P()),Dg(M)},current:()=>Dg(P()),reset:()=>{O=[]}}})();if(S.sanitize){const O=((e,t,n)=>{const r=Qy();return r.addHook("uponSanitizeElement",(o,i)=>{nb(o,e,t,n.track(o),i)}),r.addHook("uponSanitizeAttribute",(o,i)=>{((s,a,c,d,f)=>{const p=s.tagName.toLowerCase(),{attrName:v,attrValue:w}=f;f.keepAttr=rb(a,c,d,p,v,w),f.keepAttr?(f.allowedAttributes[v]=!0,ib(v,c)&&(f.attrValue=v),a.allow_svg_data_urls&&Mn(w,"data:image/svg+xml")&&(f.forceKeepAttr=!0)):ob(s,v)&&(f.forceKeepAttr=!0)})(o,e,t,n.current(),i)}),r})(S,b,T);return{sanitizeHtmlElement:(z,M)=>{O.sanitize(z,((Y,te)=>{const ie={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return ie.PARSER_MEDIA_TYPE=te,Y.allow_script_urls?ie.ALLOWED_URI_REGEXP=/.*/:Y.allow_html_data_urls&&(ie.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),ie})(S,M)),O.removed=[],T.reset()},sanitizeNamespaceElement:LN}}return{sanitizeHtmlElement:(O,P)=>{const z=document.createNodeIterator(O,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let M;for(;M=z.nextNode();){const Y=T.track(M);nb(M,S,b,Y),Ke(M)&&PN(M,S,b,Y)}T.reset()},sanitizeNamespaceElement:F}})(o,t),c=n.getFilters,p=r.getFilters,w=(S,b)=>{const T=U(b.attr(Ff)),O=1===b.type&&!ft(S,b.name)&&!Nu(t,b)&&!ns(b.name);return 3===b.type||O&&!T},y={schema:t,addAttributeFilter:r.addFilter,getAttributeFilters:p,removeAttributeFilter:r.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:c,removeNodeFilter:n.removeFilter,parse:(S,b={})=>{var T;const O=o.validate,P=null!==(T=b.context)&&void 0!==T?T:o.root_name,z=((de,xe,Fe="html")=>{const Me="xhtml"===Fe?"application/xhtml+xml":"text/html",nt=ft(t.getSpecialElements(),xe.toLowerCase()),Ze=nt?`<${xe}>${de}</${xe}>`:de,ot=i.parseFromString("xhtml"===Fe?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Ze}</body></html>`:`<body>${Ze}</body>`,Me).body;return s.sanitizeHtmlElement(ot,Me),nt?ot.firstChild:ot})(S,P,b.format);ku(t,z);const M=new yr(P,11);lb(M,z,t.getSpecialElements(),s.sanitizeNamespaceElement),z.innerHTML="";const[Y,te]=((de,xe,Fe,Me)=>{const nt=Fe.validate,Ze=xe.getNonEmptyElements(),lt=xe.getWhitespaceElements(),ot=ab(sb("script,style,head,html,body,title,meta,param"),xe.getBlockElements()),He=Gg(xe),We=/[ \t\r\n]+/g,yt=/^[ \t\r\n]+/,ee=/[ \t\r\n]+$/,oe=Ae=>{let Ve=Ae.parent;for(;N(Ve);){if(Ve.name in lt)return!0;Ve=Ve.parent}return!1},Ce=Ae=>Ae.name in ot||Nu(xe,Ae)||ns(Ae.name)&&Ae.parent===de,Te=(Ae,Ve)=>!N(Ve?Ae.prev:Ae.next)&&!C(Ae.parent)&&Ce(Ae.parent)&&(Ae.parent!==de||!0===Me.isRootContent);return[Ae=>{var Ve,bt,dt;if(3===Ae.type&&!oe(Ae)){let st=null!==(Ve=Ae.value)&&void 0!==Ve?Ve:"";st=st.replace(We," "),dt=Ce,(N(bt=Ae.prev)&&(dt(bt)||"br"===bt.name)||Te(Ae,!0))&&(st=st.replace(yt,"")),0===st.length?Ae.remove():Ae.value=st}},Ae=>{var Ve,dt,en;if(1===Ae.type){const st=xe.getElementRule(Ae.name);if(nt&&st){const bt=kl(xe,Ze,lt,Ae);st.paddInEmptyBlock&&bt&&(dt=>{let en=dt;for(;N(en);){if(en.name in He)return kl(xe,Ze,lt,en);en=en.parent}return!1})(Ae)?uf(Fe,Me,Ce,Ae):st.removeEmpty&&bt?Ce(Ae)?Ae.remove():Ae.unwrap():st.paddEmpty&&(bt||K0(dt=Ae,"#text")&&(null===(en=dt?.firstChild)||void 0===en?void 0:en.value)===Xn)&&uf(Fe,Me,Ce,Ae)}}else if(3===Ae.type&&!oe(Ae)){let st=null!==(Ve=Ae.value)&&void 0!==Ve?Ve:"";(Ae.next&&Ce(Ae.next)||Te(Ae,!1))&&(st=st.replace(ee,"")),0===st.length?Ae.remove():Ae.value=st}}]})(M,t,o,b),ie=[],fe={nodes:{},attributes:{}},Q=de=>U0(c(),p(),de,fe);if(((de,xe,Fe)=>{const Me=[];for(let nt=de,Ze=nt;nt;Ze=nt,nt=nt.walk()){const lt=nt;ye(xe,ot=>ot(lt)),C(lt.parent)&&lt!==de?nt=Ze:Me.push(lt)}for(let nt=Me.length-1;nt>=0;nt--){const Ze=Me[nt];ye(Fe,lt=>lt(Ze))}})(M,[Y,Q],[te,O?de=>{return Fe=ie,void(pf(t,xe=de)&&Fe.push(xe));var xe,Fe}:F]),ie.reverse(),O&&ie.length>0)if(b.context){const{pass:de,fail:xe}=rr(ie,Fe=>Fe.parent===M);ff(xe,t,M,Q),b.invalid=de.length>0}else ff(ie,t,M,Q);const ne=((de,xe)=>{var Fe;const Me=null!==(Fe=xe.forced_root_block)&&void 0!==Fe?Fe:de.forced_root_block;return!1===Me?"":!0===Me?"p":Me})(o,b);return ne&&("body"===M.name||b.isRootContent)&&((de,xe)=>{const Fe=ab(sb("script,style,head,html,body,title,meta,param"),t.getBlockElements()),Me=/^[ \t\r\n]+/,nt=/[ \t\r\n]+$/;let Ze=de.firstChild,lt=null;const ot=He=>{var We,yt;He&&(Ze=He.firstChild,Ze&&3===Ze.type&&(Ze.value=null===(We=Ze.value)||void 0===We?void 0:We.replace(Me,"")),Ze=He.lastChild,Ze&&3===Ze.type&&(Ze.value=null===(yt=Ze.value)||void 0===yt?void 0:yt.replace(nt,"")))};if(t.isValidChild(de.name,xe.toLowerCase())){for(;Ze;){const He=Ze.next;w(Fe,Ze)?(lt||(lt=new yr(xe,1),lt.attr(o.forced_root_block_attrs),de.insert(lt,Ze)),lt.append(Ze)):(ot(lt),lt=null),Ze=He}ot(lt)}})(M,ne),b.invalid||W0(fe,b),M}};return((e,t)=>{const n=e.schema;t.remove_trailing_brs&&By(t,e,n),e.addAttributeFilter("href",o=>{let i=o.length;const s=a=>{const c=a?Be.trim(a):"";return/\b(noopener)\b/g.test(c)?c:c.split(" ").filter(f=>f.length>0).concat(["noopener"]).sort().join(" ")};if(!t.allow_unsafe_link_target)for(;i--;){const a=o[i];"a"===a.name&&"_blank"===a.attr("target")&&a.attr("rel",s(a.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",o=>{let i,s,a,c,d=o.length;for(;d--;)if(c=o[d],"a"===c.name&&c.firstChild&&!c.attr("href"))for(a=c.parent,i=c.lastChild;i&&a;)s=i.prev,a.insert(i,c),i=s}),t.fix_list_elements&&e.addNodeFilter("ul,ol",o=>{let i,s,a=o.length;for(;a--;)if(i=o[a],s=i.parent,s&&("ul"===s.name||"ol"===s.name))if(i.prev&&"li"===i.prev.name)i.prev.append(i);else{const c=new yr("li",1);c.attr("style","list-style-type: none"),i.wrap(c)}});const r=n.getValidClasses();t.validate&&r&&e.addAttributeFilter("class",o=>{var i;let s=o.length;for(;s--;){const a=o[s],c=null!==(i=a.attr("class"))&&void 0!==i?i:"",d=Be.explode(c," ");let f="";for(let p=0;p<d.length;p++){const v=d[p];let w=!1,y=r["*"];y&&y[v]&&(w=!0),y=r[a.name],!w&&y&&y[v]&&(w=!0),w&&(f&&(f+=" "),f+=v)}f.length||(f=null),a.attr("class",f)}}),((o,i)=>{const{blob_cache:s}=i;if(s){const a=c=>{const d=c.attr("src");var f;(f=c).attr("src")===$t.transparentSrc||N(f.attr("data-mce-placeholder"))||(f=>N(f.attr("data-mce-bogus")))(c)||C(d)||$y(s,d,!0).each(f=>{c.attr("src",f.blobUri())})};o.addAttributeFilter("src",c=>ye(c,a))}})(e,t),t.convert_unsafe_embeds&&e.addNodeFilter("object,embed",o=>ye(o,i=>{i.replace(((s,a,c,d,f)=>{let p;p=x(s)?"iframe":jf(s,"image")?"img":jf(s,"video")?"video":jf(s,"audio")?"audio":"iframe";const v=new yr(p,1);return v.attr("audio"===p?{src:a}:{src:a,width:c,height:d}),"audio"!==p&&"video"!==p||v.attr("controls",""),"iframe"===p&&f&&v.attr("sandbox",""),v})(i.attr("type"),i.attr("object"===i.name?"data":"src"),i.attr("width"),i.attr("height"),t.sandbox_iframes))})),t.sandbox_iframes&&e.addNodeFilter("iframe",o=>ye(o,i=>i.attr("sandbox","")))})(y,o),(b=o).inline_styles&&((e,t,n)=>{var r;const o=Lu();var i,s,a;t.convert_fonts_to_spans&&(i=e,s=o,a=Be.explode(null!==(r=t.font_size_legacy_values)&&void 0!==r?r:""),i.addNodeFilter("font",c=>{ye(c,d=>{const f=s.parse(d.attr("style")),p=d.attr("color"),v=d.attr("face"),w=d.attr("size");var y;p&&(f.color=p),v&&(f["font-family"]=v),w&&Ki(w).each(y=>{f["font-size"]=a[y-1]}),d.name="span",d.attr("style",s.serialize(f)),y=d,ye(["color","face","size"],b=>{y.attr(b,null)})})})),((i,s,a)=>{i.addNodeFilter("strike",c=>{const d="html4"!==s.type;ye(c,f=>{if(d)f.name="s";else{const p=a.parse(f.attr("style"));p["text-decoration"]="line-through",f.name="span",f.attr("style",a.serialize(p))}})})})(e,n,o)})(y,b,t),y;var b},cb=(e,t,n)=>{const r=rd(i=e)?Ii({validate:!1}).serialize(i):i,o=t(r);var i;if(o.isDefaultPrevented())return o;if(rd(e)){if(o.content!==r){const i=la({validate:!1,forced_root_block:!1,...n}).parse(o.content,{context:e.name});return{...o,content:i}}return{...o,content:e}}return o},db=(e,t)=>{if(t.no_events)return Tr.value(t);{const n=e.dispatch("BeforeGetContent",t);return n.isDefaultPrevented()?Tr.error(o_(e,{content:"",...n}).content):Tr.value(n)}},ub=(e,t,n)=>n.no_events?t:cb(t,o=>o_(e,{...n,content:o}),{sanitize:th(e),sandbox_iframes:nh(e)}).content,$f=(e,t)=>{if(t.no_events)return Tr.value(t);{const n=cb(t.content,r=>{return o=e,i={...t,content:r},o.dispatch("BeforeSetContent",i);var o,i},{sanitize:th(e),sandbox_iframes:nh(e)});return n.isDefaultPrevented()?(r_(e,n),Tr.error(void 0)):Tr.value(n)}},Hf=(e,t,n)=>{n.no_events||r_(e,{...n,content:t})},qf=(e,t,n)=>({element:e,width:t,rows:n}),hb=(e,t)=>({element:e,cells:t}),BN=(e,t)=>({x:e,y:t}),fb=(e,t)=>No(e,t).bind(Ki).getOr(1),MN=(e,t,n)=>{const r=e.rows;return!!(r[n]?r[n].cells:[])[t]},pb=e=>Ge(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),gb=(e,t)=>{const n=e.rows;for(let r=0;r<n.length;r++){const o=n[r].cells;for(let i=0;i<o.length;i++)if(Lt(o[i],t))return R.some(BN(i,r))}return R.none()},mb=(e,t,n,r,o)=>{const i=[],s=e.rows;for(let a=n;a<=o;a++){const c=s[a].cells,d=t<r?c.slice(t,r+1):c.slice(r,t+1);i.push(hb(s[a].element,d))}return i},IN=e=>((t,n)=>{const r=as(t.element),o=je("tbody");return Bt(o,n),Et(r,o),r})(e,ut(e.rows,n=>{const r=ut(n.cells,i=>{const s=hm(i);return h(s,"colspan"),h(s,"rowspan"),s}),o=as(n.element);return Bt(o,r),o})),vb=()=>Nh([]),dd=(e,t)=>t>=0&&t<e.length&&ta(e.charAt(t)),_b=e=>Fr(e.innerText),yb=e=>Ke(e)?e.outerHTML:Le(e)?Ri.encodeRaw(e.data,!1):Ti(e)?"\x3c!--"+e.data+"--\x3e":"",qN=ri(()=>document.implementation.createHTMLDocument("undo")),ud=e=>{const t=e.serializer.getTempAttrs(),n=K_(e.getBody(),t);return null!==n.querySelector("iframe")?{type:"fragmented",fragments:tt(ut(Nn(n.childNodes),L(Fr,yb)),r=>r.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:Fr(n.innerHTML),bookmark:null,beforeBookmark:null}},Uf=(e,t,n)=>{const r=n?t.beforeBookmark:t.bookmark;"fragmented"===t.type?((e,t)=>{((n,r)=>{let o=0;ye(n,i=>{var s,a;0===i[0]?o++:1===i[0]?(((s,a,c)=>{const d=(f=>{let p;const v=document.createElement("div"),w=document.createDocumentFragment();for(f&&(v.innerHTML=f);p=v.firstChild;)w.appendChild(p);return w})(a);s.hasChildNodes()&&c<s.childNodes.length?s.insertBefore(d,s.childNodes[c]):s.appendChild(d)})(r,i[1],o),o++):2===i[0]&&(a=o,(s=r).hasChildNodes()&&a<s.childNodes.length&&s.removeChild(s.childNodes[a]))})})(((n,r)=>{const o=n.length+r.length+2,i=new Array(o),s=new Array(o),a=(p,v,w,y,S)=>{const b=d(p,v,w,y);if(null===b||b.start===v&&b.diag===v-y||b.end===p&&b.diag===p-w){let T=p,O=w;for(;T<v||O<y;)T<v&&O<y&&n[T]===r[O]?(S.push([0,n[T]]),++T,++O):v-p>y-w?(S.push([2,n[T]]),++T):(S.push([1,r[O]]),++O)}else{a(p,b.start,w,b.start-b.diag,S);for(let T=b.start;T<b.end;++T)S.push([0,n[T]]);a(b.end,v,b.end-b.diag,y,S)}},c=(p,v,w,y)=>{let S=p;for(;S-v<y&&S<w&&n[S]===r[S-v];)++S;return{start:p,end:S,diag:v}},d=(p,v,w,y)=>{const S=v-p,b=y-w;if(0===S||0===b)return null;const T=S-b,O=b+S,P=(O%2==0?O:O+1)/2;let z,M,Y,te,ie;for(i[1+P]=p,s[1+P]=v+1,z=0;z<=P;++z){for(M=-z;M<=z;M+=2){for(Y=M+P,i[Y]=M===-z||M!==z&&i[Y-1]<i[Y+1]?i[Y+1]:i[Y-1]+1,te=i[Y],ie=te-p+w-M;te<v&&ie<y&&n[te]===r[ie];)i[Y]=++te,++ie;if(T%2!=0&&T-z<=M&&M<=T+z&&s[Y-T]<=i[Y])return c(s[Y-T],M+p-w,v,y)}for(M=T-z;M<=T+z;M+=2){for(Y=M+P-T,s[Y]=M===T-z||M!==T+z&&s[Y+1]<=s[Y-1]?s[Y+1]-1:s[Y-1],te=s[Y]-1,ie=te-p+w-M;te>=p&&ie>=w&&n[te]===r[ie];)s[Y]=te--,ie--;if(T%2==0&&-z<=M&&M<=z&&s[Y]<=i[Y+T])return c(s[Y],M+p-w,v,y)}}return null},f=[];return a(0,n.length,0,r.length,f),f})(ut(Nn(t.childNodes),yb),e),t)})(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!N(r)||!Tv(r)||!r.isFakeCaret}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},Wf=e=>"fragmented"===e.type?e.fragments.join(""):e.content,bb=e=>{const t=je("body",qN());return ar(t,Wf(e)),ye(fr(t,"*[data-mce-bogus]"),fn),Yn(t)},Vf=(e,t)=>{return!(!e||!t)&&(r=t,!(Wf(e)!==Wf(r))||((n,r)=>bb(n)===bb(r))(e,t));var r},Kf=e=>0===e.get(),hd=(e,t,n)=>{Kf(n)&&(e.typing=t)},wb=(e,t)=>{e.typing&&(hd(e,!1,t),e.add())},xb=e=>({init:{bindEvents:F},undoManager:{beforeChange:(t,n)=>{return r=e,i=n,void(Kf(t)&&i.set(Xu(r.selection)));var r,i},add:(t,n,r,o,i,s)=>((a,c,d,f,p,v,w)=>{const y=ud(a),S=Be.extend(v||{},y);if(!Kf(f)||a.removed)return null;const b=c.data[d.get()];if(a.dispatch("BeforeAddUndo",{level:S,lastLevel:b,originalEvent:w}).isDefaultPrevented()||b&&Vf(b,S))return null;c.data[d.get()]&&p.get().each(P=>{c.data[d.get()].beforeBookmark=P});const T=YS(a);if(T&&c.data.length>T){for(let P=0;P<c.data.length-1;P++)c.data[P]=c.data[P+1];c.data.length--,d.set(c.data.length)}S.bookmark=Xu(a.selection),d.get()<c.data.length-1&&(c.data.length=d.get()+1),c.data.push(S),d.set(c.data.length-1);const O={level:S,lastLevel:b,originalEvent:w};return d.get()>0?(a.setDirty(!0),a.dispatch("AddUndo",O),a.dispatch("change",O)):a.dispatch("AddUndo",O),S})(e,t,n,r,o,i,s),undo:(t,n,r)=>((o,i,s,a)=>{let c;return i.typing&&(i.add(),i.typing=!1,hd(i,!1,s)),a.get()>0&&(a.set(a.get()-1),c=i.data[a.get()],Uf(o,c,!0),o.setDirty(!0),o.dispatch("Undo",{level:c})),c})(e,t,n,r),redo:(t,n)=>((r,o,i)=>{let s;return o.get()<i.length-1&&(o.set(o.get()+1),s=i[o.get()],Uf(r,s,!1),r.setDirty(!0),r.dispatch("Redo",{level:s})),s})(e,t,n),clear:(t,n)=>{return r=e,i=n,(o=t).data=[],i.set(0),o.typing=!1,void r.dispatch("ClearUndos");var r,o,i},reset:t=>{return(n=t).clear(),void n.add();var n},hasUndo:(t,n)=>{return r=e,o=t,n.get()>0||o.typing&&o.data[0]&&!Vf(ud(r),o.data[0]);var r,o},hasRedo:(t,n)=>{return r=t,n.get()<r.data.length-1&&!r.typing;var r},transact:(t,n,r)=>{return s=r,wb(o=t,n),o.beforeChange(),o.ignore(s),o.add();var o,s},ignore:(t,n)=>((r,o)=>{try{r.set(r.get()+1),o()}finally{r.set(r.get()-1)}})(t,n),extra:(t,n,r,o)=>((i,s,a,c,d)=>{if(s.transact(c)){const f=s.data[a.get()].bookmark,p=s.data[a.get()-1];Uf(i,p,!0),s.transact(d)&&(s.data[a.get()-1].beforeBookmark=f)}})(e,t,n,r,o)},formatter:{match:(t,n,r,o)=>xf(e,t,n,r,o),matchAll:(t,n)=>((r,o,i)=>{const s=[],a={},c=r.selection.getStart();return r.dom.getParent(c,d=>{for(let f=0;f<o.length;f++){const p=o[f];!a[p]&&Qo(r,d,p,i)&&(a[p]=!0,s.push(p))}},r.dom.getRoot()),s})(e,t,n),matchNode:(t,n,r,o)=>Qo(e,t,n,r,o),canApply:t=>((n,r)=>{const o=n.formatter.get(r),i=n.dom;if(o&&n.selection.isEditable()){const s=n.selection.getStart(),a=Hc(i,s);for(let c=o.length-1;c>=0;c--){const d=o[c];if(!Qr(d))return!0;for(let f=a.length-1;f>=0;f--)if(i.is(a[f],d.selector))return!0}}return!1})(e,t),closest:t=>((n,r)=>{const o=i=>Lt(i,X(n.getBody()));return R.from(n.selection.getStart(!0)).bind(i=>yf(X(i),s=>or(r,a=>{return Qo(n,s.dom,d=a)?R.some(d):R.none();var d}),o)).getOrNull()})(e,t),apply:(t,n,r)=>Ny(e,t,n,r),remove:(t,n,r,o)=>Sy(e,t,n,r,o),toggle:(t,n,r)=>((o,i,s,a)=>{const c=o.formatter.get(i);c&&(!xf(o,i,s,a)||"toggle"in c[0]&&!c[0].toggle?Ny(o,i,s,a):Sy(o,i,s,a))})(e,t,n,r),formatChanged:(t,n,r,o,i)=>{return((v,w,y,S,b,T)=>{const O=w.get();ye(y.split(","),P=>{const z=Gt(O,P).getOrThunk(()=>{const Y={withSimilar:{state:Jn(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Jn(!1),similar:!1,callbacks:[]},withVars:[]};return O[P]=Y,Y}),M=()=>{const Y=jy(v);return Ry(v,Y,P,b,T).isSome()};if(x(T)){const Y=b?z.withSimilar:z.withoutSimilar;Y.callbacks.push(S),1===Y.callbacks.length&&Y.state.set(M())}else z.withVars.push({state:Jn(M()),similar:b,vars:T,callback:S})}),w.set(O)})(e,a=t,c=n,d=r,o,i),{unbind:()=>((v,w,y)=>{const S=v.get();ye(w.split(","),b=>Gt(S,b).each(T=>{S[b]={withSimilar:{...T.withSimilar,callbacks:tt(T.withSimilar.callbacks,O=>O!==y)},withoutSimilar:{...T.withoutSimilar,callbacks:tt(T.withoutSimilar.callbacks,O=>O!==y)},withVars:tt(T.withVars,O=>O.callback!==y)}})),v.set(S)})(a,c,d)};var a,c,d}},editor:{getContent:t=>{return r=t,R.from((n=e).getBody()).fold(G("tree"===r.format?new yr("body",11):""),o=>((e,t,n)=>{let r;return r="raw"===t.format?Be.trim(Fr(K_(n,e.serializer.getTempAttrs()).innerHTML)):"text"===t.format?((o,i)=>{const s=o.getDoc(),a=dn(X(o.getBody())),c=je("div",s);In(c,"data-mce-bogus","all"),J(c,{position:"fixed",left:"-9999999px",top:"0"}),ar(c,i.innerHTML),Y_(c),X_(c);const d=sr(p=a)?p:X(Ut(p).dom.body);var p;Et(d,c);const f=Fr(c.dom.innerText);return rt(c),f})(e,n):"tree"===t.format?e.serializer.serialize(n,t):((o,i)=>{const s=pr(o),a=new RegExp(`^(<${s}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${s}>[\r\n]*|<br \\/>[\r\n]*)$`);return i.replace(a,"")})(e,e.serializer.serialize(n,t)),"text"!==t.format&&!vc(X(n))&&U(r)?Be.trim(r):r})(n,r,o));var n,r},setContent:(t,n)=>{return o=t,i=n,R.from((r=e).getBody()).map(s=>rd(o)?((a,c,d,f)=>{V0(a.parser.getNodeFilters(),a.parser.getAttributeFilters(),d);const p=Ii({validate:!1},a.schema).serialize(d),v=Fr(vc(X(c))?p:Be.trim(p));return _f(a,v,f.no_selection),{content:d,html:v}})(r,s,o,i):((a,c,d,f)=>{if(0===(d=Fr(d)).length||/^\s+$/.test(d)){const p='<br data-mce-bogus="1">';"TABLE"===c.nodeName?d="<tr><td>"+p+"</td></tr>":/^(UL|OL)$/.test(c.nodeName)&&(d="<li>"+p+"</li>");const v=pr(a);return a.schema.isValidChild(c.nodeName.toLowerCase(),v.toLowerCase())?(d=p,d=a.dom.createHTML(v,il(a),d)):d||(d=p),_f(a,d,f.no_selection),{content:d,html:d}}{"raw"!==f.format&&(d=Ii({validate:!1},a.schema).serialize(a.parser.parse(d,{isRootContent:!0,insert:!0})));const p=vc(X(c))?d:Be.trim(d);return _f(a,p,f.no_selection),{content:p,html:p}}})(r,s,o,i)).getOr({content:o,html:rd(i.content)?"":i.content});var r,o,i},insertContent:(t,n)=>tN(e,t,n),addVisual:t=>((n,r)=>{const o=n.dom,i=N(r)?r:n.getBody();ye(o.select("table,a",i),s=>{switch(s.nodeName){case"TABLE":const a=eE(n),c=o.getAttrib(s,"border");c&&"0"!==c||!n.hasVisual?o.removeClass(s,a):o.addClass(s,a);break;case"A":if(!o.getAttrib(s,"href")){const d=o.getAttrib(s,"name")||s.id,f=nv(n);d&&n.hasVisual?o.addClass(s,f):o.removeClass(s,f)}}}),n.dispatch("VisualAid",{element:r,hasVisual:n.hasVisual})})(e,t)},selection:{getContent:(t,n)=>((r,o,i={})=>{const s=(a=i,c=o,{...a,format:c,get:!0,selection:!0,getInner:!0});var a,c;return db(r,s).fold(K,a=>{const c=((d,f)=>{if("text"===f.format)return R.from((p=d).selection.getRng()).map(v=>{var w;const y=R.from(p.dom.getParent(v.commonAncestorContainer,p.dom.isBlock)),S=p.getBody(),b=y.map(Y=>Y.nodeName).getOr("div").toLowerCase(),T=X(v.cloneContents());Y_(T),X_(T);const O=p.dom.add(S,b,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},T.dom),P=_b(O),z=Fr(null!==(w=O.textContent)&&void 0!==w?w:"");if(p.dom.remove(O),dd(z,0)||dd(z,z.length-1)){const M=y.getOr(S),Y=_b(M),te=Y.indexOf(P);return-1===te?P:(dd(Y,te-1)?" ":"")+P+(dd(Y,te+P.length)?" ":"")}return P}).getOr("");var p;{const p=((v,w)=>{const y=v.selection.getRng(),S=v.dom.create("body"),b=v.selection.getSel(),T=$h(v,hh(b)),O=w.contextual?((e,t,n)=>{const r=Pv(t,e);return r.length>0?((e,t)=>{return(n=e,r=t[0],Uo(r,"table",ge(Lt,n))).bind(n=>{const r=t[0],o=t[t.length-1],i=(s=>{const a=qf(as(s),0,[]);return ye(fr(s,"tr"),(c,d)=>{ye(fr(c,"td,th"),(f,p)=>{((v,w,y,S,b)=>{const T=fb(b,"rowspan"),O=fb(b,"colspan"),P=v.rows;for(let z=y;z<y+T;z++){P[z]||(P[z]=hb(hm(S),[]));for(let M=w;M<w+O;M++)P[z].cells[M]=z===y&&M===w?b:as(b)}})(a,((v,w,y)=>{for(;MN(v,w,y);)w++;return w})(a,p,d),d,c,f)})}),qf(a.element,pb(a.rows),a.rows)})(n);return(s=i,a=r,c=o,gb(s,a).bind(d=>gb(s,c).map(f=>((p,v,w)=>{const y=v.x,S=v.y,b=w.x,T=w.y,O=S<T?mb(p,y,S,b,T):mb(p,y,T,b,S);return qf(p.element,pb(O),O)})(s,d,f)))).map(s=>Nh([IN(s)]));var s,a,c}).getOrThunk(vb);var n,r})(e,r):(o=e,s=n,(i=t).length>0&&i[0].collapsed?vb():(a=o,d=s,((f,p)=>{const v=Ge(p,(w,y)=>(Et(y,w),y),f);return p.length>0?Nh([v]):v})(X((c=i[0]).cloneContents()),((e,t,n)=>{const r=X(t.commonAncestorContainer),o=fi(r,e),i=tt(o,c=>n.isWrapper(It(c))),s=(d=t,Z(c=o,f=>"li"===It(f)&&ph(f,d)).fold(G([]),f=>{return(p=c,Z(p,v=>"ul"===It(v)||"ol"===It(v))).map(p=>{const v=je(It(p)),w=xn(Ie(p),(y,S)=>Mn(S,"list-style"));return J(v,w),[je("li"),v]}).getOr([]);var p})),a=i.concat(s.length?s:(c=>Ha(c)?ur(c).filter(vu).fold(G([]),d=>[c,d]):vu(c)?[c]:[])(r));var c,d;return ut(a,as)})(a,c,d))));var o,i,s,a,c,d})(X(v.getBody()),T,v.schema).dom:y.cloneContents();return O&&S.appendChild(O),v.selection.serializer.serialize(S,w)})(d,f);return"tree"===f.format?p:d.selection.isCollapsed()?"":p}})(r,a);return ub(r,c,a)})})(e,t,n)},autocompleter:{addDecoration:t=>((e,t)=>{if(F_(X(e.getBody())).isNone()){const r=be('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Et(r,X(t.extractContents())),t.insertNode(r.dom),ur(r).each(o=>o.dom.normalize()),(n=r,((o,i)=>{const s=a=>{const c=rn(a);for(let d=c.length-1;d>=0;d--){const f=c[d];if(i(f))return R.some(f);const p=s(f);if(p.isSome())return p}return R.none()};return s(o)})(n,I_)).map(o=>{var i;e.selection.setCursorLocation(o.dom,"img"===It(i=o)?1:Sg(i).fold(()=>rn(i).length,s=>s.length))})}var n})(e,t),removeDecoration:()=>{return t=e,n=X(e.getBody()),F_(n).each(r=>{const o=t.selection.getBookmark();fn(r),t.selection.moveToBookmark(o)});var t,n}},raw:{getModel:()=>R.none()}}),Zo=e=>ft(e.plugins,"rtc"),Yf=e=>e.rtcInstance?e.rtcInstance:xb(e),Pn=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},Cb=e=>Pn(e).init.bindEvents(),kb=e=>0===e.dom.length?(rt(e),R.none()):R.some(e),Sb=(e,t,n,r,o)=>{e.bind(i=>((r?Jh:Zc)(i.dom,r?i.dom.length:0,o),t.filter(kr).map(s=>((a,c,d,f,p)=>{const v=a.dom,w=c.dom,y=f?v.length:w.length;f?(Qh(v,w,p,!1,!f),d.setStart(w,y)):(Qh(w,v,p,!1,!f),d.setEnd(w,y))})(i,s,n,r,o)))).orThunk(()=>{return(s=t,a=r,s.filter(c=>ml.isBookmarkNode(c.dom)).bind(a?Rr:Vr)).or(t).filter(kr).map(s=>((a,c,d)=>{ur(a).each(f=>{const p=a.dom;c&&wl(f,_e(p,0),d)?Zc(p,0,d):!c&&xl(f,_e(p,p.length),d)&&Jh(p,p.length,d)})})(s,r,o));var s,a})},Eb=(e,t,n)=>{if(ft(e,t)){const r=tt(e[t],o=>o!==n);0===r.length?delete e[t]:e[t]=r}},Tb=e=>!(!e||!e.ownerDocument)&&Ht(X(e.ownerDocument),X(e)),Nb=(e,t,n,r)=>{let o,i;const{selectorChangedWithUnbind:s}=((b,T)=>{let O,P;const z=(Y,te)=>Z(te,ie=>b.is(ie,Y)),M=Y=>b.getParents(Y,void 0,b.getRoot());return{selectorChangedWithUnbind:(Y,te)=>(O||(O={},P={},T.on("NodeChange",ie=>{const ce=ie.element,fe=M(ce),Q={};Wt(O,(ne,de)=>{z(de,fe).each(xe=>{P[de]||(ye(ne,Fe=>{Fe(!0,{node:xe,selector:de,parents:fe})}),P[de]=ne),Q[de]=ne})}),Wt(P,(ne,de)=>{Q[de]||(delete P[de],ye(ne,xe=>{xe(!1,{node:ce,selector:de,parents:fe})}))})})),O[Y]||(O[Y]=[]),O[Y].push(te),z(Y,M(T.selection.getStart())).each(()=>{P[Y]=O[Y]}),{unbind:()=>{Eb(O,Y,te),Eb(P,Y,te)}})}})(e,r),a=(b,T)=>((O,P,z={})=>{const M=(Y=z,te=P,{format:"html",...Y,set:!0,selection:!0,content:te});var Y,te;$f(O,M).each(Y=>{const te=((ce,fe)=>{if("raw"!==fe.format){const Q=ce.selection.getRng(),ne=ce.dom.getParent(Q.commonAncestorContainer,ce.dom.isBlock),de=ne?{context:ne.nodeName.toLowerCase()}:{},xe=ce.parser.parse(fe.content,{forced_root_block:!1,...de,...fe});return Ii({validate:!1},ce.schema).serialize(xe)}return fe.content})(O,Y),ie=O.selection.getRng();((ce,fe,Q)=>{const ne=R.from(fe.firstChild).map(X),de=R.from(fe.lastChild).map(X);ce.deleteContents(),ce.insertNode(fe);const xe=ne.bind(Vr).filter(kr).bind(kb),Fe=de.bind(Rr).filter(kr).bind(kb);Sb(xe,ne,ce,!0,Q),Sb(Fe,de,ce,!1,Q),ce.collapse(!1)})(ie,ie.createContextualFragment(te),O.schema),O.selection.setRng(ie),_l(O,ie),Hf(O,te,Y)})})(r,b,T),c=b=>{const T=f();T.collapse(!!b),p(T)},d=()=>t.getSelection?t.getSelection():t.document.selection,f=()=>{let b;const T=(P,z,M)=>{try{return z.compareBoundaryPoints(P,M)}catch{return-1}},O=t.document;if(N(r.bookmark)&&!vs(r)){const P=Lh(r);if(P.isSome())return P.map(z=>$h(r,[z])[0]).getOr(O.createRange())}try{const P=d();P&&!fc(P.anchorNode)&&(b=P.rangeCount>0?P.getRangeAt(0):O.createRange(),b=$h(r,[b])[0])}catch{}if(b||(b=O.createRange()),Fa(b.startContainer)&&b.collapsed){const P=e.getRoot();b.setStart(P,0),b.setEnd(P,0)}return o&&i&&(0===T(b.START_TO_START,b,o)&&0===T(b.END_TO_END,b,o)?b=i:(o=null,i=null)),b},p=(b,T)=>{if(!((P=b)&&Tb(P.startContainer)&&Tb(P.endContainer)))return;var P;const O=d();if(b=r.dispatch("SetSelectionRange",{range:b,forward:T}).range,O){i=b;try{O.removeAllRanges(),O.addRange(b)}catch{}!1===T&&O.extend&&(O.collapse(b.endContainer,b.endOffset),O.extend(b.startContainer,b.startOffset)),o=O.rangeCount>0?O.getRangeAt(0):null}if(!b.collapsed&&b.startContainer===b.endContainer&&O?.setBaseAndExtent&&b.endOffset-b.startOffset<2&&b.startContainer.hasChildNodes()){const P=b.startContainer.childNodes[b.startOffset];P&&"IMG"===P.nodeName&&(O.setBaseAndExtent(b.startContainer,b.startOffset,b.endContainer,b.endOffset),O.anchorNode===b.startContainer&&O.focusNode===b.endContainer||O.setBaseAndExtent(P,0,P,1))}r.dispatch("AfterSetSelectionRange",{range:b,forward:T})},v=()=>{const b=d(),T=b?.anchorNode,O=b?.focusNode;if(!b||!T||!O||fc(T)||fc(O))return!0;const P=e.createRng(),z=e.createRng();try{P.setStart(T,b.anchorOffset),P.collapse(!0),z.setStart(O,b.focusOffset),z.collapse(!0)}catch{return!0}return P.compareBoundaryPoints(P.START_TO_START,z)<=0},w={dom:e,win:t,serializer:n,editor:r,expand:(b={type:"word"})=>p(ms(e).expand(f(),b)),collapse:c,setCursorLocation:(b,T)=>{const O=e.createRng();N(b)&&N(T)?(O.setStart(b,T),O.setEnd(b,T),p(O),c(!1)):(gh(e,O,r.getBody(),!0),p(O))},getContent:b=>((T,O={})=>{return z=O.format?O.format:"html",M=O,Pn(T).selection.getContent(z,M);var z,M})(r,b),setContent:a,getBookmark:(b,T)=>y.getBookmark(b,T),moveToBookmark:b=>y.moveToBookmark(b),select:(b,T)=>{return(O=e,P=b,z=T,R.from(P).bind(M=>R.from(M.parentNode).map(Y=>{const te=O.nodeIndex(M),ie=O.createRng();return ie.setStart(Y,te),ie.setEnd(Y,te+1),z&&(gh(O,ie,M,!0),gh(O,ie,M,!1)),ie}))).each(p),b;var O,P,z},isCollapsed:()=>{const b=f(),T=d();return!(!b||b.item)&&(b.compareEndPoints?0===b.compareEndPoints("StartToEnd",b):!T||b.collapsed)},isEditable:()=>{const b=f(),T=r.getBody().querySelectorAll('[data-mce-selected="1"]');return T.length>0?Je(T,O=>e.isEditable(O.parentElement)):P_(e,b)},isForward:v,setNode:b=>(a(e.getOuterHTML(b)),b),getNode:()=>((b,T)=>{if(!T)return b;let O=T.startContainer,P=T.endContainer;const z=T.startOffset,M=T.endOffset;let Y=T.commonAncestorContainer;T.collapsed||(O===P&&M-z<2&&O.hasChildNodes()&&(Y=O.childNodes[z]),Le(O)&&Le(P)&&(O=O.length===z?M_(O.nextSibling,!0):O.parentNode,P=0===M?M_(P.previousSibling,!1):P.parentNode,O&&O===P&&(Y=O)));const te=Le(Y)?Y.parentNode:Y;return ci(te)?te:b})(r.getBody(),f()),getSel:d,setRng:p,getRng:f,getStart:b=>L_(r.getBody(),f(),b),getEnd:b=>B_(r.getBody(),f(),b),getSelectedBlocks:(b,T)=>((O,P,z,M)=>{const Y=[],te=O.getRoot(),ie=O.getParent(z||L_(te,P,P.collapsed),O.isBlock),ce=O.getParent(M||B_(te,P,P.collapsed),O.isBlock);if(ie&&ie!==te&&Y.push(ie),ie&&ce&&ie!==ce){let fe;const Q=new qn(ie,te);for(;(fe=Q.next())&&fe!==ce;)O.isBlock(fe)&&Y.push(fe)}return ce&&ie!==ce&&ce!==te&&Y.push(ce),Y})(e,f(),b,T),normalize:()=>{const b=f(),T=d();if(!(hh(T).length>1)&&Fc(r)){const O=Kc(e,b);return O.each(P=>{p(P,v())}),O.getOr(b)}return b},selectorChanged:(b,T)=>(s(b,T),w),selectorChangedWithUnbind:s,getScrollContainer:()=>{let b,T=e.getRoot();for(;T&&"BODY"!==T.nodeName;){if(T.scrollHeight>T.clientHeight){b=T;break}T=T.parentNode}return b},scrollIntoView:(b,T)=>{var O;N(b)?((O=r).inline?lT:dT)(O,b,T):_l(r,f(),T)},placeCaretAt:(b,T)=>p(h_(b,T,r.getDoc())),getBoundingClientRect:()=>{const b=f();return b.collapsed?_e.fromRangeStart(b).getClientRects()[0]:b.getBoundingClientRect()},destroy:()=>{t=o=i=null,S.destroy()}},y=ml(w),S=a_(w,r);return w.bookmarkManager=y,w.controlSelection=S,w},UN=(e,t,n)=>{-1===Be.inArray(t,n)&&(e.addAttributeFilter(n,(r,o)=>{let i=r.length;for(;i--;)r[i].attr(o,null)}),t.push(n))},Ab=(e,t)=>{const n=((e,t)=>{const n=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},o=t&&t.dom?t.dom:nn.DOM,i=t&&t.schema?t.schema:ji(r),s=la(r,i);return c=r,d=o,(a=s).addAttributeFilter("data-mce-tabindex",(f,p)=>{let v=f.length;for(;v--;){const w=f[v];w.attr("tabindex",w.attr("data-mce-tabindex")),w.attr(p,null)}}),a.addAttributeFilter("src,href,style",(f,p)=>{const v="data-mce-"+p,w=c.url_converter,y=c.url_converter_scope;let S=f.length;for(;S--;){const b=f[S];let T=b.attr(v);void 0!==T?(b.attr(p,T.length>0?T:null),b.attr(v,null)):(T=b.attr(p),"style"===p?T=d.serializeStyle(d.parseStyle(T),b.name):w&&(T=w.call(y,T,p,b.name)),b.attr(p,T.length>0?T:null))}}),a.addAttributeFilter("class",f=>{let p=f.length;for(;p--;){const v=f[p];let w=v.attr("class");w&&(w=w.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),v.attr("class",w.length>0?w:null))}}),a.addAttributeFilter("data-mce-type",(f,p,v)=>{let w=f.length;for(;w--;){const y=f[w];"bookmark"===y.attr("data-mce-type")&&!v.cleanup&&(R.from(y.firstChild).exists(b=>{var T;return!_c(null!==(T=b.value)&&void 0!==T?T:"")})?y.unwrap():y.remove())}}),a.addNodeFilter("noscript",f=>{var p;let v=f.length;for(;v--;){const w=f[v].firstChild;w&&(w.value=Ri.decode(null!==(p=w.value)&&void 0!==p?p:""))}}),a.addNodeFilter("script,style",(f,p)=>{var v;const w=S=>S.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let y=f.length;for(;y--;){const S=f[y],b=S.firstChild,T=null!==(v=b?.value)&&void 0!==v?v:"";if("script"===p){const O=S.attr("type");O&&S.attr("type","mce-no/type"===O?null:O.replace(/^mce\-/,"")),"xhtml"===c.element_format&&b&&T.length>0&&(b.value="// <![CDATA[\n"+w(T)+"\n// ]]>")}else"xhtml"===c.element_format&&b&&T.length>0&&(b.value="\x3c!--\n"+w(T)+"\n--\x3e")}}),a.addNodeFilter("#comment",f=>{let p=f.length;for(;p--;){const v=f[p],w=v.value;c.preserve_cdata&&0===w?.indexOf("[CDATA[")?(v.name="#cdata",v.type=4,v.value=d.decode(w.replace(/^\[CDATA\[|\]\]$/g,""))):0===w?.indexOf("mce:protected ")&&(v.name="#text",v.type=3,v.raw=!0,v.value=unescape(w).substr(14))}}),a.addNodeFilter("xml:namespace,input",(f,p)=>{let v=f.length;for(;v--;){const w=f[v];7===w.type?w.remove():1===w.type&&("input"!==p||w.attr("type")||w.attr("type","text"))}}),a.addAttributeFilter("data-mce-type",f=>{ye(f,p=>{"format-caret"===p.attr("data-mce-type")&&(p.isEmpty(a.schema.getNonEmptyElements())?p.remove():p.unwrap())})}),a.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(f,p)=>{let v=f.length;for(;v--;)f[v].attr(p,null)}),c.remove_trailing_brs&&By(c,a,a.schema),{schema:i,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:(a,c={})=>{const d={format:"html",...c},f=(y=a,T=S=d,N(b=w=t)&&b.hasEventListeners("PreProcess")&&!T.no_events?((b,T,O)=>{let P;const z=b.dom;let M=T.cloneNode(!0);const Y=document.implementation;if(Y.createHTMLDocument){const te=Y.createHTMLDocument("");Be.each("BODY"===M.nodeName?M.childNodes:[M],ie=>{te.body.appendChild(te.importNode(ie,!0))}),M="BODY"!==M.nodeName?te.body.firstChild:te.body,P=z.doc,z.doc=te}return ie={...O,node:M},b.dispatch("PreProcess",ie),P&&(z.doc=P),M;var ie})(w,y,S):y),p=((w,y,S)=>{const b=Fr(S.getInner?y.innerHTML:w.getOuterHTML(y));return S.selection||vc(X(y))?b:Be.trim(b)})(o,f,d),v=((w,y,S)=>{const b=S.selection?{forced_root_block:!1,...S}:S,T=w.parse(y,b);return(O=>{const P=M=>"br"===M?.name,z=O.lastChild;if(P(z)){const M=z.prev;P(M)&&(z.remove(),M.remove())}})(T),T})(s,p,d);var w,y,S,b,T;return"tree"===d.format?v:((w,y,S,b,T)=>{var M;return((P,z,M)=>{return!z.no_events&&P?(te=P,ie={...z,content:M},te.dispatch("PostProcess",ie)).content:M;var te,ie})(w,T,(M=b,Ii(y,S).serialize(M)))})(t,r,i,v,d)},addRules:i.addValidElements,setRules:i.setValidElements,addTempAttr:ge(UN,s,n),getTempAttrs:G(n),getNodeFilters:s.getNodeFilters,getAttributeFilters:s.getAttributeFilters,removeNodeFilter:s.removeNodeFilter,removeAttributeFilter:s.removeAttributeFilter};var a,c,d})(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Xf=(e,t,n={})=>{const r=(o=n,i=t,{format:"html",...o,set:!0,content:i});var o,i;return $f(e,r).map(o=>{const i=(a=o.content,c=o,Yf(e).editor.setContent(a,c));var a,c;return Hf(e,i.html,o),i.content}).getOr(t)},VN="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),KN="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),YN="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),Ob=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],Rb=(e,t)=>{const n=tt(t,r=>ft(e,r));return qt(n)},jb=(e,t)=>{const n=Be.makeMap(e.plugins," "),r=tt(t,o=>ft(n,o));return qt(r)},ZN=e=>Z(Ob,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),fd=nn.DOM,pd=e=>R.from(e).each(t=>t.destroy()),gd=(()=>{const e={};return{add:(t,n)=>{e[t]=n},get:t=>e[t]?e[t]:{icons:{}},has:t=>ft(e,t)}})(),ca=_r.ModelManager,Pb=(e,t)=>t.dom[e],Db=(e,t)=>parseInt(he(t,e),10),eA=ge(Pb,"clientWidth"),tA=ge(Pb,"clientHeight"),nA=ge(Db,"margin-top"),rA=ge(Db,"margin-left"),Lb=e=>{const t=[],n=()=>{const c=e.theme;return c&&c.getNotificationManagerImpl?c.getNotificationManagerImpl():(()=>{const d=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:d,close:d,getArgs:d}})()},r=()=>R.from(t[0]),o=()=>{ye(t,c=>{c.reposition()})},i=c=>{ke(t,d=>d===c).each(d=>{t.splice(d,1)})},s=(c,d=!0)=>{return e.removed||!(p=(f=e).inline?f.getBody():f.getContentAreaContainer(),R.from(p).map(X)).map(Ir).getOr(!1)?{}:(d&&e.dispatch("BeforeOpenNotification",{notification:c}),Z(t,f=>{return!((p=n().getArgs(f)).type!==(v=c).type||p.text!==v.text||p.progressBar||p.timeout||v.progressBar||v.timeout);var p,v}).getOrThunk(()=>{e.editorManager.setActive(e);const f=n().open(c,()=>{i(f),o(),j_(e)&&r().fold(()=>e.focus(),p=>S_(X(p.getEl())))});return(p=>{t.push(p)})(f),o(),e.dispatch("OpenNotification",{notification:{...f}}),f}));var f,p},a=G(t);return(c=e).on("SkinLoaded",()=>{const d=BS(c);d&&s({text:d,type:"warning",timeout:0},!1),o()}),c.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(o)}),c.on("remove",()=>{ye(t.slice(),d=>{n().close(d)})}),{open:s,close:()=>{r().each(c=>{n().close(c),i(c),o()})},getNotifications:a};var c},da=_r.PluginManager,xs=_r.ThemeManager,Bb=e=>{let t=[];const n=()=>{const s=e.theme;return s&&s.getWindowManagerImpl?s.getWindowManagerImpl():(()=>{const a=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:a,openUrl:a,alert:a,confirm:a,close:a}})()},r=(s,a)=>(...c)=>a?a.apply(s,c):void 0,o=s=>{e.dispatch("CloseWindow",{dialog:s}),t=tt(t,a=>a!==s),0===t.length&&e.focus()},i=s=>{e.editorManager.setActive(e),Dh(e),e.ui.show();const a=s();return t.push(c=a),e.dispatch("OpenWindow",{dialog:c}),a;var c};return e.on("remove",()=>{ye(t,s=>{n().close(s)})}),{open:(s,a)=>i(()=>n().open(s,a,o)),openUrl:s=>i(()=>n().openUrl(s,o)),alert:(s,a,c)=>{const d=n();d.alert(s,r(c||d,a))},confirm:(s,a,c)=>{const d=n();d.confirm(s,r(c||d,a))},close:()=>{R.from(t[t.length-1]).each(s=>{n().close(s),o(s)})}}},Mb=(e,t)=>{e.notificationManager.open({type:"error",text:t})},md=(e,t)=>{e._skinLoaded?Mb(e,t):e.on("SkinLoaded",()=>{Mb(e,t)})},Ol=(e,t,n)=>{e_(e,t,{message:n}),console.error(n)},Rl=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,vd=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},Gf=e=>"content/"+e+"/content.css",Ib=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",r=`content${e.editorManager.suffix}.css`;return ut(t,o=>tinymce.Resource.has(Gf(o))?o:/^[a-z0-9\-]+$/i.test(o)&&!e.inline?`${n}/${o}/${r}`:e.documentBaseURI.toAbsolute(o))},zb=()=>{let e={};const t=(r,o)=>({status:r,resultUri:o}),n=r=>r in e;return{hasBlobUri:n,getResultUri:r=>{const o=e[r];return o?o.resultUri:null},isPending:r=>!!n(r)&&1===e[r].status,isUploaded:r=>!!n(r)&&2===e[r].status,markPending:r=>{e[r]=t(1,null)},markUploaded:(r,o)=>{e[r]=t(2,o)},removeFailed:r=>{delete e[r]},destroy:()=>{e={}}}};let iA=0;const Fb=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),$b=(e,t)=>((e,t)=>{const n={},r=(c,d)=>new Promise((f,p)=>{const v=new XMLHttpRequest;v.open("POST",t.url),v.withCredentials=t.credentials,v.upload.onprogress=y=>{d(y.loaded/y.total*100)},v.onerror=()=>{p("Image upload failed due to a XHR Transport error. Code: "+v.status)},v.onload=()=>{if(v.status<200||v.status>=300)return void p("HTTP Error: "+v.status);const y=JSON.parse(v.responseText);var S,b;y&&U(y.location)?f((b=y.location,(S=t.basePath)?S.replace(/\/$/,"")+"/"+b.replace(/^\//,""):b)):p("Invalid JSON: "+v.responseText)};const w=new FormData;w.append("file",c.blob(),c.filename()),v.send(w)}),o=D(t.handler)?t.handler:r,i=(c,d)=>({url:d,blobInfo:c,status:!0}),s=(c,d)=>({url:"",blobInfo:c,status:!1,error:d}),a=(c,d)=>{Be.each(n[c],f=>{f(d)}),delete n[c]};return{upload:(c,d)=>{return t.url||o!==r?(p=d,f=Be.grep(f=c,v=>!e.isUploaded(v.blobUri())),Promise.all(Be.map(f,v=>{return e.isPending(v.blobUri())?(w=>{const y=w.blobUri();return new Promise(S=>{n[y]=n[y]||[],n[y].push(S)})})(v):(y=o,S=p,e.markPending((w=v).blobUri()),new Promise(b=>{let T,O;try{const P=()=>{T&&(T.close(),O=F)},z=Y=>{P(),e.markUploaded(w.blobUri(),Y),a(w.blobUri(),i(w,Y)),b(i(w,Y))},M=Y=>{P(),e.removeFailed(w.blobUri()),a(w.blobUri(),s(w,Y)),b(s(w,Y))};O=Y=>{Y<0||Y>100||R.from(T).orThunk(()=>R.from(S).map(vt)).each(te=>{T=te,te.progressBar.value(Y)})},y(w,O).then(z,Y=>{M(U(Y)?{message:Y}:Y)})}catch(P){b(s(w,P))}}));var w,y,S}))):new Promise(f=>{f([])});var f,p}}})(t,{url:CS(e),basePath:kS(e),credentials:SS(e),handler:ES(e)}),Hb={remove_similar:!0,inherit:!1},ua={selector:"td,th",...Hb},lA={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...ua},tablecellverticalalign:{styles:{"vertical-align":"%value"},...ua},tablecellbordercolor:{styles:{borderColor:"%value"},...ua},tablecellclass:{classes:["%value"],...ua},tableclass:{selector:"table",classes:["%value"],...Hb},tablecellborderstyle:{styles:{borderStyle:"%value"},...ua},tablecellborderwidth:{styles:{borderWidth:"%value"},...ua}},cA=G(lA),_d=Be.each,no=nn.DOM,Jf=e=>N(e)&&I(e),qb=(e,t)=>{const n=t&&t.schema||ji({}),r=s=>{const a=U(s)?{name:s,classes:[],attrs:{}}:s,c=no.create(a.name);return d=c,(f=a).classes.length>0&&no.addClass(d,f.classes.join(" ")),no.setAttribs(d,f.attrs),c;var d,f},o=(s,a,c)=>{let d;const f=a[0],p=Jf(f)?f.name:void 0,v=((S,b)=>{const T=n.getElementRule(S.nodeName.toLowerCase()),O=T?.parentsRequired;return!(!O||!O.length)&&(b&&Oe(O,b)?b:O[0])})(s,p);if(v)p===v?(d=f,a=a.slice(1)):d=v;else if(f)d=f,a=a.slice(1);else if(!c)return s;const w=d?r(d):no.create("div");w.appendChild(s),c&&Be.each(c,S=>{const b=r(S);w.insertBefore(b,s)});const y=Jf(d)?d.siblings:void 0;return o(w,a,y)},i=no.create("div");if(e.length>0){const s=e[0],a=r(s),c=Jf(s)?s.siblings:void 0;i.appendChild(o(a,e.slice(1),c))}return i},dA=e=>{let t="div";const n={name:t,classes:[],attrs:{},selector:e=Be.trim(e)};return"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,o,i,s,a)=>{switch(o){case"#":n.attrs.id=i;break;case".":n.classes.push(i);break;case":":-1!==Be.inArray("checked disabled enabled read-only required".split(" "),i)&&(n.attrs[i]=i)}if("["===s){const c=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);c&&(n.attrs[c[1]]=c[2])}return""})),n.name=t||"div",n},uA=(e,t)=>{let n="",r=FS(e);if(""===r)return"";const o=w=>U(w)?w.replace(/%(\w+)/g,""):"",i=(w,y)=>no.getStyle(y??e.getBody(),w,!0);if(U(t)){const w=e.formatter.get(t);if(!w)return"";t=w[0]}if("preview"in t){const w=t.preview;if(!1===w)return"";r=w||r}let s,a=t.block||t.inline||"span";const c=U(d=t.selector)?(d=(d=d.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Be.map(d.split(/(?:>|\s+(?![^\[\]]+\]))/),w=>{const y=Be.map(w.split(/(?:~\+|~|\+)/),dA),S=y.pop();return y.length&&(S.siblings=y),S}).reverse()):[];var d;c.length>0?(c[0].name||(c[0].name=a),a=t.selector,s=qb(c,e)):s=qb([a],e);const f=no.select(a,s)[0]||s.firstChild;_d(t.styles,(w,y)=>{const S=o(w);S&&no.setStyle(f,y,S)}),_d(t.attributes,(w,y)=>{const S=o(w);S&&no.setAttrib(f,y,S)}),_d(t.classes,w=>{const y=o(w);no.hasClass(f,y)||no.addClass(f,y)}),e.dispatch("PreviewFormats"),no.setStyles(s,{position:"absolute",left:-65535}),e.getBody().appendChild(s);const p=i("fontSize"),v=/px$/.test(p)?parseInt(p,10):0;return _d(r.split(" "),w=>{let y=i(w,f);if(!("background-color"===w&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(y)&&(y=i(w),"#ffffff"===Va(y).toLowerCase())||"color"===w&&"#000000"===Va(y).toLowerCase())){if("font-size"===w&&/em|%$/.test(y)){if(0===v)return;y=parseFloat(y)/(/%$/.test(y)?100:1)*v+"px"}"border"===w&&y&&(n+="padding:0 2px;"),n+=w+":"+y+";"}}),e.dispatch("AfterPreviewFormats"),no.remove(s),n},Ub=e=>{const t=(r=>{const o={},i=(s,a)=>{s&&(U(s)?(u(a)||(a=[a]),ye(a,c=>{x(c.deep)&&(c.deep=!Qr(c)),x(c.split)&&(c.split=!Qr(c)||Un(c)),x(c.remove)&&Qr(c)&&!Un(c)&&(c.remove="none"),Qr(c)&&Un(c)&&(c.mixed=!0,c.block_expand=!0),U(c.classes)&&(c.classes=c.classes.split(/\s+/))}),o[s]=a):Wt(s,(c,d)=>{i(d,c)}))};return i((s=>{const a=s.dom,c=s.schema.type,d={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:f=>{a.setStyle(f,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:f=>{a.setStyle(f,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const f={inline:"span",styles:{textDecoration:"line-through"},exact:!0},p={inline:"strike",remove:"all",preserve_attributes:["class","style"]},v={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==c?[v,f,p]:[f,v,p]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(f,p,v)=>Ke(f)&&f.hasAttribute("href"),onformat:(f,p,v)=>{Be.each(v,(w,y)=>{a.setAttrib(f,y,w)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":f=>{var p;return null!==(p=f?.customValue)&&void 0!==p?p:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Be.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),f=>{d[f]={block:f,remove:"all"}}),d})(r)),i(cA()),i(zS(r)),{get:s=>N(s)?o[s]:o,has:s=>ft(o,s),register:i,unregister:s=>(s&&o[s]&&delete o[s],o)}})(e),n=Jn({});return(r=>{r.addShortcut("meta+b","","Bold"),r.addShortcut("meta+i","","Italic"),r.addShortcut("meta+u","","Underline");for(let o=1;o<=6;o++)r.addShortcut("access+"+o,"",["FormatBlock",!1,"h"+o]);r.addShortcut("access+7","",["FormatBlock",!1,"p"]),r.addShortcut("access+8","",["FormatBlock",!1,"div"]),r.addShortcut("access+9","",["FormatBlock",!1,"address"])})(e),(r=e).on("mouseup keydown",o=>{var i;((s,a,c)=>{const d=s.selection,f=s.getBody();Sf(s,null,c),8!==a&&46!==a||!d.isCollapsed()||d.getStart().innerHTML!==Sl||Sf(s,fs(f,d.getStart()),!0),37!==a&&39!==a||Sf(s,fs(f,d.getStart()),!0)})(r,o.keyCode,(i=r.selection.getRng().endContainer,Le(i)&&Wi(i.data,Xn)))}),Zo(e)||((r,o)=>{r.set({}),o.on("NodeChange",i=>{Py(o,i.element,r.get())}),o.on("FormatApply FormatRemove",i=>{const s=R.from(i.node).map(a=>pl(a)?a:a.startContainer).bind(a=>Ke(a)?R.some(a):R.from(a.parentElement)).getOrThunk(()=>Oy(o));Py(o,s,r.get())})})(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(r,o,i)=>{var a,c,d;a=r,c=o,d=i,Pn(e).formatter.apply(a,c,d)},remove:(r,o,i,s)=>{var c,d,f,p;c=r,d=o,f=i,p=s,Pn(e).formatter.remove(c,d,f,p)},toggle:(r,o,i)=>{var a,c,d;a=r,c=o,d=i,Pn(e).formatter.toggle(a,c,d)},match:(r,o,i,s)=>{return c=r,d=o,f=i,p=s,Pn(e).formatter.match(c,d,f,p);var c,d,f,p},closest:r=>{return i=r,Pn(e).formatter.closest(i);var i},matchAll:(r,o)=>{return s=r,a=o,Pn(e).formatter.matchAll(s,a);var s,a},matchNode:(r,o,i,s)=>{return c=r,d=o,f=i,p=s,Pn(e).formatter.matchNode(c,d,f,p);var c,d,f,p},canApply:r=>{return i=r,Pn(e).formatter.canApply(i);var i},formatChanged:(r,o,i,s)=>{return c=n,d=r,f=o,p=i,v=s,Pn(e).formatter.formatChanged(c,d,f,p,v);var c,d,f,p,v},getCssText:ge(uA,e)};var r},Wb=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},Vb=e=>{const t=Pi(),n=Jn(0),r=Jn(0),o={data:[],typing:!1,beforeChange:()=>{var s,a;s=n,a=t,Pn(e).undoManager.beforeChange(s,a)},add:(i,s)=>{return c=o,d=r,f=n,p=t,v=i,w=s,Pn(e).undoManager.add(c,d,f,p,v,w);var c,d,f,p,v,w},dispatchChange:()=>{e.setDirty(!0);const i=ud(e);i.bookmark=Xu(e.selection),e.dispatch("change",{level:i,lastLevel:Hr(o.data,r.get()).getOrUndefined()})},undo:()=>{return s=o,a=n,c=r,Pn(e).undoManager.undo(s,a,c);var s,a,c},redo:()=>{return s=r,a=o.data,Pn(e).undoManager.redo(s,a);var s,a},clear:()=>{var s,a;s=o,a=r,Pn(e).undoManager.clear(s,a)},reset:()=>{var s;s=o,Pn(e).undoManager.reset(s)},hasUndo:()=>{return s=o,a=r,Pn(e).undoManager.hasUndo(s,a);var s,a},hasRedo:()=>{return s=o,a=r,Pn(e).undoManager.hasRedo(s,a);var s,a},transact:i=>{return a=o,c=n,d=i,Pn(e).undoManager.transact(a,c,d);var a,c,d},ignore:i=>{var a,c;a=n,c=i,Pn(e).undoManager.ignore(a,c)},extra:(i,s)=>{var c,d,f,p;c=o,d=r,f=i,p=s,Pn(e).undoManager.extra(c,d,f,p)}};return Zo(e)||((i,s,a)=>{const c=Jn(!1),d=f=>{hd(s,!1,a),s.add({},f)};i.on("init",()=>{s.add()}),i.on("BeforeExecCommand",f=>{Wb(f.command)||(wb(s,a),s.beforeChange())}),i.on("ExecCommand",f=>{Wb(f.command)||d(f)}),i.on("ObjectResizeStart cut",()=>{s.beforeChange()}),i.on("SaveContent ObjectResized blur",d),i.on("dragend",d),i.on("keyup",f=>{const p=f.keyCode;if(f.isDefaultPrevented())return;const v=$t.os.isMacOS()&&"Meta"===f.key;(p>=33&&p<=36||p>=37&&p<=40||45===p||f.ctrlKey||v)&&(d(),i.nodeChanged()),46!==p&&8!==p||i.nodeChanged(),c.get()&&s.typing&&!Vf(ud(i),s.data[0])&&(i.isDirty()||i.setDirty(!0),i.dispatch("TypingUndo"),c.set(!1),i.nodeChanged())}),i.on("keydown",f=>{const p=f.keyCode;if(!f.isDefaultPrevented()){if(!(p>=33&&p<=36||p>=37&&p<=40||45===p))return!(p<16||p>20)||224===p||91===p||s.typing||f.ctrlKey&&!f.altKey||f.metaKey?void(($t.os.isMacOS()?f.metaKey:f.ctrlKey&&!f.altKey)&&s.beforeChange()):(s.beforeChange(),hd(s,!0,a),s.add({},f),void c.set(!0));s.typing&&d(f)}}),i.on("mousedown",f=>{s.typing&&d(f)}),i.on("input",f=>{var p,v;f.inputType&&("insertReplacementText"===f.inputType||"insertText"===(p=f).inputType&&null===p.data||"insertFromPaste"===(v=f).inputType||"insertFromDrop"===v.inputType)&&d(f)}),i.on("AddUndo Undo Redo ClearUndos",f=>{f.isDefaultPrevented()||i.nodeChanged()})})(e,o,n),(i=e).addShortcut("meta+z","","Undo"),i.addShortcut("meta+y,meta+shift+z","","Redo"),o;var i},hA=[9,27,qe.HOME,qe.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,qe.DOWN,qe.UP,qe.LEFT,qe.RIGHT].concat($t.browser.isFirefox()?[224]:[]),Kb="data-mce-placeholder",Yb=e=>"keydown"===e.type||"keyup"===e.type,Xb=e=>{const t=e.keyCode;return t===qe.BACKSPACE||t===qe.DELETE},fA=(e,t)=>({from:e,to:t}),Qf=(e,t)=>{const n=X(e),r=X(t.container());return ed(n,r).map(o=>({block:o,position:t}))},Gb=(e,t)=>qo(t,n=>qa(n)||bo(n.dom),n=>Lt(n,e)).filter(vr).getOr(e),Jb=(e,t)=>{const n=((r,o)=>{const i=rn(r);return ke(i,s=>o.isBlock(It(s))).fold(G(i),s=>i.slice(0,s))})(e,t);return ye(n,rt),n},Qb=(e,t)=>{const n=fi(t,e);return Z(n.reverse(),r=>jn(r)).each(rt)},pA=(e,t,n,r,o)=>{if(jn(n))return Ni(n),gr(n.dom);0===tt(Ao(o),s=>!jn(s)).length&&jn(t)&&Qe(o,je("br"));const i=Pr(n.dom,_e.before(o.dom));return ye(Jb(t,r),s=>{Qe(o,s)}),Qb(e,t),i},gA=(e,t,n,r)=>{if(jn(n)){if(jn(t)){const s=Vn((a=>{const c=(d,f)=>Bn(d).fold(()=>f,p=>r.isInline(It(p))?c(p,f.concat(as(p))):f);return c(a,[])})(n),(a,c)=>(zt(a,c),c),Ua());Vt(t),Et(t,s)}return rt(n),gr(t.dom)}const o=xo(n.dom);return ye(Jb(t,r),i=>{Et(n,i)}),Qb(e,t),o},Zb=(e,t)=>{ea(e,t.dom).bind(n=>R.from(n.getNode())).map(X).filter(ts).each(rt)},e1=(e,t,n,r)=>{return Zb(!0,t),Zb(!1,n),(o=t,i=n,Ht(i,o)?((s,a)=>{const c=fi(a,s);return R.from(c[c.length-1])})(i,o):R.none()).fold(ge(gA,e,t,n,r),ge(pA,e,t,n,r));var o,i},t1=(e,t,n,r,o)=>t?e1(e,r,n,o):e1(e,n,r,o),Zf=(e,t)=>{const n=X(e.getBody());return(o=n.dom,i=t,s=e.selection.getRng(),s.collapsed?((a,c,d)=>{const f=Qf(a,_e.fromRangeStart(d)),p=f.bind(v=>Xr(c,a,v.position).bind(w=>Qf(a,w).map(y=>{return S=a,b=c,Cn((T=y).position.getNode())&&!jn(T.block)?ea(!1,T.block.dom).bind(O=>O.isEqual(T.position)?Xr(b,S,O).bind(P=>Qf(S,P)):R.some(T)).getOr(T):T;var S,b,T})));return er(f,p,fA).filter(v=>{return!Lt((w=v).from.block,w.to.block)&&((w,y)=>{const S=X(w);return Lt(Gb(S,y.from.block),Gb(S,y.to.block))})(a,v)&&(w=>!1===sn(w.from.block.dom)&&!1===sn(w.to.block.dom))(v)&&(w=>{const y=S=>Eg(S)||Su(S.dom);return y(w.from.block)&&y(w.to.block)})(v);var w})})(o,i,s):R.none()).map(o=>()=>{t1(n,t,o.from.block,o.to.block,e.schema).each(i=>{e.selection.setRng(i.toRange())})});var o,i,s},n1=(e,t)=>{const n=X(t),r=ge(Lt,e);return hr(n,qa,r).isSome()},ep=(e,t)=>e.selection.isCollapsed()?R.none():(e=>{const t=X(e.getBody());return((n,r)=>{const o=Pr(n.dom,_e.fromRangeStart(r)).isNone(),i=Nr(n.dom,_e.fromRangeEnd(r)).isNone();return!(n1(s=n,(a=r).startContainer)||n1(s,a.endContainer))&&o&&i;var s,a})(t,e.selection.getRng())?(n=e,R.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,r,o)=>{const i=r.getRng();return er(ed(n,X(i.startContainer)),ed(n,X(i.endContainer)),(s,a)=>Lt(s,a)?R.none():R.some(()=>{i.deleteContents(),t1(n,!0,s,a,o).each(c=>{r.setRng(c.toRange())})})).getOr(R.none())})(t,e.selection,e.schema);var n})(e),pi=(e,t,n,r,o)=>R.from(t._selectionOverrides.showCaret(e,n,r,o)),jl=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?R.none():R.some((n=>{const r=n.ownerDocument.createRange();return r.selectNode(n),r})(t)),tp=(e,t,n)=>t.collapsed?((r,o,i)=>{const s=ih(1,r.getBody(),o),a=_e.fromRangeStart(s),c=a.getNode();if(al(c))return pi(1,r,c,!a.isAtEnd(),!1);const d=a.getNode(!0);if(al(d))return pi(1,r,d,!1,!1);const f=bs(r.dom.getRoot(),a.getNode());return al(f)?pi(1,r,f,!1,i):R.none()})(e,t,n).getOr(t):t,vA=e=>Fi(e)||yl(e),_A=e=>$i(e)||bl(e),r1=(e,t,n,r,o,i)=>{var s,a;pi(r,e,i.getNode(!o),o,!0).each(s=>{if(t.collapsed){const a=t.cloneRange();o?a.setEnd(s.startContainer,s.startOffset):a.setStart(s.endContainer,s.endOffset),a.deleteContents()}else t.deleteContents();e.selection.setRng(s)}),s=e.dom,Le(a=n)&&0===a.data.length&&s.remove(a)},np=(e,t)=>((n,r)=>{const o=n.selection.getRng();if(!Le(o.commonAncestorContainer))return R.none();const i=r?Qn.Forwards:Qn.Backwards,s=Go(n.getBody()),a=ge(sh,r?s.next:s.prev),c=r?vA:_A,d=hl(i,n.getBody(),o),f=a(d),p=f&&eo(r,f);if(!p||!Bc(d,p))return R.none();if(c(p))return R.some(()=>r1(n,o,d.getNode(),i,r,p));const v=a(p);return v&&c(v)&&Bc(p,v)?R.some(()=>r1(n,o,d.getNode(),i,r,v)):R.none()})(e,t),rp=(e,t)=>{const n=e.getBody();return t?gr(n).filter(Fi):xo(n).filter($i)},op=e=>{const t=e.selection.getRng();return!t.collapsed&&(rp(e,!0).exists(n=>n.isEqual(_e.fromRangeStart(t)))||rp(e,!1).exists(n=>n.isEqual(_e.fromRangeEnd(t))))},ro=Ko([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),o1=(e,t,n,r)=>Xr(t,e,n).bind(o=>{return i=o.getNode(),N(i)&&(qa(X(i))||Ha(X(i)))||((s,a,c,d,f)=>{const p=v=>f.isInline(v.nodeName.toLowerCase())&&!Yo(c,d,s);return vv(!a,c).fold(()=>vv(a,d).fold(Tt,p),p)})(e,t,n,o,r)?R.none():t&&sn(o.getNode())||!t&&sn(o.getNode(!0))?((s,a,c,d)=>{const f=d.getNode(!a);return ed(X(s),X(c.getNode())).map(p=>jn(p)?ro.remove(p.dom):ro.moveToElement(f)).orThunk(()=>R.some(ro.moveToElement(f)))})(e,t,n,o):t&&$i(n)||!t&&Fi(n)?R.some(ro.moveToPosition(o)):R.none();var i}),i1=(e,t)=>R.from(bs(e.getBody(),t)),s1=e=>{const t=e.dom,n=e.selection,r=bs(e.getBody(),n.getNode());if(bo(r)&&t.isBlock(r)&&t.isEmpty(r)){const o=t.create("br",{"data-mce-bogus":"1"});t.setHTML(r,""),r.appendChild(o),n.setRng(_e.before(o).toRange())}return!0},ip=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=e.selection.getNode();return i1(e,n).filter(sn).fold(()=>((r,o,i,s)=>{const a=ih(o?1:-1,r,i),c=_e.fromRangeStart(a),d=X(r);return!o&&$i(c)?R.some(ro.remove(c.getNode(!0))):o&&Fi(c)?R.some(ro.remove(c.getNode())):!o&&Fi(c)&&Yh(d,c,s)?LT(d,c,s).map(f=>ro.remove(f.getNode())):o&&$i(c)&&Kh(d,c,s)?BT(d,c,s).map(f=>ro.remove(f.getNode())):(f=r,w=s,((y,S)=>{const b=S.getNode(!y),T=y?"after":"before";return Ke(b)&&b.getAttribute("data-mce-caret")===T})(p=o,v=c)?(y=p,S=v.getNode(!p),C(S)?R.none():y&&sn(S.nextSibling)?R.some(ro.moveToElement(S.nextSibling)):!y&&sn(S.previousSibling)?R.some(ro.moveToElement(S.previousSibling)):R.none()).orThunk(()=>o1(f,p,v,w)):o1(f,p,v,w).bind(y=>((S,b,T)=>T.fold(O=>R.some(ro.remove(O)),O=>R.some(ro.moveToElement(O)),O=>Yo(b,O,S)?R.none():R.some(ro.moveToPosition(O))))(f,v,y)));var f,p,v,w,y,S})(e.getBody(),t,e.selection.getRng(),e.schema).map(r=>()=>{return r.fold((o=e,i=t,s=>(o._selectionOverrides.hideFakeCaret(),_s(o,i,X(s)),!0)),((o,i)=>s=>{const a=i?_e.before(s):_e.after(s);return o.selection.setRng(a.toRange()),!0})(e,t),(o=>i=>(o.selection.setRng(i.toRange()),!0))(e));var o,i}),()=>R.some(F))})(e,t):((n,r)=>{const o=n.selection.getNode();return sn(o)&&!gc(o)?i1(n,o.parentNode).filter(sn).fold(()=>R.some(()=>{var i;i=X(n.getBody()),ye(fr(i,".mce-offscreen-selection"),rt),_s(n,r,X(n.selection.getNode())),ef(n)}),()=>R.some(F)):op(n)?R.some(()=>{O0(n,n.selection.getRng(),X(n.getBody()))}):R.none()})(e,t),sp=(e,t)=>e.selection.isCollapsed()?((n,r)=>{const o=_e.fromRangeStart(n.selection.getRng());return Xr(r,n.getBody(),o).filter(i=>r?OT(i):RT(i)).bind(i=>oh(r?0:-1,i)).map(i=>()=>n.selection.select(i))})(e,t):R.none(),ha=Le,a1=e=>ha(e)&&e.data[0]===Gn,l1=e=>ha(e)&&e.data[e.data.length-1]===Gn,c1=e=>{var t;return(null!==(t=e.ownerDocument)&&void 0!==t?t:document).createTextNode(Gn)},yd=(e,t)=>e?(n=>{var r;if(ha(n.previousSibling))return l1(n.previousSibling)||n.previousSibling.appendData(Gn),n.previousSibling;if(ha(n))return a1(n)||n.insertData(0,Gn),n;{const o=c1(n);return null===(r=n.parentNode)||void 0===r||r.insertBefore(o,n),o}})(t):(n=>{var r,o;if(ha(n.nextSibling))return a1(n.nextSibling)||n.nextSibling.insertData(0,Gn),n.nextSibling;if(ha(n))return l1(n)||n.appendData(Gn),n;{const i=c1(n);return n.nextSibling?null===(r=n.parentNode)||void 0===r||r.insertBefore(i,n.nextSibling):null===(o=n.parentNode)||void 0===o||o.appendChild(i),i}})(t),bA=ge(yd,!0),wA=ge(yd,!1),d1=(e,t)=>Le(e.container())?yd(t,e.container()):yd(t,e.getNode()),u1=(e,t)=>{const n=t.get();return n&&e.container()===n&&Ai(n)},ap=(e,t)=>t.fold(n=>{us(e.get());const r=bA(n);return e.set(r),R.some(_e(r,r.length-1))},n=>gr(n).map(r=>{if(u1(r,e)){const o=e.get();return _e(o,1)}{us(e.get());const o=d1(r,!0);return e.set(o),_e(o,1)}}),n=>xo(n).map(r=>{if(u1(r,e)){const o=e.get();return _e(o,o.length-1)}{us(e.get());const o=d1(r,!1);return e.set(o),_e(o,o.length-1)}}),n=>{us(e.get());const r=wA(n);return e.set(r),R.some(_e(r,1))}),h1=(e,t)=>{for(let n=0;n<e.length;n++){const r=e[n].apply(null,t);if(r.isSome())return r}return R.none()},br=Ko([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),f1=(e,t)=>Bi(t,e)||e,xA=(e,t,n)=>{const r=S0(n),o=f1(t,r.container());return Hi(e,o,r).fold(()=>Nr(o,r).bind(ge(Hi,e,o)).map(i=>br.before(i)),R.none)},CA=(e,t)=>null===fs(e,t),p1=(e,t,n)=>Hi(e,t,n).filter(ge(CA,t)),kA=(e,t,n)=>{const r=E0(n);return p1(e,t,r).bind(o=>Pr(o,r).isNone()?R.some(br.start(o)):R.none())},SA=(e,t,n)=>{const r=S0(n);return p1(e,t,r).bind(o=>Nr(o,r).isNone()?R.some(br.end(o)):R.none())},EA=(e,t,n)=>{const r=E0(n),o=f1(t,r.container());return Hi(e,o,r).fold(()=>Pr(o,r).bind(ge(Hi,e,o)).map(i=>br.after(i)),R.none)},g1=e=>!k0(lp(e)),ei=(e,t,n)=>h1([xA,kA,SA,EA],[e,t,n]).filter(g1),lp=e=>e.fold(K,K,K,K),m1=e=>e.fold(G("before"),G("start"),G("end"),G("after")),bd=e=>e.fold(br.before,br.before,br.after,br.after),cp=e=>e.fold(br.start,br.start,br.end,br.end),TA=(e,t,n,r,o,i)=>er(Hi(t,n,r),Hi(t,n,o),(s,a)=>s!==a&&((c,d,f)=>{const p=Bi(d,c),v=Bi(f,c);return N(p)&&p===v})(n,s,a)?br.after(e?s:a):i).getOr(i),NA=(e,t)=>e.fold(_t,n=>{return o=t,!(m1(r=n)===m1(o)&&lp(r)===lp(o));var r,o}),AA=(e,t)=>e?t.fold(L(R.some,br.start),R.none,L(R.some,br.after),R.none):t.fold(R.none,L(R.some,br.before),R.none,L(R.some,br.end)),v1=(e,t,n)=>{const r=e?1:-1;return t.setRng(_e(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0};var ti;!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(ti||(ti={}));const wd=(e,t)=>e===Qn.Backwards?Ft(t):t,OA=(e,t,n)=>e===Qn.Forwards?t.next(n):t.prev(n),RA=(e,t,n,r)=>Cn(r.getNode(t===Qn.Forwards))?ti.Br:!1===Yo(n,r)?ti.Block:ti.Wrap,_1=(e,t,n,r)=>{const o=Go(n);let i=r;const s=[];for(;i;){const a=OA(t,o,i);if(!a)break;if(Cn(a.getNode(!1)))return t===Qn.Forwards?{positions:wd(t,s).concat([a]),breakType:ti.Br,breakAt:R.some(a)}:{positions:wd(t,s),breakType:ti.Br,breakAt:R.some(a)};if(a.isVisible()){if(e(i,a)){const c=RA(0,t,i,a);return{positions:wd(t,s),breakType:c,breakAt:R.some(a)}}s.push(a),i=a}else i=a}return{positions:wd(t,s),breakType:ti.Eol,breakAt:R.none()}},y1=(e,t,n,r)=>t(n,r).breakAt.map(o=>{const i=t(n,o).positions;return e===Qn.Backwards?i.concat(o):[o].concat(i)}).getOr([]),dp=(e,t)=>Ge(e,(n,r)=>n.fold(()=>R.some(r),o=>er(Hn(o.getClientRects()),Hn(r.getClientRects()),(i,s)=>{const a=Math.abs(t-i.left);return Math.abs(t-s.left)<=a?r:o}).or(n)),R.none()),xd=(e,t)=>Hn(t.getClientRects()).bind(n=>dp(e,n.left)),Pl=ge(_1,_e.isAbove,-1),Dl=ge(_1,_e.isBelow,1),b1=ge(y1,-1,Pl),w1=ge(y1,1,Dl),x1=(e,t)=>Pl(e,t).breakAt.isNone(),C1=(e,t)=>Dl(e,t).breakAt.isNone(),jA=(e,t)=>xd(b1(e,t),t),PA=(e,t)=>xd(w1(e,t),t),DA=sn,k1=(e,t)=>Math.abs(e.left-t),S1=(e,t)=>Math.abs(e.right-t),E1=(e,t)=>Eo(e,(n,r)=>{const o=Math.min(k1(n,t),S1(n,t)),i=Math.min(k1(r,t),S1(r,t));return i===o&&kn(r,"node")&&DA(r.node)||i<o?r:n}),LA=e=>{const t=n=>ut(n,r=>{const o=cs(r);return o.node=e,o});if(Ke(e))return t(e.getClientRects());if(Le(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}return[]},T1=e=>$e(e,LA);var Ll;!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(Ll||(Ll={}));const N1=(e,t,n,r,o,i)=>{let s=0;const a=[],c=p=>{let v=T1([p]);-1===e&&(v=v.reverse());for(let w=0;w<v.length;w++){const y=v[w];if(!n(y,d)){if(a.length>0&&t(y,po(a))&&s++,y.line=s,o(y))return!0;a.push(y)}}return!1},d=po(i.getClientRects());if(!d)return a;const f=i.getNode();return f&&(c(f),((p,v,w,y)=>{let S=y;for(;S=cl(S,p,Rg,v);)if(w(S))return})(e,r,c,f)),a},BA=ge(N1,Ll.Up,tl,nl),MA=ge(N1,Ll.Down,nl,tl),A1=e=>po(e.getClientRects()),O1=e=>t=>t.line>e,up=e=>t=>t.line===e,gi=(e,t)=>{e.selection.setRng(t),_l(e,e.selection.getRng())},hp=(e,t,n)=>R.some(tp(e,t,n)),R1=(e,t,n,r,o,i)=>{const s=t===Qn.Forwards,a=Go(e.getBody()),c=ge(sh,s?a.next:a.prev),d=s?r:o;if(!n.collapsed){const y=Nc(n);if(i(y))return pi(t,e,y,t===Qn.Backwards,!1);if(op(e)){const S=n.cloneRange();return S.collapse(t===Qn.Backwards),R.from(S)}}const f=hl(t,e.getBody(),n);if(d(f))return jl(e,f.getNode(!s));let p=c(f);const v=Ng(n);if(!p)return v?R.some(n):R.none();if(p=eo(s,p),d(p))return pi(t,e,p.getNode(!s),s,!1);const w=c(p);return w&&d(w)&&Bc(p,w)?pi(t,e,w.getNode(!s),s,!1):v?hp(e,p.toRange(),!1):R.none()},j1=(e,t,n,r,o,i)=>{const s=hl(t,e.getBody(),n),a=po(s.getClientRects()),c=t===Ll.Down,d=e.getBody();if(!a)return R.none();if(op(e)){const S=c?_e.fromRangeEnd(n):_e.fromRangeStart(n);return(c?PA:jA)(d,S).orThunk(()=>R.from(S)).map(b=>b.toRange())}const f=(c?MA:BA)(d,O1(1),s),p=tt(f,up(1)),v=a.left,w=E1(p,v);if(w&&i(w.node)){const S=Math.abs(v-w.left),b=Math.abs(v-w.right);return pi(t,e,w.node,S<b,!1)}let y;if(y=r(s)?s.getNode():o(s)?s.getNode(!0):Nc(n),y){const S=((T,O,P,z)=>{const M=Go(O);let Y,te,ie,ce;const fe=[];let Q=0;1===T?(Y=M.next,te=nl,ie=tl,ce=_e.after(z)):(Y=M.prev,te=tl,ie=nl,ce=_e.before(z));const ne=A1(ce);do{if(!ce.isVisible())continue;const de=A1(ce);if(ie(de,ne))continue;fe.length>0&&te(de,po(fe))&&Q++;const xe=cs(de);if(xe.position=ce,xe.line=Q,P(xe))return fe;fe.push(xe)}while(ce=Y(ce));return fe})(t,d,O1(1),y);let b=E1(tt(S,up(1)),v);if(b||(b=po(tt(S,up(0))),b))return hp(e,b.position.toRange(),!1)}return 0===p.length?fp(e,c).filter(c?o:r).map(S=>tp(e,S.toRange(),!1)):R.none()},fp=(e,t)=>{const n=e.selection.getRng(),r=t?_e.fromRangeEnd(n):_e.fromRangeStart(n),o=(i=r.container(),s=e.getBody(),hr(X(i),a=>BE(a.dom),a=>a.dom===s).map(a=>a.dom).getOr(s));var i,s;if(t){const a=Dl(o,r);return co(a.positions)}{const a=Pl(o,r);return Hn(a.positions)}},P1=(e,t,n)=>fp(e,t).filter(n).exists(r=>(e.selection.setRng(r.toRange()),!0)),Cd=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},D1=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},L1=(e,t,n)=>ap(t,n).map(r=>(Cd(e,r),n)),B1=(e,t,n)=>!!sl(e)&&((e,t,n)=>{const r=e.getBody(),o=((i,s,a)=>{const c=_e.fromRangeStart(i);if(i.collapsed)return c;{const d=_e.fromRangeEnd(i);return a?Pr(s,d).getOr(d):Nr(s,c).getOr(c)}})(e.selection.getRng(),r,n);return((i,s,a,c)=>{const d=eo(i,c),f=ei(s,a,d);return ei(s,a,d).bind(ge(AA,i)).orThunk(()=>((p,v,w,y,S)=>{const b=eo(p,S);return Xr(p,w,b).map(ge(eo,p)).fold(()=>y.map(bd),T=>ei(v,w,T).map(ge(TA,p,v,w,b,T)).filter(ge(NA,y))).filter(g1)})(i,s,a,f,c))})(n,ge(ys,e),r,o).bind(i=>L1(e,t,i))})(e,t,n).isSome(),M1=(e,t,n)=>!!sl(t)&&((r,o)=>{const i=o.selection.getRng(),s=r?_e.fromRangeEnd(i):_e.fromRangeStart(i);return!!D(o.selection.getSel().modify)&&(r&&_u(s)?v1(!0,o.selection,s):!(r||!yu(s))&&v1(!1,o.selection,s))})(e,t),FA=ge(M1,!0),$A=ge(M1,!1),kd=(e,t,n)=>{if(sl(e)){const r=fp(e,t).getOrThunk(()=>{const o=e.selection.getRng();return t?_e.fromRangeEnd(o):_e.fromRangeStart(o)});return ei(ge(ys,e),e.getBody(),r).exists(o=>{const i=bd(o);return ap(n,i).exists(s=>(Cd(e,s),!0))})}return!1},I1=(e,t)=>n=>ap(t,n).map(r=>()=>Cd(e,r)),z1=(e,t,n,r)=>{const o=e.getBody(),i=ge(ys,e);e.undoManager.ignore(()=>{e.selection.setRng(((s,a)=>{const c=document.createRange();return c.setStart(s.container(),s.offset()),c.setEnd(a.container(),a.offset()),c})(n,r)),Zh(e),ei(i,o,_e.fromRangeStart(e.selection.getRng())).map(cp).bind(I1(e,t)).each(ue)}),e.nodeChanged()},pp=(e,t,n)=>{if(e.selection.isCollapsed()&&sl(e)){const r=_e.fromRangeStart(e.selection.getRng());return((o,i,s,a)=>{const c=(p=o.getBody(),v=a.container(),Bi(v,p)||p),d=ge(ys,o),f=ei(d,c,a);var p,v;return f.bind(p=>s?p.fold(G(R.some(cp(p))),R.none,G(R.some(bd(p))),R.none):p.fold(R.none,G(R.some(bd(p))),R.none,G(R.some(cp(p))))).map(I1(o,i)).getOrThunk(()=>{const p=Zs(s,c,a),v=p.bind(w=>ei(d,c,w));return er(f,v,()=>Hi(d,c,a).bind(w=>{return er(gr(y=w),xo(y),(S,b)=>{const T=eo(!0,S),O=eo(!1,b);return Nr(y,T).forall(P=>P.isEqual(O))}).getOr(!0)?R.some(()=>{_s(o,s,X(w))}):R.none();var y})).getOrThunk(()=>v.bind(()=>p.map(w=>()=>{s?z1(o,i,a,w):z1(o,i,w,a)})))})})(e,t,n,r)}return R.none()},F1=(e,t)=>{const n=X(e.getBody()),r=X(e.selection.getStart()),o=fi(r,n);return ke(o,t).fold(G(o),i=>o.slice(0,i))},HA=e=>1===vo(e),$1=(e,t)=>{const n=ge(ry,e);return $e(t,r=>n(r)?[r.dom]:[])},H1=e=>{const t=F1(n=e,r=>n.schema.isBlock(It(r)));var n;return $1(e,t)},q1=(e,t)=>{const n=e.selection.getStart(),r=((o,i)=>{const s=i.parentElement;return Cn(i)&&!k(s)&&o.dom.isEmpty(s)})(e,n)||kh(X(n))?ny(n,t):((o,i)=>{const{caretContainer:s,caretPosition:a}=ty(i);return o.insertNode(s.dom),a})(e.selection.getRng(),t);e.selection.setRng(r.toRange())},U1=e=>Le(e.startContainer),gp=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=tt(F1(r=e,o=>r.schema.isBlock(It(o))||vo(o)>1),HA);var r;return co(n).bind(r=>{const o=_e.fromRangeStart(e.selection.getRng());return N0(t,o,r.dom)&&!kh(r)?R.some(()=>((i,s,a,c)=>{const d=$1(s,c);if(0===d.length)_s(s,i,a);else{const f=ny(a.dom,d);s.selection.setRng(f.toRange())}})(t,e,r,n)):R.none()})})(e,t):(n=>{if((e=>{const t=e.selection.getRng();return 0===(n=t).startOffset&&U1(n)&&((n,r)=>{const o=r.startContainer.parentElement;return!k(o)&&ry(n,X(o))})(e,t)&&(n=>{return(o=>{const i=o.startContainer.parentNode,s=o.endContainer.parentNode;return!k(i)&&!k(s)&&i.isEqualNode(s)})(r=n)&&(o=>{const i=o.endContainer;return o.endOffset===(Le(i)?i.length:i.childNodes.length)})(r)||(r=>!r.endContainer.isEqualNode(r.commonAncestorContainer))(n);var r})(t);var n})(n)){const r=H1(n);return R.some(()=>{Zh(n),((o,i)=>{const s=Ye(i,H1(o));s.length>0&&q1(o,s)})(n,r)})}return R.none()})(e),Bl=e=>((t=>{const n=t.selection.getRng();return n.collapsed&&(U1(n)||t.dom.isEmpty(n.startContainer))&&!((e,t)=>hr(e,n=>Gr(n.dom),n=>t.isBlock(It(n))).isSome())(X((r=t).selection.getStart()),r.schema);var r})(e)&&q1(e,[]),!0),mp=(e,t,n)=>N(n)?R.some(()=>{e._selectionOverrides.hideFakeCaret(),_s(e,t,X(n))}):R.none(),vp=(e,t)=>e.selection.isCollapsed()?((n,r)=>{const o=r?yl:bl,s=hl(r?Qn.Forwards:Qn.Backwards,n.getBody(),n.selection.getRng());return o(s)?mp(n,r,s.getNode(!r)):R.from(eo(r,s)).filter(a=>o(a)&&Bc(s,a)).bind(a=>mp(n,r,a.getNode(!r)))})(e,t):((n,r)=>{const o=n.selection.getNode();return Vo(o)?mp(n,r,o):R.none()})(e,t),_p=e=>Ki(e??"").getOr(0),W1=(e,t)=>(e||"table"===It(t)?"margin":"padding")+("rtl"===he(t,"direction")?"-right":"-left"),V1=e=>{const t=Y1(e);return!e.mode.isReadOnly()&&(t.length>1||(n=e,Je(t,o=>{const i=W1(Gm(n),o),s=Re(o,i).map(_p).getOr(0);return"false"!==n.dom.getContentEditable(o.dom)&&s>0})));var n},K1=e=>vu(e)||Ha(e),Y1=e=>tt(tr(e.selection.getSelectedBlocks()),t=>!K1(t)&&!ur(t).exists(K1)&&qo(t,n=>bo(n.dom)||sn(n.dom)).exists(n=>bo(n.dom))),X1=(e,t)=>{var n,r;const{dom:o}=e,i=AS(e),s=null!==(r=null===(n=/[a-z%]+$/i.exec(i))||void 0===n?void 0:n[0])&&void 0!==r?r:"px",a=_p(i),c=Gm(e);ye(Y1(e),d=>{((f,p,v,w,y,S)=>{const b=W1(v,X(S)),T=_p(f.getStyle(S,b));if("outdent"===p){const O=Math.max(0,T-w);f.setStyle(S,b,O?O+y:"")}else f.setStyle(S,b,T+w+y)})(o,t,c,a,s,d.dom)})},G1=e=>X1(e,"outdent"),J1=e=>{if(e.selection.isCollapsed()&&V1(e)){const t=e.dom,n=e.selection.getRng(),r=_e.fromRangeStart(n),o=t.getParent(n.startContainer,t.isBlock);if(null!==o&&Vh(X(o),r,e.schema))return R.some(()=>G1(e))}return R.none()},Q1=(e,t,n)=>or([J1,ip,np,(r,o)=>pp(r,t,o),Zf,cf,sp,vp,ep,gp],r=>r(e,n)).filter(r=>e.selection.isEditable()),Z1=e=>void 0===e.touches||1!==e.touches.length?R.none():R.some(e.touches[0]),yp=(e,t)=>ft(e,t.nodeName),KA=(e,t)=>!!Le(t)||!!Ke(t)&&!(yp(e.getBlockElements(),t)||Jr(t)||rs(e,t)||xu(t)),YA=(e,t)=>{if(Le(t)){if(0===t.data.length)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||yp(e,t.nextSibling)||xu(t.nextSibling)}return!1},ew=e=>e.dom.create(pr(e),il(e)),XA=e=>{const t=e.dom,n=e.selection,r=e.schema,o=r.getBlockElements(),i=n.getStart(),s=e.getBody();let a,c,d=!1;const f=pr(e);if(!i||!Ke(i))return;const p=s.nodeName.toLowerCase();if(!r.isValidChild(p,f.toLowerCase())||(P=o,z=s,Kt(i0(X(i),X(z)),Y=>yp(P,Y.dom))))return;var P,z;const v=n.getRng(),{startContainer:w,startOffset:y,endContainer:S,endOffset:b}=v,T=vs(e);let O=s.firstChild;for(;O;)if(Ke(O)&&Mk(r,O),KA(r,O)){if(YA(o,O)){c=O,O=O.nextSibling,t.remove(c);continue}a||(a=ew(e),s.insertBefore(a,O),d=!0),c=O,O=O.nextSibling,a.appendChild(c)}else a=null,O=O.nextSibling;d&&T&&(v.setStart(w,y),v.setEnd(S,b),n.setRng(v),e.nodeChanged())},tw=(e,t,n)=>{const r=X(ew(e)),o=Ua();Et(r,o),n(t,r);const i=document.createRange();return i.setStartBefore(o.dom),i.setEndBefore(o.dom),i},nw=e=>t=>-1!==(" "+t.attr("class")+" ").indexOf(e),GA=(e,t,n)=>function(r){const o=arguments,i=o[o.length-2],s=i>0?t.charAt(i-1):"";if('"'===s)return r;if(">"===s){const a=t.lastIndexOf("<",i);if(-1!==a&&-1!==t.substring(a,i).indexOf('contenteditable="false"'))return r}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"},rw=(e,t)=>{t.hasAttribute("data-mce-caret")&&(bu(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},JA=(e,t)=>{const n=Wo(X(e.getBody()),"*[data-mce-caret]").map(o=>o.dom).getOrNull();if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void rw(e,n)):void(Tg(n)&&(rw(e,n),e.undoManager.add()))},ow=sn,iw=(e,t,n)=>{const r=Go(e.getBody()),o=ge(sh,1===t?r.next:r.prev);if(n.collapsed){const i=e.dom.getParent(n.startContainer,"PRE");if(!i)return;if(!o(_e.fromRangeStart(n))){const s=X((a=>{const c=a.dom.create(pr(a));return c.innerHTML='<br data-mce-bogus="1">',c})(e));1===t?pt(X(i),s):Qe(X(i),s),e.selection.select(s.dom,!0),e.selection.collapse()}}},sw=(e,t)=>((n,r)=>{const o=r?Qn.Forwards:Qn.Backwards,i=n.selection.getRng();return(s=o,a=n,c=i,R1(a,s,c,Fi,$i,ow)).orThunk(()=>(iw(n,o,i),R.none()));var s,a,c})(e,((n,r)=>{const o=r?n.getEnd(!0):n.getStart(!0);return k0(o)?!r:r})(e.selection,t)).exists(n=>(gi(e,n),!0)),aw=(e,t)=>((n,r)=>{const o=r?1:-1,i=n.selection.getRng();return(s=o,a=n,c=i,j1(a,s,c,d=>Fi(d)||r0(d),d=>$i(d)||o0(d),ow)).orThunk(()=>(iw(n,o,i),R.none()));var s,a,c})(e,t).exists(n=>(gi(e,n),!0)),lw=(e,t)=>P1(e,t,t?$i:Fi),Sd=(e,t)=>rp(e,!t).map(n=>{const r=n.toRange(),o=e.selection.getRng();return t?r.setStart(o.startContainer,o.startOffset):r.setEnd(o.endContainer,o.endOffset),r}).exists(n=>(gi(e,n),!0)),QA=e=>Oe(["figcaption"],It(e)),cw=(e,t)=>!!e.selection.isCollapsed()&&((n,r)=>{const o=X(n.getBody()),i=_e.fromRangeStart(n.selection.getRng());return((s,a,c)=>{const d=ge(Lt,a);return qo(X(s.container()),f=>c.isBlock(It(f)),d).filter(QA)})(i,o,n.schema).exists(()=>{if(s=o,c=i,r?C1(s.dom,c):x1(s.dom,c)){const s=tw(n,o,r?Et:ct);return n.selection.setRng(s),!0}var s,c;return!1})})(e,t),dw=(e,t)=>{return n=e,t?R.from(n.dom.getParent(n.selection.getNode(),"details")).map(o=>((i,s)=>{const a=i.selection.getRng(),c=_e.fromRangeStart(a);return!(i.getBody().lastChild!==s||!C1(s,c)||(i.execCommand("InsertNewBlockAfter"),0))})(n,o)).getOr(!1):R.from(n.dom.getParent(n.selection.getNode(),"summary")).bind(o=>R.from(n.dom.getParent(o,"details")).map(i=>((s,a,c)=>{const d=s.selection.getRng(),f=_e.fromRangeStart(d);return!(s.getBody().firstChild!==a||!x1(c,f)||(s.execCommand("InsertNewBlockBefore"),0))})(n,i,o))).getOr(!1);var n},uw={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},hw=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,gt=(e,...t)=>()=>e.apply(null,t),Ml=(e,t)=>{return Z((r=t,$e(ut(e,i=>({...uw,...i})),o=>hw(o,r)?[o]:[])),n=>n.action());var r},fw=(e,t)=>{return or((r=t,$e(ut(e,i=>({...uw,...i})),o=>hw(o,r)?[o]:[])),n=>n.action());var r},pw=(e,t)=>{const n=t?Qn.Forwards:Qn.Backwards,r=e.selection.getRng();return R1(e,n,r,yl,bl,Vo).exists(o=>(gi(e,o),!0))},gw=(e,t)=>{const n=t?1:-1,r=e.selection.getRng();return j1(e,n,r,yl,bl,Vo).exists(o=>(gi(e,o),!0))},mw=(e,t)=>P1(e,t,t?bl:yl),vw=Ko([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Il={...vw,none:e=>vw.none(e)},_w=(e,t,n)=>$e(rn(e),r=>cn(r,t)?n(r)?[r]:[]:_w(r,t,n)),yw=(e,t)=>Oo(e,"table",t),bp=(e,t,n,r,o=_t)=>{const i=1===r;if(!i&&n<=0)return Il.first(e[0]);if(i&&n>=e.length-1)return Il.last(e[e.length-1]);{const s=n+r,a=e[s];return o(a)?Il.middle(t,a):bp(e,t,s,r,o)}},bw=(e,t)=>yw(e,t).bind(n=>{const r=_w(n,"th,td",_t);return ke(r,o=>Lt(e,o)).map(o=>({index:o,all:r}))}),ww=(e,t,n,r,o)=>{const i=fr(X(n),"td,th,caption").map(a=>a.dom);var a;return((a,c,d)=>Ge(a,(f,p)=>f.fold(()=>R.some(p),v=>{const w=Math.sqrt(Math.abs(v.x-c)+Math.abs(v.y-d)),y=Math.sqrt(Math.abs(p.x-c)+Math.abs(p.y-d));return R.some(y<w?p:v)}),R.none()))(tt((a=e,$e(i,d=>{const f={left:(p=cs(d.getBoundingClientRect())).left- -1,top:p.top- -1,right:p.right+-2,bottom:p.bottom+-2,width:p.width+-1,height:p.height+-1};var p;return[{x:f.left,y:a(f),cell:d},{x:f.right,y:a(f),cell:d}]})),a=>t(a,o)),r,o).map(a=>a.cell)},ZA=ge(ww,e=>e.bottom,(e,t)=>e.y<t),eO=ge(ww,e=>e.top,(e,t)=>e.y>t),xw=(e,t,n)=>{const r=e(t,n);return(o=r).breakType===ti.Wrap&&0===o.positions.length||!Cn(n.getNode())&&(o=>o.breakType===ti.Br&&1===o.positions.length)(r)?!((o,i,s)=>s.breakAt.exists(a=>o(i,a).breakAt.isSome()))(e,t,r):r.breakAt.isNone();var o},tO=ge(xw,Pl),nO=ge(xw,Dl),rO=(e,t,n,r)=>{const o=e.selection.getRng(),i=t?1:-1;return!(!uv()||!((s,a,c)=>{const d=_e.fromRangeStart(a);return ea(!s,c).exists(f=>f.isEqual(d))})(t,o,n)||(pi(i,e,n,!t,!1).each(s=>{gi(e,s)}),0))},Cw=(e,t,n)=>{const r=((i,s)=>{const a=s.getNode(i);return di(a)?R.some(a):R.none()})(!!t,n),o=!1===t;r.fold(()=>gi(e,n.toRange()),i=>ea(o,e.getBody()).filter(s=>s.isEqual(n)).fold(()=>gi(e,n.toRange()),s=>{return a=t,d=i,void(c=e).undoManager.transact(()=>{const f=a?pt:Qe,p=tw(c,X(d),f);gi(c,p)});var a,c,d}))},oO=(e,t,n,r)=>{const o=e.selection.getRng(),i=_e.fromRangeStart(o),s=e.getBody();if(!t&&tO(r,i)){const a=(c=s,(p=d=n,v=f=i,Hn(v.getClientRects()).bind(w=>ZA(p,w.left,w.top)).bind(w=>{return xd(xo(y=w).map(S=>Pl(y,S).positions.concat(S)).getOr([]),v);var y})).orThunk(()=>Hn(f.getClientRects()).bind(p=>dp(b1(c,_e.before(d)),p.left))).getOr(_e.before(d)));return Cw(e,t,a),!0}var c,d,f,p,v;if(t&&nO(r,i)){const a=((c,d,f)=>((p,v)=>co(v.getClientRects()).bind(w=>eO(p,w.left,w.top)).bind(w=>{return xd(gr(y=w).map(S=>[S].concat(Dl(y,S).positions)).getOr([]),v);var y}))(d,f).orThunk(()=>Hn(f.getClientRects()).bind(p=>dp(w1(c,_e.after(d)),p.left))).getOr(_e.after(d)))(s,n,i);return Cw(e,t,a),!0}return!1},kw=(e,t,n)=>R.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>R.from(e.dom.getParent(r,"table")).map(o=>n(e,t,o,r))).getOr(!1),Sw=(e,t)=>kw(e,t,rO),wp=(e,t)=>kw(e,t,oO),Ew=(e,t,n)=>n.fold(R.none,R.none,(r,o)=>{return(i=o,Si(i,I_)).map(s=>{return(e=>{const t=ia.getWin(e).dom,n=(o,i,s,a)=>Eh(t,o,i,s,a),r=e.match({domRange:i=>{const s=X(i.startContainer),a=X(i.endContainer);return u_(s,i.startOffset,a,i.endOffset)},relative:ZE,exact:u_});return((o,i)=>{var a;return((a,c)=>{const d=c.ltr();return d.collapsed?c.rtl().filter(f=>!1===f.collapsed).map(f=>vl.rtl(X(f.endContainer),f.endOffset,X(f.startContainer),f.startOffset)).getOrThunk(()=>c_(0,vl.ltr,d)):c_(0,vl.ltr,d)})(0,(a=o,i.match({domRange:d=>({ltr:G(d),rtl:R.none}),relative:(d,f)=>({ltr:ri(()=>l_(a,d,f)),rtl:ri(()=>R.some(l_(a,f,d)))}),exact:(d,f,p,v)=>({ltr:ri(()=>Eh(a,d,f,p,v)),rtl:ri(()=>R.some(Eh(a,p,v,d,f)))})})))})(t,r).match({ltr:n,rtl:n})})(ia.exact(a=s,0,a,0));var a});var i},r=>(e.execCommand("mceTableInsertRowAfter"),Tw(e,t,r))),Tw=(e,t,n)=>{return Ew(e,t,(o=yo,bw(r=n,void 0).fold(()=>Il.none(r),i=>bp(i.all,r,i.index,1,o))));var r,o},iO=(e,t,n)=>{return Ew(e,t,(o=yo,bw(r=n,void 0).fold(()=>Il.none(),i=>bp(i.all,r,i.index,-1,o))));var r,o},Nw=(e,t)=>{const n=["table","li","dl"],r=X(e.getBody()),o=s=>{const a=It(s);return Lt(s,r)||Oe(n,a)},i=e.selection.getRng();return(s=X(t?i.endContainer:i.startContainer),a=o,((c,d,f=Tt)=>f(d)?R.none():Oe(c,It(d))?R.some(d):Uo(d,c.join(","),p=>cn(p,"table")||f(p)))(["td","th"],s,a)).map(s=>(yw(s,o).each(a=>{e.model.table.clearSelectedCells(a.dom)}),e.selection.collapse(!t),(t?Tw:iO)(e,o,s).each(a=>{e.selection.setRng(a)}),!0)).getOr(!1);var s,a},Mo=(e,t)=>({container:e,offset:t}),Ed=nn.DOM,Td=e=>t=>e===t?-1:0,xp=(e,t,n)=>{if(Le(e)&&t>=0)return R.some(Mo(e,t));{const r=ls(Ed);return R.from(r.backwards(e,t,Td(e),n)).map(o=>Mo(o.container,o.container.data.length))}},Cp=(e,t,n)=>{if(!Le(e))return R.none();if(t>=0&&t<=e.data.length)return R.some(Mo(e,t));{const o=ls(Ed);return R.from(o.backwards(e,t,Td(e),n)).bind(i=>Cp(i.container,t+i.container.data.length,n))}},Aw=(e,t,n)=>{if(!Le(e))return R.none();const r=e.data;if(t<=r.length)return R.some(Mo(e,t));{const o=ls(Ed);return R.from(o.forwards(e,t,Td(e),n)).bind(i=>Aw(i.container,t-r.length,n))}},kp=(e,t,n,r,o)=>{const i=ls(e,(s=e,a=>s.isBlock(a)||Oe(["BR","IMG","HR","INPUT"],a.nodeName)||"false"===s.getContentEditable(a)));var s;return R.from(i.backwards(t,n,r,o))},Ow=e=>Fr(e.toString().replace(/\u00A0/g," ")),Rw=e=>""!==e&&-1!==" \xa0\f\n\r\t\v".indexOf(e),Sp=(e,t)=>e.substring(t.length),jw=(e,t,n,r=0)=>{return(o=X(t.startContainer),Oo(o,z_)).fold(()=>((i,s,a,c=0)=>{if(!(d=s).collapsed||!Le(d.startContainer))return R.none();var d;const f={text:"",offset:0},p=i.getParent(s.startContainer,i.isBlock)||i.getRoot();return kp(i,s.startContainer,s.startOffset,(v,w,y)=>(f.text=y+f.text,f.offset+=w,((S,b,T)=>{let O;const P=T.charAt(0);for(O=b-1;O>=0;O--){const z=S.charAt(O);if(Rw(z))return R.none();if(P===z&&On(S,T,O,b))break}return R.some(O)})(f.text,f.offset,a).getOr(w)),p).bind(v=>{const w=s.cloneRange();if(w.setStart(v.container,v.offset),w.setEnd(s.endContainer,s.endOffset),w.collapsed)return R.none();const y=Ow(w);return 0!==y.lastIndexOf(a)||Sp(y,a).length<c?R.none():R.some({text:Sp(y,a),range:w,trigger:a})})})(e,t,n,r),i=>{const s=e.createRng();s.selectNode(i.dom);const a=Ow(s);return R.some({range:s,text:Sp(a,n),trigger:n})});var o},Pw=e=>{if(3===e.nodeType)return Mo(e,e.data.length);{const t=e.childNodes;return t.length>0?Pw(t[t.length-1]):Mo(e,t.length)}},Dw=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?Dw(n[t],0):n.length>0&&1===e.nodeType&&n.length===t?Pw(n[n.length-1]):Mo(e,t)},Lw=(e,t,n,r={})=>{var o;const i=t(),s=null!==(o=e.selection.getRng().startContainer.nodeValue)&&void 0!==o?o:"",a=tt(i.lookupByTrigger(n.trigger),d=>n.text.length>=d.minChars&&d.matches.getOrThunk(()=>{return f=e.dom,p=>{const v=Dw(p.startContainer,p.startOffset);return!((w,y)=>{var S;const b=null!==(S=w.getParent(y.container,w.isBlock))&&void 0!==S?S:w.getRoot();return kp(w,y.container,y.offset,(T,O)=>0===O?-1:O,b).filter(T=>{const O=T.container.data.charAt(T.offset-1);return!Rw(O)}).isSome()})(f,v)};var f})(n.range,s,n.text));if(0===a.length)return R.none();const c=Promise.all(ut(a,d=>d.fetch(n.text,d.maxResults,r).then(f=>({matchText:n.text,items:f,columns:d.columns,onAction:d.onAction,highlightOn:d.highlightOn}))));return R.some({lookupData:c,context:n})};var ni;!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(ni||(ni={}));const Ep=(e,t,n)=>e.stype===ni.Error?t(e.serror):n(e.svalue),fa=e=>({stype:ni.Value,svalue:e}),zl=e=>({stype:ni.Error,serror:e}),sO=Ep,Tp=e=>I(e)&&An(e).length>100?" removed due to size":JSON.stringify(e,null,2),Nd=(e,t)=>zl([{path:e,getErrorInfo:t}]),Bw=e=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");const n={};for(let r=0;r<t.length;r++){const o=t[r];for(const i in o)ft(o,i)&&(n[i]=e(n[i],o[i]))}return n},Np=Bw((e,t)=>ae(e)&&ae(t)?Np(e,t):t),Mw=(Bw((e,t)=>t),e=>({tag:"defaultedThunk",process:G(e)})),Iw=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},Ap=e=>({extract:(t,n)=>{return(r=e(n)).stype===ni.Error?Nd(t,G(r.serror)):r;var r},toString:G("val")}),cO=Ap(fa),zw=(e,t,n,r)=>r(Gt(e,t).getOrThunk(()=>n(e))),dO=(e,t,n,r,o)=>{const i=a=>o.extract(t.concat([r]),a),s=a=>a.fold(()=>fa(R.none()),c=>{return(f=o.extract(t.concat([r]),c)).stype===ni.Value?{stype:ni.Value,svalue:(0,R.some)(f.svalue)}:f;var f});switch(e.tag){case"required":return a=t,f=i,Gt(c=n,d=r).fold(()=>{return v=d,w=c,Nd(a,()=>'Could not find valid *required* value for "'+v+'" in '+Tp(w));var v,w},f);case"defaultedThunk":return zw(n,r,e.process,i);case"option":return((a,c,d)=>d(Gt(a,c)))(n,r,s);case"defaultedOptionThunk":return((a,c,d,f)=>f(Gt(a,c).map(p=>!0===p?d(a):p)))(n,r,e.process,s);case"mergeWithThunk":return zw(n,r,G({}),a=>{const c=Np(e.process(n),a);return i(c)})}var a,c,d,f},Op=e=>({extract:(t,n)=>((r,o,i)=>{const s={},a=[];for(const c of i)Iw(c,(d,f,p,v)=>{const w=dO(p,r,o,d,v);sO(w,y=>{a.push(...y)},y=>{s[f]=y})},(d,f)=>{s[d]=f(o)});return a.length>0?zl(a):fa(s)})(t,n,e),toString:()=>"obj{\n"+ut(e,n=>Iw(n,(r,o,i,s)=>r+" -> "+s.toString(),(r,o)=>"state("+r+")")).join("\n")+"}"}),Fw=e=>({extract:(t,n)=>(e=>{const t=(r=>{const o=[],i=[];return ye(r,s=>{Ep(s,a=>i.push(a),a=>o.push(a))}),{values:o,errors:i}})(e);return t.errors.length>0?(n=t.errors,L(zl,ze)(n)):fa(t.values);var n})(ut(n,(o,i)=>e.extract(t.concat(["["+i+"]"]),o))),toString:()=>"array("+e.toString()+")"}),$w=(e,t)=>((e,t)=>({extract:(n,r)=>Gt(r,e).fold(()=>{return i=e,Nd(n,()=>'Choice schema did not contain choice key: "'+i+'"');var i},o=>{return i=n,s=r,Gt(a=t,c=o).fold(()=>{return f=a,p=c,Nd(i,()=>'The chosen schema: "'+p+'" did not exist in branches: '+Tp(f));var f,p},d=>d.extract(i.concat(["branch: "+c]),s));var i,s,a,c}),toString:()=>"chooseOn("+e+"). Possible values: "+An(t)}))(e,uo(t,Op)),hO=G(cO),Ad=(e,t)=>Ap(n=>{const r=typeof n;return e(n)?fa(n):zl(`Expected type: ${t} but got: ${r}`)}),fO=Ad(m,"number"),Od=Ad(U,"string"),pO=Ad(g,"boolean"),Rp=Ad(D,"function"),Fl=(e,t,n,r)=>({tag:"field",key:e,newKey:t,presence:n,prop:r}),Hw=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),qw=(e,t)=>Fl(e,e,{tag:"required",process:{}},t),Uw=e=>qw(e,Od),Ww=e=>qw(e,Rp),jp=(e,t)=>Fl(e,e,{tag:"option",process:{}},t),Rd=e=>jp(e,Od),pa=(e,t,n)=>Fl(e,e,Mw(t),n),Vw=(e,t)=>pa(e,t,fO),Kw=(e,t,n)=>{return pa(e,t,(r=n,o=i=>Oe(r,i)?Tr.value(i):Tr.error(`Unsupported value: "${i}", choose one of "${r.join(", ")}".`),Ap(i=>o(i).fold(zl,fa))));var r,o},Pp=(e,t)=>pa(e,t,pO),Dp=(e,t)=>pa(e,t,Rp),gO=Uw("type"),mO=Ww("fetch"),Lp=Ww("onAction"),vO=Dp("onSetup",()=>F),_O=Rd("text"),yO=Rd("icon"),bO=Rd("tooltip"),wO=Rd("label"),xO=Pp("active",!1),CO=Pp("enabled",!0),Yw=Pp("primary",!1),$l=e=>pa("type",e,Od),kO=Op([gO,Uw("trigger"),Vw("minChars",1),((e,t)=>Fl(e,e,Mw(1),hO()))("columns"),Vw("maxResults",10),jp("matches",Rp),mO,Lp,(Xw=Od,pa("highlightOn",[],Fw(Xw)))]);var Xw;const Bp=[CO,bO,yO,_O,vO],Gw=[xO].concat(Bp),SO=[Dp("predicate",Tt),Kw("scope","node",["node","editor"]),Kw("position","selection",["node","selection","line"])],EO=Bp.concat([$l("contextformbutton"),Yw,Lp,Hw("original",K)]),TO=Gw.concat([$l("contextformbutton"),Yw,Lp,Hw("original",K)]),NO=Bp.concat([$l("contextformbutton")]),AO=Gw.concat([$l("contextformtogglebutton")]),OO=$w("type",{contextformbutton:EO,contextformtogglebutton:TO});Op([$l("contextform"),Dp("initValue",G("")),wO,((e,t)=>Fl(e,e,{tag:"required",process:{}},Fw(t)))("commands",OO),jp("launch",$w("type",{contextformbutton:NO,contextformtogglebutton:AO}))].concat(SO));const jO=e=>{const t=Pi(),n=Jn(!1),r=t.isSet,o=()=>{r()&&(Pn(e).autocompleter.removeDecoration(),e.dispatch("AutocompleterEnd"),n.set(!1),t.clear())},i=ri(()=>(e=>{const t=e.ui.registry.getAll().popups,n=uo(t,i=>{return(s=i,((e,t,n)=>{return r=(a=t.extract([e],s=n)).stype===ni.Error?{stype:ni.Error,serror:(a=>({input:s,errors:a}))(a.serror)}:a,Ep(r,Tr.error,Tr.value);var s,a,r})("Autocompleter",kO,{trigger:s.ch,...s})).fold(a=>{throw new Error("Errors: \n"+(d=>{const f=d.length>10?d.slice(0,10).concat([{path:[],getErrorInfo:G("... (only showing first ten failures)")}]):d;return ut(f,p=>"Failed path: ("+p.path.join(" > ")+")\n"+p.getErrorInfo())})((c=a).errors).join("\n")+"\n\nInput object: "+Tp(c.input));var c},K);var s}),r=tn(mr(n,i=>i.trigger)),o=ln(n);return{dataset:n,triggers:r,lookupByTrigger:i=>tt(o,s=>s.trigger===i)}})(e)),s=a=>{var c;(c=a,t.get().map(d=>jw(e.dom,e.selection.getRng(),d.trigger).bind(f=>Lw(e,i,f,c))).getOrThunk(()=>((d,f)=>{const p=f(),v=d.selection.getRng();return(w=d.dom,y=v,S=p,or(S.triggers,b=>jw(w,y,b))).bind(w=>Lw(d,f,w));var w,y,S})(e,i))).fold(o,c=>{var d,p;d=c.context,r()||(p=d.range,Pn(e).autocompleter.addDecoration(p),t.set({trigger:d.trigger,matchLength:d.text.length})),c.lookupData.then(d=>{t.get().map(f=>{const p=c.context;f.trigger===p.trigger&&(p.text.length-f.matchLength>=10?o():(t.set({...f,matchLength:p.text.length}),n.get()?e.dispatch("AutocompleterUpdate",{lookupData:d}):(n.set(!0),e.dispatch("AutocompleterStart",{lookupData:d}))))})})})};e.addCommand("mceAutocompleterReload",(a,c)=>{const d=I(c)?c.fetchOptions:{};s(d)}),e.addCommand("mceAutocompleterClose",o),((a,c)=>{const d=$u(c.load,50);a.on("keypress compositionend",f=>{27!==f.which&&d.throttle()}),a.on("keydown",f=>{const p=f.which;8===p?d.throttle():27===p&&c.cancelIfNecessary()}),a.on("remove",d.cancel)})(e,{cancelIfNecessary:o,load:s})},PO=dr().browser.isSafari(),Jw=e=>Ni(X(e)),Qw=(e,t)=>{var n;return 0===e.startOffset&&e.endOffset===(null===(n=t.textContent)||void 0===n?void 0:n.length)},jd=(e,t)=>R.from(e.getParent(t.container(),"details")),Zw=(e,t)=>jd(e,t).isSome(),ex=(e,t)=>{const n=t.getNode();x(n)||e.selection.setCursorLocation(n,t.offset())},tx=(e,t,n)=>{const r=e.dom.getParent(t.container(),"details");if(r&&!r.open){const o=e.dom.select("summary",r)[0];o&&(n?gr(o):xo(o)).each(i=>ex(e,i))}else ex(e,t)},nx=(e,t,n)=>{const{dom:r,selection:o}=e,i=e.getBody();if("character"===n){const s=_e.fromRangeStart(o.getRng()),a=r.getParent(s.container(),r.isBlock),c=jd(r,s),d=a&&r.isEmpty(a),f=k(a?.previousSibling),p=k(a?.nextSibling);return!!(d&&(t?p:f)&&Zs(!t,i,s).exists(v=>Zw(r,v)&&!Is(c,jd(r,v))))||Zs(t,i,s).fold(Tt,v=>{const w=jd(r,v);if(Zw(r,v)&&!Is(c,w)){if(t||tx(e,v,!1),a&&d){if(t&&f||!t&&p)return!0;tx(e,v,t),e.dom.remove(a)}return!0}return!1})}return!1},Cs=(e,t,n)=>{return o=t,i=n,((s,a)=>{const c=R.from(s.getParent(a.startContainer,"details")),d=R.from(s.getParent(a.endContainer,"details"));if(c.isSome()||d.isSome()){const f=c.bind(p=>R.from(s.select("summary",p)[0]));return R.some({startSummary:f,startDetails:c,endDetails:d})}return R.none()})((r=e).dom,r.selection.getRng()).fold(()=>nx(r,o,i),s=>((e,t,n,r)=>{const o=e.selection.getRng(),i=_e.fromRangeStart(o),s=e.getBody();return"selection"===r?((a,c)=>{const d=c.startSummary.exists(v=>v.contains(a.startContainer)),f=c.startSummary.exists(v=>v.contains(a.endContainer)),p=c.startDetails.forall(v=>c.endDetails.forall(w=>v!==w));return(d||f)&&!(d&&f)||p})(o,t):n?(a=i,t.startSummary.exists(d=>{return f=a,xo(p=d).exists(v=>Cn(v.getNode())&&Pr(p,v).exists(w=>w.isEqual(f))||v.isEqual(f));var f,p})||((a,c,d)=>d.startDetails.exists(f=>Nr(a,c).forall(p=>!f.contains(p.container()))))(s,i,t)):((a,c)=>c.startSummary.exists(d=>{return f=a,gr(d).exists(v=>v.isEqual(f));var f}))(i,t)||((a,c)=>c.startDetails.exists(d=>Pr(d,a).forall(f=>c.startSummary.exists(p=>!p.contains(a.container())&&p.contains(f.container())))))(i,t);var a})(r,s,o,i)||nx(r,o,i))||PO&&((r,o,i)=>{const s=r.selection,a=s.getNode(),c=s.getRng(),d=_e.fromRangeStart(c);return!!bk(a)&&("selection"===i&&Qw(c,a)||N0(o,d,a)?Jw(a):r.undoManager.transact(()=>{const f=s.getSel();let{anchorNode:p,anchorOffset:v,focusNode:w,focusOffset:y}=f??{};const S=()=>{N(p)&&N(v)&&N(w)&&N(y)&&f?.setBaseAndExtent(p,v,w,y)},b=(O,P)=>{ye(O.childNodes,z=>{pl(z)&&P.appendChild(z)})},T=r.dom.create("span",{"data-mce-bogus":"1"});b(a,T),a.appendChild(T),S(),"word"!==i&&"line"!==i||null==f||f.modify("extend",o?"right":"left",i),!s.isCollapsed()&&Qw(s.getRng(),T)?Jw(a):(r.execCommand(o?"ForwardDelete":"Delete"),p=f?.anchorNode,v=f?.anchorOffset,w=f?.focusNode,y=f?.focusOffset,b(T,a),S()),r.dom.remove(T)}),!0)})(e,t,n)?R.some(F):R.none();var r,o,i},rx=e=>(t,n,r={})=>{const o=t.getBody(),i={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:F,inputType:n},s=em(new InputEvent(e));return t.dispatch(e,{...s,...i,...r})},Hl=rx("input"),Pd=rx("beforeinput"),ox=dr(),ix=ox.os,sx=ix.isMacOS()||ix.isiOS(),LO=ox.browser.isFirefox(),ga=(e,t)=>{const n=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const i=(s=>{for(;s;){if(Ke(s)||Le(s)&&s.data&&/[\r\n\s]/.test(s.data))return s;s=s.nextSibling}return null})(t.firstChild);i&&/^(UL|OL|DL)$/.test(i.nodeName)&&t.insertBefore(n.doc.createTextNode(Xn),t.firstChild)}const o=n.createRng();if(t.normalize(),t.hasChildNodes()){const i=new qn(t,t);let s,a=t;for(;s=i.current();){if(Le(s)){o.setStart(s,0),o.setEnd(s,0);break}if(r[s.nodeName.toLowerCase()]){o.setStartBefore(s),o.setEndBefore(s);break}a=s,s=i.next()}s||(o.setStart(a,0),o.setEnd(a,0))}else Cn(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),_l(e,o)},ql=(e,t)=>{const n=e.getRoot();let r,o=t;for(;o!==n&&o&&"false"!==e.getContentEditable(o);){if("true"===e.getContentEditable(o)){r=o;break}o=o.parentNode}return o!==n?r:n},Mp=e=>R.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),Ip=e=>{e.innerHTML='<br data-mce-bogus="1">'},Ul=(e,t)=>{pr(e).toLowerCase()===t.tagName.toLowerCase()&&((n,r,o)=>{const i=n.dom;R.from(o.style).map(i.parseStyle).each(f=>{const p={...Ie(X(r)),...f};i.setStyles(r,p)});const s=R.from(o.class).map(f=>f.split(/\s+/)),a=R.from(r.className).map(f=>tt(f.split(/\s+/),p=>""!==p));er(s,a,(f,p)=>{const v=tt(p,y=>!Oe(f,y)),w=[...f,...v];i.setAttrib(r,"class",w.join(" "))});const c=["style","class"],d=xn(o,(f,p)=>!Oe(c,p));i.setAttribs(r,d)})(e,t,il(e))},ax=(e,t,n,r,o=!0,i,s)=>{const a=e.dom,c=e.schema,d=pr(e),f=n?n.nodeName.toUpperCase():"";let p=t;const v=c.getTextInlineElements();let w;w=i||"TABLE"===f||"HR"===f?a.create(i||d,s||{}):n.cloneNode(!1);let y=w;if(o){do{if(v[p.nodeName]){if(Gr(p)||Jr(p))continue;const S=p.cloneNode(!1);a.setAttrib(S,"id",""),w.hasChildNodes()?(S.appendChild(w.firstChild),w.appendChild(S)):(y=S,w.appendChild(S))}}while((p=p.parentNode)&&p!==r)}else a.setAttrib(w,"style",null),a.setAttrib(w,"class",null);return Ul(e,w),Ip(y),w},lx=(e,t)=>{const n=e?.parentNode;return N(n)&&n.nodeName===t},cx=e=>N(e)&&/^(OL|UL|LI)$/.test(e.nodeName),zp=e=>N(e)&&/^(LI|DT|DD)$/.test(e.nodeName),Dd=e=>{const t=e.parentNode;return zp(t)?t:e},Ld=(e,t,n)=>{let r=e[n?"firstChild":"lastChild"];for(;r&&!Ke(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},dx=e=>Ge(mr(Ie(X(e)),(t,n)=>`${n}: ${t};`),(t,n)=>t+n,""),BO=(e,t)=>t&&"A"===t.nodeName&&e.isEmpty(t),Fp=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,$p=(e,t)=>N(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&"false"!==e.getContentEditable(t),Hp=(e,t,n)=>Le(t)?e?1===n&&t.data.charAt(n-1)===Gn?0:n:n===t.data.length-1&&t.data.charAt(n)===Gn?t.data.length:n:n,ux={insert:(e,t)=>{let n,r,o,i,s=!1;const a=e.dom,c=e.schema.getNonEmptyElements(),d=e.selection.getRng(),f=pr(e),p=X(d.startContainer),v=Rn(p,d.startOffset),w=v.exists(ce=>Ci(ce)&&!yo(ce)),y=d.collapsed&&w,S=(ce,fe)=>ax(e,n,M,z,yS(e),ce,fe),b=ce=>{const fe=Hp(ce,n,r);if(Le(n)&&(ce?fe>0:fe<n.data.length))return!1;if(n.parentNode===M&&s&&!ce||ce&&Ke(n)&&n===M.firstChild)return!0;if(Fp(n,"TABLE")||Fp(n,"HR"))return s&&!ce||!s&&ce;const Q=new qn(n,M);let ne;for(Le(n)&&(ce&&0===fe?Q.prev():ce||fe!==n.data.length||Q.next());ne=Q.current();){if(Ke(ne)){if(!ne.getAttribute("data-mce-bogus")){const de=ne.nodeName.toLowerCase();if(c[de]&&"br"!==de)return!1}}else if(Le(ne)&&!Oi(ne.data))return!1;ce?Q.prev():Q.next()}return!0},T=()=>{let ce;return ce=/^(H[1-6]|PRE|FIGURE)$/.test(o)&&"HGROUP"!==Y?S(f):S(),((fe,Q)=>{const ne=bS(fe);return!C(Q)&&(U(ne)?Oe(Be.explode(ne),Q.nodeName.toLowerCase()):ne)})(e,i)&&$p(a,i)&&a.isEmpty(M,void 0,{includeZwsp:!0})?ce=a.split(i,M):a.insertAfter(ce,M),ga(e,ce),ce};Kc(a,d).each(ce=>{d.setStart(ce.startContainer,ce.startOffset),d.setEnd(ce.endContainer,ce.endOffset)}),n=d.startContainer,r=d.startOffset;const O=!(!t||!t.shiftKey),P=!(!t||!t.ctrlKey);Ke(n)&&n.hasChildNodes()&&!y&&(s=r>n.childNodes.length-1,n=n.childNodes[Math.min(r,n.childNodes.length-1)]||n,r=s&&Le(n)?n.data.length:0);const z=ql(a,n);if(!z||((ce,fe)=>{const Q=ce.dom.getParent(fe,"ol,ul,dl");return null!==Q&&"false"===ce.dom.getContentEditableParent(Q)})(e,n))return;O||(n=((ce,fe,Q,ne,de)=>{var xe,Fe;const Me=ce.dom,nt=null!==(xe=ql(Me,ne))&&void 0!==xe?xe:Me.getRoot();let Ze=Me.getParent(ne,Me.isBlock);if(!Ze||!$p(Me,Ze)){if(Ze=Ze||nt,!Ze.hasChildNodes()){const We=Me.create(fe);return Ul(ce,We),Ze.appendChild(We),Q.setStart(We,0),Q.setEnd(We,0),We}let lt,ot=ne;for(;ot&&ot.parentNode!==Ze;)ot=ot.parentNode;for(;ot&&!Me.isBlock(ot);)lt=ot,ot=ot.previousSibling;const He=null===(Fe=lt?.parentElement)||void 0===Fe?void 0:Fe.nodeName;if(lt&&He&&ce.schema.isValidChild(He,fe.toLowerCase())){const We=lt.parentNode,yt=Me.create(fe);for(Ul(ce,yt),We.insertBefore(yt,lt),ot=lt;ot&&!Me.isBlock(ot);){const ee=ot.nextSibling;yt.appendChild(ot),ot=ee}Q.setStart(ne,de),Q.setEnd(ne,de)}}return ne})(e,f,d,n,r));let M=a.getParent(n,a.isBlock)||a.getRoot();i=N(M?.parentNode)?a.getParent(M.parentNode,a.isBlock):null,o=M?M.nodeName.toUpperCase():"";const Y=i?i.nodeName.toUpperCase():"";if("LI"!==Y||P||(M=i,i=i.parentNode,o=Y),Ke(i)&&(ce=e,Q=M,!O&&Q.nodeName.toLowerCase()===pr(ce)&&ce.dom.isEmpty(Q)&&((ne,de,xe)=>{let Fe=de;for(;Fe&&Fe!==ne&&k(Fe.nextSibling);){const nt=Fe.parentElement;if(!nt||(Me=nt,!ft(ce.schema.getTextBlockElements(),Me.nodeName.toLowerCase())))return pu(nt);Fe=nt}var Me;return!1})(ce.getBody(),Q)))return((ce,fe,Q)=>{var ne,de,xe;const Fe=fe(pr(ce)),Me=ce.dom.getParent(Q,pu);Me&&(ce.dom.insertAfter(Fe,Me),ga(ce,Fe),(null!==(xe=null===(de=null===(ne=Q.parentElement)||void 0===ne?void 0:ne.childNodes)||void 0===de?void 0:de.length)&&void 0!==xe?xe:0)>1&&ce.dom.remove(Q))})(e,S,M);var ce,Q;if(/^(LI|DT|DD)$/.test(o)&&Ke(i)&&a.isEmpty(M))return void((ce,fe,Q,ne,de)=>{const xe=ce.dom,Fe=ce.selection.getRng(),Me=Q.parentNode;if(Q===ce.getBody()||!Me)return;var nt;cx(nt=Q)&&cx(nt.parentNode)&&(de="LI");const Ze=zp(ne)?dx(ne):void 0;let lt=zp(ne)&&Ze?fe(de,{style:dx(ne)}):fe(de);if(Ld(Q,ne,!0)&&Ld(Q,ne,!1))if(lx(Q,"LI")){const ot=Dd(Q);xe.insertAfter(lt,ot),(null===(We=(He=Q).parentNode)||void 0===We?void 0:We.firstChild)===He?xe.remove(ot):xe.remove(Q)}else xe.replace(lt,Q);else if(Ld(Q,ne,!0))lx(Q,"LI")?(xe.insertAfter(lt,Dd(Q)),lt.appendChild(xe.doc.createTextNode(" ")),lt.appendChild(Q)):Me.insertBefore(lt,Q),xe.remove(ne);else if(Ld(Q,ne,!1))xe.insertAfter(lt,Dd(Q)),xe.remove(ne);else{Q=Dd(Q);const ot=Fe.cloneRange();ot.setStartAfter(ne),ot.setEndAfter(Q);const He=ot.extractContents();if("LI"===de&&((We,yt)=>We.firstChild&&"LI"===We.firstChild.nodeName)(He)){const We=tt(ut(lt.children,X),St($o("br")));lt=He.firstChild,xe.insertAfter(He,Q),ye(We,yt=>ct(X(lt),yt)),Ze&&lt.setAttribute("style",Ze)}else xe.insertAfter(He,Q),xe.insertAfter(lt,Q);xe.remove(ne)}var He,We;ga(ce,lt)})(e,S,i,M,f);if(!(y||M!==e.getBody()&&$p(a,M)))return;const te=M.parentNode;let ie;if(y)ie=S(f),v.fold(()=>{Et(p,X(ie))},ce=>{Qe(ce,X(ie))}),e.selection.setCursorLocation(ie,0);else if(Vs(M))ie=bu(M),a.isEmpty(M)&&Ip(M),Ul(e,ie),ga(e,ie);else if(b(!1))ie=T();else if(b(!0)&&te){ie=te.insertBefore(S(),M);const ce=X(d.startContainer).dom.hasChildNodes()&&d.collapsed;ga(e,Fp(M,"HR")||ce?ie:M)}else{const ce=(Q=>{const ne=Q.cloneRange();return ne.setStart(Q.startContainer,Hp(!0,Q.startContainer,Q.startOffset)),ne.setEnd(Q.endContainer,Hp(!1,Q.endContainer,Q.endOffset)),ne})(d).cloneRange();ce.setEndAfter(M);const fe=ce.extractContents();(Q=>{ye(bg(X(Q),kr),ne=>{const de=ne.dom;de.nodeValue=Fr(de.data)})})(fe),(Q=>{let ne=Q;do{Le(ne)&&(ne.data=ne.data.replace(/^[\r\n]+/,"")),ne=ne.firstChild}while(ne)})(fe),ie=fe.firstChild,a.insertAfter(fe,M),((Q,ne,de)=>{var xe;const Fe=[];if(!de)return;let Me=de;for(;Me=Me.firstChild;){if(Q.isBlock(Me))return;Ke(Me)&&!ne[Me.nodeName.toLowerCase()]&&Fe.push(Me)}let nt=Fe.length;for(;nt--;)Me=Fe[nt],(!Me.hasChildNodes()||Me.firstChild===Me.lastChild&&""===(null===(xe=Me.firstChild)||void 0===xe?void 0:xe.nodeValue)||BO(Q,Me))&&Q.remove(Me)})(a,c,ie),((Q,ne)=>{ne.normalize();const de=ne.lastChild;(!de||Ke(de)&&/^(left|right)$/gi.test(Q.getStyle(de,"float",!0)))&&Q.add(ne,"br")})(a,M),a.isEmpty(M)&&Ip(M),ie.normalize(),a.isEmpty(ie)?(a.remove(ie),T()):(Ul(e,ie),ga(e,ie))}a.setAttrib(ie,"id",""),e.dispatch("NewBlock",{newBlock:ie})},fakeEventName:"insertParagraph"},hx=(e,t,n)=>{const r=e.dom.createRng();n?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),e.selection.setRng(r),_l(e,r)},MO=(e,t)=>{const n=je("br");Qe(X(t),n),e.undoManager.add()},IO=(e,t)=>{zO(e.getBody(),t)||pt(X(t),je("br"));const n=je("br");pt(X(t),n),hx(e,n.dom,!1),e.undoManager.add()},zO=(e,t)=>{return n=_e.after(t),!!Cn(n.getNode())||Nr(e,_e.after(t)).map(r=>Cn(r.getNode())).getOr(!1);var n},fx=e=>e&&"A"===e.nodeName&&"href"in e,FO=e=>e.fold(Tt,fx,fx,Tt),$O=(e,t)=>{t.fold(F,ge(MO,e),ge(IO,e),F)},px={insert:(e,t)=>{const n=(r=>{const o=ge(ys,r),i=_e.fromRangeStart(r.selection.getRng());return ei(o,r.getBody(),i).filter(FO)})(e);n.isSome()?n.each(ge($O,e)):((r,o)=>{const s=r.dom,a=r.selection.getRng();let c,d=!1;Kc(s,a).each(b=>{a.setStart(b.startContainer,b.startOffset),a.setEnd(b.endContainer,b.endOffset)});let f=a.startOffset,p=a.startContainer;if(Ke(p)&&p.hasChildNodes()){const b=f>p.childNodes.length-1;p=p.childNodes[Math.min(f,p.childNodes.length-1)]||p,f=b&&Le(p)?p.data.length:0}let v=s.getParent(p,s.isBlock);const w=v&&v.parentNode?s.getParent(v.parentNode,s.isBlock):null;"LI"!==(w?w.nodeName.toUpperCase():"")||!(!o||!o.ctrlKey)||(v=w),Le(p)&&f>=p.data.length&&(((b,T,O)=>{const P=new qn(T,O);let z;const M=b.getNonEmptyElements();for(;z=P.next();)if(M[z.nodeName.toLowerCase()]||Le(z)&&z.length>0)return!0;return!1})(r.schema,p,v||s.getRoot())||(c=s.create("br"),a.insertNode(c),a.setStartAfter(c),a.setEndAfter(c),d=!0)),c=s.create("br"),Vu(s,a,c),hx(r,c,d),r.undoManager.add()})(e,t)},fakeEventName:"insertLineBreak"},gx=(e,t)=>Mp(e).filter(n=>t.length>0&&cn(X(n),t)).isSome(),$r=Ko([{br:[]},{block:[]},{none:[]}]),HO=(e,t)=>{return gx(n=e,_S(n));var n},mx=e=>(t,n)=>Mp(t).filter(o=>Ha(X(o))).isSome()===e,vx=(e,t)=>(n,r)=>Mp(n).fold(G(""),s=>s.nodeName.toUpperCase())===e.toUpperCase()===t,qO=e=>{const t=ql(e.dom,e.selection.getStart());return C(t)},Wl=e=>vx("pre",e),Bd=e=>(t,n)=>gS(t)===e,UO=(e,t)=>{return gx(n=e,vS(n));var n},Md=(e,t)=>t,WO=e=>{const t=pr(e),n=ql(e.dom,e.selection.getStart());return N(n)&&e.schema.isValidChild(n.nodeName,t)},VO=e=>{const t=e.selection.getRng(),n=X(t.startContainer),r=Rn(n,t.startOffset).map(o=>Ci(o)&&!yo(o));return t.collapsed&&r.getOr(!0)},oo=(e,t)=>(n,r)=>Ge(e,(o,i)=>o&&i(n,r),!0)?R.some(t):R.none(),Id=(e,t,n)=>{t.selection.isCollapsed()||t.execCommand("delete"),N(n)&&Pd(t,e.fakeEventName).isDefaultPrevented()||(e.insert(t,n),N(n)&&Hl(t,e.fakeEventName))},_x=(e,t)=>{const n=()=>Id(px,e,t),r=()=>Id(ux,e,t),o=(i=e,s=t,h1([oo([HO],$r.none()),oo([Wl(!0),qO],$r.none()),oo([vx("summary",!0)],$r.br()),oo([Wl(!0),Bd(!1),Md],$r.br()),oo([Wl(!0),Bd(!1)],$r.block()),oo([Wl(!0),Bd(!0),Md],$r.block()),oo([Wl(!0),Bd(!0)],$r.br()),oo([mx(!0),Md],$r.br()),oo([mx(!0)],$r.block()),oo([UO],$r.br()),oo([Md],$r.br()),oo([WO],$r.block()),oo([VO],$r.block())],[i,!(!s||!s.shiftKey)]).getOr($r.none()));var i,s;switch(mS(e)){case"linebreak":o.fold(n,n,F);break;case"block":o.fold(r,r,F);break;case"invert":o.fold(r,n,F);break;default:o.fold(n,r,F)}},yx=dr(),KO=yx.os.isiOS()&&yx.browser.isSafari(),bx=(e,t)=>{var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact(()=>{_x(e,t)}))},YO=dr(),wx=e=>e.stopImmediatePropagation(),xx=e=>e.keyCode===qe.PAGE_UP||e.keyCode===qe.PAGE_DOWN,Cx=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",wx,!0):!n&&e.get()&&t.off("NodeChange",wx),e.set(n)},kx=(e,t)=>{const n=t.container(),r=t.offset();return Le(n)?(n.insertData(r,e),R.some(_e(n,r+e.length))):Lc(t).map(o=>{const i=wt(e);return t.isAtEnd()?pt(o,i):Qe(o,i),_e(i.dom,e.length)})},Sx=ge(kx,Xn),Ex=ge(kx," "),Tx=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},XO=e=>{const t=_e.fromRangeStart(e.selection.getRng()),n=X(e.getBody());if(e.selection.isCollapsed()){const r=ge(ys,e),o=_e.fromRangeStart(e.selection.getRng());return ei(r,e.getBody(),o).bind((i=n,s=>s.fold(a=>Pr(i.dom,_e.before(a)),a=>gr(a),a=>xo(a),a=>Nr(i.dom,_e.after(a))))).map(i=>()=>{return(s=n,a=t,c=e.schema,d=>g0(s,d,c)?Sx(a):Ex(a))(i).each(Tx(e));var s,a,c})}var i;return R.none()},GO=e=>{return xi($t.browser.isFirefox()&&e.selection.isEditable()&&(t=e.dom,n=e.selection.getRng().startContainer,t.isEditable(t.getParent(n,"summary"))),()=>{const r=X(e.getBody());var o,i,s;e.selection.isCollapsed()||e.getDoc().execCommand("Delete"),(o=r,i=_e.fromRangeStart(e.selection.getRng()),s=e.schema,g0(o,i,s)?Sx(i):Ex(i)).each(Tx(e))});var t,n},JO=e=>EE(e)?[{keyCode:qe.TAB,action:gt(Nw,e,!0)},{keyCode:qe.TAB,shiftKey:!0,action:gt(Nw,e,!1)}]:[],QO=e=>{if(e.addShortcut("Meta+P","","mcePrint"),jO(e),Zo(e))return Jn(null);{const t=(e=>{const t=Jn(null),n=ge(ys,e);return e.on("NodeChange",r=>{sl(e)&&(((o,i,s)=>{const a=ut(fr(X(i.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=tt(a,o),d=tt(s,o);ye(Ye(c,d),ge(D1,!1)),ye(Ye(d,c),ge(D1,!0))})(n,e.dom,r.parents),((o,i)=>{const s=i.get();if(o.selection.isCollapsed()&&!o.composing&&s){const a=_e.fromRangeStart(o.selection.getRng());_e.isTextPosition(a)&&!_u(c=a)&&!yu(c)&&(Cd(o,((e,t)=>{return _e.isTextPosition(t)?(r=t,iv(n=e)&&r.container()===n?((o,i)=>{const s=av(o.data.substr(0,i.offset())),a=av(o.data.substr(i.offset()));return(s.text+a.text).length>0?(lv(o),_e(o,i.offset()-s.count)):i})(n,r):cv(n,r)):((n,r)=>r.container()===n.parentNode?((o,i)=>{const s=i.container(),a=((c,d)=>{const f=Zn(c,d);return-1===f?R.none():R.some(f)})(Nn(s.childNodes),o).map(c=>c<i.offset()?_e(s,i.offset()-1):i).getOr(i);return us(o),a})(n,r):cv(n,r))(e,t);var n,r})(s,a)),i.set(null))}var c})(e,t),((o,i,s,a)=>{if(i.selection.isCollapsed()){const c=tt(a,o);ye(c,d=>{const f=_e.fromRangeStart(i.selection.getRng());ei(o,i.getBody(),f).bind(p=>L1(i,s,p))})}})(n,e,t,r.parents))}),t})(e);return(n=e).on("beforeinput",r=>{n.selection.isEditable()&&!Kt(r.getTargetRanges(),o=>!P_(n.dom,o))||r.preventDefault()}),(n=>{n.on("keyup compositionstart",ge(JA,n))})(e),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((i,s,a)=>{const c=$t.os.isMacOS()||$t.os.isiOS();Ml([{keyCode:qe.RIGHT,action:gt(sw,i,!0)},{keyCode:qe.LEFT,action:gt(sw,i,!1)},{keyCode:qe.UP,action:gt(aw,i,!1)},{keyCode:qe.DOWN,action:gt(aw,i,!0)},...c?[{keyCode:qe.UP,action:gt(Sd,i,!1),metaKey:!0,shiftKey:!0},{keyCode:qe.DOWN,action:gt(Sd,i,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:qe.RIGHT,action:gt(Sw,i,!0)},{keyCode:qe.LEFT,action:gt(Sw,i,!1)},{keyCode:qe.UP,action:gt(wp,i,!1)},{keyCode:qe.DOWN,action:gt(wp,i,!0)},{keyCode:qe.UP,action:gt(wp,i,!1)},{keyCode:qe.UP,action:gt(dw,i,!1)},{keyCode:qe.DOWN,action:gt(dw,i,!0)},{keyCode:qe.RIGHT,action:gt(pw,i,!0)},{keyCode:qe.LEFT,action:gt(pw,i,!1)},{keyCode:qe.UP,action:gt(gw,i,!1)},{keyCode:qe.DOWN,action:gt(gw,i,!0)},{keyCode:qe.RIGHT,action:gt(B1,i,s,!0)},{keyCode:qe.LEFT,action:gt(B1,i,s,!1)},{keyCode:qe.RIGHT,ctrlKey:!c,altKey:c,action:gt(FA,i,s)},{keyCode:qe.LEFT,ctrlKey:!c,altKey:c,action:gt($A,i,s)},{keyCode:qe.UP,action:gt(cw,i,!1)},{keyCode:qe.DOWN,action:gt(cw,i,!0)}],a).each(d=>{a.preventDefault()})})(n,r,o)})})(e,t),((n,r)=>{let o=!1;n.on("keydown",i=>{o=i.keyCode===qe.BACKSPACE,i.isDefaultPrevented()||((s,a,c)=>{const d=c.keyCode===qe.BACKSPACE?"deleteContentBackward":"deleteContentForward",f=s.selection.isCollapsed(),p=f?"character":"selection",v=w=>f?w?"word":"line":"selection";fw([{keyCode:qe.BACKSPACE,action:gt(J1,s)},{keyCode:qe.BACKSPACE,action:gt(ip,s,!1)},{keyCode:qe.DELETE,action:gt(ip,s,!0)},{keyCode:qe.BACKSPACE,action:gt(np,s,!1)},{keyCode:qe.DELETE,action:gt(np,s,!0)},{keyCode:qe.BACKSPACE,action:gt(pp,s,a,!1)},{keyCode:qe.DELETE,action:gt(pp,s,a,!0)},{keyCode:qe.BACKSPACE,action:gt(cf,s,!1)},{keyCode:qe.DELETE,action:gt(cf,s,!0)},{keyCode:qe.BACKSPACE,action:gt(Cs,s,!1,p)},{keyCode:qe.DELETE,action:gt(Cs,s,!0,p)},...sx?[{keyCode:qe.BACKSPACE,altKey:!0,action:gt(Cs,s,!1,v(!0))},{keyCode:qe.DELETE,altKey:!0,action:gt(Cs,s,!0,v(!0))},{keyCode:qe.BACKSPACE,metaKey:!0,action:gt(Cs,s,!1,v(!1))}]:[{keyCode:qe.BACKSPACE,ctrlKey:!0,action:gt(Cs,s,!1,v(!0))},{keyCode:qe.DELETE,ctrlKey:!0,action:gt(Cs,s,!0,v(!0))}],{keyCode:qe.BACKSPACE,action:gt(sp,s,!1)},{keyCode:qe.DELETE,action:gt(sp,s,!0)},{keyCode:qe.BACKSPACE,action:gt(vp,s,!1)},{keyCode:qe.DELETE,action:gt(vp,s,!0)},{keyCode:qe.BACKSPACE,action:gt(ep,s,!1)},{keyCode:qe.DELETE,action:gt(ep,s,!0)},{keyCode:qe.BACKSPACE,action:gt(Zf,s,!1)},{keyCode:qe.DELETE,action:gt(Zf,s,!0)},{keyCode:qe.BACKSPACE,action:gt(gp,s,!1)},{keyCode:qe.DELETE,action:gt(gp,s,!0)}],c).filter(w=>s.selection.isEditable()).each(w=>{c.preventDefault(),Pd(s,d).isDefaultPrevented()||(w(),Hl(s,d))})})(n,r,i)}),n.on("keyup",i=>{var s,a,c;i.isDefaultPrevented()||(a=i,c=o,Ml([{keyCode:qe.BACKSPACE,action:gt(s1,s=n)},{keyCode:qe.DELETE,action:gt(s1,s)},...sx?[{keyCode:qe.BACKSPACE,altKey:!0,action:gt(Bl,s)},{keyCode:qe.DELETE,altKey:!0,action:gt(Bl,s)},...c?[{keyCode:LO?224:91,action:gt(Bl,s)}]:[]]:[{keyCode:qe.BACKSPACE,ctrlKey:!0,action:gt(Bl,s)},{keyCode:qe.DELETE,ctrlKey:!0,action:gt(Bl,s)}]],a)),o=!1})})(e,t),(n=>{let r=R.none();n.on("keydown",o=>{var i;o.keyCode===qe.ENTER&&(KO&&(i=>{if(!i.collapsed)return!1;const s=i.startContainer;if(Le(s)){const a=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,c=s.data.charAt(i.startOffset-1);return a.test(c)}return!1})(n.selection.getRng())?(r=R.some((i=n).selection.getBookmark()),i.undoManager.add()):bx(n,o))}),n.on("keyup",o=>{o.keyCode===qe.ENTER&&r.each(()=>{return s=o,(i=n).undoManager.undo(),r.fold(F,a=>i.selection.moveToBookmark(a)),bx(i,s),void(r=R.none());var i,s})})})(e),(n=>{n.on("keydown",r=>{var o,i;r.isDefaultPrevented()||(i=r,fw([{keyCode:qe.SPACEBAR,action:gt(XO,o=n)},{keyCode:qe.SPACEBAR,action:gt(GO,o)}],i).each(s=>{i.preventDefault(),Pd(o,"insertText",{data:" "}).isDefaultPrevented()||(s(),Hl(o,"insertText",{data:" "}))}))})})(e),(n=>{n.on("input",r=>{r.isComposing||(o=>{const i=X(o.getBody());o.selection.isCollapsed()&&((e,t,n)=>{const r=t.container();if(!Le(r))return R.none();if((o=>{const i=o.container();return Le(i)&&On(i.data,Xn)})(t)){const o=_0(e,r,!1,n)||(i=>{const s=i.data,a=(c=>{const d=c.split("");return ut(d,(f,p)=>zc(f)&&p>0&&p<d.length-1&&uh(d[p-1])&&uh(d[p+1])?" ":f).join("")})(s);return a!==s&&(i.data=a,!0)})(r)||y0(e,r,!1,n);return xi(o,t)}if(Gh(e,t,n)){const o=_0(e,r,!0,n)||y0(e,r,!0,n);return xi(o,t)}return R.none()})(i,_e.fromRangeStart(o.selection.getRng()),o.schema).each(s=>{o.selection.setRng(s.toRange())})})(n)})})(e),(n=>{n.on("keydown",r=>{var i;r.isDefaultPrevented()||(i=r,Ml([...JO(n)],i).each(s=>{i.preventDefault()}))})})(e),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((i,s,a)=>{const c=$t.os.isMacOS()||$t.os.isiOS();Ml([{keyCode:qe.END,action:gt(lw,i,!0)},{keyCode:qe.HOME,action:gt(lw,i,!1)},...c?[]:[{keyCode:qe.HOME,action:gt(Sd,i,!1),ctrlKey:!0,shiftKey:!0},{keyCode:qe.END,action:gt(Sd,i,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:qe.END,action:gt(mw,i,!0)},{keyCode:qe.HOME,action:gt(mw,i,!1)},{keyCode:qe.END,action:gt(kd,i,!0,s)},{keyCode:qe.HOME,action:gt(kd,i,!1,s)}],a).each(d=>{a.preventDefault()})})(n,r,o)})})(e,t),((n,r)=>{if(YO.os.isMacOS())return;const o=Jn(!1);n.on("keydown",i=>{xx(i)&&Cx(o,n,!0)}),n.on("keyup",i=>{var s,a,c;i.isDefaultPrevented()||(c=i,Ml([{keyCode:qe.PAGE_UP,action:gt(kd,s=n,!1,a=r)},{keyCode:qe.PAGE_DOWN,action:gt(kd,s,!0,a)}],c)),xx(i)&&o.get()&&(Cx(o,n,!1),n.nodeChanged())})})(e,t),t}var n};class ZO{constructor(t){let n;this.lastPath=[],this.editor=t;const r=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",o=>{const i=t.selection.getRng(),s={startContainer:i.startContainer,startOffset:i.startOffset,endContainer:i.endContainer,endOffset:i.endOffset};"nodechange"!==o.type&&Ah(s,n)||t.dispatch("SelectionChange"),n=s}),t.on("contextmenu",()=>{t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const o=t.selection.getStart(!0);o&&Fc(t)&&!r.isSameElementPath(o)&&t.dom.isChildOf(o,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",o=>{!o.isDefaultPrevented()&&Fc(t)&&("IMG"===t.selection.getNode().nodeName?Zr.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const n=this.editor.selection;let r;if(this.editor.initialized&&n&&!XS(this.editor)&&!this.editor.mode.isReadOnly()){const o=this.editor.getBody();r=n.getStart(!0)||o,r.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(r,o)||(r=o);const i=[];this.editor.dom.getParent(r,s=>s===o||(i.push(s),!1)),this.editor.dispatch("NodeChange",{...t,element:r,parents:i})}}isSameElementPath(t){let n;const r=this.editor,o=Ft(r.dom.getParents(t,_t,r.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=o,!0}return this.lastPath=o,!1}}const Nx=el("image"),qp=el("event"),zd=e=>t=>{t[qp]=e},Ax=zd(0),eR=zd(2),tR=zd(1),Up=el("mode"),Fd=e=>t=>{t[Up]=e},Ox=(e,t)=>Fd(t)(e),Rx=Fd(0),Wp=Fd(2),rR=Fd(1),jx=e=>t=>R.from(t[Up]).exists(r=>r===e),ma=jx(0),Px=jx(1),oR=["none","copy","link","move"],iR=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],Vp=()=>{const e=new window.DataTransfer;let t="move",n="all";const r={get dropEffect(){return t},set dropEffect(o){Oe(oR,o)&&(t=o)},get effectAllowed(){return n},set effectAllowed(o){(e=>R.from(e[qp]).exists(n=>0===n))(r)&&Oe(iR,o)&&(n=o)},get items(){return o=r,i=e.items,{...i,get length(){return i.length},add:(s,a)=>{if(ma(o)){if(!U(s))return i.add(s);if(!x(a))return i.add(s,a)}return null},remove:s=>{ma(o)&&i.remove(s)},clear:()=>{ma(o)&&i.clear()}};var o,i},get files(){return Px(r)?Object.freeze({length:0,item:o=>null}):e.files},get types(){return e.types},setDragImage:(o,i,s)=>{ma(r)&&(r[Nx]={image:o,x:i,y:s},e.setDragImage(o,i,s))},getData:o=>Px(r)?"":e.getData(o),setData:(o,i)=>{ma(r)&&e.setData(o,i)},clearData:o=>{ma(r)&&e.clearData(o)}};return Rx(r),r},Dx=(e,t)=>e.setData("text/html",t),Lx="x-tinymce/html",$d=G(Lx),Kp="\x3c!-- "+Lx+" --\x3e",sR=e=>Kp+e,Bx=e=>-1!==e.indexOf(Kp),Mx="%MCEPASTEBIN%",Yp=e=>e.dom.get("mcepastebin"),aR=e=>N(e)&&"mcepastebin"===e.id,Ix=e=>e===Mx,zx=(e,t)=>(Be.each(t,n=>{e=H(n,RegExp)?e.replace(n,""):e.replace(n[0],n[1])}),e),Fx=e=>zx(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(t,n,r)=>n||r?Xn:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),$x=(e,t)=>({content:e,cancelled:t}),Xp=(e,t)=>(e.insertContent(t,{merge:pE(e),paste:!0}),!0),Gp=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),lR=(e,t,n)=>{return!(e.selection.isCollapsed()||!Gp(t)||(r=e,o=t,i=n,r.undoManager.extra(()=>{i(r,o)},()=>{r.execCommand("mceInsertLink",!1,o)}),0));var r,o,i},cR=(e,t,n)=>{return r=e,!(!Gp(o=t)||!Kt(ov(r),i=>Wi(o.toLowerCase(),`.${i.toLowerCase()}`)))&&((r,o,i)=>(r.undoManager.extra(()=>{i(r,o)},()=>{r.insertContent('<img src="'+o+'">')}),!0))(e,t,n);var r,o},dR=(e=>{let t=0;return()=>"mceclip"+t++})(),uR=e=>{const t=Vp();return Dx(t,e),Wp(t),t},Hx=(e,t,n,r,o)=>{const i=((d,f,p)=>{const v=d.dispatch("PastePreProcess",{content:f,internal:p}),w=((y,S)=>{const b=la({sanitize:th(y),sandbox_iframes:nh(y)},y.schema);b.addNodeFilter("meta",O=>{Be.each(O,P=>{P.remove()})});const T=b.parse(S,{forced_root_block:!1,isRootContent:!0});return Ii({validate:!0},y.schema).serialize(T)})(d,v.content);return d.hasEventListeners("PastePostProcess")&&!v.isDefaultPrevented()?((y,S,b)=>{const T=y.dom.create("div",{style:"display:none"},S),O=y.dispatch("PastePostProcess",{node:T,internal:b});return $x(O.node.innerHTML,O.isDefaultPrevented())})(d,w,p):$x(w,v.isDefaultPrevented())})(e,t,n);if(!i.cancelled){const s=i.content,a=()=>{return c=e,d=s,void(r||!gE(c)?Xp(c,d):(p=c,v=d,Be.each([lR,cR,Xp],w=>!w(p,v,Xp))));var c,d,p,v};o?Pd(e,"insertFromPaste",{dataTransfer:uR(s)}).isDefaultPrevented()||(a(),Hl(e,"insertFromPaste")):a()}},Hd=(e,t,n,r)=>{const o=n||Bx(t);Hx(e,t.replace(Kp,""),o,!1,r)},Jp=(e,t,n)=>{const r=e.dom.encode(t).replace(/\r\n/g,"\n"),o=((i,s,a)=>{const c=i.split(/\n\n/),d=((v,w)=>{let y="<"+v;const S=mr(w,(b,T)=>T+'="'+Ri.encodeAllRaw(b)+'"');return S.length&&(y+=" "+S.join(" ")),y+">"})(s,a),f="</"+s+">",p=ut(c,v=>v.split(/\n/).join("<br />"));return 1===p.length?p[0]:ut(p,v=>d+v+f).join("")})(Pg(r,vE(e)),pr(e),il(e));Hx(e,o,!1,!0,n)},qx=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const r=e.types[n];try{t[r]=e.getData(r)}catch{t[r]=""}}return t},qi=(e,t)=>t in e&&e[t].length>0,Ux=e=>qi(e,"text/html")||qi(e,"text/plain"),Wx=(e,t,n)=>{const r="paste"===t.type?t.clipboardData:t.dataTransfer;var o;if(Pc(e)&&r){const i=((s,a)=>{const c=a.items?$e(Nn(a.items),f=>"file"===f.kind?[f.getAsFile()]:[]):[],d=a.files?Nn(a.files):[];return tt(c.length>0?c:d,(f=>{const p=ov(f);return v=>Mn(v.type,"image/")&&Kt(p,w=>(y=>{const S=y.toLowerCase(),b={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Be.hasOwn(b,S)?"image/"+b[S]:"image/"+S})(w)===v.type)})(s))})(e,r);if(i.length>0)return t.preventDefault(),(o=i,Promise.all(ut(o,s=>Iy(s).then(a=>({file:s,uri:a}))))).then(s=>{n&&e.selection.setRng(n),ye(s,a=>{var c,d;c=e,Rf((d=a).uri).each(({data:f,type:p,base64Encoded:v})=>{const w=v?f:btoa(f),y=d.file,S=c.editorUpload.blobCache,T=S.getByData(w,p)??((O,P,z,M)=>{const Y=dR(),te=Km(O)&&N(z.name),ie=te?((Q,ne)=>{const de=ne.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return N(de)?Q.dom.encode(de[1]):void 0})(O,z.name):Y,fe=P.create(Y,z,M,ie,te?z.name:void 0);return P.add(fe),fe})(c,S,y,w);Hd(c,`<img src="${T.blobUri()}">`,!1,!0)})})}),!0}return!1},Qp=(e,t,n,r,o)=>{let i=Fx(n);const s=qi(t,$d())||Bx(n),a=!s&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(i),c=Gp(i);(Ix(i)||!i.length||a&&!c)&&(r=!0),(r||c)&&(i=qi(t,"text/plain")&&a?t["text/plain"]:(d=>{const f=ji(),p=la({},f);let v="";const w=f.getVoidElements(),y=Be.makeMap("script noscript style textarea video audio iframe object"," "),S=f.getBlockElements(),b=T=>{const O=T.name,P=T;if("br"!==O){if("wbr"!==O)if(w[O]&&(v+=" "),y[O])v+=" ";else{if(3===T.type&&(v+=T.value),!(T.name in f.getVoidElements())){let z=T.firstChild;if(z)do{b(z)}while(z=z.next)}S[O]&&P.next&&(v+="\n","p"===O&&(v+="\n"))}}else v+="\n"};return d=zx(d,[/<!\[[^\]]+\]>/g]),b(p.parse(d)),v})(i)),Ix(i)||(r?Jp(e,i,o):Hd(e,i,s,o))},Vx=(e,t,n,r)=>{((o,i,s)=>{if(!o)return!1;try{return o.clearData(),o.setData("text/html",i),o.setData("text/plain",s),o.setData($d(),i),!0}catch{return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):n(t.html,r)},Kx=e=>(t,n)=>{const{dom:r,selection:o}=e,i=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),s=r.create("div",{contenteditable:"true"},t);r.setStyles(i,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),i.appendChild(s),r.add(e.getBody(),i);const a=o.getRng();s.focus();const c=r.createRng();c.selectNodeContents(s),o.setRng(c),Zr.setEditorTimeout(e,()=>{o.setRng(a),r.remove(i),n()},0)},Yx=e=>({html:sR(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),Xx=e=>{return!e.selection.isCollapsed()||!!(t=e).dom.getParent(t.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",t.getBody());var t},Gx=(e,t)=>{var n,r;return ms.getCaretRangeFromPoint(null!==(n=t.clientX)&&void 0!==n?n:0,null!==(r=t.clientY)&&void 0!==r?r:0,e.getDoc())},Jx=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},fR=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,Qx=e=>Be.trim(e).replace(fR,Va).toLowerCase(),pR=(e,t,n)=>{const r=hE(e);if(n||"all"===r||!fE(e))return t;const o=r?r.split(/[, ]/):[];if(o&&"none"!==r){const i=e.dom,s=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(a,c,d,f)=>{const p=i.parseStyle(i.decode(d)),v={};for(let y=0;y<o.length;y++){const S=p[o[y]];let b=S,T=i.getStyle(s,o[y],!0);/color/.test(o[y])&&(b=Qx(b),T=Qx(T)),T!==b&&(v[o[y]]=S)}const w=i.serializeStyle(v,"span");return w?c+' style="'+w+'"'+f:c+f})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(i,s,a,c)=>s+' style="'+a+'"'+c)},mR=Cn,Zx=Le,vR=e=>sn(e.dom),eC=e=>t=>Lt(X(e),t),tC=(e,t)=>qo(X(e),vR,eC(t)),nC=(e,t,n)=>{const r=new qn(e,t),o=n?r.next.bind(r):r.prev.bind(r);let i=e;for(let s=n?e:o();s&&!mR(s);s=o())wo(s)&&(i=s);return i};var va;!function(e){e.Before="before",e.After="after"}(va||(va={}));const yR=(e,t)=>Math.abs(e.left-t),bR=(e,t)=>Math.abs(e.right-t),xR=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),Zp=(e,t,n,r)=>{const o=f=>wo(f.node)?R.some(f):Ke(f.node)?Zp(Nn(f.node.childNodes),t,n,!1):R.none(),i=(f,p)=>{const v=qt(f,(w,y)=>p(w,t,n)-p(y,t,n));return or(v,o).map(w=>{return r&&!Le(w.node)&&v.length>1?(y=w,S=v[1],b=p,o(S).filter(T=>Math.abs(b(y,t,n)-b(T,t,n))<2&&Le(T.node))).getOr(w):w;var y,S,b})},[s,a]=((e,t)=>{return(n=tt(e,n=>{return(r=t)>=(o=n).top&&r<=o.bottom;var r,o}),Ge(n,(r,o)=>r.fold(()=>R.some(o),i=>{const s=Math.min(o.left,i.left),a=Math.min(o.top,i.top),c=Math.max(o.right,i.right),d=Math.max(o.bottom,i.bottom);return R.some({top:a,right:c,bottom:d,left:s,width:c-s,height:d-a})}),R.none())).fold(()=>[[],e],n=>{const{pass:r,fail:o}=rr(e,i=>((s,a)=>{const c=(d=s,f=a,Math.max(0,Math.min(d.bottom,f.bottom)-Math.max(d.top,f.top))/Math.min(s.height,a.height));var d,f;return((d,f)=>d.top<f.bottom&&d.bottom>f.top)(s,a)&&c>.5})(i,n));return[r,o]});var n})(T1(e),n),{pass:c,fail:d}=rr(a,f=>f.top<n);return i(s,xR).orThunk(()=>i(d,mm)).orThunk(()=>i(c,mm))},rC=(e,t,n)=>((r,o,i)=>{const s=X(r),c=((e,t,n)=>R.from(e.dom.elementFromPoint(t,n)).map(Pe))(Ut(s),o,i).filter(d=>Ht(s,d)).getOr(s);return((d,f,p,v)=>{const w=(y,S)=>{const b=tt(y.dom.childNodes,St(T=>Ke(T)&&T.classList.contains("mce-drag-container")));return S.fold(()=>Zp(b,p,v,!0),T=>{const O=tt(b,P=>P!==T.dom);return Zp(O,p,v,!0)}).orThunk(()=>(Lt(y,d)?R.none():ki(y)).bind(T=>w(T,R.some(y))))};return w(f,R.none())})(s,c,o,i)})(e,t,n).filter(r=>ll(r.node)).map(r=>{return{node:(o=r).node,position:yR(o,i=t)<bR(o,i)?va.Before:va.After};var o,i}),oC=e=>{var t,n;const r=e.getBoundingClientRect(),o=e.ownerDocument,i=o.documentElement,s=o.defaultView;return{top:r.top+(null!==(t=s?.scrollY)&&void 0!==t?t:0)-i.clientTop,left:r.left+(null!==(n=s?.scrollX)&&void 0!==n?n:0)-i.clientLeft}},iC=e=>({target:e,srcElement:e}),sC=sn,kR=((...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1})(sC,bo),SR=(e,t,n,r)=>{const o=e.dom,i=t.cloneNode(!0);o.setStyles(i,{width:n,height:r}),o.setAttrib(i,"data-mce-selected",null);const s=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(s,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),o.setStyles(i,{margin:0,boxSizing:"border-box"}),s.appendChild(i),s},qd=(e,t)=>n=>()=>{n.scroll({[e]:("left"===e?n.scrollX:n.scrollY)+t,behavior:"smooth"})},aC=qd("left",-32),lC=qd("left",32),cC=qd("top",-32),dC=qd("top",32),uC=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},Vl=(e,t,n,r,o)=>{"dragstart"===t&&Dx(r,e.dom.getOuterHTML(n));const i=((e,t,n,r)=>{const o=((i,s)=>{const a=(c=>{const d=Vp(),f=R.from(c[Up]);return Wp(c),Ax(d),d.dropEffect=c.dropEffect,d.effectAllowed=c.effectAllowed,(p=c,R.from(p[Nx])).each(p=>d.setDragImage(p.image,p.x,p.y)),ye(c.types,p=>{"Files"!==p&&d.setData(p,c.getData(p))}),ye(c.files,p=>d.items.add(p)),(p=>R.from(p[qp]))(c).each(p=>{var v;v=d,zd(p)(v)}),f.each(p=>{Ox(c,p),Ox(d,p)}),d;var p})(i);return"dragstart"===s?(Ax(a),Rx(a)):"drop"===s?(eR(a),Wp(a)):(tR(a),rR(a)),a})(n,e);return x(r)?((i,s,a)=>{const c=l("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:i,composedPath:c,initEvent:c,preventDefault:F,stopImmediatePropagation:F,stopPropagation:F,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:c,initMouseEvent:c,getModifierState:c,dataTransfer:a,...iC(s)}})(e,t,o):(i=e,s=r,a=t,c=o,{...s,dataTransfer:c,type:i,...iC(a)});var i,s,a,c})(t,n,r,o);return e.dispatch(t,i)},hC=(e,t,n)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&n.fold(()=>Vl(t,"dragend",r.element,r.dataTransfer),o=>Vl(t,"dragend",r.element,r.dataTransfer,o))}),fC(e)},fC=e=>{e.on(t=>{t.intervalId.clear(),uC(t.ghost)}),e.clear()},Kl=sn,pC=(e,t)=>bs(e.getBody(),t),NR=e=>{const t=e.selection,n=e.dom,r=e.getBody(),o=((e,t,n,r)=>{const o=Pi();let i,s;const a=pr(e),c=e.dom,d=()=>{(f=>{var p,v;const w=fr(X(f),"*[contentEditable=false],video,audio,embed,object");for(let y=0;y<w.length;y++){const S=w[y].dom;let b=S.previousSibling;if(bc(b)){const T=b.data;1===T.length?null===(p=b.parentNode)||void 0===p||p.removeChild(b):b.deleteData(T.length-1,1)}b=S.nextSibling,yc(b)&&(1===b.data.length?null===(v=b.parentNode)||void 0===v||v.removeChild(b):b.deleteData(0,1))}})(t),s&&(us(s),s=null),o.on(f=>{c.remove(f.caret),o.clear()}),i&&(clearInterval(i),i=void 0)};return{show:(f,p)=>{let v;if(d(),DE(p))return null;if(!n(p))return s=((w,y)=>{var S;const b=(null!==(S=w.ownerDocument)&&void 0!==S?S:document).createTextNode(Gn),T=w.parentNode;if(y){const O=w.previousSibling;if(Ws(O)){if(Yr(O))return O;if(bc(O))return O.splitText(O.data.length-1)}T?.insertBefore(b,w)}else{const O=w.nextSibling;if(Ws(O)){if(Yr(O))return O;if(yc(O))return O.splitText(1),O}w.nextSibling?T?.insertBefore(b,w.nextSibling):T?.appendChild(b)}return b})(p,f),v=p.ownerDocument.createRange(),al(s.nextSibling)?(v.setStart(s,0),v.setEnd(s,0)):(v.setStart(s,1),v.setEnd(s,1)),v;{const w=((b,T,O)=>{var P;const z=(null!==(P=T.ownerDocument)&&void 0!==P?P:document).createElement(b);z.setAttribute("data-mce-caret",O?"before":"after"),z.setAttribute("data-mce-bogus","all"),z.appendChild(Ua().dom);const M=T.parentNode;return O?M?.insertBefore(z,T):T.nextSibling?M?.insertBefore(z,T.nextSibling):M?.appendChild(z),z})(a,p,f),y=dv(t,p,f);c.setStyle(w,"top",y.top),s=w;const S=c.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});c.setStyles(S,{...y}),c.add(t,S),o.set({caret:S,element:p,before:f}),f&&c.addClass(S,"mce-visual-caret-before"),i=setInterval(()=>{o.on(b=>{r()?c.toggleClass(b.caret,"mce-visual-caret-hidden"):c.addClass(b.caret,"mce-visual-caret-hidden")})},500),v=p.ownerDocument.createRange(),v.setStart(w,0),v.setEnd(w,0)}return v},hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(f=>{const p=dv(t,f.element,f.before);c.setStyles(f.caret,{...p})})},destroy:()=>clearInterval(i)}})(e,r,n.isBlock,()=>vs(e)),i="sel-"+n.uniqueId(),s="data-mce-selected";let a;const c=b=>b!==r&&(Kl(b)||Vo(b))&&n.isChildOf(b,r)&&n.isEditable(b.parentNode),d=(b,T,O,P=!0)=>e.dispatch("ShowCaret",{target:T,direction:b,before:O}).isDefaultPrevented()?null:(P&&t.scrollIntoView(T,-1===b),o.show(O,T)),f=b=>Yr(b)||yc(b)||bc(b),p=b=>f(b.startContainer)||f(b.endContainer),w=(b,T)=>{if(!b)return null;if(b.collapsed){if(!p(b)){const M=T?1:-1,Y=hl(M,r,b),te=Y.getNode(!T);if(N(te)){if(ll(te))return d(M,te,!!T&&!Y.isAtEnd(),!1);if(Ai(te)&&sn(te.nextSibling)){const ce=n.createRng();return ce.setStart(te,0),ce.setEnd(te,0),ce}}const ie=Y.getNode(T);if(N(ie)){if(ll(ie))return d(M,ie,!T&&!Y.isAtEnd(),!1);if(Ai(ie)&&sn(ie.previousSibling)){const ce=n.createRng();return ce.setStart(ie,1),ce.setEnd(ie,1),ce}}}return null}let O=b.startContainer,P=b.startOffset;const z=b.endOffset;if(Le(O)&&0===P&&Kl(O.parentNode)&&(O=O.parentNode,P=n.nodeIndex(O),O=O.parentNode),!Ke(O))return null;if(z===P+1&&O===b.endContainer){const M=O.childNodes[P];if(c(M))return(Y=>{const te=Y.cloneNode(!0),ie=e.dispatch("ObjectSelected",{target:Y,targetClone:te});if(ie.isDefaultPrevented())return null;const ce=((Q,ne)=>{const de=X(e.getBody()),xe=e.getDoc(),Fe=Wo(de,"#"+i).getOrThunk(()=>{const Ze=be('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',xe);return In(Ze,"id",i),Et(de,Ze),Ze}),Me=n.createRng();Vt(Fe),Bt(Fe,[wt(Xn,xe),X(ne),wt(Xn,xe)]),Me.setStart(Fe.dom.firstChild,1),Me.setEnd(Fe.dom.lastChild,0),J(Fe,{top:n.getPos(Q,e.getBody()).y+"px"}),S_(Fe);const nt=t.getSel();return nt&&(nt.removeAllRanges(),nt.addRange(Me)),Me})(Y,ie.targetClone),fe=X(Y);return ye(fr(X(e.getBody()),`*[${s}]`),Q=>{Lt(fe,Q)||h(Q,s)}),n.getAttrib(Y,s)||Y.setAttribute(s,"1"),a=Y,S(),ce})(M)}return null},y=()=>{a&&a.removeAttribute(s),Wo(X(e.getBody()),"#"+i).each(rt),a=null},S=()=>{o.hide()};return Zo(e)||(e.on("click",b=>{n.isEditable(b.target)||(b.preventDefault(),e.focus())}),e.on("blur NewBlock",y),e.on("ResizeWindow FullscreenStateChanged",o.reposition),e.on("tap",b=>{const T=b.target,O=pC(e,T);Kl(O)?(b.preventDefault(),jl(e,O).each(w)):c(T)&&jl(e,T).each(w)},!0),e.on("mousedown",b=>{const T=b.target;if(T!==r&&"HTML"!==T.nodeName&&!n.isChildOf(T,r)||!((P,z,M)=>{const Y=X(P.getBody()),te=P.inline?Y:X(Ut(Y).dom.documentElement),ie=((ce,fe,Q,ne)=>{const de=fe.dom.getBoundingClientRect();return{x:Q-(ce?de.left+fe.dom.clientLeft+rA(fe):0),y:ne-(ce?de.top+fe.dom.clientTop+nA(fe):0)}})(P.inline,te,z,M);return((ce,fe,Q)=>{const ne=eA(ce),de=tA(ce);return fe>=0&&Q>=0&&fe<=ne&&Q<=de})(te,ie.x,ie.y)})(e,b.clientX,b.clientY))return;y(),S();const O=pC(e,T);Kl(O)?(b.preventDefault(),jl(e,O).each(w)):rC(r,b.clientX,b.clientY).each(P=>{var z;b.preventDefault(),(z=d(1,P.node,P.position===va.Before,!1))&&t.setRng(z),ci(O)?O.focus():e.getBody().focus()})}),e.on("keypress",b=>{qe.modifierPressed(b)||Kl(t.getNode())&&b.preventDefault()}),e.on("GetSelectionRange",b=>{let T=b.range;if(a){if(!a.parentNode)return void(a=null);T=T.cloneRange(),T.selectNode(a),b.range=T}}),e.on("SetSelectionRange",b=>{b.range=(b=>{const T=e.schema.getVoidElements(),O=n.createRng(),P=b.startContainer,z=b.startOffset,M=b.endContainer,Y=b.endOffset;return ft(T,P.nodeName.toLowerCase())?0===z?O.setStartBefore(P):O.setStartAfter(P):O.setStart(P,z),ft(T,M.nodeName.toLowerCase())?0===Y?O.setEndBefore(M):O.setEndAfter(M):O.setEnd(M,Y),O})(b.range);const T=w(b.range,b.forward);T&&(b.range=T)}),e.on("AfterSetSelectionRange",b=>{const T=b.range,O=T.startContainer.parentElement;var P,z;p(T)||Ke(P=O)&&"mcepastebin"===P.id||S(),N(z=O)&&n.hasClass(z,"mce-offscreen-selection")||y()}),(e=>{const t=Pi(),n=nn.DOM,r=document,o=(c=t,d=e,f=>{if(0===f.button){const p=Z(d.dom.getParents(f.target),kR).getOr(null);if(N(p)&&(v=d.dom,w=d.getBody(),sC(y=p)&&y!==w&&v.isEditable(y.parentElement))){const v=d.dom.getPos(p),w=d.getBody(),y=d.getDoc().documentElement;c.set({element:p,dataTransfer:Vp(),dragging:!1,screenX:f.screenX,screenY:f.screenY,maxX:(d.inline?w.scrollWidth:y.offsetWidth)-2,maxY:(d.inline?w.scrollHeight:y.offsetHeight)-2,relX:f.pageX-v.x,relY:f.pageY-v.y,width:p.offsetWidth,height:p.offsetHeight,ghost:SR(d,p,p.offsetWidth,p.offsetHeight),intervalId:tS(100)})}}var v,w,y}),i=((e,t)=>{const n=Tc((o,i)=>{return a=o,c=i,(s=t)._selectionOverrides.hideFakeCaret(),void rC(s.getBody(),a,c).fold(()=>s.selection.placeCaretAt(a,c),d=>{const f=s._selectionOverrides.showCaret(1,d.node,d.position===va.Before,!1);f?s.selection.setRng(f):s.selection.placeCaretAt(a,c)});var s,a,c},0);t.on("remove",n.cancel);const r=e;return o=>e.on(i=>{const s=Math.max(Math.abs(o.screenX-i.screenX),Math.abs(o.screenY-i.screenY));if(!i.dragging&&s>10){const d=Vl(t,"dragstart",i.element,i.dataTransfer,o);if(N(d.dataTransfer)&&(i.dataTransfer=d.dataTransfer),d.isDefaultPrevented())return;i.dragging=!0,t.focus()}if(i.dragging){const d=o.currentTarget===t.getDoc().documentElement,f=((p,v)=>({pageX:v.pageX-p.relX,pageY:v.pageY+5}))(i,(v=o,w=(b=p=t).inline?oC(b.getBody()):{left:0,top:0},y=(b=>{const T=b.getBody();return b.inline?{left:T.scrollLeft,top:T.scrollTop}:{left:0,top:0}})(p),S=((b,T)=>{if(T.target.ownerDocument!==b.getDoc()){const O=oC(b.getContentAreaContainer()),P=(z=>{const M=z.getBody(),Y=z.getDoc().documentElement;return z.inline?{left:M.scrollLeft,top:M.scrollTop}:{left:M.scrollLeft||Y.scrollLeft,top:M.scrollTop||Y.scrollTop}})(b);return{left:T.pageX-O.left+P.left,top:T.pageY-O.top+P.top}}return{left:T.pageX,top:T.pageY}})(p,v),{pageX:S.left-w.left+y.left,pageY:S.top-w.top+y.top}));a=i.ghost,c=t.getBody(),a.parentNode!==c&&c.appendChild(a),((p,v,w,y,S,b,T,O,P,z,M,Y)=>{let te=0,ie=0;p.style.left=v.pageX+"px",p.style.top=v.pageY+"px",v.pageX+w>S&&(te=v.pageX+w-S),v.pageY+y>b&&(ie=v.pageY+y-b),p.style.width=w-te+"px",p.style.height=y-ie+"px";const ce=P.clientHeight,fe=P.clientWidth,Q=T+P.getBoundingClientRect().top,ne=O+P.getBoundingClientRect().left;M.on(de=>{de.intervalId.clear(),de.dragging&&Y&&(T+8>=ce?de.intervalId.set(dC(z)):T-8<=0?de.intervalId.set(cC(z)):O+8>=fe?de.intervalId.set(lC(z)):O-8<=0?de.intervalId.set(aC(z)):Q+16>=window.innerHeight?de.intervalId.set(dC(window)):Q-16<=0?de.intervalId.set(cC(window)):ne+16>=window.innerWidth?de.intervalId.set(lC(window)):ne-16<=0&&de.intervalId.set(aC(window)))})})(i.ghost,f,i.width,i.height,i.maxX,i.maxY,o.clientY,o.clientX,t.getContentAreaContainer(),t.getWin(),r,d),n.throttle(o.clientX,o.clientY)}var p,v,b,w,y,S,a,c})})(t,e),s=((c,d)=>f=>{c.on(p=>{var v,w,y,S;if(p.intervalId.clear(),p.dragging){if(w=d,y=(w=>{const y=w.getSel();if(N(y)){const S=y.getRangeAt(0).startContainer;return Le(S)?S.parentNode:S}return null})(d.selection),S=p.element,!C(y)&&y!==S&&!w.dom.isChildOf(y,S)&&w.dom.isEditable(y)){const w=null!==(v=d.getDoc().elementFromPoint(f.clientX,f.clientY))&&void 0!==v?v:d.getBody();Vl(d,"drop",w,p.dataTransfer,f).isDefaultPrevented()||d.undoManager.transact(()=>{((y,S)=>{const b=y.getParent(S.parentNode,y.isBlock);uC(S),b&&b!==y.getRoot()&&y.isEmpty(b)&&Ni(X(b))})(d.dom,p.element),(y=>{const S=y.getData("text/html");return""===S?R.none():R.some(S)})(p.dataTransfer).each(y=>d.insertContent(y)),d._selectionOverrides.hideFakeCaret()})}Vl(d,"dragend",d.getBody(),p.dataTransfer,f)}}),fC(c)})(t,e),a=((c,d)=>f=>hC(c,d,R.some(f)))(t,e);var c,d;e.on("mousedown",o),e.on("mousemove",i),e.on("mouseup",s),n.bind(r,"mousemove",i),n.bind(r,"mouseup",a),e.on("remove",()=>{n.unbind(r,"mousemove",i),n.unbind(r,"mouseup",a)}),e.on("keydown",c=>{c.keyCode===qe.ESC&&hC(t,e,R.none())})})(b=e),QS(b)&&(T=>{const O=M=>{if(!M.isDefaultPrevented()){const Y=M.dataTransfer;Y&&(Oe(Y.types,"Files")||Y.files.length>0)&&(M.preventDefault(),"drop"===M.type&&md(T,"Dropped file type is not supported"))}},P=M=>{Gc(T,M.target)&&O(M)},z=()=>{const M=nn.DOM,Y=T.dom,te=document,ie=T.inline?T.getBody():T.getDoc(),ce=["drop","dragover"];ye(ce,fe=>{M.bind(te,fe,P),Y.bind(ie,fe,O)}),T.on("remove",()=>{ye(ce,fe=>{M.unbind(te,fe,P),Y.unbind(ie,fe,O)})})};T.on("init",()=>{Zr.setEditorTimeout(T,z,0)})})(b),(b=>{const T=Tc(()=>{if(!b.removed&&b.getBody().contains(document.activeElement)){const O=b.selection.getRng();if(O.collapsed){const P=tp(b,O,!1);b.selection.setRng(P)}}},0);b.on("focus",()=>{T.throttle()}),b.on("blur",()=>{T.cancel()})})(e),(b=>{b.on("init",()=>{b.on("focusin",T=>{const O=T.target;if(Vo(O)){const P=bs(b.getBody(),O),z=sn(P)?P:O;b.selection.getNode()!==z&&jl(b,z).each(M=>b.selection.setRng(M))}})})})(e)),{showCaret:d,showBlockCaretContainer:b=>{b.hasAttribute("data-mce-caret")&&(bu(b),t.scrollIntoView(b))},hideFakeCaret:S,destroy:()=>{o.destroy(),a=null}};var b},AR=(e,t)=>{let n=t;for(let r=e.previousSibling;Le(r);r=r.previousSibling)n+=r.data.length;return n},gC=(e,t,n,r,o)=>{if(Le(n)&&(r<0||r>n.data.length))return[];const i=o&&Le(n)?[AR(n,r)]:[r];let s=n;for(;s!==t&&s.parentNode;)i.push(e.nodeIndex(s,o)),s=s.parentNode;return s===t?i.reverse():[]},eg=(e,t,n,r,o,i,s=!1)=>({start:gC(e,t,n,r,s),end:gC(e,t,o,i,s)}),mC=(e,t)=>{const n=t.slice(),r=n.pop();return m(r)?Ge(n,(o,i)=>o.bind(s=>R.from(s.childNodes[i])),R.some(e)).bind(o=>Le(o)&&(r<0||r>o.data.length)?R.none():R.some({node:o,offset:r})):R.none()},vC=(e,t)=>mC(e,t.start).bind(({node:n,offset:r})=>mC(e,t.end).map(({node:o,offset:i})=>{const s=document.createRange();return s.setStart(n,r),s.setEnd(o,i),s})),_a=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const r=t.parentNode;e.remove(t,Le(t.firstChild)&&Oi(t.firstChild.data)),_a(e,r,n)}},Ud=(e,t,n,r=!0)=>{const o=t.startContainer.parentNode,i=t.endContainer.parentNode;t.deleteContents(),r&&!n(t.startContainer)&&(Le(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),Le(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),_a(e,o,n),o!==i&&_a(e,i,n))},tg=(e,t)=>R.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),_C=(e,t,n)=>{const r=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:zm(r).concat(e.blockPatterns),inlinePatterns:Fm(r).concat(e.inlinePatterns)}},yC=(e,t,n,r)=>{const o=e.createRng();return o.setStart(t,0),o.setEnd(n,r),o.toString()},bC=(e,t,n)=>{((r,o,i)=>{if(Le(r)&&0>=r.length)return R.some(Mo(r,0));{const s=ls(Ed);return R.from(s.forwards(r,0,Td(r),i)).map(a=>Mo(a.container,0))}})(t,0,t).each(r=>{const o=r.container;Aw(o,n.start.length,t).each(a=>{const c=e.createRng();c.setStart(o,0),c.setEnd(a.container,a.offset),Ud(e,c,d=>d===t)});const i=X(o),s=mc(i);var a,c;/^\s[^\s]/.test(s)&&(a=i,c=s.slice(1),mu.set(a,c))})},wC=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),Wd=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},xC=(e,t,n)=>{const r=vC(e.getRoot(),n).getOrDie("Unable to resolve path range"),o=r.startContainer,i=r.endContainer,s=0===r.endOffset?i:i.splitText(r.endOffset),a=0===r.startOffset?o:o.splitText(r.startOffset),c=a.parentNode;return{prefix:t,end:s.parentNode.insertBefore(wC(e,t+"-end"),s),start:c.insertBefore(wC(e,t+"-start"),a)}},CC=(e,t,n)=>{_a(e,e.get(t.prefix+"-end"),n),_a(e,e.get(t.prefix+"-start"),n)},ng=e=>0===e.start.length,kC=(e,t,n,r)=>{const o=t.start;var i;return kp(e,r.container,r.offset,(i=o,(s,a)=>{const c=s.data.substring(0,a),d=c.lastIndexOf(i.charAt(i.length-1)),f=c.lastIndexOf(i);return-1!==f?f+i.length:-1!==d?d+1:-1}),n).bind(s=>{var a,c;const d=null!==(c=null===(a=n.textContent)||void 0===a?void 0:a.indexOf(o))&&void 0!==c?c:-1;if(-1!==d&&s.offset>=d+o.length){const f=e.createRng();return f.setStart(s.container,s.offset-o.length),f.setEnd(s.container,s.offset),R.some(f)}return Cp(s.container,s.offset-o.length,n).map(p=>{const v=e.createRng();return v.setStart(p.container,p.offset),v.setEnd(s.container,s.offset),v}).filter(p=>p.toString()===o).orThunk(()=>kC(e,t,n,Mo(s.container,0)))})},OR=(e,t,n,r)=>{const o=e.dom,i=o.getRoot(),s=n.pattern,a=n.position.container,c=n.position.offset;return Cp(a,c-n.pattern.end.length,t).bind(d=>{const f=eg(o,i,d.container,d.offset,a,c,r);if(ng(s))return R.some({matches:[{pattern:s,startRng:f,endRng:f}],position:d});{const p=Vd(e,n.remainingPatterns,d.container,d.offset,t,r),v=p.getOr({matches:[],position:d}),w=v.position;return((S,b,T,O,P,z=!1)=>{if(0===b.start.length&&!z){const M=S.createRng();return M.setStart(T,O),M.setEnd(T,O),R.some(M)}return xp(T,O,P).bind(M=>kC(S,b,P,M).bind(Y=>{var te;return z&&(Y.endContainer===M.container&&Y.endOffset===M.offset||0===M.offset&&(null===(te=Y.endContainer.textContent)||void 0===te?void 0:te.length)===Y.endOffset)?R.none():R.some(Y)}))})(o,s,w.container,w.offset,t,p.isNone()).map(S=>{const b=((T,O,P,z=!1)=>eg(T,O,P.startContainer,P.startOffset,P.endContainer,P.endOffset,z))(o,i,S,r);return{matches:v.matches.concat([{pattern:s,startRng:b,endRng:f}]),position:Mo(S.startContainer,S.startOffset)}})}})},Vd=(e,t,n,r,o,i)=>{const s=e.dom;return xp(n,r,s.getRoot()).bind(a=>{const c=yC(s,o,n,r);for(let d=0;d<t.length;d++){const f=t[d];if(!Wi(c,f.end))continue;const p=t.slice();p.splice(d,1);const v=OR(e,o,{pattern:f,remainingPatterns:p,position:a},i);if(v.isNone()&&r>0)return Vd(e,t,n,r-1,o,i);if(v.isSome())return v}return R.none()})},SC=(e,t,n)=>{e.selection.setRng(n),"inline-format"===t.type?ye(t.format,r=>{e.formatter.apply(r)}):e.execCommand(t.cmd,!1,t.value)},EC=(e,t,n,r,o,i)=>{var s;return((a,c)=>{const d=Je(a,f=>Kt(c,p=>f.pattern.start===p.pattern.start&&f.pattern.end===p.pattern.end));return a.length===c.length?d?a:c:a.length>c.length?a:c})(Vd(e,o.inlinePatterns,n,r,t,i).fold(()=>[],a=>a.matches),Vd(e,(s=o.inlinePatterns,qt(s,(a,c)=>c.end.length-a.end.length)),n,r,t,i).fold(()=>[],a=>a.matches))},TC=(e,t)=>{if(0===t.length)return;const n=e.dom,r=e.selection.getBookmark(),o=((i,s)=>{const a=el("mce_textpattern"),c=Vn(s,(d,f)=>{const p=xC(i,a+`_end${d.length}`,f.endRng);return d.concat([{...f,endMarker:p}])},[]);return Vn(c,(d,f)=>{const p=c.length-d.length-1,v=ng(f.pattern)?f.endMarker:xC(i,a+`_start${p}`,f.startRng);return d.concat([{...f,startMarker:v}])},[])})(n,t);ye(o,i=>{const s=n.getParent(i.startMarker.start,n.isBlock),a=c=>c===s;ng(i.pattern)?((c,d,f,p)=>{const v=Wd(c.dom,f);Ud(c.dom,v,p),SC(c,d,v)})(e,i.pattern,i.endMarker,a):((c,d,f,p,v)=>{const w=c.dom,y=Wd(w,p),S=Wd(w,f);Ud(w,S,v),Ud(w,y,v);const T=Wd(w,{prefix:f.prefix,start:f.end,end:p.start});SC(c,d,T)})(e,i.pattern,i.startMarker,i.endMarker,a),CC(n,i.endMarker,a),CC(n,i.startMarker,a)}),e.selection.moveToBookmark(r)},NC=(e,t,n)=>{for(let r=0;r<e.length;r++)if(n(e[r],t))return!0;return!1},rg=nn.DOM,PR=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,og=e=>xn(e,t=>!1===x(t)),AC=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return og({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:PR(e),sandbox_iframes:t("sandbox_iframes"),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},OC=e=>{const t=e.options.get;return og({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},ig=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,RC=e=>{const t=ig(e),n=Jm(e),r=e.contentCSS,o=()=>{t.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(n)},i=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){let c="";Be.each(e.contentStyles,d=>{c+=d+"\r\n"}),e.dom.addStyle(c)}const s=Promise.all(((c,d,f)=>{const{pass:p,fail:v}=rr(d,S=>tinymce.Resource.has(Gf(S))),y=[...p.map(S=>{const b=tinymce.Resource.get(Gf(S));return U(b)?Promise.resolve(ig(c).loadRawCss(S,b)):Promise.resolve()}),ig(c).loadAll(v)];return c.inline?y:y.concat([c.ui.styleSheetLoader.loadAll(f)])})(e,r,n)).then(i).catch(i),a=RS(e);return a&&((c,d)=>{const f=X(c.getBody()),p=hn(dn(f)),v=je("style");In(v,"type","text/css"),Et(v,wt(d)),Et(p,v),c.on("remove",()=>{rt(v)})})(e,a),s},sg=e=>{var t;!0!==e.removed&&(Zo(t=e)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),(t=>{t.bindPendingEventDelegates(),t.initialized=!0,t.dispatch("Init"),t.focus(!0),(r=>{const o=r.dom.getRoot();r.inline||Fc(r)&&r.selection.getStart(!0)!==o||gr(o).each(i=>{const s=i.getNode(),a=di(s)?gr(s).getOr(i):i;r.selection.setRng(a.toRange())})})(t),t.nodeChanged({initial:!0});const n=rE(t);D(n)&&n.call(t,t),(r=>{const o=iE(r);o&&Zr.setEditorTimeout(r,()=>{let i;i=!0===o?r:r.editorManager.get(o),i&&!i.destroyed&&(i.focus(),i.selection.scrollIntoView())},100)})(t)})(e))},jC=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(rg.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const r=e.getBody();var s,a;r.disabled=!0,e.readonly=ev(e),e._editableRoot=GS(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&"static"===rg.getStyle(r,"position",!0)&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=(e=>{const t=(()=>{let S=[];const b=P=>{if(!P.blob||!P.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const z=P.id||"blobid"+iA+++(()=>{const ie=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+ie()+ie()+ie()})(),M=P.name||z,Y=P.blob;var te;return{id:G(z),name:G(M),filename:G(P.filename||M+"."+(te=Y.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[te.toLowerCase()]||"dat")),blob:G(Y),base64:G(P.base64),blobUri:G(P.blobUri||URL.createObjectURL(Y)),uri:G(P.uri)}},T=P=>Z(S,P).getOrUndefined(),O=P=>T(z=>z.id()===P);return{create:(P,z,M,Y,te)=>{if(U(P))return b({id:P,name:Y,filename:te,blob:z,base64:M});if(I(P))return b(P);throw new Error("Unknown input type")},add:P=>{O(P.id())||S.push(P)},get:O,getByUri:P=>T(z=>z.blobUri()===P),getByData:(P,z)=>T(M=>M.base64()===P&&M.blob().type===z),findFirst:T,removeByUri:P=>{S=tt(S,z=>z.blobUri()!==P||(URL.revokeObjectURL(z.blobUri()),!1))},destroy:()=>{ye(S,P=>{URL.revokeObjectURL(P.blobUri())}),S=[]}}})();let n,r;const o=zb(),i=[],s=S=>b=>e.selection?S(b):[],a=(S,b,T)=>{let O=0;do{O=S.indexOf(b,O),-1!==O&&(S=S.substring(0,O)+T+S.substr(O+b.length),O+=T.length-b.length+1)}while(-1!==O);return S},c=(S,b,T)=>(S=a(S,`src="${b}"`,`src="${T}"${T===$t.transparentSrc?' data-mce-placeholder="1"':""}`),a(S,'data-mce-src="'+b+'"','data-mce-src="'+T+'"')),d=(S,b)=>{ye(e.undoManager.data,T=>{"fragmented"===T.type?T.fragments=ut(T.fragments,O=>c(O,S,b)):T.content=c(T.content,S,b)})},f=()=>(n||(n=$b(e,o)),w().then(s(S=>{const b=ut(S,T=>T.blobInfo);return n.upload(b,Fb(e)).then(s(T=>{const O=[];let P=!1;const z=ut(T,(M,Y)=>{const{blobInfo:te,image:ie}=S[Y];let ce=!1;return M.status&&wS(e)?(M.url&&!On(ie.src,M.url)&&(P=!0),t.removeByUri(ie.src),Zo(e)||((fe,Q)=>{const ne=e.convertURL(Q,"src");var de;d(fe.src,Q),qr(X(fe),{src:Km(e)?(de=Q,de+(-1===de.indexOf("?")?"?":"&")+(new Date).getTime()):Q,"data-mce-src":ne})})(ie,M.url)):M.error&&(M.error.remove&&(d(ie.src,$t.transparentSrc),O.push(ie),ce=!0),md(e,Po.translate(["Failed to upload image: {0}",M.error.message]))),{element:ie,status:M.status,uploadUri:M.url,blobInfo:te,removed:ce}});return O.length>0&&!Zo(e)?e.undoManager.transact(()=>{ye(tr(O),M=>{const Y=ur(M);var te;rt(M),Y.each((te=e,ie=>{var ce,fe;(ce=te).dom.isEmpty((fe=ie).dom)&&N(ce.schema.getTextBlockElements()[It(fe)])&&Et(ie,be('<br data-mce-bogus="1" />'))})),t.removeByUri(M.dom.src)})}):P&&e.undoManager.dispatchChange(),z}))}))),p=()=>Vm(e)?f():Promise.resolve([]),v=S=>Je(i,b=>b(S)),w=()=>(r||(r=((e,t)=>{const n={};return{findAll:(r,o=_t)=>{const i=tt((a=r)?Nn(a.getElementsByTagName("img")):[],a=>{const c=a.src;return!a.hasAttribute("data-mce-bogus")&&!a.hasAttribute("data-mce-placeholder")&&!(!c||c===$t.transparentSrc)&&(Mn(c,"blob:")?!e.isUploaded(c)&&o(a):!!Mn(c,"data:")&&o(a))}),s=ut(i,a=>{const c=a.src;if(ft(n,c))return n[c].then(d=>U(d)?d:{image:a,blobInfo:d.blobInfo});{const d=((f,p)=>{const v=()=>Promise.reject("Invalid data URI");if(Mn(p,"blob:")){const S=f.getByUri(p);return N(S)?Promise.resolve(S):(w=p,Mn(w,"blob:")?(b=w,fetch(b).then(T=>T.ok?T.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${b} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):Mn(w,"data:")?(y=w,new Promise((b,T)=>{Rf(y).bind(({type:O,data:P,base64Encoded:z})=>My(O,P,z)).fold(()=>T("Invalid data URI"),b)})):Promise.reject("Unknown URI format")).then(b=>Iy(b).then(T=>zy(T,!1,O=>R.some(Fy(f,b,O))).getOrThunk(v)))}var b,w,y;return Mn(p,"data:")?$y(f,p).fold(v,S=>Promise.resolve(S)):Promise.reject("Unknown image data format")})(t,c).then(f=>(delete n[c],{image:a,blobInfo:f})).catch(f=>(delete n[c],f));return n[c]=d,d}});var a;return Promise.all(s)}}})(o,t)),r.findAll(e.getBody(),v).then(s(S=>{const b=tt(S,T=>U(T)?(md(e,T),!1):"blob"!==T.uriType);return Zo(e)||ye(b,T=>{d(T.image.src,T.blobInfo.blobUri()),T.image.src=T.blobInfo.blobUri(),T.image.removeAttribute("data-mce-src")}),b}))),y=S=>S.replace(/src="(blob:[^"]+)"/g,(b,T)=>{const O=o.getResultUri(T);if(O)return'src="'+O+'"';let P=t.getByUri(T);return P||(P=Ge(e.editorManager.get(),(z,M)=>z||M.editorUpload&&M.editorUpload.blobCache.getByUri(T),void 0)),P?'src="data:'+P.blob().type+";base64,"+P.base64()+'"':b});return e.on("SetContent",()=>{Vm(e)?p():w()}),e.on("RawSaveContent",S=>{S.content=y(S.content)}),e.on("GetContent",S=>{S.source_view||"raw"===S.format||"tree"===S.format||(S.content=y(S.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",S=>{ye(S,b=>{const T=b.attr("src");if(!T||t.getByUri(T))return;const O=o.getResultUri(T);O&&b.attr("src",O)})})}),{blobCache:t,addFilter:S=>{i.push(S)},uploadImages:f,uploadImagesAuto:p,scanForImages:w,destroy:()=>{t.destroy(),o.destroy(),r=n=null}}})(e),e.schema=ji(OC(e)),e.dom=nn(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:TS(e),referrerPolicy:Qu(e),onSetAttrib:s=>{e.dispatch("SetAttrib",s)},force_hex_color:AE(e)}),e.parser=(s=>{const a=la(AC(s),s.schema);return a.addAttributeFilter("src,href,style,tabindex",(c,d)=>{const f=s.dom,p="data-mce-"+d;let v=c.length;for(;v--;){const w=c[v];let y=w.attr(d);if(y&&!w.attr(p)){if(0===y.indexOf("data:")||0===y.indexOf("blob:"))continue;"style"===d?(y=f.serializeStyle(f.parseStyle(y),w.name),y.length||(y=null),w.attr(p,y),w.attr(d,y)):"tabindex"===d?(w.attr(p,y),w.attr(d,null)):w.attr(p,s.convertURL(y,d,w.name))}}}),a.addNodeFilter("script",c=>{let d=c.length;for(;d--;){const f=c[d],p=f.attr("type")||"no/type";0!==p.indexOf("mce-")&&f.attr("type","mce-"+p)}}),CE(s)&&a.addNodeFilter("#cdata",c=>{var d;let f=c.length;for(;f--;){const p=c[f];p.type=8,p.name="#comment",p.value="[CDATA["+s.dom.encode(null!==(d=p.value)&&void 0!==d?d:"")+"]]"}}),a.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",c=>{let d=c.length;const f=s.schema.getNonEmptyElements();for(;d--;){const p=c[d];p.isEmpty(f)&&0===p.getAll("br").length&&p.append(new yr("br",1))}}),a})(e),e.serializer=Ab((s=>{const a=s.options.get;return{...AC(s),...OC(s),...og({remove_trailing_brs:a("remove_trailing_brs"),pad_empty_with_br:a("pad_empty_with_br"),url_converter:a("url_converter"),url_converter_scope:a("url_converter_scope"),element_format:a("element_format"),entities:a("entities"),entity_encoding:a("entity_encoding"),indent:a("indent"),indent_after:a("indent_after"),indent_before:a("indent_before")})}})(e),e),e.selection=Nb(e.dom,e.getWin(),e.serializer,e),e.annotator=Qv(e),e.formatter=Ub(e),e.undoManager=Vb(e),e._nodeChangeDispatcher=new ZO(e),e._selectionOverrides=NR(e),(s=>{const a=Pi(),c=Jn(!1),d=$u(f=>{s.dispatch("longpress",{...f,type:"longpress"}),c.set(!0)},400);s.on("touchstart",f=>{Z1(f).each(p=>{d.cancel();const v={x:p.clientX,y:p.clientY,target:f.target};d.throttle(f),c.set(!1),a.set(v)})},!0),s.on("touchmove",f=>{d.cancel(),Z1(f).each(p=>{a.on(v=>{((w,y)=>{const S=Math.abs(w.clientX-y.x),b=Math.abs(w.clientY-y.y);return S>5||b>5})(p,v)&&(a.clear(),c.set(!1),s.dispatch("longpresscancel"))})})},!0),s.on("touchend touchcancel",f=>{d.cancel(),"touchcancel"!==f.type&&a.get().filter(p=>p.target.isEqualNode(f.target)).each(()=>{c.get()?f.preventDefault():s.dispatch("tap",{...f,type:"tap"})})},!0)})(e),(a=s=e).on("click",c=>{a.dom.getParent(c.target,"details")&&c.preventDefault()}),(a=>{a.parser.addNodeFilter("details",c=>{const d=TE(a);ye(c,f=>{"expanded"===d?f.attr("open","open"):"collapsed"===d&&f.attr("open",null)})}),a.serializer.addNodeFilter("details",c=>{const d=NE(a);ye(c,f=>{"expanded"===d?f.attr("open","open"):"collapsed"===d&&f.attr("open",null)})})})(s),(s=>{const a="contenteditable",c=" "+Be.trim(wE(s))+" ",d=" "+Be.trim(rv(s))+" ",f=nw(c),p=nw(d),v=xE(s);v.length>0&&s.on("BeforeSetContent",w=>{((y,S,b)=>{let T=S.length,O=b.content;if("raw"!==b.format){for(;T--;)O=O.replace(S[T],GA(y,O,rv(y)));b.content=O}})(s,v,w)}),s.parser.addAttributeFilter("class",w=>{let y=w.length;for(;y--;){const S=w[y];f(S)?S.attr(a,"true"):p(S)&&S.attr(a,"false")}}),s.serializer.addAttributeFilter(a,w=>{let y=w.length;for(;y--;){const S=w[y];(f(S)||p(S))&&(v.length>0&&S.attr("data-mce-content")?(S.name="#text",S.type=3,S.raw=!0,S.value=S.attr("data-mce-content")):S.attr(a,null))}})})(e),Zo(e)||((s=>{s.on("mousedown",a=>{a.detail>=3&&(a.preventDefault(),(e=>{const t=((n,r,o)=>{const i=_e.fromRangeStart(n).getNode(),s=(p=r,v=o,qo(X(i),w=>bo(w.dom)||v.isBlock(It(w)),eC(p)).getOr(X(p)).dom),a=nC(i,s,!1),c=nC(i,s,!0),d=document.createRange();var p,v;return tC(a,s).fold(()=>{Zx(a)?d.setStart(a,0):d.setStartBefore(a)},f=>d.setStartBefore(f.dom)),tC(c,s).fold(()=>{Zx(c)?d.setEnd(c,c.data.length):d.setEndAfter(c)},f=>d.setEndAfter(f.dom)),d})(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(gf(t))})(s))})})(e),(s=>{(a=>{const c=[",",".",";",":","!","?"],d=[32],f=()=>{return w=yE(a),y=bE(a),{inlinePatterns:Fm(w),blockPatterns:zm(w),dynamicPatternsLookup:y};var w,y},p=()=>a.options.isSet("text_patterns_lookup");a.on("keydown",w=>{if(13===w.keyCode&&!qe.modifierPressed(w)&&a.selection.isCollapsed()){const y=f();(y.inlinePatterns.length>0||y.blockPatterns.length>0||p())&&((e,t)=>{const n=e.selection.getRng();return tg(e,n).map(r=>{var o;const i=Math.max(0,n.startOffset),s=_C(t,r,null!==(o=r.textContent)&&void 0!==o?o:""),a=EC(e,r,n.startContainer,i,s,!0),c=((d,f,p,v)=>{var w;const y=d.dom,S=pr(d);if(!y.is(f,S))return[];const b=null!==(w=f.textContent)&&void 0!==w?w:"";return((T,O)=>{const P=qt(T,(Y,te)=>te.start.length-Y.start.length),z=O.replace(Xn," ");return Z(P,M=>0===O.indexOf(M.start)||0===z.indexOf(M.start))})(p.blockPatterns,b).map(T=>Be.trim(b).length===T.start.length?[]:[{pattern:T,range:eg(y,y.getRoot(),f,0,f,0,!0)}]).getOr([])})(e,r,s);return(c.length>0||a.length>0)&&(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(Gn,{preserve_zwsp:!0}),TC(e,a),((p,v)=>{if(0===v.length)return;const w=p.selection.getBookmark();ye(v,y=>((S,b)=>{const O=b.pattern,P=vC(S.dom.getRoot(),b.range).getOrDie("Unable to resolve path range");return tg(S,P).each(z=>{"block-format"===O.type?((M,Y)=>{const te=Y.get(M);return u(te)&&Hn(te).exists(ie=>ft(ie,"block"))})(O.format,S.formatter)&&S.undoManager.transact(()=>{bC(S.dom,z,O),S.formatter.apply(O.format)}):"block-command"===O.type&&S.undoManager.transact(()=>{bC(S.dom,z,O),S.execCommand(O.cmd,!1,O.value)})}),!0})(p,y)),p.selection.moveToBookmark(w)})(e,c);const d=e.selection.getRng(),f=xp(d.startContainer,d.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),f.each(p=>{const v=p.container;"\ufeff"===v.data.charAt(p.offset-1)&&(v.deleteData(p.offset-1,1),_a(e.dom,v.parentNode,w=>w===e.dom.getRoot()))})}),!0)}).getOr(!1)})(a,y)&&w.preventDefault()}},!0);const v=()=>{if(a.selection.isCollapsed()){const w=f();(w.inlinePatterns.length>0||p())&&((y,S)=>{const b=y.selection.getRng();tg(y,b).map(T=>{const O=Math.max(0,b.startOffset-1),P=yC(y.dom,T,b.startContainer,O),z=_C(S,T,P),M=EC(y,T,b.startContainer,O,z,!1);M.length>0&&y.undoManager.transact(()=>{TC(y,M)})})})(a,w)}};a.on("keyup",w=>{NC(d,w,(y,S)=>y===S.keyCode&&!qe.modifierPressed(S))&&v()}),a.on("keypress",w=>{NC(c,w,(y,S)=>y.charCodeAt(0)===S.charCode)&&Zr.setEditorTimeout(a,v)})})(s)})(e));const o=QO(e);((e,t)=>{e.addCommand("delete",()=>{var n;Q1(n=e,t,!1).fold(()=>{n.selection.isEditable()&&(Zh(n),ef(n))},ue)}),e.addCommand("forwardDelete",()=>{var n;Q1(n=e,t,!0).fold(()=>{n.selection.isEditable()&&T0(n,"ForwardDelete")},ue)})})(e,o),(s=>{s.on("NodeChange",ge(XA,s))})(e),(s=>{var a;const c=s.dom,d=pr(s),f=null!==(a=LS(s))&&void 0!==a?a:"",p=(v,w)=>{if((b=>{if(Yb(b)){const T=b.keyCode;return!Xb(b)&&(qe.metaKeyPressed(b)||b.altKey||T>=112&&T<=123||Oe(hA,T))}return!1})(v))return;const y=s.getBody(),S=!(Yb(b=v)&&!(Xb(b)||"keyup"===b.type&&229===b.keyCode))&&((b,T,O)=>{if(jn(X(T),!1)){const P=T.firstElementChild;return!P||!b.getStyle(T.firstElementChild,"padding-left")&&!b.getStyle(T.firstElementChild,"padding-right")&&O===P.nodeName.toLowerCase()}return!1})(c,y,d);var b;(""!==c.getAttrib(y,Kb)!==S||w)&&(c.setAttrib(y,Kb,S?f:null),c.setAttrib(y,"aria-placeholder",S?f:null),((b,T)=>{b.dispatch("PlaceholderToggle",{state:T})})(s,S),s.on(S?"keydown":"keyup",p),s.off(S?"keyup":"keydown",p))};xr(f)&&s.on("init",v=>{p(v,!0),s.on("change SetContent ExecCommand",p),s.on("paste",w=>Zr.setEditorTimeout(s,()=>p(w)))})})(e),(e=>{const t=Jn(!1),n=Jn(mE(e)?"text":"html"),r=(o=>{const i=Jn(null);return{create:()=>((s,a)=>{const{dom:c,selection:d}=s,f=s.getBody();a.set(d.getRng());const p=c.add(s.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},Mx);$t.browser.isFirefox()&&c.setStyle(p,"left","rtl"===c.getStyle(f,"direction",!0)?65535:-65535),c.bind(p,"beforedeactivate focusin focusout",v=>{v.stopPropagation()}),p.focus(),d.select(p,!0)})(o,i),remove:()=>((s,a)=>{const c=s.dom;if(Yp(s)){let d;const f=a.get();for(;d=Yp(s);)c.remove(d),c.unbind(d);f&&s.selection.setRng(f)}a.set(null)})(o,i),getEl:()=>Yp(o),getHtml:()=>(s=>{const a=s.dom,c=(v,w)=>{v.appendChild(w),a.remove(w,!0)},[d,...f]=tt(s.getBody().childNodes,aR);ye(f,v=>{c(d,v)});const p=a.select("div[id=mcepastebin]",d);for(let v=p.length-1;v>=0;v--){const w=a.create("div");d.insertBefore(w,p[v]),c(w,p[v])}return d?d.innerHTML:""})(o),getLastRng:i.get}})(e);var o,i,s;o=e,($t.browser.isChromium()||$t.browser.isSafari())&&(s=pR,(i=o).on("PastePreProcess",a=>{a.content=s(i,a.content,a.internal)})),((o,i)=>{o.addCommand("mceTogglePlainTextPaste",()=>{((s,a)=>{"text"===a.get()?(a.set("html"),i_(s,!1)):(a.set("text"),i_(s,!0)),s.focus()})(o,i)}),o.addCommand("mceInsertClipboardContent",(s,a)=>{a.html&&Hd(o,a.html,a.internal,!1),a.text&&Jp(o,a.text,!1)})})(e,n),(o=>{const i=c=>d=>{c(o,d)},s=cE(o);D(s)&&o.on("PastePreProcess",i(s));const a=dE(o);D(a)&&o.on("PastePostProcess",i(a))})(e),e.on("PreInit",()=>{(o=>{o.on("cut",(i=>s=>{!s.isDefaultPrevented()&&Xx(i)&&i.selection.isEditable()&&Vx(s,Yx(i),Kx(i),()=>{if($t.browser.isChromium()||$t.browser.isFirefox()){const a=i.selection.getRng();Zr.setEditorTimeout(i,()=>{i.selection.setRng(a),i.execCommand("Delete")},0)}else i.execCommand("Delete")})})(o)),o.on("copy",(i=>s=>{!s.isDefaultPrevented()&&Xx(i)&&Vx(s,Yx(i),Kx(i),F)})(o))})(e),((o,i)=>{lE(o)&&o.on("dragend dragover draggesture dragdrop drop drag",s=>{s.preventDefault(),s.stopPropagation()}),Pc(o)||o.on("drop",s=>{const a=s.dataTransfer;a&&Kt(a.files,d=>/^image\//.test(d.type))&&s.preventDefault()}),o.on("drop",s=>{if(s.isDefaultPrevented())return;const a=Gx(o,s);if(C(a))return;const c=qx(s.dataTransfer),d=qi(c,$d());if((!Ux(c)||(y=>{const S=y["text/plain"];return!!S&&0===S.indexOf("file://")})(c))&&Wx(o,s,a))return;const f=c[$d()],p=f||c["text/html"]||c["text/plain"],v=((y,S,b,T)=>{const O=y.getParent(b,P=>rs(S,P));if(!k(y.getParent(b,"summary")))return!0;if(O&&ft(T,"text/html")){const P=(new DOMParser).parseFromString(T["text/html"],"text/html").body;return!k(P.querySelector(O.nodeName.toLowerCase()))}return!1})(o.dom,o.schema,a.startContainer,c),w=i.get();w&&!v||p&&(s.preventDefault(),Zr.setEditorTimeout(o,()=>{o.undoManager.transact(()=>{(f||w&&v)&&o.execCommand("Delete"),Jx(o,a);const y=Fx(p);c["text/html"]?Hd(o,y,d,!0):Jp(o,y,!0)})}))}),o.on("dragstart",s=>{i.set(!0)}),o.on("dragover dragend",s=>{Pc(o)&&!i.get()&&(s.preventDefault(),Jx(o,Gx(o,s))),"dragend"===s.type&&i.set(!1)}),(s=>{s.on("input",a=>{const c=d=>k(d.querySelector("summary"));if("deleteByDrag"===a.inputType){const d=tt(s.dom.select("details"),c);ye(d,f=>{Cn(f.firstChild)&&f.firstChild.remove();const p=s.dom.create("summary");p.appendChild(Ua().dom),f.prepend(p)})}})})(o)})(e,t),((e,t,n)=>{((r,o,i)=>{let s;r.on("keydown",a=>{var c;(qe.metaKeyPressed(c=a)&&86===c.keyCode||c.shiftKey&&45===c.keyCode)&&!a.isDefaultPrevented()&&(s=a.shiftKey&&86===a.keyCode)}),r.on("paste",a=>{if(a.isDefaultPrevented()||(f=a,$t.os.isAndroid()&&0===(null===(v=null===(p=f.clipboardData)||void 0===p?void 0:p.items)||void 0===v?void 0:v.length)))return;var f,p,v;const c="text"===i.get()||s;s=!1;const d=qx(a.clipboardData);!Ux(d)&&Wx(r,a,o.getLastRng()||r.selection.getRng())||(qi(d,"text/html")?(a.preventDefault(),Qp(r,d,d["text/html"],c,!0)):qi(d,"text/plain")&&qi(d,"text/uri-list")?(a.preventDefault(),Qp(r,d,d["text/plain"],c,!0)):(o.create(),Zr.setEditorTimeout(r,()=>{const f=o.getHtml();o.remove(),Qp(r,d,f,c,!1)},0)))})})(e,t,n),(r=>{const o=s=>Mn(s,"webkit-fake-url"),i=s=>Mn(s,"data:");r.parser.addNodeFilter("img",(s,a,c)=>{if(!Pc(r)&&!0===(null===(f=c.data)||void 0===f?void 0:f.paste))for(const d of s){const f=d.attr("src");U(f)&&!d.attr("data-mce-object")&&f!==$t.transparentSrc&&(o(f)||!_E(r)&&i(f))&&d.remove()}var f})})(e)})(e,r,n)})})(e);const i=(s=>{const a=s;return(c=s,Gt(c.plugins,"rtc").bind(d=>R.from(d.setup))).fold(()=>(a.rtcInstance=xb(s),R.none()),c=>(a.rtcInstance=(()=>{const d=G(null),f=G("");return{init:{bindEvents:F},undoManager:{beforeChange:F,add:d,undo:d,redo:d,clear:F,reset:F,hasUndo:Tt,hasRedo:Tt,transact:d,ignore:F,extra:F},formatter:{match:Tt,matchAll:G([]),matchNode:G(void 0),canApply:Tt,closest:f,apply:F,remove:F,toggle:F,formatChanged:G({unbind:F})},editor:{getContent:f,setContent:G({content:"",html:""}),insertContent:G(""),addVisual:F},selection:{getContent:f},autocompleter:{addDecoration:F,removeDecoration:F},raw:{getModel:G(R.none())}}})(),R.some(()=>c().then(d=>(a.rtcInstance=(f=>{const p=P=>I(P)?P:{},{init:v,undoManager:w,formatter:y,editor:S,selection:b,autocompleter:T,raw:O}=f;return{init:{bindEvents:v.bindEvents},undoManager:{beforeChange:w.beforeChange,add:w.add,undo:w.undo,redo:w.redo,clear:w.clear,reset:w.reset,hasUndo:w.hasUndo,hasRedo:w.hasRedo,transact:(P,z,M)=>w.transact(M),ignore:(P,z)=>w.ignore(z),extra:(P,z,M,Y)=>w.extra(M,Y)},formatter:{match:(P,z,M,Y)=>y.match(P,p(z),Y),matchAll:y.matchAll,matchNode:y.matchNode,canApply:P=>y.canApply(P),closest:P=>y.closest(P),apply:(P,z,M)=>y.apply(P,p(z)),remove:(P,z,M,Y)=>y.remove(P,p(z)),toggle:(P,z,M)=>y.toggle(P,p(z)),formatChanged:(P,z,M,Y,te)=>y.formatChanged(z,M,Y,te)},editor:{getContent:P=>S.getContent(P),setContent:(P,z)=>({content:S.setContent(P,z),html:""}),insertContent:(P,z)=>(S.insertContent(P),""),addVisual:S.addVisual},selection:{getContent:(P,z)=>b.getContent(z)},autocompleter:{addDecoration:T.addDecoration,removeDecoration:T.removeDecoration},raw:{getModel:()=>R.some(O.getRawModel())}}})(d),d.rtc.isRemote)))));var c})(e);(s=>{const a=s.getDoc(),c=s.getBody();s.dispatch("PreInit"),sE(s)||(a.body.spellcheck=!1,rg.setAttrib(c,"spellcheck","false")),s.quirks=(e=>{const t=Be.each,n=qe.BACKSPACE,r=qe.DELETE,o=e.dom,i=e.selection,s=e.parser,a=$t.browser,c=a.isFirefox(),d=a.isChromium()||a.isSafari(),f=$t.deviceType.isiPhone()||$t.deviceType.isiPad(),p=$t.os.isMacOS()||$t.os.isiOS(),v=(Q,ne)=>{try{e.getDoc().execCommand(Q,!1,String(ne))}catch{}},w=Q=>Q.isDefaultPrevented(),y=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},S=()=>{e.inline||o.bind(e.getDoc(),"mousedown mouseup",Q=>{let ne;if(Q.target===e.getDoc().documentElement)if(ne=i.getRng(),e.getBody().focus(),"mousedown"===Q.type){if(Yr(ne.startContainer))return;i.placeCaretAt(Q.clientX,Q.clientY)}else i.setRng(ne)})},b=()=>{Range.prototype.getClientRects||e.on("mousedown",Q=>{if(!w(Q)&&"HTML"===Q.target.nodeName){const ne=e.getBody();ne.blur(),Zr.setEditorTimeout(e,()=>{ne.focus()})}})},T=()=>{const Q=nv(e);e.on("click",ne=>{const de=ne.target;/^(IMG|HR)$/.test(de.nodeName)&&o.isEditable(de)&&(ne.preventDefault(),e.selection.select(de),e.nodeChanged()),"A"===de.nodeName&&o.hasClass(de,Q)&&0===de.childNodes.length&&o.isEditable(de.parentNode)&&(ne.preventDefault(),i.select(de))})},O=()=>{e.on("keydown",Q=>{if(!w(Q)&&Q.keyCode===n&&i.isCollapsed()&&0===i.getRng().startOffset){const ne=i.getNode().previousSibling;if(ne&&ne.nodeName&&"table"===ne.nodeName.toLowerCase())return Q.preventDefault(),!1}return!0})},P=()=>{ev(e)||e.on("BeforeExecCommand mousedown",()=>{v("StyleWithCSS",!1),v("enableInlineTableEditing",!1),Qm(e)||v("enableObjectResizing",!1)})},z=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},M=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Y=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Q=>{let ne;"HTML"===Q.target.nodeName&&(ne=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(ne),e.selection.normalize(),e.nodeChanged())}))},te=()=>{p&&e.on("keydown",Q=>{!qe.metaKeyPressed(Q)||Q.shiftKey||37!==Q.keyCode&&39!==Q.keyCode||(Q.preventDefault(),e.selection.getSel().modify("move",37===Q.keyCode?"backward":"forward","lineboundary"))})},ie=()=>{e.on("click",Q=>{let ne=Q.target;do{if("A"===ne.tagName)return void Q.preventDefault()}while(ne=ne.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},ce=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Q=>{Q.preventDefault()})})},fe=F;return Zo(e)?(d&&(S(),T(),ce(),y(),f&&(M(),Y(),ie())),c&&(b(),P(),z(),te())):(e.on("keydown",Q=>{if(w(Q)||Q.keyCode!==qe.BACKSPACE)return;let ne=i.getRng();const de=ne.startContainer,xe=ne.startOffset,Fe=o.getRoot();let Me=de;if(ne.collapsed&&0===xe){for(;Me.parentNode&&Me.parentNode.firstChild===Me&&Me.parentNode!==Fe;)Me=Me.parentNode;"BLOCKQUOTE"===Me.nodeName&&(e.formatter.toggle("blockquote",void 0,Me),ne=o.createRng(),ne.setStart(de,0),ne.setEnd(de,0),i.setRng(ne))}}),(()=>{const Q=ne=>{const de=o.create("body"),xe=ne.cloneContents();return de.appendChild(xe),i.serializer.serialize(de,{format:"html"})};e.on("keydown",ne=>{const de=ne.keyCode;if(!w(ne)&&(de===r||de===n)&&e.selection.isEditable()){const xe=e.selection.isCollapsed(),Fe=e.getBody();if(xe&&!jn(X(Fe))||!xe&&!(Me=>{const nt=Q(Me),Ze=o.createRng();return Ze.selectNode(e.getBody()),nt===Q(Ze)})(e.selection.getRng()))return;ne.preventDefault(),e.setContent(""),Fe.firstChild&&o.isBlock(Fe.firstChild)?e.selection.setCursorLocation(Fe.firstChild,0):e.selection.setCursorLocation(Fe,0),e.nodeChanged()}})})(),$t.windowsPhone||e.on("keyup focusin mouseup",Q=>{qe.modifierPressed(Q)||(ne=>{const de=ne.getBody(),xe=ne.selection.getRng();return xe.startContainer===xe.endContainer&&xe.startContainer===de&&0===xe.startOffset&&xe.endOffset===de.childNodes.length})(e)||i.normalize()},!0),d&&(S(),T(),e.on("init",()=>{v("DefaultParagraphSeparator",pr(e))}),ce(),O(),s.addNodeFilter("br",Q=>{let ne=Q.length;for(;ne--;)"Apple-interchange-newline"===Q[ne].attr("class")&&Q[ne].remove()}),f?(M(),Y(),ie()):y()),c&&(e.on("keydown",Q=>{if(!w(Q)&&Q.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(i.isCollapsed()&&0===i.getRng().startOffset){const ne=i.getNode(),de=ne.previousSibling;if("HR"===ne.nodeName)return o.remove(ne),void Q.preventDefault();de&&de.nodeName&&"hr"===de.nodeName.toLowerCase()&&(o.remove(de),Q.preventDefault())}}}),b(),(()=>{const Q=()=>{const de=o.getAttribs(i.getStart().cloneNode(!1));return()=>{const xe=i.getStart();xe!==e.getBody()&&(o.setAttrib(xe,"style",null),t(de,Fe=>{xe.setAttributeNode(Fe.cloneNode(!0))}))}},ne=()=>!i.isCollapsed()&&o.getParent(i.getStart(),o.isBlock)!==o.getParent(i.getEnd(),o.isBlock);e.on("keypress",de=>{let xe;return!(!(w(de)||8!==de.keyCode&&46!==de.keyCode)&&ne()&&(xe=Q(),e.getDoc().execCommand("delete",!1),xe(),de.preventDefault(),1))}),o.bind(e.getDoc(),"cut",de=>{if(!w(de)&&ne()){const xe=Q();Zr.setEditorTimeout(e,()=>{xe()})}})})(),P(),e.on("SetContent ExecCommand",Q=>{"setcontent"!==Q.type&&"mceInsertLink"!==Q.command||t(o.select("a:not([data-mce-block])"),ne=>{var de;let xe=ne.parentNode;const Fe=o.getRoot();if(xe?.lastChild===ne){for(;xe&&!o.isBlock(xe);){if((null===(de=xe.parentNode)||void 0===de?void 0:de.lastChild)!==xe||xe===Fe)return;xe=xe.parentNode}o.add(xe,"br",{"data-mce-bogus":1})}})}),z(),te(),O(),e.on("drop",Q=>{var ne;const de=null===(ne=Q.dataTransfer)||void 0===ne?void 0:ne.getData("text/html");U(de)&&/^<img[^>]*>$/.test(de)&&e.dispatch("dragend",new window.DragEvent("dragend",Q))}))),{refreshContentEditable:fe,isHidden:()=>{if(!c||e.removed)return!1;const Q=e.selection.getSel();return!Q||!Q.rangeCount||0===Q.rangeCount}}})(s),s.dispatch("PostRender");const d=jS(s);void 0!==d&&(c.dir=d);const f=aE(s);f&&s.on("BeforeSetContent",p=>{Be.each(f,v=>{p.content=p.content.replace(v,w=>"\x3c!--mce:protected "+escape(w)+"--\x3e")})}),s.on("SetContent",()=>{s.addVisual(s.getBody())}),s.on("compositionstart compositionend",p=>{s.composing="compositionstart"===p.type})})(e),i.fold(()=>{const s=(a=>{let c=!1;const d=setTimeout(()=>{c||a.setProgressState(!0)},500);return()=>{clearTimeout(d),c=!0,a.setProgressState(!1)}})(e);RC(e).then(()=>{sg(e),s()})},s=>{e.setProgressState(!0),RC(e).then(()=>{s().then(a=>{e.setProgressState(!1),sg(e),Cb(e)},a=>{e.notificationManager.open({type:"error",text:String(a)}),sg(e),Cb(e)})})})},DR=_t,ag=nn.DOM,PC=nn.DOM,DC=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),LC=e=>{const t=e.getElement();return e.inline?DC(null):(n=>{const r=PC.create("div");return PC.insertAfter(r,n),DC(r,r)})(t)},LR=async e=>{e.dispatch("ScriptsLoaded"),(n=>{const r=Be.trim(Ym(n)),o=n.ui.registry.getAll().icons,i={...gd.get("default").icons,...gd.get(r).icons};Wt(i,(s,a)=>{ft(o,a)||n.ui.registry.addIcon(a,s)})})(e),(n=>{const r=Gs(n);if(U(r)){const o=xs.get(r);n.theme=o(n,xs.urls[r])||{},D(n.theme.init)&&n.theme.init(n,xs.urls[r]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(e),(n=>{const r=Zu(n),o=ca.get(r);n.model=o(n,ca.urls[r])})(e),(n=>{const r=[];ye(jc(n),o=>{((i,s,a)=>{const c=da.get(a),d=da.urls[a]||i.documentBaseUrl.replace(/\/$/,"");if(a=Be.trim(a),c&&-1===Be.inArray(s,a)){if(i.plugins[a])return;try{const f=c(i,d)||{};i.plugins[a]=f,D(f.init)&&(f.init(i,d),s.push(a))}catch(f){((p,v,w)=>{const y=Po.translate(["Failed to initialize plugin: {0}",v]);e_(p,"PluginLoadError",{message:y}),vd(y,w),md(p,y)})(i,a,f)}}})(n,r,o.replace(/^\-/,""))})})(e);const t=await(n=>{const r=n.getElement();return n.orgDisplay=r.style.display,U(Gs(n))?(o=>{const i=o.theme.renderUI;return i?i():LC(o)})(n):D(Gs(n))?(o=>{const i=o.getElement(),s=Gs(o)(o,i);return s.editorContainer.nodeType&&(s.editorContainer.id=s.editorContainer.id||o.id+"_parent"),s.iframeContainer&&s.iframeContainer.nodeType&&(s.iframeContainer.id=s.iframeContainer.id||o.id+"_iframecontainer"),s.height=s.iframeHeight?s.iframeHeight:i.offsetHeight,s})(n):LC(n)})(e);var n,r;((n,r)=>{const o={show:R.from(r.show).getOr(F),hide:R.from(r.hide).getOr(F),isEnabled:R.from(r.isEnabled).getOr(_t),setEnabled:i=>{n.mode.isReadOnly()||R.from(r.setEnabled).each(s=>s(i))}};n.ui={...n.ui,...o}})(e,R.from(t.api).getOr({})),e.editorContainer=t.editorContainer,(n=e).contentCSS=n.contentCSS.concat(Ib(r=n,OS(r)),(r=>Ib(r,Jm(r)))(n)),e.inline?jC(e):((n,r)=>{((o,i)=>{const s=o.translate("Rich Text Area"),a=No(X(o.getElement()),"tabindex").bind(Ki),c=((d,f,p,v)=>{const w=je("iframe");return v.each(y=>In(w,"tabindex",y)),qr(w,p),qr(w,{id:d+"_ifr",frameBorder:"0",allowTransparency:"true",title:f}),le(w,"tox-edit-area__iframe"),w})(o.id,s,uS(o),a).dom;c.onload=()=>{c.onload=null,o.dispatch("load")},o.contentAreaContainer=i.iframeContainer,o.iframeElement=c,o.iframeHTML=(d=>{let f=hS(d)+"<html><head>";Um(d)!==d.documentBaseUrl&&(f+='<base href="'+d.documentBaseURI.getURI()+'" />'),f+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const p=fS(d),v=pS(d),w=d.translate(tE(d));return Wm(d)&&(f+='<meta http-equiv="Content-Security-Policy" content="'+Wm(d)+'" />'),f+=`</head><body id="${p}" class="mce-content-body ${v}" data-id="${d.id}" aria-label="${w}"><br></body></html>`,f})(o),ag.add(i.iframeContainer,c)})(n,r),r.editorContainer&&(r.editorContainer.style.display=n.orgDisplay,n.hidden=ag.isHidden(r.editorContainer)),n.getElement().style.display="none",ag.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(o=>{const i=o.iframeElement,s=()=>{o.contentDocument=i.contentDocument,jC(o)};if(SE(o)||$t.browser.isFirefox()){const c=o.getDoc();c.open(),c.write(o.iframeHTML),c.close(),s()}else{const c=((e,t,n,r)=>((o,i,s,a,c)=>{const d=(f=s,p=a,v=>{f(v)&&p((w=>{const y=X(ai(w).getOr(w.target)),S=()=>w.stopPropagation(),b=()=>w.preventDefault(),T=L(b,S);return{target:y,x:w.clientX,y:w.clientY,stop:S,prevent:b,kill:T,raw:w}})(v))});var f,p;return o.dom.addEventListener(i,d,!1),{unbind:ge(Kr,o,i,d,!1)}})(e,"load",n,()=>{c.unbind(),s()}))(X(i),0,DR);i.srcdoc=o.iframeHTML}})(n)})(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},ks=nn.DOM,BC=e=>"-"===e.charAt(0),MC=(e,t,n)=>R.from(t).filter(r=>xr(r)&&!gd.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${n}.js`,name:R.some(r)})),IC=dr().deviceType,zC=IC.isPhone(),MR=IC.isTablet(),Yl=e=>{if(C(e))return[];{const t=u(e)?e:e.split(/[ ,]/),n=ut(t,To);return tt(n,xr)}},lg=(e,t)=>ft(e.sections(),t),zR=(e,t)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Gt(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...t?{menubar:!1}:{}}),FR=(e,t)=>{var n;const r=null!==(n=t.external_plugins)&&void 0!==n?n:{};return e&&e.external_plugins?Be.extend({},e.external_plugins,r):r},qR=(e,t)=>{const n=e.selection,r=e.dom;return/^ | $/.test(t)?((o,i,s,a)=>{const c=X(o.getRoot());return s=wl(c,_e.fromRangeStart(i),a)?s.replace(/^ /,"&nbsp;"):s.replace(/^&nbsp;/," "),xl(c,_e.fromRangeEnd(i),a)?s.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):s.replace(/&nbsp;(<br( \/)?>)?$/," ")})(r,n.getRng(),t,e.schema):t},Kd=(e,t)=>{if(e.selection.isEditable()){const{content:n,details:r}=(o=>{if("string"!=typeof o){const i=Be.extend({paste:o.paste,data:{paste:o.paste}},o);return{content:o.content,details:i}}return{content:o,details:{}}})(t);$f(e,{...r,content:qR(e,n),format:"html",set:!1,selection:!0}).each(o=>{const i=(a=o.content,c=r,Yf(e).editor.insertContent(a,c));var a,c;Hf(e,i,o),e.addVisual()})}},UR={"font-size":"size","font-family":"face"},WR=$o("font"),FC=e=>(t,n)=>R.from(n).map(X).filter(vr).bind(r=>{return(o=e,i=t,s=r.dom,yf(X(s),a=>{return Re(c=a,o).orThunk(()=>WR(c)?Gt(UR,o).bind(d=>No(c,d)):R.none());var c},a=>Lt(X(i),a))).or(((o,i)=>R.from(nn.DOM.getStyle(i,o,!0)))(e,r.dom));var o,i,s}).getOr(""),VR=FC("font-size"),KR=L(e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),FC("font-family")),YR=e=>gr(e.getBody()).bind(t=>{const n=t.container();return R.from(Le(n)?n.parentNode:n)}),cg=(e,t)=>{return n=e,r=re(R.some,t),(o=n,R.from(o.selection.getRng()).bind(i=>{const s=o.getBody();return i.startContainer===s&&0===i.startOffset?R.none():R.from(o.selection.getStart(!0))})).orThunk(ge(YR,n)).map(X).filter(vr).bind(r);var n,r,o},$C=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const r=Be.explode(e.options.get("font_size_style_values")),o=Be.explode(e.options.get("font_size_classes"));return o.length>0?o[n-1]||t:r[n-1]||t}return t}return t},XR=e=>{const t=e.split(/\s*,\s*/);return ut(t,n=>-1===n.indexOf(" ")||Mn(n,'"')||Mn(n,"'")?n:`'${n}'`).join(",")},HC=(e,t)=>{const n=e.dom,r=e.selection.getRng(),o=t?e.selection.getStart():e.selection.getEnd(),i=t?r.startContainer:r.endContainer,s=ql(n,i);if(!s||!s.isContentEditable)return;const a=t?Qe:pt,c=pr(e);((d,f,p,v)=>{const w=d.dom,y=b=>w.isBlock(b)&&b.parentElement===p,S=y(f)?f:w.getParent(v,y,p);return R.from(S).map(X)})(e,o,s,i).each(d=>{const f=ax(e,i,d.dom,s,!1,c);a(d,X(f)),e.selection.setCursorLocation(f,0),e.dispatch("NewBlock",{newBlock:f}),Hl(e,"insertParagraph")})},JR=["toggleview"],qC=e=>Oe(JR,e.toLowerCase());class UC{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n=!1,r,o){const i=this.editor,s=t.toLowerCase(),a=o?.skip_focus;if(i.removed||("mcefocus"!==s&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(s)||a?Lh(d=i).each(f=>d.selection.setRng(f)):i.focus()),i.dispatch("BeforeExecCommand",{command:t,ui:n,value:r}).isDefaultPrevented()))return!1;var d;const c=this.commands.exec[s];return!!D(c)&&(c(s,n,r),i.dispatch("ExecCommand",{command:t,ui:n,value:r}),!0)}queryCommandState(t){if(!qC(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),r=this.commands.state[n];return!!D(r)&&r(n)}queryCommandValue(t){if(!qC(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),r=this.commands.value[n];return D(r)?r(n):""}addCommands(t,n="exec"){const r=this.commands;Wt(t,(o,i)=>{ye(i.toLowerCase().split(","),s=>{r[n][s]=o})})}addCommand(t,n,r){const o=t.toLowerCase();this.commands.exec[o]=(i,s,a)=>n.call(r??this.editor,s,a)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,r){this.commands.state[t.toLowerCase()]=()=>n.call(r??this.editor)}addQueryValueHandler(t,n,r){this.commands.value[t.toLowerCase()]=()=>n.call(r??this.editor)}}const Ss="data-mce-contenteditable",dg=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},Yd=(e,t)=>{e.dom.contentEditable=t?"true":"false"},Es=e=>e.readonly,WC=e=>{e.parser.addAttributeFilter("contenteditable",t=>{Es(e)&&ye(t,n=>{n.attr(Ss,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Ss,t=>{Es(e)&&ye(t,n=>{n.attr("contenteditable",n.attr(Ss))})}),e.serializer.addTempAttr(Ss)},QR=["copy"],ZR=Be.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class ug{static isNative(t){return!!ZR[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Tt}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const r=t.toLowerCase(),o=Bu(r,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const i=this.bindings[r];if(i)for(let s=0,a=i.length;s<a;s++){const c=i[s];if(!c.removed){if(c.once&&this.off(r,c.func),o.isImmediatePropagationStopped())return o;if(!1===c.func.call(this.scope,o))return o.preventDefault(),o}}return o}on(t,n,r,o){if(!1===n&&(n=Tt),n){const i={func:n,removed:!1};o&&Be.extend(i,o);const s=t.toLowerCase().split(" ");let a=s.length;for(;a--;){const c=s[a];let d=this.bindings[c];d||(d=[],this.toggleEvent(c,!0)),d=r?[i,...d]:[...d,i],this.bindings[c]=d}}return this}off(t,n){if(t){const r=t.toLowerCase().split(" ");let o=r.length;for(;o--;){const i=r[o];let s=this.bindings[i];if(!i)return Wt(this.bindings,(a,c)=>{this.toggleEvent(c,!1),delete this.bindings[c]}),this;if(s){if(n){const a=rr(s,c=>c.func===n);s=a.fail,this.bindings[i]=s,ye(a.pass,c=>{c.removed=!0})}else s.length=0;s.length||(this.toggleEvent(t,!1),delete this.bindings[i])}}}else Wt(this.bindings,(r,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(t,n,r){return this.on(t,n,r,{once:!0})}has(t){t=t.toLowerCase();const n=this.bindings[t];return!(!n||0===n.length)}}const Xl=e=>(e._eventDispatcher||(e._eventDispatcher=new ug({scope:e,toggleEvent:(t,n)=>{ug.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),hg={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const r=this;if(r.removed&&"remove"!==e&&"detach"!==e)return Bu(e.toLowerCase(),t??{},r);const o=Xl(r).dispatch(e,t);if(!1!==n&&r.parent){let i=r.parent();for(;i&&!o.isPropagationStopped();)i.dispatch(e,o,!1),i=i.parent?i.parent():void 0}return o},on(e,t,n){return Xl(this).on(e,t,n)},off(e,t){return Xl(this).off(e,t)},once(e,t){return Xl(this).once(e,t)},hasEventListeners(e){return Xl(this).has(e)}},Xd=nn.DOM;let Ts;const Gd=(e,t)=>{if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const n=Zm(e);return n?(e.eventRoot||(e.eventRoot=Xd.select(n)[0]),e.eventRoot):e.getBody()},VC=(e,t,n)=>{var r;(r=e).hidden||Es(r)?Es(e)&&((r,o)=>{if("click"!==o.type||qe.metaKeyPressed(o))Oe(QR,o.type)&&r.dispatch(o.type,o);else{const i=X(o.target);(s=r,a=i,Oo(a,"a",c=>Lt(c,X(s.getBody()))).bind(c=>No(c,"href"))).each(s=>{if(o.preventDefault(),/^#/.test(s)){const a=r.dom.select(`${s},[name="${ka(s,"#")}"]`);a.length&&r.selection.scrollIntoView(a[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var s,a})(e,n):e.dispatch(t,n)},KC=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=Gd(e,t);if(Zm(e)){if(Ts||(Ts={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Ts&&(Wt(Ts,(o,i)=>{e.dom.unbind(Gd(e,i))}),Ts=null)})),Ts[t])return;const r=o=>{const i=o.target,s=e.editorManager.get();let a=s.length;for(;a--;){const c=s[a].getBody();(c===i||Xd.isChildOf(i,c))&&VC(s[a],t,o)}};Ts[t]=r,Xd.bind(n,t,r)}else{const r=o=>{VC(e,t,o)};Xd.bind(n,t,r),e.delegates[t]=r}},YC={...hg,bindPendingEventDelegates(){const e=this;Be.each(e._pendingNativeEvents,t=>{KC(e,t)})},toggleNativeEvent(e,t){const n=this;"focus"!==e&&"blur"!==e&&(n.removed||(t?n.initialized?KC(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(Gd(n,e),e,n.delegates[e]),delete n.delegates[e])))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(Wt(e.delegates,(r,o)=>{e.dom.unbind(Gd(e,o),o,r)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},ej=e=>U(e)?{value:e.split(/[ ,]/),valid:!0}:q(e,U)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},XC=(e,t)=>e+(yi(t.message)?"":`. ${t.message}`),GC=e=>e.valid,fg=(e,t,n="")=>{const r=t(e);return g(r)?r?{value:e,valid:!0}:{valid:!1,message:n}:r},tj=["design","readonly"],JC=(e,t,n,r)=>{const o=n[t.get()],i=n[r];try{i.activate()}catch(s){return void console.error(`problem while activating editor mode ${r}:`,s)}var s;o.deactivate(),o.editorReadOnly!==i.editorReadOnly&&((s,a)=>{const c=X(s.getBody());var d,f,p;p=a,Se(d=c,f="mce-content-readonly")&&!p?ve(d,f):p&&le(d,f),a?(s.selection.controlSelection.hideResizeRect(),s._selectionOverrides.hideFakeCaret(),(d=>{R.from(d.selection.getNode()).each(f=>{f.removeAttribute("data-mce-selected")})})(s),s.readonly=!0,Yd(c,!1),ye(fr(c,'*[contenteditable="true"]'),d=>{In(d,Ss,"true"),Yd(d,!1)})):(s.readonly=!1,s.hasEditableRoot()&&Yd(c,!0),ye(fr(c,`*[${Ss}="true"]`),d=>{h(d,Ss),Yd(d,!0)}),dg(s,"StyleWithCSS",!1),dg(s,"enableInlineTableEditing",!1),dg(s,"enableObjectResizing",!1),j_(s)&&s.focus(),(d=>{d.selection.setRng(d.selection.getRng())})(s),s.nodeChanged())})(e,i.editorReadOnly),t.set(r),(s=e).dispatch("SwitchMode",{mode:r})},pg=Be.each,gg=Be.explode,nj={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},QC=Be.makeMap("alt,ctrl,shift,meta,access"),rj=e=>{const t={},n=$t.os.isMacOS()||$t.os.isiOS();pg(gg(e.toLowerCase(),"+"),i=>{i in QC?t[i]=!0:/^[0-9]{2,}$/.test(i)?t.keyCode=parseInt(i,10):(t.charCode=i.charCodeAt(0),t.keyCode=nj[i]||i.toUpperCase().charCodeAt(0))});const r=[t.keyCode];let o;for(o in QC)t[o]?r.push(o):t[o]=!1;return t.id=r.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class ZC{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",r=>{!n.hasModifier(r)&&!n.isFunctionKey(r)||r.isDefaultPrevented()||(pg(n.shortcuts,o=>{n.matchShortcut(r,o)&&(n.pendingPatterns=o.subpatterns.slice(0),"keydown"===r.type&&n.executeShortcutAction(o))}),n.matchShortcut(r,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===r.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,r,o){const i=this,s=i.normalizeCommandFunc(r);return pg(gg(Be.trim(t)),a=>{const c=i.createShortcut(a,n,s,o);i.shortcuts[c.id]=c}),!0}remove(t){const n=this.createShortcut(t);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(t){const n=this,r=t;return"string"==typeof r?()=>{n.editor.execCommand(r,!1,null)}:Be.isArray(r)?()=>{n.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(t,n,r,o){const i=Be.map(gg(t,">"),rj);return i[i.length-1]=Be.extend(i[i.length-1],{func:r,scope:o||this.editor}),Be.extend(i[0],{desc:this.editor.translate(n),subpatterns:i.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return"keydown"===t.type&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!!n&&n.ctrl===t.ctrlKey&&n.meta===t.metaKey&&n.alt===t.altKey&&n.shift===t.shiftKey&&!!(t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode)&&(t.preventDefault(),!0)}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const oj=()=>{const e=(()=>{const t={},n={},r={},o={},i={},s={},a={},c={},d=(f,p)=>(v,w)=>{f[v.toLowerCase()]={...w,type:p}};return{addButton:d(t,"button"),addGroupToolbarButton:d(t,"grouptoolbarbutton"),addToggleButton:d(t,"togglebutton"),addMenuButton:d(t,"menubutton"),addSplitButton:d(t,"splitbutton"),addMenuItem:d(n,"menuitem"),addNestedMenuItem:d(n,"nestedmenuitem"),addToggleMenuItem:d(n,"togglemenuitem"),addAutocompleter:d(r,"autocompleter"),addContextMenu:d(i,"contextmenu"),addContextToolbar:d(s,"contexttoolbar"),addContextForm:d(s,"contextform"),addSidebar:d(a,"sidebar"),addView:d(c,"views"),addIcon:(f,p)=>o[f.toLowerCase()]=p,getAll:()=>({buttons:t,menuItems:n,icons:o,popups:r,contextMenus:i,contextToolbars:s,sidebars:a,views:c})}})();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},Ns=nn.DOM,ek=Be.extend,ij=Be.each;class Jd{constructor(t,n,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,ek(this,YC);const o=this;this.id=t,this.hidden=!1;const i=((e,t,n,r,o)=>{var i;const s=e?{mobile:zR(null!==(i=o.mobile)&&void 0!==i?i:{},t)}:{},a=((e,t)=>{const n=((i,s)=>{const a={},c={};return Yt(i,(d,f)=>Oe(e,f),Ot(a),Ot(c)),{t:a,f:c}})(t);return o=n.f,{sections:G(n.t),options:G(o)};var o})(["mobile"],Np(s,o)),c=Be.extend(n,r,a.options(),e&&lg(a,"mobile")?((d,f,p={})=>{const v=d.sections(),w=Gt(v,f).getOr({});return Be.extend({},p,w)})(a,"mobile"):{},{external_plugins:FR(r,a.options())});return((d,f,p,v)=>{const w=Yl(p.forced_plugins),y=Yl(v.plugins),S=lg(O=f,"mobile")?O.sections().mobile:{},b=((O,P,z,M)=>O&&lg(P,"mobile")?M:z)(d,f,y,S.plugins?Yl(S.plugins):y),T=((O,P)=>[...Yl(O),...Yl(P)])(w,b);var O;return Be.extend(v,{forced_plugins:w,plugins:T})})(e,a,r,c)})(zC||MR,zC,y=n,r.defaultOptions,y);var y;this.options=((w,y)=>{const S={},b={},T=(P,z,M)=>{const Y=fg(z,M);return GC(Y)?(b[P]=Y.value,!0):(console.warn(XC(`Invalid value passed for the ${P} option`,Y)),!1)},O=P=>ft(S,P);return{register:(P,z)=>{const M=U(z.processor)?(te=>{const ie=(()=>{switch(te){case"array":return u;case"boolean":return g;case"function":return D;case"number":return m;case"object":return I;case"string":return U;case"string[]":return ej;case"object[]":return ce=>q(ce,I);case"regexp":return ce=>H(ce,RegExp);default:return _t}})();return ce=>fg(ce,ie,`The value must be a ${te}.`)})(z.processor):z.processor,Y=((te,ie,ce)=>{if(!x(ie)){const fe=fg(ie,ce);if(GC(fe))return fe.value;console.error(XC(`Invalid default value passed for the "${te}" option`,fe))}})(P,z.default,M);S[P]={...z,default:Y,processor:M},Gt(b,P).orThunk(()=>Gt(y,P)).each(te=>T(P,te,M))},isRegistered:O,get:P=>Gt(b,P).orThunk(()=>Gt(S,P).map(z=>z.default)).getOrUndefined(),set:(P,z)=>{if(O(P)){const M=S[P];return M.immutable?(console.error(`"${P}" is an immutable option and cannot be updated`),!1):T(P,z,M.processor)}return console.warn(`"${P}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:P=>{const z=O(P);return z&&delete b[P],z},isSet:P=>ft(b,P)}})(0,i),(w=>{const y=w.options.register;y("id",{processor:"string",default:w.id}),y("selector",{processor:"string"}),y("target",{processor:"object"}),y("suffix",{processor:"string"}),y("cache_suffix",{processor:"string"}),y("base_url",{processor:"string"}),y("referrer_policy",{processor:"string",default:""}),y("language_load",{processor:"boolean",default:!0}),y("inline",{processor:"boolean",default:!1}),y("iframe_attrs",{processor:"object",default:{}}),y("doctype",{processor:"string",default:"<!DOCTYPE html>"}),y("document_base_url",{processor:"string",default:w.documentBaseUrl}),y("body_id",{processor:qm(w,"tinymce"),default:"tinymce"}),y("body_class",{processor:qm(w),default:""}),y("content_security_policy",{processor:"string",default:""}),y("br_in_pre",{processor:"boolean",default:!0}),y("forced_root_block",{processor:S=>{const b=U(S)&&xr(S);return b?{value:S,valid:b}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),y("forced_root_block_attrs",{processor:"object",default:{}}),y("newline_behavior",{processor:S=>{const b=Oe(["block","linebreak","invert","default"],S);return b?{value:S,valid:b}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),y("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),y("no_newline_selector",{processor:"string",default:""}),y("keep_styles",{processor:"boolean",default:!0}),y("end_container_on_empty_block",{processor:S=>g(S)||U(S)?{valid:!0,value:S}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),y("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),y("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),y("font_size_classes",{processor:"string",default:""}),y("automatic_uploads",{processor:"boolean",default:!0}),y("images_reuse_filename",{processor:"boolean",default:!1}),y("images_replace_blob_uris",{processor:"boolean",default:!0}),y("icons",{processor:"string",default:""}),y("icons_url",{processor:"string",default:""}),y("images_upload_url",{processor:"string",default:""}),y("images_upload_base_path",{processor:"string",default:""}),y("images_upload_credentials",{processor:"boolean",default:!1}),y("images_upload_handler",{processor:"function"}),y("language",{processor:"string",default:"en"}),y("language_url",{processor:"string",default:""}),y("entity_encoding",{processor:"string",default:"named"}),y("indent",{processor:"boolean",default:!0}),y("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),y("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),y("indent_use_margin",{processor:"boolean",default:!1}),y("indentation",{processor:"string",default:"40px"}),y("content_css",{processor:S=>{const b=!1===S||U(S)||q(S,U);return b?U(S)?{value:ut(S.split(","),To),valid:b}:u(S)?{value:S,valid:b}:!1===S?{value:[],valid:b}:{value:S,valid:b}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:eh(w)?[]:["default"]}),y("content_style",{processor:"string"}),y("content_css_cors",{processor:"boolean",default:!1}),y("font_css",{processor:S=>{const b=U(S)||q(S,U);return b?{value:u(S)?S:ut(S.split(","),To),valid:b}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),y("inline_boundaries",{processor:"boolean",default:!0}),y("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),y("object_resizing",{processor:S=>{const b=g(S)||U(S);return b?!1===S||Gu.isiPhone()||Gu.isiPad()?{value:"",valid:b}:{value:!0===S?"table,img,figure.image,div,video,iframe":S,valid:b}:{valid:!1,message:"Must be boolean or a string"}},default:!cS}),y("resize_img_proportional",{processor:"boolean",default:!0}),y("event_root",{processor:"object"}),y("service_message",{processor:"string"}),y("theme",{processor:S=>!1===S||U(S)||D(S),default:"silver"}),y("theme_url",{processor:"string"}),y("formats",{processor:"object"}),y("format_empty_lines",{processor:"boolean",default:!1}),y("format_noneditable_selector",{processor:"string",default:""}),y("preview_styles",{processor:S=>{const b=!1===S||U(S);return b?{value:!1===S?"":S,valid:b}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),y("custom_ui_selector",{processor:"string",default:""}),y("hidden_input",{processor:"boolean",default:!0}),y("submit_patch",{processor:"boolean",default:!0}),y("encoding",{processor:"string"}),y("add_form_submit_trigger",{processor:"boolean",default:!0}),y("add_unload_trigger",{processor:"boolean",default:!0}),y("custom_undo_redo_levels",{processor:"number",default:0}),y("disable_nodechange",{processor:"boolean",default:!1}),y("readonly",{processor:"boolean",default:!1}),y("editable_root",{processor:"boolean",default:!0}),y("plugins",{processor:"string[]",default:[]}),y("external_plugins",{processor:"object"}),y("forced_plugins",{processor:"string[]"}),y("model",{processor:"string",default:w.hasPlugin("rtc")?"plugin":"dom"}),y("model_url",{processor:"string"}),y("block_unsupported_drop",{processor:"boolean",default:!0}),y("visual",{processor:"boolean",default:!0}),y("visual_table_class",{processor:"string",default:"mce-item-table"}),y("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),y("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),y("setup",{processor:"function"}),y("init_instance_callback",{processor:"function"}),y("url_converter",{processor:"function",default:w.convertURL}),y("url_converter_scope",{processor:"object",default:w}),y("urlconverter_callback",{processor:"function"}),y("allow_conditional_comments",{processor:"boolean",default:!1}),y("allow_html_data_urls",{processor:"boolean",default:!1}),y("allow_svg_data_urls",{processor:"boolean"}),y("allow_html_in_named_anchor",{processor:"boolean",default:!1}),y("allow_script_urls",{processor:"boolean",default:!1}),y("allow_unsafe_link_target",{processor:"boolean",default:!1}),y("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),y("fix_list_elements",{processor:"boolean",default:!1}),y("preserve_cdata",{processor:"boolean",default:!1}),y("remove_trailing_brs",{processor:"boolean",default:!0}),y("pad_empty_with_br",{processor:"boolean",default:!1}),y("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),y("element_format",{processor:"string",default:"html"}),y("entities",{processor:"string"}),y("schema",{processor:"string",default:"html5"}),y("convert_urls",{processor:"boolean",default:!0}),y("relative_urls",{processor:"boolean",default:!0}),y("remove_script_host",{processor:"boolean",default:!0}),y("custom_elements",{processor:"string"}),y("extended_valid_elements",{processor:"string"}),y("invalid_elements",{processor:"string"}),y("invalid_styles",{processor:Ju}),y("valid_children",{processor:"string"}),y("valid_classes",{processor:Ju}),y("valid_elements",{processor:"string"}),y("valid_styles",{processor:Ju}),y("verify_html",{processor:"boolean",default:!0}),y("auto_focus",{processor:S=>U(S)||!0===S}),y("browser_spellcheck",{processor:"boolean",default:!1}),y("protect",{processor:"array"}),y("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),y("deprecation_warnings",{processor:"boolean",default:!0}),y("a11y_advanced_options",{processor:"boolean",default:!1}),y("api_key",{processor:"string"}),y("paste_block_drop",{processor:"boolean",default:!1}),y("paste_data_images",{processor:"boolean",default:!0}),y("paste_preprocess",{processor:"function"}),y("paste_postprocess",{processor:"function"}),y("paste_webkit_styles",{processor:"string",default:"none"}),y("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),y("paste_merge_formats",{processor:"boolean",default:!0}),y("smart_paste",{processor:"boolean",default:!0}),y("paste_as_text",{processor:"boolean",default:!1}),y("paste_tab_spaces",{processor:"number",default:4}),y("text_patterns",{processor:S=>q(S,I)||!1===S?{value:$m(!1===S?[]:S),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),y("text_patterns_lookup",{processor:S=>{return D(S)?{value:(b=S,T=>{const O=b(T);return $m(O)}),valid:!0}:{valid:!1,message:"Must be a single function"};var b},default:S=>[]}),y("noneditable_class",{processor:"string",default:"mceNonEditable"}),y("editable_class",{processor:"string",default:"mceEditable"}),y("noneditable_regexp",{processor:S=>q(S,Hm)?{value:S,valid:!0}:Hm(S)?{value:[S],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),y("table_tab_navigation",{processor:"boolean",default:!0}),y("highlight_on_focus",{processor:"boolean",default:!1}),y("xss_sanitization",{processor:"boolean",default:!0}),y("details_initial_state",{processor:S=>{const b=Oe(["inherited","collapsed","expanded"],S);return b?{value:S,valid:b}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),y("details_serialized_state",{processor:S=>{const b=Oe(["inherited","collapsed","expanded"],S);return b?{value:S,valid:b}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),y("init_content_sync",{processor:"boolean",default:!1}),y("newdocument_content",{processor:"string",default:""}),y("force_hex_color",{processor:S=>{const b=["always","rgb_only","off"],T=Oe(b,S);return T?{value:S,valid:T}:{valid:!1,message:`Must be one of: ${b.join(", ")}.`}},default:"off"}),y("sandbox_iframes",{processor:"boolean",default:!1}),y("convert_unsafe_embeds",{processor:"boolean",default:!1}),w.on("ScriptsLoaded",()=>{y("directionality",{processor:"string",default:Po.isRtl()?"rtl":void 0}),y("placeholder",{processor:"string",default:dS.getAttrib(w.getElement(),"placeholder")})})})(o);const s=this.options.get;s("deprecation_warnings")&&((w,y)=>{((S,b)=>{const T=(e=>{const t=Rb(e,VN),n=e.forced_root_block;return!1!==n&&""!==n||t.push("forced_root_block (false only)"),qt(t)})(S),O=(e=>jb(e,YN))(b),P=O.length>0,z=T.length>0,M="mobile"===b.theme;if(P||z||M){const Y="\n- ",te=M?`\n\nThemes:${Y}mobile`:"",ie=P?`\n\nPlugins:${Y}${O.join(Y)}`:"",ce=z?`\n\nOptions:${Y}${T.join(Y)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+te+ie+ce)}})(w,y),((S,b)=>{const T=(e=>Rb(e,KN))(S),O=(e=>jb(e,Ob.map(t=>t.name)))(b),P=O.length>0,z=T.length>0;if(P||z){const M="\n- ",Y=P?`\n\nPlugins:${M}${O.map(ZN).join(M)}`:"",te=z?`\n\nOptions:${M}${T.join(M)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+Y+te)}})(w,y)})(n,i);const a=s("suffix");a&&(r.suffix=a),this.suffix=r.suffix;const c=s("base_url");c&&r._setBaseUrl(c),this.baseUri=r.baseURI;const d=Qu(o);d&&(ui.ScriptLoader._setReferrerPolicy(d),nn.DOM.styleSheetLoader._setReferrerPolicy(d));const f=tv(o);N(f)&&nn.DOM.styleSheetLoader._setContentCssCors(f),_r.languageLoad=s("language_load"),_r.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new ko(Um(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=eh(o),this.hasVisual=ZS(o),this.shortcuts=new ZC(this),this.editorCommands=new UC(this),(e=>{var t;(e=>{(t=>{const n=r=>()=>{ye("left,center,right,justify".split(","),o=>{r!==o&&t.formatter.remove("align"+o)}),"none"!==r&&(t.formatter.toggle("align"+r,void 0),t.nodeChanged())};t.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(e),(t=>{const n=r=>()=>{const o=t.selection,i=o.isCollapsed()?[t.dom.getParent(o.getNode(),t.dom.isBlock)]:o.getSelectedBlocks();return Kt(i,s=>N(t.formatter.matchNode(s,r)))};t.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(e)})(e),(t=e).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const r=t.getDoc();let o;try{r.execCommand(n)}catch{o=!0}if("paste"!==n||r.queryCommandEnabled(n)||(o=!0),o||!r.queryCommandSupported(n)){let i=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");($t.os.isMacOS()||$t.os.isiOS())&&(i=i.replace(/Ctrl\+/g,"\u2318+")),t.notificationManager.open({text:i,type:"error"})}}}),(t=>{t.editorCommands.addCommands({mceAddUndoLevel:()=>{t.undoManager.add()},mceEndUndoLevel:()=>{t.undoManager.add()},Undo:()=>{t.undoManager.undo()},Redo:()=>{t.undoManager.redo()}})})(e),(t=>{t.editorCommands.addCommands({mceSelectNodeDepth:(n,r,o)=>{let i=0;t.dom.getParent(t.selection.getNode(),s=>!Ke(s)||i++!==o||(t.selection.select(s),!1),t.getBody())},mceSelectNode:(n,r,o)=>{t.selection.select(o)},selectAll:()=>{const n=t.dom.getParent(t.selection.getStart(),bo);if(n){const r=t.dom.createRng();r.selectNodeContents(n),t.selection.setRng(r)}}})})(e),(t=>{t.editorCommands.addCommands({mceCleanup:()=>{const n=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(n)},insertImage:(n,r,o)=>{Kd(t,t.dom.createHTML("img",{src:o}))},insertHorizontalRule:()=>{t.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,r,o)=>{Kd(t,t.dom.encode(o))},insertHTML:(n,r,o)=>{Kd(t,o)},mceInsertContent:(n,r,o)=>{Kd(t,o)},mceSetContent:(n,r,o)=>{t.setContent(o)},mceReplaceContent:(n,r,o)=>{t.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceNewDocument:()=>{t.setContent(uE(t))}})})(e),(t=>{const n=(r,o,i)=>{const s=U(i)?{href:i}:i,a=t.dom.getParent(t.selection.getNode(),"a");I(s)&&U(s.href)&&(s.href=s.href.replace(/ /g,"%20"),a&&s.href||t.formatter.remove("link"),s.href&&t.formatter.apply("link",s,a))};t.editorCommands.addCommands({unlink:()=>{if(t.selection.isEditable()){if(t.selection.isCollapsed()){const r=t.dom.getParent(t.selection.getStart(),"a");return void(r&&t.dom.remove(r,!0))}t.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(e),(t=>{t.editorCommands.addCommands({Indent:()=>{X1(t,"indent")},Outdent:()=>{G1(t)}}),t.editorCommands.addCommands({Outdent:()=>V1(t)},"state")})(e),(t=>{t.editorCommands.addCommands({InsertNewBlockBefore:()=>{HC(t,!0)},InsertNewBlockAfter:()=>{HC(t,!1)}})})(e),(t=>{t.editorCommands.addCommands({insertParagraph:()=>{Id(ux,t)},mceInsertNewLine:(n,r,o)=>{_x(t,o)},InsertLineBreak:(n,r,o)=>{Id(px,t)}})})(e),(t=>{var n;(n=t).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":r=>{n.getDoc().execCommand(r);const o=n.dom.getParent(n.selection.getNode(),"ol,ul");if(o){const i=o.parentNode;if(i&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(i.nodeName)){const s=n.selection.getBookmark();n.dom.split(i,o),n.selection.moveToBookmark(s)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":r=>{const o=n.dom.getParent(n.selection.getNode(),"ul,ol");return o&&("insertunorderedlist"===r&&"UL"===o.tagName||"insertorderedlist"===r&&"OL"===o.tagName)}},"state")})(t)})(e),(t=>{(n=>{const r=(o,i)=>{n.formatter.toggle(o,i),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{r(o)},"ForeColor,HiliteColor":(o,i,s)=>{r(o,{value:s})},BackColor:(o,i,s)=>{r("hilitecolor",{value:s})},FontName:(o,i,s)=>{((a,c)=>{const d=$C(a,c);a.formatter.toggle("fontname",{value:XR(d)}),a.nodeChanged()})(n,s)},FontSize:(o,i,s)=>{var a;(a=n).formatter.toggle("fontsize",{value:$C(a,s)}),a.nodeChanged()},LineHeight:(o,i,s)=>{var a;(a=n).formatter.toggle("lineheight",{value:String(s)}),a.nodeChanged()},Lang:(o,i,s)=>{var a;r(o,{value:s.code,customValue:null!==(a=s.customCode)&&void 0!==a?a:null})},RemoveFormat:o=>{n.formatter.remove(o)},mceBlockQuote:()=>{r("blockquote")},FormatBlock:(o,i,s)=>{r(U(s)?s:"p")},mceToggleFormat:(o,i,s)=>{r(s)}})})(t),(n=>{const r=o=>n.formatter.match(o);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>r(o),mceBlockQuote:()=>r("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return cg(o=n,i=>KR(o.getBody(),i.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return cg(o=n,i=>VR(o.getBody(),i.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return cg(o=n,i=>{const s=X(o.getBody());return yf(i,c=>Re(c,"line-height"),ge(Lt,s)).getOrThunk(()=>{const c=parseFloat(he(i,"line-height")),d=parseFloat(he(i,"font-size"));return String(c/d)})}).getOr("");var o})})(t)})(e),(t=>{t.editorCommands.addCommands({mceRemoveNode:(n,r,o)=>{const i=o??t.selection.getNode();if(i!==t.getBody()){const s=t.selection.getBookmark();t.dom.remove(i,!0),t.selection.moveToBookmark(s)}},mcePrint:()=>{t.getWin().print()},mceFocus:(n,r,o)=>{var i;(i=t).removed||(!0===o?Fh(i):(a=>{const c=a.selection,d=a.getBody();let f=c.getRng();a.quirks.refreshContentEditable(),N(a.bookmark)&&!vs(a)&&Lh(a).each(v=>{a.selection.setRng(v),f=v});const p=(v=a,w=c.getNode(),v.dom.getParent(w,y=>"true"===v.dom.getContentEditable(y)));var v,w;if(p&&a.dom.isChildOf(p,d))return zh(p),R_(a,f),void Fh(a);a.inline||($t.browser.isOpera()||zh(d),a.getWin().focus()),($t.browser.isFirefox()||a.inline)&&(zh(d),R_(a,f)),Fh(a)})(i))},mceToggleVisualAid:()=>{t.hasVisual=!t.hasVisual,t.addVisual()}})})(e)})(this);const p=s("cache_suffix");p&&($t.cacheSuffix=p.replace(/^[\?\&]+/,"")),this.ui={registry:oj(),styleSheetLoader:void 0,show:F,hide:F,setEnabled:F,isEnabled:_t},this.mode=(w=>{const y=Jn("design"),S=Jn({design:{activate:F,deactivate:F,editorReadOnly:!1},readonly:{activate:F,deactivate:F,editorReadOnly:!0}});return(b=w).serializer?WC(b):b.on("PreInit",()=>{WC(b)}),(b=>{b.on("ShowCaret",T=>{Es(b)&&T.preventDefault()}),b.on("ObjectSelected",T=>{Es(b)&&T.preventDefault()})})(w),{isReadOnly:()=>Es(w),set:b=>((T,O,P,z)=>{if(z!==P.get()){if(!ft(O,z))throw new Error(`Editor mode '${z}' is invalid`);T.initialized?JC(T,P,O,z):T.on("init",()=>JC(T,P,O,z))}})(w,S.get(),y,b),get:()=>y.get(),register:(b,T)=>{S.set(((O,P,z)=>{if(Oe(tj,P))throw new Error(`Cannot override default mode ${P}`);return{...O,[P]:{...z,deactivate:()=>{try{z.deactivate()}catch(M){console.error(`problem while deactivating editor mode ${P}:`,M)}}}}})(S.get(),b,T))}};var b})(o),r.dispatch("SetupEditor",{editor:this});const v=nE(o);D(v)&&v.call(o,o)}render(){(t=>{const n=t.id;Po.setCode(Xm(t));const r=()=>{ks.unbind(window,"ready",r),t.render()};if(!is.Event.domLoaded)return void ks.bind(window,"ready",r);if(!t.getElement())return;const o=X(t.getElement()),i=_(o);var c;t.on("remove",()=>{kt(o.dom.attributes,a=>h(o,a.name)),qr(o,i)}),t.ui.styleSheetLoader=$g.forElement(o,{contentCssCors:tv(c=t),referrerPolicy:Qu(c)}),eh(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");const s=t.getElement().form||ks.getParent(n,"form");s&&(t.formElement=s,US(t)&&!hu(t.getElement())&&(ks.insertAfter(ks.create("input",{type:"hidden",name:n}),n),t.hasHiddenInput=!0),t.formEventDelegate=a=>{t.dispatch(a.type,a)},ks.bind(s,"submit reset",t.formEventDelegate),t.on("reset",()=>{t.resetContent()}),!WS(t)||s.submit.nodeType||s.submit.length||s._mceOldSubmit||(s._mceOldSubmit=s.submit,s.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),s._mceOldSubmit(s)))),t.windowManager=Bb(t),t.notificationManager=Lb(t),"xml"===t.options.get("encoding")&&t.on("GetContent",a=>{a.save&&(a.content=ks.encode(a.content))}),VS(t)&&t.on("submit",()=>{t.initialized&&t.save()}),KS(t)&&(t._beforeUnload=()=>{!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),((e,t)=>{const n=ui.ScriptLoader,r=()=>{!e.removed&&(o=>{const i=Gs(o);return!U(i)||N(xs.get(i))})(e)&&(o=>{const i=Zu(o);return N(ca.get(i))})(e)&&LR(e)};((o,i)=>{const s=Gs(o);if(U(s)&&!BC(s)&&!ft(xs.urls,s)){const a=MS(o),c=a?o.documentBaseURI.toAbsolute(a):`themes/${s}/theme${i}.js`;xs.load(s,c).catch(()=>{Ol(o,"ThemeLoadError",Rl("theme",c,s))})}})(e,t),((o,i)=>{const s=Zu(o);if("plugin"!==s&&!ft(ca.urls,s)){const a=IS(o),c=U(a)?o.documentBaseURI.toAbsolute(a):`models/${s}/model${i}.js`;ca.load(s,c).catch(()=>{Ol(o,"ModelLoadError",Rl("model",c,s))})}})(e,t),((o,i)=>{const s=Xm(i),a=NS(i);if(!Po.hasCode(s)&&"en"!==s){const c=xr(a)?a:`${i.editorManager.baseURL}/langs/${s}.js`;o.add(c).catch(()=>{Ol(i,"LanguageLoadError",Rl("language",c,s))})}})(n,e),((o,i,s)=>{const a=MC(i,"default",s),c=(d=i,R.from(xS(d)).filter(xr).map(f=>({url:f,name:R.none()}))).orThunk(()=>MC(i,Ym(i),""));var d;ye((d=>{const f=[],p=v=>{f.push(v)};for(let v=0;v<d.length;v++)d[v].each(p);return f})([a,c]),d=>{o.add(d.url).catch(()=>{var f,p,v;f=i,p=d.url,v=d.name.getOrUndefined(),Ol(f,"IconsLoadError",Rl("icons",p,v))})})})(n,e,t),((o,i)=>{const s=(a,c)=>{da.load(a,c).catch(()=>{Ol(o,"PluginLoadError",Rl("plugin",c,a))})};Wt(JS(o),(a,c)=>{s(c,a),o.options.set("plugins",jc(o).concat(c))}),ye(jc(o),a=>{!(a=Be.trim(a))||da.urls[a]||BC(a)||s(a,`plugins/${a}/plugin${i}.js`)})})(e,t),n.loadQueue().then(r,r)})(t,t.suffix)})(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return vs(this)}translate(t){return Po.translate(t)}getParam(t,n,r){const o=this.options;return o.isRegistered(t)||(N(r)?o.register(t,{processor:r,default:n}):o.register(t,{processor:_t,default:n})),o.isSet(t)||x(n)?o.get(t):n}hasPlugin(t,n){return!(!Oe(jc(this),t)||n&&void 0===da.get(t))}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,r){this.editorCommands.addCommand(t,n,r)}addQueryStateHandler(t,n,r){this.editorCommands.addQueryStateHandler(t,n,r)}addQueryValueHandler(t,n,r){this.editorCommands.addQueryValueHandler(t,n,r)}addShortcut(t,n,r,o){this.shortcuts.add(t,n,r,o)}execCommand(t,n,r,o){return this.editorCommands.execCommand(t,n,r,o)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(Ns.show(t.getContainer()),Ns.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(Ns.hide(t.getContainer()),Ns.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t={}){const n=this,r=n.getElement();if(n.removed)return"";if(r){const o={...t,load:!0},i=hu(r)?r.value:r.innerHTML,s=n.setContent(i,o);return o.no_events||n.dispatch("LoadContent",{...o,element:r}),s}return""}save(t={}){const n=this;let r=n.getElement();if(!r||!n.initialized||n.removed)return"";const o={...t,save:!0,element:r};let i=n.getContent(o);const s={...o,content:i};if(s.no_events||n.dispatch("SaveContent",s),"raw"===s.format&&n.dispatch("RawSaveContent",s),i=s.content,hu(r))r.value=i;else{!t.is_removing&&n.inline||(r.innerHTML=i);const a=Ns.getParent(n.id,"form");a&&ij(a.elements,c=>c.name!==n.id||(c.value=i,!1))}return s.element=o.element=r=null,!1!==s.set_dirty&&n.setDirty(!1),i}setContent(t,n){return Xf(this,t,n)}getContent(t){return((n,r={})=>{const o=(i=r,s=r.format?r.format:"html",{...i,format:s,get:!0,getInner:!0});var i,s;return db(n,o).fold(K,i=>{const s=(c=i,Yf(n).editor.getContent(c));var c;return ub(n,s,i)})})(this,t)}insertContent(t,n){n&&(t=ek({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){void 0===t?Xf(this,this.startContent,{format:"raw"}):Xf(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||Ns.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Ns.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const n=t.iframeElement;n&&(t.contentWindow=n.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const n=t.getWin();n&&(t.contentDocument=n.document)}return t.contentDocument}getBody(){var t,n;const r=this.getDoc();return null!==(n=null!==(t=this.bodyElement)&&void 0!==t?t:r?.body)&&void 0!==n?n:null}convertURL(t,n,r){const o=this,i=o.options.get,s=oE(o);if(D(s))return s.call(o,t,r,!0,n);if(!i("convert_urls")||"link"===r||I(r)&&"LINK"===r.nodeName||0===t.indexOf("file:")||0===t.length)return t;const a=new ko(t);return"http"!==a.protocol&&"https"!==a.protocol&&""!==a.protocol?t:i("relative_urls")?o.documentBaseURI.toRelative(t):t=o.documentBaseURI.toAbsolute(t,i("remove_script_host"))}addVisual(t){((n,r)=>{var i;i=r,Pn(this).editor.addVisual(i)})(0,t)}setEditableRoot(t){var n,r;(n=this)._editableRoot!==(r=t)&&(n._editableRoot=r,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),n.dispatch("EditableRootStateChange",{state:r}))}hasEditableRoot(){return this._editableRoot}remove(){(t=>{if(!t.removed){const{_selectionOverrides:n,editorUpload:r}=t,o=t.getBody(),i=t.getElement();o&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&N(i?.nextSibling)&&fd.remove(i.nextSibling),t.dispatch("remove"),t.editorManager.remove(t),!t.inline&&o&&fd.setStyle((s=t).id,"display",s.orgDisplay),(s=>{s.dispatch("detach")})(t),fd.remove(t.getContainer()),pd(n),pd(r),t.destroy()}var s})(this)}destroy(t){((n,r)=>{const{selection:o,dom:i}=n;n.destroyed||(r||n.removed?(r||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),pd(o),pd(i)),(s=>{const a=s.formElement;a&&(a._mceOldSubmit&&(a.submit=a._mceOldSubmit,delete a._mceOldSubmit),fd.unbind(a,"submit reset",s.formEventDelegate))})(n),(s=>{const a=s;a.contentAreaContainer=a.formElement=a.container=a.editorContainer=null,a.bodyElement=a.contentDocument=a.contentWindow=null,a.iframeElement=a.targetElm=null;const c=s.selection;c&&(a.selection=c.win=c.dom=c.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const ya=nn.DOM,Qd=Be.each;let Zd,tk=!1,Ar=[];const eu=e=>{const t=e.type;Qd(Ui.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e)}})},nk=e=>{if(e!==tk){const t=nn.DOM;e?(t.bind(window,"resize",eu),t.bind(window,"scroll",eu)):(t.unbind(window,"resize",eu),t.unbind(window,"scroll",eu)),tk=e}},rk=e=>{const t=Ar;return Ar=tt(Ar,n=>e!==n),Ui.activeEditor===e&&(Ui.activeEditor=Ar.length>0?Ar[0]:null),Ui.focusedEditor===e&&(Ui.focusedEditor=null),t.length!==Ar.length},sj="CSS1Compat"!==document.compatMode,Ui={...hg,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"8.2",releaseDate:"2023-12-11",i18n:Po,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",r=ko.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,n=o.suffix;else{const s=document.getElementsByTagName("script");for(let a=0;a<s.length;a++){const c=s[a].src||"";if(""===c)continue;const d=c.substring(c.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(c)){-1!==d.indexOf(".min")&&(n=".min"),t=c.substring(0,c.lastIndexOf("/"));break}}if(!t&&document.currentScript){const a=document.currentScript.src;-1!==a.indexOf(".min")&&(n=".min"),t=a.substring(0,a.lastIndexOf("/"))}}var i;e.baseURL=new ko(r).toAbsolute(t),e.documentBaseURL=r,e.baseURI=new ko(e.baseURL),e.suffix=n,(i=e).on("AddEditor",ge(pT,i)),i.on("RemoveEditor",ge(gT,i))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const r=e.plugin_base_urls;void 0!==r&&Wt(r,(o,i)=>{_r.PluginManager.urls[i]=o})},init(e){const t=this;let n;const r=Be.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let o=s=>{n=s};const i=()=>{let s=0;const a=[];let c;var d;ya.unbind(window,"ready",i),(d=>{const f=e.onpageload;f&&f.apply(t,[])})(),c=((d,f)=>{const p=[],v=D(f)?w=>Kt(p,y=>f(y,w)):w=>Oe(p,w);for(let w=0,y=d.length;w<y;w++){const S=d[w];v(S)||p.push(S)}return p})((d=e,$t.browser.isIE()||$t.browser.isEdge()?(vd("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):sj?(vd("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):U(d.selector)?ya.select(d.selector):N(d.target)?[d.target]:[])),Be.each(c,d=>{var f;(f=t.get(d.id))&&f.initialized&&!(f.getContainer()||f.getBody()).parentNode&&(rk(f),f.unbindAllNativeEvents(),f.destroy(!0),f.removed=!0)}),c=Be.grep(c,d=>!t.get(d.id)),0===c.length?o([]):Qd(c,d=>{e.inline&&d.tagName.toLowerCase()in r?vd("Could not initialize inline editor on invalid inline target element",d):((f,p,v)=>{const w=new Jd(f,p,t);a.push(w),w.on("init",()=>{++s===c.length&&o(a)}),w.targetElm=w.targetElm||v,w.render()})((f=>{let p=f.id;return p||(p=Gt(f,"name").filter(v=>!ya.get(v)).getOrThunk(ya.uniqueId),f.setAttribute("id",p)),p})(d),e,d)})};return ya.bind(window,"ready",i),new Promise(s=>{n?s(n):o=a=>{s(a)}})},get(e){return 0===arguments.length?Ar.slice(0):U(e)?Z(Ar,t=>t.id===e).getOr(null):m(e)&&Ar[e]?Ar[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(null===n&&Ar.push(e),nk(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),Zd||(Zd=r=>{const o=t.dispatch("BeforeUnload");if(o.returnValue)return r.preventDefault(),r.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",Zd))),e},createEditor(e,t){return this.add(new Jd(e,t,this))},remove(e){const t=this;let n;if(e){if(!U(e))return n=e,k(t.get(n.id))?null:(rk(n)&&t.dispatch("RemoveEditor",{editor:n}),0===Ar.length&&window.removeEventListener("beforeunload",Zd),n.remove(),nk(Ar.length>0),n);Qd(ya.select(e),r=>{n=t.get(r.id),n&&t.remove(n)})}else for(let r=Ar.length-1;r>=0;r--)t.remove(Ar[r])},execCommand(e,t,n){var r;const o=this,i=I(n)?null!==(r=n.id)&&void 0!==r?r:n.index:n;switch(e){case"mceAddEditor":return o.get(i)||new Jd(i,n.options,o).render(),!0;case"mceRemoveEditor":{const s=o.get(i);return s&&s.remove(),!0}case"mceToggleEditor":{const s=o.get(i);return s?(s.isHidden()?s.show():s.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return!!o.activeEditor&&o.activeEditor.execCommand(e,t,n)},triggerSave:()=>{Qd(Ar,e=>{e.save()})},addI18n:(e,t)=>{Po.add(e,t)},translate:e=>Po.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new ko(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new ko(this.baseURL)}};Ui.setup();const aj=(()=>{const e=Pi();return{FakeClipboardItem:t=>({items:t,types:An(t),getType:n=>Gt(t,n).getOrUndefined()}),write:t=>{e.set(t)},read:()=>e.get().getOrUndefined(),clear:e.clear}})(),ok=Math.min,ba=Math.max,tu=Math.round,ik=(e,t,n)=>{let r=t.x,o=t.y;const i=e.w,s=e.h,a=t.w,c=t.h,d=(n||"").split("");return"b"===d[0]&&(o+=c),"r"===d[1]&&(r+=a),"c"===d[0]&&(o+=tu(c/2)),"c"===d[1]&&(r+=tu(a/2)),"b"===d[3]&&(o-=s),"r"===d[4]&&(r-=i),"c"===d[3]&&(o-=tu(s/2)),"c"===d[4]&&(r-=tu(i/2)),wa(r,o,i,s)},wa=(e,t,n,r)=>({x:e,y:t,w:n,h:r}),lj={inflate:(e,t,n)=>wa(e.x-t,e.y-n,e.w+2*t,e.h+2*n),relativePosition:ik,findBestRelativePosition:(e,t,n,r)=>{for(let o=0;o<r.length;o++){const i=ik(e,t,r[o]);if(i.x>=n.x&&i.x+i.w<=n.w+n.x&&i.y>=n.y&&i.y+i.h<=n.h+n.y)return r[o]}return null},intersect:(e,t)=>{const n=ba(e.x,t.x),r=ba(e.y,t.y),o=ok(e.x+e.w,t.x+t.w),i=ok(e.y+e.h,t.y+t.h);return o-n<0||i-r<0?null:wa(n,r,o-n,i-r)},clamp:(e,t,n)=>{let r=e.x,o=e.y,i=e.x+e.w,s=e.y+e.h;const a=t.x+t.w,c=t.y+t.h,d=ba(0,t.x-r),f=ba(0,t.y-o),p=ba(0,i-a),v=ba(0,s-c);return r+=d,o+=f,n&&(i+=d,s+=f,r-=p,o-=v),i-=p,s-=v,wa(r,o,i-r,s-o)},create:wa,fromClientRect:e=>wa(e.left,e.top,e.width,e.height)},cj=(()=>{const e={},t={},n={};return{load:(r,o)=>{const i=`Script at URL "${o}" failed to load`,s=`Script at URL "${o}" did not call \`tinymce.Resource.add('${r}', data)\` within 1 second`;if(void 0!==e[r])return e[r];{const a=new Promise((c,d)=>{const f=((p,v,w=1e3)=>{let y=!1,S=null;const b=P=>(...z)=>{y||(y=!0,null!==S&&(clearTimeout(S),S=null),P.apply(null,z))},T=b(p),O=b(v);return{start:(...P)=>{y||null!==S||(S=setTimeout(()=>O.apply(null,P),w))},resolve:T,reject:O}})(c,d);t[r]=f.resolve,ui.ScriptLoader.loadScript(o).then(()=>f.start(s),()=>f.reject(i))});return e[r]=a,a}},add:(r,o)=>{void 0!==t[r]&&(t[r](o),delete t[r]),e[r]=Promise.resolve(o),n[r]=o},has:r=>r in n,get:r=>n[r],unload:r=>{delete e[r]}}})();let Gl;try{const e="__storage_test__";Gl=window.localStorage,Gl.setItem(e,e),Gl.removeItem(e)}catch{Gl=(()=>{let t={},n=[];const r={getItem:o=>t[o]||null,setItem:(o,i)=>{n.push(o),t[o]=String(i)},key:o=>n[o],removeItem:o=>{n=n.filter(i=>i===o),delete t[o]},clear:()=>{n=[],t={}},length:0};return Object.defineProperty(r,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),r})()}const dj={geom:{Rect:lj},util:{Delay:Zr,Tools:Be,VK:qe,URI:ko,EventDispatcher:ug,Observable:hg,I18n:Po,LocalStorage:Gl,ImageUploader:e=>{const t=zb(),n=$b(e,t);return{upload:(r,o=!0)=>n.upload(r,o?Fb(e):void 0)}}},dom:{EventUtils:is,TreeWalker:qn,TextSeeker:ls,DOMUtils:nn,ScriptLoader:ui,RangeUtils:ms,Serializer:Ab,StyleSheetLoader:Fg,ControlSelection:a_,BookmarkManager:ml,Selection:Nb,Event:is.Event},html:{Styles:Lu,Entities:Ri,Node:yr,Schema:ji,DomParser:la,Writer:J_,Serializer:Ii},Env:$t,AddOnManager:_r,Annotator:Qv,Formatter:Ub,UndoManager:Vb,EditorCommands:UC,WindowManager:Bb,NotificationManager:Lb,EditorObservable:YC,Shortcuts:ZC,Editor:Jd,FocusManager:O_,EditorManager:Ui,DOM:nn.DOM,ScriptLoader:ui.ScriptLoader,PluginManager:da,ThemeManager:xs,ModelManager:ca,IconManager:gd,Resource:cj,FakeClipboard:aj,trim:Be.trim,isArray:Be.isArray,is:Be.is,toArray:Be.toArray,makeMap:Be.makeMap,each:Be.each,map:Be.map,grep:Be.grep,inArray:Be.inArray,extend:Be.extend,walk:Be.walk,resolve:Be.resolve,explode:Be.explode,_addCacheSuffix:Be._addCacheSuffix},sk=Be.extend(Ui,dj);(e=>{window.tinymce=e,window.tinyMCE=e})(sk),(e=>{if("object"==typeof module)try{module.exports=e}catch{}})(sk)}();